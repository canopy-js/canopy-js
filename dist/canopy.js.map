{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/client/helpers/identifiers.js","webpack:///./src/client/assets/external_link_icon/icon.svg","webpack:///./src/client/style/canopy.scss?32ea","webpack:///./src/client/style/canopy.scss","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/client/helpers/getters.js","webpack:///./src/client/helpers/booleans.js","webpack:///./src/client/path/parse_path_string.js","webpack:///./src/client/path/path_string_for.js","webpack:///./src/client/path/set_path.js","webpack:///./src/client/render/render_styled_text.js","webpack:///./src/client/display/helpers.js","webpack:///./src/client/history/helpers.js","webpack:///./src/client/display/display_path.js","webpack:///./src/client/path/helpers.js","webpack:///./src/client/render/click_handlers.js","webpack:///./src/client/requests/request_cache.js","webpack:///./src/client/requests/eager_load.js","webpack:///./src/client/render/render_token_element.js","webpack:///./src/client/render/block_renderers.js","webpack:///./src/client/render/render_dom_tree.js","webpack:///./src/client/requests/request_json.js","webpack:///./src/client/render/fetch_and_render_path.js","webpack:///./src/client/display/update_view.js","webpack:///./src/client/keys/key_handlers.js","webpack:///./src/client/keys/register_key_listeners.js","webpack:///./src/client/history/register_pop_state_listener.js","webpack:///./src/client/canopy.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","slugFor","removeMarkdownTokens","string","content","options","hmr","transform","insertInto","undefined","locals","push","useSourceMap","list","toString","this","map","item","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getElement","target","parent","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","nonce","nc","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","canopyContainer","defaultTopic","pathPrefix","sectionElementOfPath","pathArray","currentNode","topicName","subtopicName","currentSection","nodeList","selectedLink","currentRootSection","parentLinkOfSection","sectionElement","linkOfSectionByTarget","parentLinksOfSection","condition","linksOfSectionElement","linksOfSectionLike","linkElement","linksOfSectionByTarget","childSectionElementOfParentLink","Array","from","parentElementOfLink","find","childElement","targetSubtopic","getters_sectionElementOfLink","metadataFromLink","sectionElementOfLink","relativeLinkNumber","sectionElementTopicName","sectionElementSubtopicName","sectionElementPathDepth","pathDepth","linkText","text","openLinkOfSection","linkOfSectionLike","paragraphElementOfSection","element","linkAfter","links","paragraphElementOfLink","paragraphElement","tagName","parentElement","linkBefore","firstChildLinkOfParentLink","lastChildLinkOfParentLink","array","linksOfParagraph","firstLinkOfSectionElement","lastLinkOfSectionElement","enclosingTopicSectionOfLink","currentSectionElement","parentLinkOf","isInRootSection","callback","parse_path_string","pathStringArg","pathString","hash","slashSeparatedUnits","split","newItem","newArray","_newArray","fixAccidentalSeparationofTopicAndSubtopic","slashSeparatedUnit","match","tuple","path_string_for","replaceState","a","b","history","pushState","set_path","newPathArray","oldPathArray","parsePathString","documentTitle","pathStringFor","historyApiFunction","render_styled_text","buffer","escaped","B","I","S","CODE","stylesByText","_","*","~","`","elements","includes","textNode","styleElementHead","styleElementTail","styleKey","determineLinkToSelect","sectionElementOfCurrentPath","displayOptions","linkSelectionData","selectALink","findLinkFromMetadata","lastPathSegment","lastPathSegmentIsATopicRoot","determineSectionElementToDisplay","linkToSelect","linkElementArg","redundantParentLinkInSameParagraphAsPrimary","displaySectionBelowLink","removeLastPathElement","lastItem","pop","priorLinkSelectionDataFromSession","sessionStorage","displayPathTo","parentLinks","parentLink","display_path","console","displayPath","tryPathPrefix","documentTitleFor","existingHeader","headerDomElement","renderStyledText","styleElements","createOrReplaceHeader","topicDisplayName","linkData","sectionElementToDisplay","addSelectedLinkClass","storeLinkSelectionInSession","originatesFromPopStateEvent","setPath","addLinkSelection","pathForSectionElement","currentElement","currentTopic","onParentLinkClick","preventDefault","newTuple","enclosingTopic","enclosingSubtopic","updateView","onGlobalLinkClick","targetTopic","altKey","metaKey","request_cache","eager_load","REQUEST_CACHE","dataPath","fetch","then","res","json","renderSharedParentLinkBase","token","appendElementsToParent","collection","render_token_element","renderContext","spanElement","renderTextToken","subtopicsAlreadyRendered","parentLinkSubtreeCallback","renderRedundantParentLink","renderRegularParentLink","renderParentLink","globalLinkSubtreeCallback","eagerLoad","createGlobalLinkElement","subtopicContainingOpenGlobalReference","openGlobalLinkExists","openGlobalLinkTargetTopic","openGlobalLinkTargetSubtopic","globalLinkIsOpen","renderGlobalLink","linkSpan","externalLinkIconSvg","renderLinkLiteral","divElement","imageElement","anchorElement","title","captionElement","captionDiv","altText","renderImage","renderHtml","superscriptElement","renderFootnoteSymbol","block_renderers","blockObject","lineSpans","tokensOfLine","lineNumber","lineSpan","tokenElement","renderTokenElement","code","preElement","codeBlockElement","lineText","lineTextNode","quote","blockQuoteElement","renderListNodes","listNodeObjects","listElement","listNodeObject","listItemElement","childList","children","topLevelNodes","table","tableElement","tokensByCellOfRow","rowIndex","tableRowElement","tokensOfCell","tableCellElement","footnote","horizonalRule","footnoteSpans","footnoteObjects","footnoteObject","footnoteSpan","renderDomTree","paragraphsBySubtopic","createNewSectionElement","promisedSubtree","assign","subtree","promises","subtreeAlreadyRenderedForPriorGlobalLinkInParagraph","pathArrayForSubtree","slice","pathDepthOfSubtree","whenTopicTreeRenders","fetchAndRenderPath","whenTopicTreeAppended","topicTree","blocksOfParagraph","elementArray","blockElements","renderer","BlockRenderers","renderElementsForBlocks","blockElement","Promise","render_dom_tree","request_json","fetch_and_render_path","requestJson","dataObject","update_view","updateOptions","_findLowestExtantSect","lowestExtantSectionElementOfPath","pathSuffixToRender","pathSegment","findLowestExtantSectionElementOfPath","promisedDomTree","domTree","childNode","newNodeAlreadyPresent","moveUpward","sectionElementOfSelectedLink","isPageRootSection","isATopicRootSection","urlSubtopic","moveDownward","cycle","_linkElement","moveLeftward","lastSiblingOf","moveRightward","firstSiblingOf","moveDownOrRedirect","newTab","depthFirstSearch","dfsDirectionInteger","enterGlobalLinks","closeGlobalLinks","previouslySelectedLinkClassName","previouslySelectedLink","lastChildLink","pathToCurrentLink","alreadyVisitedGlobalLinkIfChildren","alreadyVisitedGlobalLinkIfNoChildren","alreadyVisitedGlobalLink","childSectionIsNotAlreadyVisible","nextChildLink","postDisplayCallback","updateDfsClassesCallback","sectionHasNoChildLinks","lastChildToVisit","firstChildToVisit","nextLink","nextSiblingToVisit","_nextLink","_nextLink2","globalParentLink","_nextLink3","preserveForwardDfsClass","preserveBackwardsDfsClass","shortcutRelationships","left","up","down","right","h","k","escape","shift-escape","return","command-return","command-alt-return","tab","alt-tab","shift-tab","alt-shift-tab","shift-`","keyNames","37","39","38","40","71","72","75","74","76","186","13","9","27","192","49","50","51","52","53","register_pop_state_listener","newLinkSelectionData","linkSelectionPresentInEvent","modifiers","keyName","keyCode","shortcutName","registerKeyListeners","registerPopStateListener","state"],"mappings":"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","file":"canopy.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 62);\n","const slugFor = (string) => {\n  if (!string) {return string}\n\n  return string.replace(/ /g, '_');\n}\n\nconst htmlIdFor = (topicName, subtopicName) => {\n  return '_canopy_' + slugFor(topicName + '_' + subtopicName);\n}\n\nfunction removeMarkdownTokens(string) {\n  return string.\n    replace(/([^\\\\]|^)_/g, '$1').\n    replace(/([^\\\\]|^)\\*/g, '$1').\n    replace(/([^\\\\]|^)`/g, '$1').\n    replace(/([^\\\\]|^)~/g, '$1');\n}\n\nexport {\n  slugFor,\n  htmlIdFor,\n  removeMarkdownTokens\n};\n\n","module.exports = \"<svg xmlns:svg=\\\"http://www.w3.org/2000/svg\\\"\\n   xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n   version=\\\"1.0\\\"\\n   width=\\\"12\\\"\\n   height=\\\"12\\\"\\n   id=\\\"svg2\\\">\\n  <defs id=\\\"defs4\\\"></defs>\\n  <rect\\n     width=\\\"5.9999995\\\"\\n     height=\\\"6\\\"\\n     x=\\\"1.5\\\"\\n     y=\\\"4.5\\\"\\n     id=\\\"rect3170\\\"\\n     style=\\\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:#0066cc;stroke-width:0.99999994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\\\"></rect>\\n  <path\\n     d=\\\"M 4,2.5 L 5,3.5 L 5.25,4.25 L 2.75,6.5 L 5.5,9.25 L 7.75,6.75 L 8.5,7 L 9.5,8 L 11,6.5 L 11,1 L 5.5,1 L 4,2.5 z\\\"\\n     id=\\\"path2395\\\"\\n     style=\\\"fill:#0066ff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\\\"></path>\\n  <path\\n     d=\\\"M 6,2 L 10,2 L 10,6 L 9.5,6.75 L 8.25,4.75 L 5.25,8 L 4,6.75 L 7.25,3.75 L 5.25,2.5 L 6,2 z\\\"\\n     id=\\\"path2398\\\"\\n     style=\\\"fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\\\" ></path>\\n</svg>\\n\"","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./canopy.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./canopy.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/lib/loader.js!./canopy.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"#_canopy {\\n  padding-top: 15px;\\n  padding-bottom: 55px; }\\n  #_canopy h1 {\\n    text-align: center;\\n    margin: auto;\\n    width: 40%;\\n    margin-top: 10px; }\\n  #_canopy hr {\\n    width: 9%;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 5px solid #ccc;\\n    margin: 0px auto;\\n    padding-bottom: 30px; }\\n  #_canopy section.canopy-topic-section {\\n    padding-top: 40px; }\\n  #_canopy section {\\n    padding-top: 30px; }\\n  #_canopy p {\\n    font-size: 22px;\\n    max-width: 700px;\\n    margin: auto;\\n    line-height: 1.3;\\n    letter-spacing: -.003em;\\n    font-weight: 400; }\\n  #_canopy a.canopy-selectable-link {\\n    text-decoration: underline #F0F0F0;\\n    color: black;\\n    cursor: pointer;\\n    /*\\n    &.canopy-dfs-previously-selected-link {\\n      color: #ff0000;\\n    }\\n\\n    &.canopy-reverse-dfs-previously-selected-link {\\n      color: #0000ff;\\n    }\\n    */ }\\n    #_canopy a.canopy-selectable-link:hover {\\n      text-decoration: underline; }\\n    #_canopy a.canopy-selectable-link:focus {\\n      outline: 0; }\\n    #_canopy a.canopy-selectable-link.canopy-open-link {\\n      background-color: #f5ebff;\\n      text-decoration: none; }\\n    #_canopy a.canopy-selectable-link.canopy-selected-link.canopy-local-link, #_canopy a.canopy-selectable-link.canopy-selected-link.canopy-redundant-local-link {\\n      text-shadow: .8px 0px 0px black;\\n      text-decoration: underline black; }\\n    #_canopy a.canopy-selectable-link.canopy-global-link:hover, #_canopy a.canopy-selectable-link.canopy-url-link:hover {\\n      color: #4078c0; }\\n    #_canopy a.canopy-selectable-link.canopy-global-link.canopy-selected-link, #_canopy a.canopy-selectable-link.canopy-url-link.canopy-selected-link {\\n      text-decoration: underline #4078c0;\\n      color: #4078c0;\\n      text-shadow: .8px 0px 0px #4078c0; }\\n    #_canopy a.canopy-selectable-link.canopy-global-link.canopy-open-link, #_canopy a.canopy-selectable-link.canopy-url-link.canopy-open-link {\\n      color: #4078c0; }\\n  #_canopy span.canopy-text-span {\\n    display: block; }\\n  #_canopy hr.footnote-rule {\\n    width: 700px;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 1px solid #ccc;\\n    margin: 12px 0;\\n    padding: 0; }\\n  #_canopy sup {\\n    font-size: 60%;\\n    padding: 2px; }\\n  #_canopy .footnote-span {\\n    font-size: 80%; }\\n  #_canopy blockquote {\\n    margin: 7px 10px;\\n    background-color: #eff0f1;\\n    padding: 5px;\\n    font-size: 90%; }\\n    #_canopy blockquote a.canopy-selectable-link {\\n      text-decoration: underline #D3D3D3; }\\n  #_canopy pre {\\n    margin: 7px 10px;\\n    background-color: #eff0f1;\\n    padding: 5px;\\n    font-size: 85%; }\\n  #_canopy code {\\n    background-color: #eff0f1;\\n    font-size: 90%; }\\n  #_canopy table {\\n    margin: 7px auto;\\n    table-layout: fixed;\\n    width: 70%;\\n    border-collapse: collapse;\\n    border: 2px solid black; }\\n    #_canopy table td, #_canopy table th {\\n      border: 2px solid black;\\n      text-align: center;\\n      padding: 6px; }\\n  #_canopy img {\\n    max-width: 200px;\\n    max-height: 275px; }\\n  #_canopy div.canopy-image-div {\\n    float: right;\\n    border: 1px solid #c8ccd1;\\n    padding: 3px;\\n    background-color: #f8f9fa;\\n    font-size: 94%;\\n    text-align: center;\\n    overflow: hidden;\\n    min-width: 172px;\\n    min-height: 230px;\\n    margin: 10px; }\\n  #_canopy div.canopy-image-div > sup {\\n    display: block; }\\n  #_canopy .canopy-url-link-span > svg {\\n    height: 15px;\\n    width: 12px;\\n    display: none; }\\n  #_canopy .canopy-selected-link + svg, #_canopy .canopy-url-link-span:hover > svg {\\n    display: inline;\\n    vertical-align: middle; }\\n  #_canopy ol, #_canopy ul {\\n    margin: 7px 10px; }\\n  #_canopy div.canopy-raw-html {\\n    display: inline; }\\n\\n#_canopy > section.canopy-topic-section {\\n  padding-top: 30px; }\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","import { slugFor } from 'helpers/identifiers';\nimport { isInRootSection } from 'helpers/booleans';\n\nconst canopyContainer = document.getElementById('_canopy');\nif(!canopyContainer) {\n  throw new Error('Page must have an html element with id \"_canopy\"');\n}\n\nconst defaultTopic = document.getElementById('_canopy').dataset.defaultTopic;\nif(!defaultTopic) {\n  throw new Error('HTML element with id \"_canopy\" must have a default topic data attribute');\n}\n\nconst pathPrefix = document.getElementById('_canopy').dataset.pathPrefix;\n\nconst sectionElementOfPath = (pathArray) => {\n  let currentNode = canopyContainer;\n\n  for (let i = 0; i < pathArray.length; i++) {\n    if (!currentNode) { return null; }\n\n    let topicName = pathArray[i][0];\n    let subtopicName = pathArray[i][1];\n\n    currentNode = currentNode.querySelector(\n      `[data-topic-name=\"${topicName}\"]` +\n      `[data-subtopic-name=\"${subtopicName}\"]` +\n      `[data-path-depth=\"${i}\"]`\n    );\n  }\n\n  return currentNode;\n}\n\nconst currentSection = () => {\n  let nodeList = document.querySelectorAll('section[style=\"display: block;\"');\n  return nodeList[nodeList.length - 1];\n}\n\nconst selectedLink = () => {\n  return document.querySelector('a.canopy-selected-link');\n}\n\nconst currentRootSection = () => {\n  let nodeList = document.querySelectorAll('section[style=\"display: block;\"');\n  return nodeList[0];\n}\n\nconst parentLinkOfSection = (sectionElement) => {\n  if (sectionElement.parentNode === canopyContainer) { return null; }\n\n  return linkOfSectionByTarget(\n    sectionElement.parentNode,\n    sectionElement.dataset.topicName,\n    sectionElement.dataset.subtopicName\n  );\n}\n\nconst parentLinksOfSection = (sectionElement) => {\n  if (sectionElement.parentNode === canopyContainer) { return null; }\n\n  return linksOfSectionByTarget(\n    sectionElement.parentNode,\n    sectionElement.dataset.topicName,\n    sectionElement.dataset.subtopicName\n  );\n}\n\nconst childSectionElementOfParentLink = (linkElement) => {\n  return Array.from(\n    parentElementOfLink(linkElement, 'SECTION').\n    childNodes).\n    find((childElement) =>\n      childElement.tagName === 'SECTION' &&\n      childElement.dataset.topicName === linkElement.dataset.targetTopic &&\n      childElement.dataset.subtopicName === linkElement.dataset.targetSubtopic);\n}\n\nfunction sectionElementOfLink(linkElement) {\n  if (!linkElement) {\n    return null;\n  }\n\n  let sectionElement = parentElementOfLink(linkElement, 'SECTION');\n\n  return sectionElement;\n}\n\nfunction documentTitleFor(topicName) {\n  return topicName;\n}\n\nfunction metadataFromLink(linkElement) {\n  if (!linkElement) { return null; }\n\n  let sectionElement = sectionElementOfLink(linkElement);\n\n  let relativeLinkNumber = Array.from(\n    sectionElement.querySelectorAll(\n    ` a[data-text=\"${linkElement.dataset.text}\"]`\n  )).indexOf(linkElement);\n\n  return {\n    sectionElementTopicName: sectionElement.dataset.topicName,\n    sectionElementSubtopicName: sectionElement.dataset.subtopicName,\n    sectionElementPathDepth: sectionElement.dataset.pathDepth,\n    linkText: linkElement.dataset.text,\n    relativeLinkNumber: relativeLinkNumber\n  };\n}\n\nfunction findLinkFromMetadata(linkSelectionData) {\n  return document.querySelectorAll(\n    `section[data-topic-name=\"${linkSelectionData.sectionElementTopicName}\"]` +\n    `[data-subtopic-name=\"${linkSelectionData.sectionElementSubtopicName}\"]` +\n    `[data-path-depth=\"${linkSelectionData.sectionElementPathDepth}\"]` +\n    ` a[data-text=\"${linkSelectionData.linkText}\"]`\n  )[linkSelectionData.relativeLinkNumber];\n}\n\nfunction findLowestExtantSectionElementOfPath(pathArray) {\n  let lowestExtantSectionElementOfPath = null;\n  let pathSuffixToRender = [];\n\n  for (let i = 0; i < pathArray.length; i++) {\n    let pathSegment = pathArray.slice(0, i + 1);\n    let sectionElement = sectionElementOfPath(pathSegment);\n    if (sectionElement) {\n      lowestExtantSectionElementOfPath = sectionElementOfPath(pathSegment);\n    } else {\n      pathSuffixToRender = pathArray.slice(i);\n      break;\n    }\n  }\n\n  return { lowestExtantSectionElementOfPath, pathSuffixToRender };\n}\n\nfunction openLinkOfSection(sectionElement) {\n  if (!sectionElement) {\n    return null;\n  }\n\n  return linkOfSectionLike(\n    sectionElement,\n    (linkElement) => linkElement.classList.contains('canopy-open-link')\n  );\n}\n\nfunction paragraphElementOfSection(sectionElement) {\n  if (!sectionElement) {\n    return null;\n  }\n\n  return Array.from(\n    sectionElement.\n    childNodes\n  ).find((element) => element.tagName === 'P')\n}\n\nfunction linkAfter(linkElement) {\n  if (!linkElement) {\n    return null;\n  }\n\n  let paragraphElement = paragraphElementOfLink(linkElement);\n\n  let links = paragraphElement.querySelectorAll('.canopy-selectable-link');\n  if (linkElement !== links[links.length - 1]) {\n    return links[\n      Array.prototype.slice.call(links).indexOf(linkElement) + 1\n    ];\n  } else {\n    return null;\n  }\n}\n\nfunction parentElementOfLink(linkElement, tagName) {\n  let parentElement = linkElement.parentNode;\n  while (parentElement.tagName !== tagName) {\n    parentElement = parentElement.parentNode;\n  }\n  return parentElement;\n}\n\nfunction paragraphElementOfLink(linkElement) {\n  if (!linkElement) {\n    return null;\n  }\n\n  return parentElementOfLink(linkElement, 'P');\n}\n\nfunction linkBefore(linkElement) {\n  if (!linkElement) {\n    return null;\n  }\n\n  let paragraphElement = paragraphElementOfLink(linkElement);\n\n  let links = paragraphElement.querySelectorAll('a.canopy-selectable-link');\n  if (linkElement !== links[0]){\n    return links[\n      Array.prototype.slice.call(links).indexOf(linkElement) - 1\n    ];\n  } else {\n    return null;\n  }\n}\n\nfunction firstChildLinkOfParentLink(linkElement) {\n  if (!linkElement) {\n    return null;\n  }\n\n  let sectionElement = childSectionElementOfParentLink(linkElement);\n  if (!sectionElement) { return null; }\n\n  let array = linksOfSectionElement(sectionElement);\n  return array[0];\n}\n\nfunction lastChildLinkOfParentLink(linkElement) {\n  if (!linkElement) {\n    return null;\n  }\n\n  let sectionElement = childSectionElementOfParentLink(linkElement);\n  if (!sectionElement) { return null; }\n\n  let array = linksOfSectionElement(sectionElement);\n  return array[array.length - 1];\n}\n\nfunction linksOfSectionElement(sectionElement) {\n  if (!sectionElement) {\n    return null;\n  }\n\n  return linksOfParagraph(paragraphElementOfSection(sectionElement));\n}\n\nfunction linksOfParagraph(paragraphElement) {\n  if (!paragraphElement) {\n    return null;\n  }\n\n  return Array.from(paragraphElement.querySelectorAll('a.canopy-selectable-link'));\n}\n\nfunction firstLinkOfSectionElement(sectionElement) {\n  if (!sectionElement) {\n    return null;\n  }\n  return linksOfSectionElement(sectionElement)[0] || null;\n}\n\nfunction lastLinkOfSectionElement(sectionElement) {\n  if (!sectionElement) {\n    return null;\n  }\n\n  let array = linksOfSectionElement(sectionElement);\n  return array[array.length - 1] || null;\n}\n\nfunction enclosingTopicSectionOfLink(linkElement) {\n  let sectionElement = sectionElementOfLink(linkElement);\n\n  if (sectionElement.dataset.pathDepth === \"0\") {\n    return currentRootSection();\n  }\n\n  let currentSectionElement = sectionElement;\n\n  while (currentSectionElement.parentNode.dataset.pathDepth === sectionElement.dataset.pathDepth) {\n    currentSectionElement = currentSectionElement.parentNode;\n  }\n\n  return currentSectionElement;\n}\n\nfunction firstSiblingOf(linkElement) {\n  if (!linkElement){\n    return null;\n  }\n\n  let links = linksOfSectionElement(sectionElementOfLink(linkElement));\n  return links[0] || linkElement;\n}\n\nfunction lastSiblingOf(linkElement) {\n  if (!linkElement){\n    return null;\n  }\n\n  let links = linksOfSectionElement(sectionElementOfLink(linkElement));\n  return links[links.length - 1] || null;\n}\n\nfunction parentLinkOf(linkElement) {\n  if (!linkElement) {\n    return null;\n  }\n\n  if (isInRootSection(linkElement)) {\n    return null;\n  }\n\n  return parentLinkOfSection(sectionElementOfLink(linkElement));\n}\n\nfunction siblingOfLinkLike(linkElementArg, condition) {\n  return Array.from(linkElementArg.parentNode.childNodes).find((linkElement) => {\n      return condition(linkElement) &&\n        linkElement !== linkElementArg;\n    });\n}\n\nfunction linkOfSectionLike(sectionElement, condition) {\n  return linksOfSectionElement(sectionElement).find(condition);\n}\n\nfunction linksOfSectionLike(sectionElement, condition) {\n  return linksOfSectionElement(sectionElement).filter(condition);\n}\n\nfunction linkOfSectionByTarget(sectionElement, topicName, subtopicName) {\n  return linkOfSectionLike(sectionElement, (linkElement) =>\n    linkElement.dataset.targetTopic === topicName &&\n    linkElement.dataset.targetSubtopic === subtopicName\n  )\n}\n\nfunction linksOfSectionByTarget(sectionElement, topicName, subtopicName) {\n  return linksOfSectionLike(sectionElement, (linkElement) =>\n    linkElement.dataset.targetTopic === topicName &&\n    linkElement.dataset.targetSubtopic === subtopicName\n  )\n}\n\nfunction forEach(list, callback) {\n  for (let i = 0; i < list.length; i++) {\n    callback(list[i]);\n  }\n}\n\nexport {\n  canopyContainer,\n  defaultTopic,\n  pathPrefix,\n  sectionElementOfPath,\n  currentSection,\n  currentRootSection,\n  selectedLink,\n  parentLinkOfSection,\n  parentLinksOfSection,\n  childSectionElementOfParentLink,\n  sectionElementOfLink,\n  metadataFromLink,\n  documentTitleFor,\n  findLinkFromMetadata,\n  findLowestExtantSectionElementOfPath,\n  openLinkOfSection,\n  paragraphElementOfSection,\n  linksOfSectionElement,\n  linkAfter,\n  linkBefore,\n  firstChildLinkOfParentLink,\n  lastChildLinkOfParentLink,\n  firstLinkOfSectionElement,\n  lastLinkOfSectionElement,\n  enclosingTopicSectionOfLink,\n  firstSiblingOf,\n  lastSiblingOf,\n  parentLinkOf,\n  siblingOfLinkLike,\n  linkOfSectionLike,\n  linksOfSectionLike,\n  linkOfSectionByTarget,\n  linksOfSectionByTarget,\n  parentElementOfLink,\n  paragraphElementOfLink,\n  forEach\n};\n","import { currentRootSection, canopyContainer } from 'helpers/getters';\nimport { sectionElementOfLink, linksOfSectionElement, sectionElementOfPath } from 'helpers/getters';\n\nfunction isInRootSection(linkElement) {\n  return sectionElementOfLink(linkElement) === currentRootSection();\n}\n\nfunction isATopicRootSection(sectionElement) {\n  return sectionElement.dataset.topicName === sectionElement.dataset.subtopicName;\n}\n\nfunction isPageRootSection(sectionElement) {\n  return sectionElement.parentNode === canopyContainer;\n}\n\nfunction sectionHasNoChildLinks(sectionElement) {\n  if (!sectionElement) {\n    return null;\n  }\n  return linksOfSectionElement(sectionElement).length === 0;\n}\n\nexport {\n  isInRootSection,\n  isATopicRootSection,\n  isPageRootSection,\n  sectionHasNoChildLinks\n};\n","import { pathPrefix } from 'helpers/getters';\n\nconst parsePathString = (pathStringArg) => {\n  let pathString = pathStringArg || window.location.pathname + window.location.hash;\n  if (pathString.indexOf(pathPrefix) === 0) {\n    pathString = pathString.slice(pathPrefix.length);\n  }\n\n  let slashSeparatedUnits = pathString.\n    replace(/_/g, ' ').\n    split('/').\n    filter((string) => string !== '');\n\n  slashSeparatedUnits = fixAccidentalSeparationofTopicAndSubtopic(pathString, slashSeparatedUnits);\n\n  return slashSeparatedUnits.map((slashSeparatedUnit) => {\n    let match = slashSeparatedUnit.match(/([^#]*)(?:#([^#]*))?/);\n    return [\n      match[1] || match[2] || null,\n      match[2] || match[1] || null,\n    ];\n  }).filter((tuple) => tuple[0] !== null);\n}\n\n\nfunction fixAccidentalSeparationofTopicAndSubtopic(pathString, slashSeparatedUnits) {\n  // eg /Topic/#Subtopic/A#B  -> /Topic#Subtopic/A#B\n  if (pathString.match(/\\/#\\w+/)) {\n    for (let i = 1; i < slashSeparatedUnits.length; i++) {\n      if (slashSeparatedUnits[i].match(/^#/)) {\n        if (!slashSeparatedUnits[i - 1].match(/#/)) { // eg /Topic/#Subtopic -> /Topic#Subtopic\n          let newItem = slashSeparatedUnits[i - 1] + slashSeparatedUnits[i];\n          let newArray = slashSeparatedUnits.slice(0, i - 1).\n            concat([newItem]).\n            concat(slashSeparatedUnits.slice(i + 1));\n          return newArray;\n        } else { // eg /Topic#Subtopic/#Subtopic2 -> /Topic#Subtopic/Subtopic2\n          let newItem = slashSeparatedUnits[i].slice(1);\n          let newArray = slashSeparatedUnits.slice(0, i).\n            concat([newItem]).\n            concat(slashSeparatedUnits.slice(i + 1));\n          return newArray;\n        }\n      }\n    }\n  }\n\n  return slashSeparatedUnits;\n}\n\n\nexport default parsePathString;\n\n","import { slugFor } from 'helpers/identifiers';\nimport { pathPrefix } from 'helpers/getters';\n\nfunction pathStringFor(pathArray) {\n  return pathPrefix + '/' + pathArray.map((tuple) => {\n    return slugFor(tuple[0]) +\n      (tuple[1] && tuple[1] !== tuple[0] ? ('#' + slugFor(tuple[1])) : '')\n  }).join('/');\n}\n\nexport default pathStringFor;\n","import {\n  selectedLink,\n  documentTitleFor,\n  uniqueSubtopic,\n  metadataFromLink\n} from 'helpers/getters';\nimport parsePathString from 'path/parse_path_string';\nimport pathStringFor from 'path/path_string_for';\n\nconst setPath = (newPathArray) => {\n  let oldPathArray = parsePathString();\n  let documentTitle = newPathArray[0][0];\n\n  let historyApiFunction = pathStringFor(newPathArray) === pathStringFor(oldPathArray) ?\n    replaceState : pushState;\n\n  historyApiFunction(\n    metadataFromLink(selectedLink()),\n    documentTitle,\n    pathStringFor(newPathArray)\n  );\n}\n\nfunction replaceState(a, b, c) {\n  history.replaceState(a, b, c)\n};\n\nfunction pushState(a, b, c) {\n  history.pushState(a, b, c);\n};\n\nexport default setPath;\n\n","function renderStyledText(text) {\n  let buffer = '';\n  let escaped = false;\n  let styles = {\n    B: false,\n    I: false,\n    S: false,\n    CODE: false\n  };\n\n  let stylesByText = {\n    '_': 'I',\n    '*': 'B',\n    '~': 'S',\n    '`': 'CODE'\n  }\n\n  let elements = [];\n\n  for (let i = 0; i < text.length; i++) {\n    if (!escaped && ['_', '*', '~', '`'].includes(text[i])) {\n      let textNode = document.createTextNode(buffer);\n      buffer = '';\n      let styleElementHead;\n      let styleElementTail;\n\n      Object.keys(styles).forEach(function(styleKey) {\n        if (styles[styleKey]) {\n          let element = document.createElement(styleKey);\n          styleElementTail && styleElementTail.appendChild(element);\n          styleElementHead = styleElementHead || element;\n          styleElementTail = element;\n        }\n      });\n\n      if (styleElementTail) {\n        styleElementTail.appendChild(textNode);\n        elements.push(styleElementHead);\n      } else {\n        elements.push(textNode);\n      }\n      styles[stylesByText[text[i]]] = !styles[stylesByText[text[i]].toUpperCase()];\n    } else if (!escaped && text[i] === '\\\\') {\n      escaped = true;\n    } else {\n      buffer += text[i];\n      escaped = false;\n    }\n  }\n\n  if (buffer) {\n    let textNode = document.createTextNode(buffer);\n    elements.push(textNode);\n  }\n\n  return elements;\n}\n\nexport default renderStyledText;\n","import {\n  canopyContainer,\n  siblingOfLinkLike,\n  firstLinkOfSectionElement,\n  childSectionElementOfParentLink,\n  parentLinkOfSection,\n  lastLinkOfSectionElement,\n  selectedLink,\n  linksOfSectionLike,\n  forEach,\n  findLinkFromMetadata\n} from 'helpers/getters';\n\nimport renderStyledText from 'render/render_styled_text';\nimport displayPath from 'display/display_path';\n\nfunction newNodeAlreadyPresent(anchorElement, domTree) {\n  return Array.from(anchorElement.childNodes)\n    .filter((childNode) => {\n      return childNode.dataset &&\n        childNode.dataset.topicName === domTree.dataset.topicName &&\n        childNode.dataset.subtopicName === domTree.dataset.subtopicName;\n    }).length > 0;\n}\n\nfunction determineLinkToSelect(pathArray, sectionElementOfCurrentPath, displayOptions) {\n  let {\n    linkSelectionData,\n    selectALink,\n  } = displayOptions;\n\n  if (linkSelectionData) {\n    return findLinkFromMetadata(linkSelectionData);\n  }\n\n  if (selectALink) {\n    if (lastPathSegmentIsATopicRoot(pathArray)) {\n      return firstLinkOfSectionElement(sectionElementOfCurrentPath) ||\n        parentLinkOfSection(sectionElementOfCurrentPath);\n    } else {\n      return parentLinkOfSection(sectionElementOfCurrentPath);\n    }\n  } else {\n    return null;\n  }\n}\n\nfunction lastPathSegmentIsATopicRoot(pathArray) {\n  let lastPathSegment = pathArray[pathArray.length - 1];\n  return lastPathSegment[0] === lastPathSegment[1];\n}\n\nfunction createOrReplaceHeader(topicName) {\n  let existingHeader = document.querySelector('#_canopy h1')\n  if (existingHeader) { existingHeader.remove(); }\n  let headerDomElement = document.createElement('h1');\n  let styleElements = renderStyledText(topicName);\n  styleElements.forEach((element) => {headerDomElement.appendChild(element)});\n  canopyContainer.prepend(headerDomElement);\n};\n\nfunction determineSectionElementToDisplay(linkToSelect, sectionElementOfCurrentPath, displayOptions) {\n  if (linkToSelect && displaySectionBelowLink(linkToSelect)) {\n    return childSectionElementOfParentLink(linkToSelect);\n  } else {\n    return sectionElementOfCurrentPath;\n  }\n}\n\nfunction displaySectionBelowLink(linkToSelect) {\n  return linkToSelect &&\n    (\n      linkToSelect.dataset.type === 'local' ||\n      redundantParentLinkInSameParagraphAsPrimary(linkToSelect)\n    );\n}\n\nfunction redundantParentLinkInSameParagraphAsPrimary(linkToSelect) {\n  return linkToSelect &&\n    linkToSelect.dataset.type === 'redundant-local' &&\n    siblingOfLinkLike(linkToSelect, (linkElement) => {\n      return linkElement.dataset &&\n        linkElement.dataset.targetTopic === linkToSelect.dataset.targetTopic &&\n        linkElement.dataset.targetSubtopic === linkToSelect.dataset.targetSubtopic;\n    })\n}\n\nfunction addSelectedLinkClass(linkToSelect) {\n  if (linkToSelect) {\n    linkToSelect.classList.add('canopy-selected-link');\n  }\n}\n\nfunction moveSelectedSectionClass(sectionElement) {\n  forEach(document.getElementsByTagName(\"section\"), function(sectionElement) {\n    sectionElement.classList.remove('canopy-selected-section');\n  });\n  sectionElement.classList.add('canopy-selected-section');\n}\n\nfunction hideAllSectionElements() {\n  forEach(document.getElementsByTagName(\"section\"), function(sectionElement) {\n    sectionElement.style.display = 'none';\n  });\n}\n\nfunction deselectAllLinks() {\n  forEach(document.getElementsByTagName(\"a\"), function(linkElement) {\n    linkElement.classList.remove('canopy-selected-link');\n    linkElement.classList.remove('canopy-open-link');\n  });\n}\n\nfunction hideSectionElement(sectionElement) {\n  sectionElement.style.display = 'none';\n}\n\nfunction showSectionElement(sectionElement) {\n  sectionElement.style.display = 'block';\n}\n\nfunction showSectionElementOfLink(linkElement) {\n  showSectionElement(sectionElementOfLink(linkElement));\n}\n\nfunction removeDfsClasses() {\n  forEach(document.getElementsByTagName(\"a\"), function(linkElement) {\n    linkElement.classList.remove('canopy-dfs-previously-selected-link');\n    linkElement.classList.remove('canopy-reverse-dfs-previously-selected-link');\n  });\n}\n\nfunction removeLastPathElement(pathArray) {\n  let lastItem = pathArray[pathArray.length - 1];\n  if (lastItem[0] === lastItem[1]) {\n    return JSON.parse(JSON.stringify(pathArray.slice(0, -1)));\n  } else {\n    let newArray = JSON.parse(JSON.stringify(pathArray));\n    let item = newArray.pop();\n    item[1] = item[0];\n    newArray.push(item);\n    return newArray;\n  }\n}\n\nfunction tryPathPrefix(pathArray, displayOptions) {\n  console.log(\"No section element found for path: \", pathArray);\n  console.log(\"Trying: \", removeLastPathElement(pathArray))\n  return displayPath(removeLastPathElement(pathArray), displayOptions);\n}\n\nfunction addLinkSelection(pathArray, linkToSelect) {\n  if (linkToSelect && linkToSelect.dataset.type === 'local') {\n    let newArray = JSON.parse(JSON.stringify(pathArray));\n    let item = newArray.pop();\n    item[1] = linkToSelect.dataset.targetSubtopic\n    newArray.push(item);\n    return newArray;\n  } else {\n    return pathArray;\n  }\n}\n\nexport {\n  newNodeAlreadyPresent,\n  determineLinkToSelect,\n  determineSectionElementToDisplay,\n  createOrReplaceHeader,\n  displaySectionBelowLink,\n  addSelectedLinkClass,\n  moveSelectedSectionClass,\n  hideAllSectionElements,\n  deselectAllLinks,\n  removeDfsClasses,\n  removeLastPathElement,\n  tryPathPrefix,\n  addLinkSelection\n};\n","import { metadataFromLink } from 'helpers/getters';\nimport parsePathString from 'path/parse_path_string';\nimport pathStringFor from 'path/path_string_for';\n\nfunction saveCurrentLinkSelectionInHistoryStack(linkElement) {\n  history.replaceState(\n    metadataFromLink(linkElement),\n    document.title,\n    window.location.href\n  );\n}\n\nfunction linkSelectionPresentInEvent(e) {\n  return e.state && e.state.targetTopic;\n}\n\nfunction priorLinkSelectionDataFromSession() {\n  return JSON.parse(\n    sessionStorage.getItem(\n      pathStringFor(\n        parsePathString()\n      )\n    )\n  );\n}\n\nfunction stateIfPresentInHistoryStack() {\n  return history.state && history.state.targetTopic && history.state;\n}\n\nfunction priorLinkSelectionData() {\n  return stateIfPresentInHistoryStack() || priorLinkSelectionDataFromSession();\n}\n\nfunction storeLinkSelectionInSession(linkElement) {\n  let linkData = linkElement && JSON.stringify(metadataFromLink(linkElement));\n  linkData && sessionStorage.setItem(location.pathname + location.hash, linkData);\n}\n\nexport {\n  linkSelectionPresentInEvent,\n  saveCurrentLinkSelectionInHistoryStack,\n  priorLinkSelectionDataFromSession,\n  priorLinkSelectionData,\n  storeLinkSelectionInSession\n};\n","import setPath from 'path/set_path';\nimport {\n  canopyContainer,\n  sectionElementOfPath,\n  parentLinksOfSection,\n  documentTitleFor,\n  sectionElementOfLink,\n  paragraphElementOfSection\n} from 'helpers/getters';\n\nimport {\n  determineLinkToSelect,\n  determineSectionElementToDisplay,\n  createOrReplaceHeader,\n  displaySectionBelowLink,\n  addSelectedLinkClass,\n  hideAllSectionElements,\n  deselectAllLinks,\n  removeDfsClasses,\n  tryPathPrefix,\n  addLinkSelection\n} from 'display/helpers';\n\nimport { storeLinkSelectionInSession } from 'history/helpers';\n\nconst displayPath = (pathArray, displayOptions) => {\n  displayOptions = displayOptions || {};\n  let sectionElement = sectionElementOfPath(pathArray);\n  if (!sectionElement && pathArray.length === 1 && pathArray[0][0] === pathArray[0][1]) throw 'Unknown path';\n  if (!sectionElement) return tryPathPrefix(pathArray, displayOptions);\n\n  let topicName = pathArray[0][0];\n  document.title = documentTitleFor(topicName);\n  let displayTopicName = sectionElementOfPath([[topicName, topicName]]).dataset.topicDisplayName;\n  createOrReplaceHeader(displayTopicName);\n\n  removeDfsClasses();\n  displayOptions.postDisplayCallback && displayOptions.postDisplayCallback();\n  deselectAllLinks();\n  hideAllSectionElements();\n\n  let linkToSelect = determineLinkToSelect(pathArray, sectionElement, displayOptions);\n  let sectionElementToDisplay = determineSectionElementToDisplay(linkToSelect, sectionElement, displayOptions);\n  addSelectedLinkClass(linkToSelect);\n  storeLinkSelectionInSession(linkToSelect);\n  if (!displayOptions.originatesFromPopStateEvent) setPath(addLinkSelection(pathArray, linkToSelect));\n\n  displayPathTo(sectionElementToDisplay, linkToSelect);\n  window.scrollTo(0, canopyContainer.scrollHeight);\n};\n\nconst displayPathTo = (sectionElement, linkToSelect) => {\n  sectionElement.style.display = 'block';\n\n  if (sectionElement.parentNode === canopyContainer) {\n    return;\n  }\n\n  let parentLinks = parentLinksOfSection(sectionElement);\n  let isPreviewParagraph = linkToSelect &&\n    linkToSelect.dataset.type === 'local' &&\n    paragraphElementOfSection(sectionElement.parentNode).\n    contains(linkToSelect);\n\n  if (isPreviewParagraph) {\n    parentLinks.forEach((parentLink) => parentLink.classList.add('canopy-preview-link'));\n  } else {\n    parentLinks.forEach((parentLink) => parentLink.classList.add('canopy-open-link'));\n  }\n\n  let parentSectionElement = sectionElementOfLink(parentLinks[0]);\n  displayPathTo(parentSectionElement, linkToSelect);\n}\n\nexport default displayPath;\n","import { defaultTopic, canopyContainer, pathPrefix } from 'helpers/getters';\nimport parsePathString from 'path/parse_path_string';\n\nfunction pathOrDefaultTopic() {\n  let pathArray = parsePathString();\n  if (pathArray.length > 0) {\n    return pathArray\n  } else {\n    return [[defaultTopic, defaultTopic]];\n  }\n}\n\nfunction pathForSectionElement(sectionElement) {\n  if (!sectionElement) { return null; }\n\n  let pathArray = [];\n  let currentElement = sectionElement;\n\n  while (currentElement !== canopyContainer) {\n    let currentTopic = currentElement.dataset.topicName;\n\n    pathArray.unshift([\n      currentTopic,\n      currentElement.dataset.subtopicName\n    ]);\n\n    while (currentElement.dataset.topicName === currentTopic) {\n      currentElement = currentElement.parentNode;\n    }\n  }\n\n  return pathArray;\n}\n\nexport { pathOrDefaultTopic, pathForSectionElement };\n","import updateView from 'display/update_view';\nimport { sectionElementOfLink } from 'helpers/getters';\nimport { pathForSectionElement } from 'path/helpers';\nimport parsePathString from 'path/parse_path_string';\nimport pathStringFor from 'path/path_string_for';\n\nconst onParentLinkClick = (topicName, targetSubtopic, linkElement) => {\n  return (e) => {\n    e.preventDefault();\n    // If the link's child is already selected, display the link's section\n    let pathArray = pathForSectionElement(sectionElementOfLink(linkElement));\n\n    if (linkElement.classList.contains('canopy-open-link')) {\n      pathArray.pop();\n      let newTuple = [linkElement.dataset.enclosingTopic, linkElement.dataset.enclosingSubtopic];\n      pathArray.push(newTuple);\n    } else {\n      pathArray.pop();\n      let newTuple = [topicName, targetSubtopic];\n      pathArray.push(newTuple);\n    }\n\n    updateView(pathArray);\n  }\n}\n\nconst onGlobalLinkClick = (targetTopic, targetSubtopic, linkElement) => {\n  return (e) => {\n    e.preventDefault();\n\n    let pathArray\n    if (e.altKey) {\n      pathArray = pathForSectionElement(sectionElementOfLink(linkElement))\n\n      if (!linkElement.classList.contains('canopy-open-link')) {\n        pathArray.push([\n          linkElement.dataset.targetTopic,\n          linkElement.dataset.targetSubtopic\n        ]);\n      }\n    } else {\n      pathArray = [[targetTopic, targetSubtopic]];\n    }\n\n    if (e.metaKey) {\n      window.open(\n        location.origin + pathStringFor(pathArray),\n        '_blank'\n      );\n    } else {\n      updateView(pathArray)\n    }\n  }\n}\n\nexport { onParentLinkClick, onGlobalLinkClick };\n","let REQUEST_CACHE = {};\n\nexport default REQUEST_CACHE;\n","import { pathPrefix } from 'helpers/getters';\nimport { slugFor } from 'helpers/identifiers';\nimport REQUEST_CACHE from 'requests/request_cache';\n\nfunction eagerLoad(topicName) {\n  if (REQUEST_CACHE[topicName]) return;\n  let dataPath = pathPrefix + '/data/' + slugFor(topicName.toLowerCase()) + '.json';\n\n  return fetch(dataPath).\n    then(res => {\n      return res.json().then((json) => {\n        REQUEST_CACHE[topicName] = json;\n        return json;\n      });\n    });\n}\n\nexport default eagerLoad;\n","import { slugFor } from 'helpers/identifiers';\nimport { onParentLinkClick, onGlobalLinkClick } from 'render/click_handlers';\nimport externalLinkIconSvg from 'assets/external_link_icon/icon.svg';\nimport renderStyledText from 'render/render_styled_text';\nimport eagerLoad from 'requests/eager_load';\n\nfunction renderTokenElement(token, renderContext) {\n  if (token.type === 'text') {\n    return renderTextToken(token);\n  } else if (token.type === 'local') {\n    return renderParentLink(token, renderContext);\n  } else if (token.type === 'global') {\n    return renderGlobalLink(token, renderContext);\n  } else if (token.type === 'url') {\n    return renderLinkLiteral(token);\n  } else if (token.type === 'image') {\n    return renderImage(token);\n  } else if (token.type === 'html') {\n    return renderHtml(token);\n  } else if (token.type === 'footnote') {\n    return renderFootnoteSymbol(token);\n  }\n}\n\nfunction renderTextToken(token) {\n  let spanElement = document.createElement('SPAN');\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, spanElement);\n\n  return spanElement;\n}\n\nfunction renderParentLink(token, renderContext) {\n  let {\n    subtopicsAlreadyRendered,\n    parentLinkSubtreeCallback\n  } = renderContext;\n\n  if (!subtopicsAlreadyRendered.hasOwnProperty(token.targetSubtopic)) {\n    parentLinkSubtreeCallback(token);\n    return renderRegularParentLink(token);\n  } else {\n    return renderRedundantParentLink(token);\n  }\n}\n\nfunction renderRegularParentLink(token) {\n  let linkElement = renderSharedParentLinkBase(token);\n  linkElement.classList.add('canopy-local-link');\n  linkElement.dataset.type = 'local';\n  linkElement.dataset.urlSubtopic = token.targetSubtopic;\n  linkElement.href = `/${slugFor(token.targetTopic)}#${slugFor(token.targetSubtopic)}`;\n  return linkElement;\n}\n\nfunction renderRedundantParentLink(token) {\n  let linkElement = renderSharedParentLinkBase(token);\n  linkElement.classList.add('canopy-redundant-local-link');\n  linkElement.dataset.type = 'redundant-local';\n  linkElement.dataset.urlSubtopic = token.enclosingSubtopic;\n  linkElement.href = `/${slugFor(token.enclosingTopic)}#${slugFor(token.enclosingSubtopic)}`;\n  return linkElement;\n}\n\nfunction renderSharedParentLinkBase(token) {\n  let styleElements = renderStyledText(token.text);\n  let linkElement = document.createElement('a');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n  appendElementsToParent(styleElements, linkElement);\n  linkElement.addEventListener(\n    'click',\n    onParentLinkClick(token.targetTopic, token.targetSubtopic, linkElement)\n  );\n  return linkElement;\n}\n\nfunction renderGlobalLink(token, renderContext) {\n  let {\n    pathArray,\n    subtopicName,\n    globalLinkSubtreeCallback\n  } = renderContext;\n\n  window.setTimeout(() => eagerLoad(token.targetTopic), 0);\n\n  let linkElement = createGlobalLinkElement(token, pathArray);\n\n  if (globalLinkIsOpen(linkElement, pathArray, subtopicName)) {\n    globalLinkSubtreeCallback(token);\n  }\n\n  return linkElement;\n}\n\nfunction createGlobalLinkElement(token) {\n  let styleElements = renderStyledText(token.text);\n  let linkElement = document.createElement('a');\n  appendElementsToParent(styleElements, linkElement);\n  linkElement.classList.add('canopy-global-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.type = 'global';\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.urlSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n  linkElement.href = `/${slugFor(token.targetTopic)}#${slugFor(token.targetSubtopic)}`;\n  linkElement.addEventListener(\n    'click',\n    onGlobalLinkClick(token.targetTopic, token.targetSubtopic, linkElement)\n  );\n  return linkElement\n}\n\nfunction globalLinkIsOpen(linkElement, pathArray, subtopicName) {\n  let subtopicContainingOpenGlobalReference = pathArray[0][1];\n  let openGlobalLinkExists = pathArray[1];\n  let openGlobalLinkTargetTopic = pathArray[1] && pathArray[1][0];\n  let openGlobalLinkTargetSubtopic = openGlobalLinkTargetTopic;\n\n  return openGlobalLinkExists &&\n    linkElement.dataset.targetTopic === openGlobalLinkTargetTopic &&\n    linkElement.dataset.targetSubtopic === openGlobalLinkTargetSubtopic &&\n    subtopicName === subtopicContainingOpenGlobalReference;\n}\n\nfunction renderLinkLiteral(token) {\n  let linkSpan = document.createElement('SPAN');\n  let linkElement = document.createElement('a');\n  linkSpan.classList.add('canopy-url-link-span');\n  linkElement.classList.add('canopy-url-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.setAttribute('href', token.url);\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n  linkElement.dataset.type = 'url';\n  linkElement.dataset.text = token.text;\n  linkElement.dataset.urlSubtopic = token.urlSubtopic;\n  linkSpan.appendChild(linkElement);\n  linkSpan.innerHTML += externalLinkIconSvg.replace(/\\r?\\n|\\r/g, '');\n  return linkSpan;\n}\n\nfunction renderImage(token) {\n  let divElement = document.createElement('DIV');\n  divElement.classList.add('canopy-image-div');\n\n  let imageElement = document.createElement('IMG');\n  divElement.appendChild(imageElement);\n\n  imageElement.setAttribute('src', token.resourceUrl);\n\n  let anchorElement = document.createElement('A');\n  anchorElement.setAttribute('href', token.anchorUrl || token.resourceUrl);\n  anchorElement.appendChild(imageElement);\n  divElement.appendChild(anchorElement);\n\n  if (token.title) {\n    imageElement.setAttribute('title', token.title);\n    let captionElement = document.createElement('SUP');\n    let captionDiv = document.createElement('DIV');\n    captionElement.appendChild(document.createTextNode(token.title));\n    captionElement.classList.add('canopy-image-caption');\n    captionDiv.classList.add('canopy-caption-div');\n    divElement.appendChild(captionElement);\n  } else {\n    divElement.appendChild(anchorElement);\n  }\n\n  if (token.altText) {\n    imageElement.setAttribute('alt', token.altText);\n  }\n\n  return divElement;\n}\n\nfunction renderHtml(token) {\n  let divElement = document.createElement('DIV');\n  divElement.innerHTML = token.html;\n  divElement.classList.add('canopy-raw-html');\n  return divElement;\n}\n\n\nfunction renderFootnoteSymbol(token) {\n  let superscriptElement = document.createElement('SUP');\n  let textNode = document.createTextNode(token.text);\n  superscriptElement.appendChild(textNode);\n  return superscriptElement;\n}\n\nfunction appendElementsToParent(collection, parent) {\n  collection.forEach((item) => {\n    parent.appendChild(item);\n  });\n}\n\nexport default renderTokenElement;\n","import renderTokenElement from 'render/render_token_element';\n\nlet BlockRenderers = {\n  'text': renderTextBlock,\n  'code': renderCodeBlock,\n  'quote': renderQuoteBlock,\n  'list': renderListBlock,\n  'table': renderTableBlock,\n  'footnote': renderFootnoteBlock\n};\n\nfunction renderTextBlock(blockObject, renderContext) {\n  let lineSpans = [];\n\n  blockObject.tokensByLine.forEach(\n    (tokensOfLine, lineNumber) => {\n      let lineSpan = document.createElement('SPAN');\n      lineSpan.classList.add('canopy-text-span');\n      lineSpans.push(lineSpan);\n\n      tokensOfLine.forEach(\n        (token) => {\n          let tokenElement = renderTokenElement(token, renderContext);\n          lineSpan.appendChild(tokenElement);\n        }\n      )\n    }\n  );\n\n  return lineSpans;\n}\n\nfunction renderCodeBlock(blockObject, renderContext) {\n  let preElement = document.createElement('PRE');\n  let codeBlockElement = document.createElement('CODE');\n  preElement.appendChild(codeBlockElement);\n\n  blockObject.lines.forEach(\n    (lineText, lineNumber) => {\n      lineNumber > 0 && codeBlockElement.appendChild(document.createElement('BR'));\n      let lineTextNode = document.createTextNode(lineText);\n      codeBlockElement.appendChild(lineTextNode);\n    }\n  );\n\n  return [preElement];\n}\n\nfunction renderQuoteBlock(blockObject, renderContext) {\n  let blockQuoteElement = document.createElement('BLOCKQUOTE');\n\n  blockObject.tokensByLine.forEach(\n    (tokensOfLine, lineNumber) => {\n      lineNumber > 0 && blockQuoteElement.appendChild(\n        document.createElement('br')\n      );\n\n      tokensOfLine.forEach(\n        (token) => {\n          let tokenElement = renderTokenElement(token, renderContext);\n          blockQuoteElement.appendChild(tokenElement);\n        }\n      );\n    }\n  );\n\n  return [blockQuoteElement];\n}\n\nfunction renderListBlock(blockObject, renderContext) {\n  return renderListNodes(blockObject.topLevelNodes);\n\n  function renderListNodes(listNodeObjects) {\n    let listElement = blockObject.topLevelNodes[0].ordered ?\n      document.createElement('OL') :\n      document.createElement('UL');\n\n    listElement.setAttribute('type', listNodeObjects[0].ordinal);\n\n    listNodeObjects.forEach((listNodeObject) => {\n      let listItemElement = document.createElement('LI');\n\n      let tokenElementsOfLine = listNodeObject.tokensOfLine.forEach(\n        (token) => {\n          let tokenElement = renderTokenElement(token, renderContext);\n          listItemElement.appendChild(tokenElement);\n        }\n      );\n\n      if (listNodeObject.children.length > 0) {\n        let childList = renderListNodes(listNodeObject.children);\n        listItemElement.appendChild(childList);\n      }\n\n      listElement.appendChild(listItemElement);\n    });\n    return listElement;\n  }\n}\n\nfunction renderTableBlock(blockObject, renderContext) {\n  let tableElement = document.createElement('TABLE');\n  blockObject.tokensByCellByRow.forEach(\n    (tokensByCellOfRow, rowIndex) => {\n      let tableRowElement = document.createElement('TR');\n      tokensByCellOfRow.forEach(\n        (tokensOfCell) => {\n          let tableCellElement = document.createElement('TD');\n\n          tokensOfCell.forEach(\n            (token) => {\n              let tokenElement = renderTokenElement(token, renderContext);\n              tableCellElement.appendChild(tokenElement);\n            }\n          );\n\n          tableRowElement.appendChild(tableCellElement);\n        }\n      )\n      tableElement.appendChild(tableRowElement);\n    }\n  );\n  return [tableElement];\n}\n\nfunction renderFootnoteBlock(blockObject, renderContext) {\n  let horizonalRule = document.createElement('HR');\n  horizonalRule.classList.add('footnote-rule');\n\n  let footnoteSpans = Array.prototype.concat.apply([], blockObject.footnoteObjects.map(\n    (footnoteObject, index) => {\n      let footnoteSpan = document.createElement('SPAN');\n      footnoteSpan.classList.add('footnote-span');\n      let textNode = document.createTextNode(footnoteObject.superscript + '. ');\n      footnoteSpan.appendChild(textNode);\n      footnoteObject.tokens.forEach((token) => {\n        let tokenElement = renderTokenElement(token, renderContext);\n        footnoteSpan.appendChild(tokenElement);\n      });\n      let result = [];\n      index > 0 && result.push(document.createElement('BR'));\n      result.push(footnoteSpan);\n      return result;\n    }\n  ));\n\n  return [horizonalRule].concat(footnoteSpans);\n}\n\nexport default BlockRenderers;\n","import { htmlIdFor } from 'helpers/identifiers';\nimport displayPath from 'display/display_path';\nimport setPath from 'path/set_path';\nimport { paragraphElementOfSection, linkOfSectionByTarget } from 'helpers/getters';\nimport fetchAndRenderPath from 'render/fetch_and_render_path';\nimport BlockRenderers from 'render/block_renderers';\nimport eagerLoad from 'requests/eager_load';\n\nfunction renderDomTree(renderContext) {\n  let {\n    subtopicName,\n    paragraphsBySubtopic\n  } = renderContext;\n\n  let sectionElement = createNewSectionElement(renderContext);\n\n  renderContext.subtopicsAlreadyRendered[subtopicName] = true;\n  renderContext.promises = [];\n  renderContext.parentLinkSubtreeCallback = parentLinkSubtreeCallback(sectionElement, renderContext);\n  renderContext.globalLinkSubtreeCallback = globalLinkSubtreeCallback(sectionElement, renderContext);\n\n  let blocksOfParagraph = paragraphsBySubtopic[subtopicName];\n  let blockElements = renderElementsForBlocks(blocksOfParagraph, renderContext);\n\n  blockElements.forEach((blockElement) => {\n    paragraphElementOfSection(sectionElement).appendChild(blockElement);\n  });\n\n  return Promise.all(renderContext.promises).then((_) => sectionElement);\n}\n\nfunction generateIsSubtopicAlreadyRenderedCallback(subtopicsAlreadyRendered) {\n  return (targetSubtopic) => subtopicsAlreadyRendered.hasOwnProperty(targetSubtopic);\n}\n\nfunction parentLinkSubtreeCallback(sectionElement, renderContext) {\n  return (token) => {\n    let promisedSubtree = renderDomTree(\n      Object.assign({}, renderContext, {\n        subtopicName: token.targetSubtopic\n      })\n    );\n\n    promisedSubtree.then((subtree) => {\n      sectionElement.appendChild(subtree);\n    });\n\n    renderContext.promises.push(promisedSubtree);\n  }\n}\n\nfunction globalLinkSubtreeCallback(sectionElement, renderContext) {\n  let {\n    pathArray,\n    pathDepth,\n    promises\n  } = renderContext;\n\n  return (token) => {\n    if (subtreeAlreadyRenderedForPriorGlobalLinkInParagraph(sectionElement, token)) {\n      return;\n    }\n\n    let pathArrayForSubtree = (pathArray).slice(1);\n    let pathDepthOfSubtree = pathDepth + 1;\n\n    let whenTopicTreeRenders = fetchAndRenderPath(pathArrayForSubtree, pathDepthOfSubtree);\n    let whenTopicTreeAppended = whenTopicTreeRenders.then((topicTree) => {\n      sectionElement.appendChild(topicTree);\n    });\n\n    promises.push(whenTopicTreeAppended);\n  }\n}\n\nfunction createNewSectionElement(renderContext) {\n  let {\n    topicName, subtopicName, topicDisplayName, pathDepth\n  } = renderContext;\n\n  let sectionElement = document.createElement('section');\n  let paragraphElement = document.createElement('p');\n  sectionElement.appendChild(paragraphElement);\n  sectionElement.style.display = 'none';\n  sectionElement.dataset.topicName = topicName;\n  sectionElement.dataset.topicDisplayName = topicDisplayName;\n  sectionElement.dataset.subtopicName = subtopicName;\n  sectionElement.dataset.pathDepth = pathDepth;\n\n  if (topicName === subtopicName) {\n    pathDepth > 0 && sectionElement.prepend(document.createElement('hr'));\n    sectionElement.classList.add('canopy-topic-section');\n  }\n\n  return sectionElement;\n}\n\nfunction subtreeAlreadyRenderedForPriorGlobalLinkInParagraph(sectionElement, token) {\n  return linkOfSectionByTarget(sectionElement,\n    token.targetTopic,\n    token.targetSubtopic\n  );\n}\n\nfunction renderElementsForBlocks(blocksOfParagraph, renderContext) {\n  let elementArray = [];\n\n  blocksOfParagraph.forEach(\n    (blockObject) => {\n      let renderer = BlockRenderers[blockObject.type];\n      let blockElements = renderer(\n        blockObject,\n        renderContext\n      )\n      elementArray = elementArray.concat(blockElements);\n    }\n  );\n\n  return elementArray;\n}\n\nexport default renderDomTree;\n","import { slugFor } from 'helpers/identifiers';\nimport { canopyContainer, defaultTopic, pathPrefix } from 'helpers/getters';\nimport updateView from 'display/update_view';\nimport REQUEST_CACHE from 'requests/request_cache';\n\nconst requestJson = (topicName) => {\n  if (REQUEST_CACHE[topicName]) return Promise.resolve(REQUEST_CACHE[topicName]);\n\n  let dataPath = pathPrefix + '/data/' + slugFor(topicName.toLowerCase()) + '.json';\n\n  return fetch(dataPath).\n    then(res => {\n      return res.json().then((json) => {\n        REQUEST_CACHE[topicName] = json;\n        return json;\n      });\n    }).catch((e) => {\n      if (canopyContainer.childNodes.length === 0 && topicName !== defaultTopic) {\n        updateView([[defaultTopic, defaultTopic]])\n      }\n      return Promise.reject(\"Unrecognized path: \" + topicName);\n    });\n}\n\nexport default requestJson;\n","import renderDomTree from 'render/render_dom_tree';\nimport requestJson from 'requests/request_json';\n\nconst fetchAndRenderPath = (pathArray, pathDepth) => {\n  if (pathArray.length === 0) {\n    return Promise.resolve(null);\n  }\n  let topicName = pathArray[0][0];\n  let uponResponsePromise = requestJson(topicName);\n\n  return uponResponsePromise.then((dataObject) => {\n    let { paragraphsBySubtopic, topicDisplayName } = dataObject;\n\n    return renderDomTree(\n      {\n        topicName: pathArray[0][0],\n        topicDisplayName: topicDisplayName,\n        subtopicName: pathArray[0][0],\n        pathArray,\n        paragraphsBySubtopic,\n        subtopicsAlreadyRendered: {},\n        pathDepth\n      }\n    );\n  });\n}\n\nexport default fetchAndRenderPath;\n","import fetchAndRenderPath from 'render/fetch_and_render_path';\nimport displayPath from 'display/display_path';\nimport {\n  defaultTopic,\n  canopyContainer,\n  findLowestExtantSectionElementOfPath,\n  childSectionElementOfParentLink\n} from 'helpers/getters';\n\nimport { newNodeAlreadyPresent } from 'display/helpers';\n\nconst updateView = (pathArray, updateOptions) => {\n  let {\n    lowestExtantSectionElementOfPath,\n    pathSuffixToRender\n  } = findLowestExtantSectionElementOfPath(pathArray);\n\n  let promisedDomTree = fetchAndRenderPath(\n    pathSuffixToRender,\n    pathArray.length - pathSuffixToRender.length\n  )\n\n  promisedDomTree.then((domTree) => {\n    if (domTree) {\n      let anchorElement = lowestExtantSectionElementOfPath || canopyContainer;\n      if (!newNodeAlreadyPresent(anchorElement, domTree)) {\n        anchorElement.appendChild(domTree);\n      }\n    }\n\n    displayPath(\n      pathArray,\n      updateOptions\n    );\n  });\n}\n\nexport default updateView;\n","import {\n  currentSection,\n  selectedLink,\n  currentRootSection,\n  linkNumberOf,\n  sectionElementOfLink,\n  parentLinkOfSection,\n  sectionElementOfPath,\n  metadataFromLink,\n  openLinkOfSection,\n  canopyContainer,\n  parentLinkOf,\n  firstLinkOfSectionElement,\n  lastLinkOfSectionElement,\n  linkAfter,\n  linkBefore,\n  firstSiblingOf,\n  lastSiblingOf,\n  firstChildLinkOfParentLink,\n  lastChildLinkOfParentLink,\n  enclosingTopicSectionOfLink,\n  childSectionElementOfParentLink,\n  forEach\n} from 'helpers/getters';\nimport {\n  isATopicRootSection,\n  isPageRootSection,\n  sectionHasNoChildLinks\n} from 'helpers/booleans';\nimport { pathForSectionElement } from 'path/helpers';\nimport updateView from 'display/update_view';\nimport setPath from 'path/set_path';\nimport parsePathString from 'path/parse_path_string';\nimport pathStringFor from 'path/path_string_for';\nimport { deselectAllLinks } from 'display/helpers';\n\nfunction moveUpward() {\n  let pathArray = parsePathString();\n  let linkElement;\n\n  if (selectedLinkIsOpenGlobalLink()) {\n    // Handle global link with inlined child with no links\n    pathArray.pop();\n    linkElement = selectedLink();\n  } else if (isPageRootSection(sectionElementOfLink(selectedLink()))) {\n    let sectionElement = sectionElementOfLink(selectedLink());\n    pathArray = [[\n      sectionElement.dataset.topicName,\n      sectionElement.dataset.topicName\n    ]];\n\n    linkElement = null;\n  } else if (isATopicRootSection(sectionElementOfLink(selectedLink()))) {\n    pathArray.pop();\n    linkElement = parentLinkOf(selectedLink());\n  } else {\n    linkElement = parentLinkOf(selectedLink());\n    let finalTuple = pathArray.pop();\n    let newTuple = [finalTuple[0], linkElement.dataset.urlSubtopic];\n    pathArray.push(newTuple);\n  }\n\n  updateView(\n    pathArray,\n    { linkSelectionData: metadataFromLink(linkElement) }\n  );\n}\n\nfunction selectedLinkIsOpenGlobalLink() {\n  let currentSectionElement = currentSection();\n  let sectionElementOfSelectedLink = sectionElementOfLink(selectedLink());\n\n  return currentSectionElement !== sectionElementOfSelectedLink &&\n      selectedLink().dataset.type === 'global'\n}\n\nfunction moveDownward(cycle) {\n  let pathArray = parsePathString();\n\n  if (selectedLink().dataset.type === 'global') {\n    // Handle open global link with no children\n    if (selectedLink().classList.contains('canopy-open-link')) { return; }\n\n    pathArray.push([\n      selectedLink().dataset.targetTopic,\n      selectedLink().dataset.targetSubtopic\n    ]);\n\n    return updateView(\n      pathArray,\n      { selectALink: true }\n    );\n  }\n\n  if (selectedLink().dataset.type === 'local') {\n    let linkElement =\n      firstChildLinkOfParentLink(selectedLink()) ||\n      selectedLink();\n\n    let finalTuple = pathArray.pop();\n    let newTuple = [finalTuple[0], linkElement.dataset.urlSubtopic];\n    pathArray.push(newTuple);\n\n    return updateView(\n      pathArray,\n      { linkSelectionData: metadataFromLink(linkElement) }\n    );\n  }\n\n  if (selectedLink().dataset.type === 'redundant-local') {\n    let finalTuple = pathArray.pop();\n    let newTuple = [finalTuple[0], selectedLink().dataset.targetSubtopic];\n    pathArray.push(newTuple);\n    let linkElement = firstLinkOfSectionElement(sectionElementOfPath(pathArray));\n\n    return updateView(\n      pathArray,\n      { linkSelectionData: metadataFromLink(linkElement) }\n    );\n  }\n}\n\nfunction moveLeftward() {\n  let currentSectionElement = currentSection();\n  let sectionElementOfSelectedLink = sectionElementOfLink(selectedLink());\n  let pathArray = parsePathString();\n\n  // handle left on opened global link with no child links\n  if (selectedLink().dataset.type === 'global' &&\n    currentSectionElement !== sectionElementOfSelectedLink) {\n    pathArray.pop();\n  }\n\n  let linkElement = linkBefore(selectedLink()) || lastSiblingOf(selectedLink());\n  let finalTuple = pathArray.pop();\n  let newTuple = [finalTuple[0], linkElement.dataset.urlSubtopic];\n  pathArray.push(newTuple);\n\n  updateView(\n    pathArray,\n    { linkSelectionData: metadataFromLink(linkElement) }\n  );\n}\n\nfunction moveRightward() {\n  let currentSectionElement = currentSection();\n  let sectionElementOfSelectedLink = sectionElementOfLink(selectedLink());\n  let pathArray = parsePathString();\n\n  // handle right on opened global link with no child links\n  if (selectedLink().dataset.type === 'global' &&\n    currentSectionElement !== sectionElementOfSelectedLink) {\n    pathArray.pop();\n  }\n\n  let linkElement = linkAfter(selectedLink()) || firstSiblingOf(selectedLink());\n  let finalTuple = pathArray.pop();\n  let newTuple = [finalTuple[0], linkElement.dataset.urlSubtopic];\n  pathArray.push(newTuple);\n\n  updateView(\n    pathArray,\n    { linkSelectionData: metadataFromLink(linkElement) }\n  );\n}\n\nfunction moveDownOrRedirect(newTab, altKey) {\n  if (selectedLink().dataset.type === 'local' ||\n      selectedLink().dataset.type === 'redundant-parent') {\n    return moveDownward(false);\n  } else if (selectedLink().dataset.type === 'global') {\n    let pathArray;\n    if (altKey) {\n      pathArray = parsePathString().concat([[\n        selectedLink().dataset.targetTopic,\n        selectedLink().dataset.targetSubtopic\n      ]])\n    } else {\n      pathArray= [[\n        selectedLink().dataset.targetTopic,\n        selectedLink().dataset.targetSubtopic\n      ]];\n    }\n\n    if (newTab) {\n      let pathString = pathStringFor(pathArray);\n      return window.open(\n        location.origin + pathString,\n        '_blank'\n      );\n    }\n\n    updateView(\n      pathArray,\n      { selectALink: true }\n    );\n  } else if (selectedLink().dataset.type === 'url') {\n    if (newTab) {\n      return window.open(\n        selectedLink().href,\n        '_blank'\n      );\n    } else {\n      window.location = selectedLink().href;\n    }\n  }\n}\n\nfunction depthFirstSearch(dfsDirectionInteger, enterGlobalLinks, closeGlobalLinks) {\n  let previouslySelectedLinkClassName = dfsDirectionInteger === 1 ?\n    'canopy-dfs-previously-selected-link' :\n    'canopy-reverse-dfs-previously-selected-link';\n  let previouslySelectedLink = document.querySelector('.' + previouslySelectedLinkClassName);\n\n  // Enter a global link\n  let lastChildLink = dfsDirectionInteger === 1 ?\n    lastLinkOfSectionElement(childSectionElementOfParentLink(selectedLink())) :\n    firstLinkOfSectionElement(childSectionElementOfParentLink(selectedLink()));\n  let targetTopic = selectedLink().dataset.targetTopic;\n  let pathToCurrentLink = pathForSectionElement(sectionElementOfLink(selectedLink()));\n  let newPathArray = pathToCurrentLink.concat([[targetTopic, targetTopic]]);\n  let sectionElement = sectionElementOfPath(pathToCurrentLink);\n  let alreadyVisitedGlobalLinkIfChildren = !lastChildLink || !previouslySelectedLink || previouslySelectedLink !== lastChildLink;\n  let alreadyVisitedGlobalLinkIfNoChildren = previouslySelectedLink !== selectedLink();\n  let alreadyVisitedGlobalLink = alreadyVisitedGlobalLinkIfChildren && alreadyVisitedGlobalLinkIfNoChildren;\n  let childSectionIsNotAlreadyVisible = !sectionElement || !openLinkOfSection(sectionElement);\n  let nextChildLink = dfsDirectionInteger === 1 ?\n    firstLinkOfSectionElement(sectionElement) :\n    lastLinkOfSectionElement(sectionElement);\n\n  if (\n    selectedLink().dataset.type === 'global' &&\n    enterGlobalLinks &&\n    (alreadyVisitedGlobalLink) &&\n    (childSectionIsNotAlreadyVisible)\n  ) {\n    return updateView(\n      newPathArray,\n      {\n        linkSelectionData: nextChildLink,\n        postDisplayCallback: updateDfsClassesCallback(dfsDirectionInteger)\n      }\n    );\n  }\n\n  // Close a global link with no children\n  if (\n    selectedLink().dataset.type === 'global' &&\n    closeGlobalLinks &&\n    sectionHasNoChildLinks(childSectionElementOfParentLink(selectedLink())) &&\n    selectedLink().classList.contains('canopy-open-link')\n  ) {\n    return updateView(\n      parsePathString().slice(0, -1),\n      {\n        linkSelectionData: metadataFromLink(selectedLink()),\n        postDisplayCallback: updateDfsClassesCallback(dfsDirectionInteger)\n      }\n    );\n  }\n\n  // Enter a parent link\n  let lastChildToVisit = dfsDirectionInteger === 1 ?\n    lastChildLinkOfParentLink(selectedLink()) :\n    firstChildLinkOfParentLink(selectedLink());\n\n  let firstChildToVisit = dfsDirectionInteger === 1 ?\n    firstChildLinkOfParentLink(selectedLink()) :\n    lastChildLinkOfParentLink(selectedLink());\n\n  if (\n    firstChildToVisit &&\n    (!previouslySelectedLink || previouslySelectedLink !== lastChildToVisit) &&\n    selectedLink().dataset.type !== 'global' &&\n    selectedLink().dataset.type !== 'redundant-local'\n  ) {\n    let nextLink = firstChildToVisit;\n    return updateView(\n      pathForSectionElement(sectionElementOfLink(nextLink)),\n      {\n        linkSelectionData: metadataFromLink(nextLink),\n        postDisplayCallback: updateDfsClassesCallback(dfsDirectionInteger)\n      }\n    );\n  }\n\n  // Move to the next sibling\n  let nextSiblingToVisit = dfsDirectionInteger === 1 ?\n    linkAfter(selectedLink()) :\n    linkBefore(selectedLink());\n\n  if (nextSiblingToVisit) {\n    let nextLink = nextSiblingToVisit;\n    return updateView(\n      pathForSectionElement(sectionElementOfLink(nextLink)),\n      {\n        linkSelectionData: metadataFromLink(nextLink),\n        postDisplayCallback: updateDfsClassesCallback(dfsDirectionInteger)\n      }\n    );\n  }\n\n  // Move to parent\n  let parentLink = parentLinkOfSection(sectionElementOfLink(selectedLink()));\n  if (parentLink && parentLink.dataset.type !== 'global') {\n    let nextLink = parentLink;\n    return updateView(\n      pathForSectionElement(sectionElementOfLink(nextLink)),\n      {\n        linkSelectionData: metadataFromLink(nextLink),\n        postDisplayCallback: updateDfsClassesCallback(dfsDirectionInteger)\n      }\n    );\n  }\n\n  // Move to parent link that is a global link\n  let globalParentLink = parentLinkOfSection(sectionElementOfLink(selectedLink()));\n  if (\n    globalParentLink &&\n    globalParentLink.dataset.type === 'global' &&\n    closeGlobalLinks\n  ) {\n    let nextLink = globalParentLink;\n    return updateView(\n      pathForSectionElement(sectionElementOfLink(nextLink)),\n      {\n        linkSelectionData: metadataFromLink(nextLink),\n        postDisplayCallback: updateDfsClassesCallback(dfsDirectionInteger)\n      }\n    );\n  }\n}\n\nfunction updateDfsClassesCallback(dfsDirectionInteger) {\n  return () => {\n    let previouslySelectedLinkClassName = dfsDirectionInteger === 1 ?\n    'canopy-dfs-previously-selected-link' :\n    'canopy-reverse-dfs-previously-selected-link';\n    let previouslySelectedLink = document.querySelector('.' + previouslySelectedLinkClassName);\n\n    if (previouslySelectedLink) {\n      previouslySelectedLink.classList.remove(previouslySelectedLinkClassName);\n    }\n    selectedLink() && selectedLink().classList.add(previouslySelectedLinkClassName);\n    let preserveForwardDfsClass = dfsDirectionInteger === 1;\n    let preserveBackwardsDfsClass = dfsDirectionInteger === 2;\n\n    forEach(document.getElementsByTagName(\"a\"), function(linkElement) {\n      !preserveForwardDfsClass && linkElement.classList.remove('canopy-dfs-previously-selected-link');\n      !preserveBackwardsDfsClass && linkElement.classList.remove('canopy-reverse-dfs-previously-selected-link');\n    });\n  }\n}\n\nfunction goToEnclosingTopic() {\n  let sectionElement = enclosingTopicSectionOfLink(selectedLink());\n  let linkElement = openLinkOfSection(sectionElement) || selectedLink();\n\n  updateView(\n    pathForSectionElement(sectionElement),\n    { linkSelectionData: metadataFromLink(linkElement) }\n  );\n}\n\nfunction goToParentOfEnclosingTopic() {\n  let sectionElement = enclosingTopicSectionOfLink(selectedLink());\n  if (sectionElement.parentNode !== canopyContainer) {\n    sectionElement = sectionElement.parentNode;\n  }\n  let linkElement = openLinkOfSection(sectionElement);\n\n  updateView(\n    pathForSectionElement(sectionElement),\n    { linkSelectionData: metadataFromLink(linkElement) }\n  );\n}\n\nexport {\n  moveUpward,\n  moveDownward,\n  moveLeftward,\n  moveRightward,\n  moveDownOrRedirect,\n  depthFirstSearch,\n  goToEnclosingTopic,\n  goToParentOfEnclosingTopic\n};\n","import { currentSection, selectedLink } from 'helpers/getters';\nimport {\n  moveUpward,\n  moveDownward,\n  moveLeftward,\n  moveRightward,\n  moveDownOrRedirect,\n  depthFirstSearch,\n  goToEnclosingTopic,\n  goToParentOfEnclosingTopic\n} from 'keys/key_handlers';\nimport updateView from 'display/update_view';\nimport parsePathString from 'path/parse_path_string';\n\nconst registerKeyListeners = () => {\n  window.addEventListener('keydown', function(e) {\n    let modifiers =\n      (e.metaKey ? 'command-' : '') +\n      (e.altKey ? 'alt-' : '') +\n      (e.ctrlKey ? 'ctrl-' : '') +\n      (e.shiftKey ? 'shift-' : '');\n\n    let keyName = keyNames[e.keyCode];\n    let shortcutName = modifiers + keyName;\n\n    if (keyName === 'tab') {\n      e.preventDefault();\n    }\n\n    if (selectedLink()) {\n      (shortcutRelationships[shortcutName]||function(){})()\n    } else if (shortcutRelationships[shortcutName]) {\n      updateView(\n        parsePathString(),\n        { selectALink: true }\n      );\n    }\n  });\n}\n\nconst shortcutRelationships = {\n  'left': moveLeftward,\n  'up': moveUpward,\n  'down': moveDownward,\n  'right': moveRightward,\n\n  'h': moveLeftward,\n  'j': moveDownward,\n  'k': moveUpward,\n  'l': moveRightward,\n\n  'escape': goToParentOfEnclosingTopic,\n  'shift-escape': goToEnclosingTopic,\n\n  'return': moveDownOrRedirect,\n  'command-return': moveDownOrRedirect.bind(null, true),\n  'command-alt-return': moveDownOrRedirect.bind(null, true, true),\n\n  'tab': depthFirstSearch.bind(null, 1, false, false),\n  'alt-tab': depthFirstSearch.bind(null, 1, true, true),\n  '`': depthFirstSearch.bind(null, 1, false, true),\n  'shift-tab': depthFirstSearch.bind(null, 2, false, false),\n  'alt-shift-tab': depthFirstSearch.bind(null, 2, true, true),\n  'shift-`': depthFirstSearch.bind(null, 2, false, true),\n}\n\nconst keyNames = {\n  37: 'left',\n  39: 'right',\n  38: 'up',\n  40: 'down',\n\n  71: 'g',\n  72: 'h',\n  75: 'k',\n  74: 'j',\n  76: 'l',\n  186: ';',\n\n  13: 'return',\n  9: 'tab',\n  27: 'escape',\n\n  192: '`',\n\n  49: '1',\n  50: '2',\n  51: '3',\n  52: '4',\n  53: '5',\n}\n\nexport default registerKeyListeners;\n","import {\n  saveCurrentLinkSelectionInHistoryStack,\n  linkSelectionPresentInEvent\n} from 'history/helpers';\nimport { priorLinkSelectionDataFromSession } from 'history/helpers';\nimport updateView from 'display/update_view';\nimport parsePathString from 'path/parse_path_string';\nimport { selectedLink } from 'helpers/getters';\n\nfunction registerPopStateListener() {\n  window.addEventListener('popstate', (e) => {\n    saveCurrentLinkSelectionInHistoryStack(selectedLink());\n\n    let newLinkSelectionData = linkSelectionPresentInEvent(e) ? e.state : null;\n\n    updateView(\n      parsePathString(),\n      {\n        linkSelectionData: newLinkSelectionData || priorLinkSelectionDataFromSession(),\n        originatesFromPopStateEvent: true\n      }\n    );\n  });\n}\n\nexport default registerPopStateListener;\n","import css from 'style/canopy.scss';\nimport updateView from 'display/update_view';\nimport { pathOrDefaultTopic } from 'path/helpers';\nimport registerKeyListeners from 'keys/register_key_listeners';\nimport registerPopStateListener from 'history/register_pop_state_listener';\nimport { priorLinkSelectionData } from 'history/helpers';\n\nregisterKeyListeners();\nregisterPopStateListener();\n\nupdateView(\n  pathOrDefaultTopic(),\n  { linkSelectionData: priorLinkSelectionData() }\n);\n"],"sourceRoot":""}