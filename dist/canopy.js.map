{"version":3,"file":"canopy.js","mappings":"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","sources":["webpack:///./src/client/style/canopy.scss","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack:///./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack:///./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack:///./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack:///./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/nonce","webpack:///./src/client/style/canopy.scss?b68a","webpack:///./src/client/models/paragraph.js","webpack:///./src/client/models/link.js","webpack:///./src/client/helpers/getters.js","webpack:///./src/client/helpers/identifiers.js","webpack:///./src/client/models/path.js","webpack:///./src/client/render/render_styled_text.js","webpack:///./src/client/display/helpers.js","webpack:///./src/client/display/display_path.js","webpack:///./src/client/requests/request_cache.js","webpack:///./src/client/render/render_token_element.js","webpack:///./src/client/render/click_handlers.js","webpack:///./src/client/assets/external_link_icon/icon.svg","webpack:///./src/client/render/block_renderers.js","webpack:///./src/client/render/render_dom_tree.js","webpack:///./src/client/requests/eager_load.js","webpack:///./src/client/render/fetch_and_render_path.js","webpack:///./src/client/requests/request_json.js","webpack:///./src/client/display/update_view.js","webpack:///./src/client/keys/key_handlers.js","webpack:///./src/client/keys/register_key_listeners.js","webpack:///./src/client/history/register_pop_state_listener.js","webpack:///./src/client/canopy.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#_canopy{padding-top:15px;padding-bottom:55px}#_canopy h1{text-align:center;margin:auto;width:40%;margin-top:10px}#_canopy hr{width:9%;display:block;height:1px;border:0;border-top:5px solid #ccc;margin:0px auto;padding-bottom:30px}#_canopy section.canopy-topic-section{padding-top:40px}#_canopy section{padding-top:30px}#_canopy p{overflow:hidden;font-size:22px;max-width:700px;margin:auto;line-height:1.3;letter-spacing:-0.003em;font-weight:400}#_canopy a.canopy-selectable-link{text-decoration:underline #ddd;color:#000;cursor:pointer}#_canopy a.canopy-selectable-link:hover{text-decoration:underline}#_canopy a.canopy-selectable-link:focus{outline:0}#_canopy a.canopy-selectable-link.canopy-open-link{text-shadow:.8px 0px 0px #000;text-decoration:underline}#_canopy a.canopy-selectable-link.canopy-selected-link{background-color:#edeefc;text-shadow:0px 0px 0px #000;text-decoration:none}#_canopy a.canopy-selectable-link.canopy-url-link:hover{color:#4078c0}#_canopy a.canopy-selectable-link.canopy-url-link.canopy-selected-link{color:#4078c0}#_canopy span.canopy-text-span{display:block}#_canopy hr.footnote-rule{width:700px;display:block;height:1px;border:0;border-top:1px solid #ccc;margin:12px 0;padding:0}#_canopy sup{font-size:60%;padding:2px}#_canopy .footnote-span{font-size:80%}#_canopy blockquote{margin:7px 10px;background-color:#eff0f1;padding:5px;font-size:90%}#_canopy blockquote a.canopy-selectable-link{text-decoration:underline #d3d3d3}#_canopy pre{margin:7px 10px;background-color:#eff0f1;padding:5px;font-size:85%}#_canopy code{background-color:#eff0f1;font-size:90%}#_canopy table{margin:7px auto;table-layout:fixed;width:70%;border-collapse:collapse;border:2px solid #000}#_canopy table td,#_canopy table th{border:2px solid #000;text-align:center;padding:6px}#_canopy img{max-width:200px;max-height:275px}#_canopy div.canopy-image-div{float:right;border:1px solid #c8ccd1;padding:3px;background-color:#f8f9fa;font-size:94%;text-align:center;overflow:hidden;min-width:172px;min-height:230px;margin:10px}#_canopy div.canopy-image-div>sup{display:block}#_canopy .canopy-url-link-span>svg{height:15px;width:12px;display:none}#_canopy .canopy-selected-link+svg,#_canopy .canopy-url-link-span:hover>svg{display:inline;vertical-align:middle}#_canopy ol,#_canopy ul{margin:7px 10px}#_canopy div.canopy-raw-html{display:inline}#_canopy>section.canopy-topic-section{padding-top:30px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/client/style/canopy.scss\"],\"names\":[],\"mappings\":\"AAAA,SACE,gBAAA,CACA,mBAAA,CAEA,YACE,iBAAA,CACA,WAAA,CACA,SAAA,CACA,eAAA,CAGF,YACE,QAAA,CACA,aAAA,CACA,UAAA,CACA,QAAA,CACA,yBAAA,CACA,eAAA,CACA,mBAAA,CAGF,sCACE,gBAAA,CAGF,iBACE,gBAAA,CAGF,WACE,eAAA,CACA,cAAA,CACA,eAAA,CACA,WAAA,CAEA,eAAA,CACA,uBAAA,CACA,eAAA,CAKF,kCACE,8BAAA,CACA,UAAA,CACA,cAAA,CAEA,wCACE,yBAAA,CAGF,wCACE,SAAA,CAGF,mDACE,6BAAA,CACA,yBAAA,CAGF,uDACE,wBAAA,CACA,4BAAA,CACA,oBAAA,CAIA,wDACE,aAAA,CAGF,uEACE,aAAA,CAiBN,+BACE,aAAA,CAGF,0BACE,WAAA,CACA,aAAA,CACA,UAAA,CACA,QAAA,CACA,yBAAA,CACA,aAAA,CACA,SAAA,CAGF,aACE,aAAA,CACA,WAAA,CAGF,wBACE,aAAA,CAGF,oBACE,eAAA,CACA,wBAAA,CACA,WAAA,CACA,aAAA,CAEA,6CACE,iCAAA,CAIJ,aACE,eAAA,CACA,wBAAA,CACA,WAAA,CACA,aAAA,CAGF,cACE,wBAAA,CACA,aAAA,CAGF,eACE,eAAA,CACA,kBAAA,CACA,SAAA,CACA,wBAAA,CACA,qBAAA,CAEA,oCACE,qBAAA,CACA,iBAAA,CACA,WAAA,CAIJ,aACE,eAAA,CACA,gBAAA,CAGF,8BACE,WAAA,CACA,wBAAA,CACA,WAAA,CACA,wBAAA,CACA,aAAA,CACA,iBAAA,CACA,eAAA,CACA,eAAA,CACA,gBAAA,CACA,WAAA,CAGF,kCACE,aAAA,CAGF,mCACE,WAAA,CACA,UAAA,CACA,YAAA,CAGF,4EACE,cAAA,CACA,qBAAA,CAGF,wBACE,eAAA,CAGF,6BACE,cAAA,CAIJ,sCACE,gBAAA\",\"sourcesContent\":[\"#_canopy {\\n  padding-top: 15px;\\n  padding-bottom: 55px;\\n\\n  h1 {\\n    text-align: center;\\n    margin: auto;\\n    width: 40%;\\n    margin-top: 10px;\\n  }\\n\\n  hr {\\n    width: 9%;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 5px solid #ccc;\\n    margin: 0px auto;\\n    padding-bottom: 30px;\\n  }\\n\\n  section.canopy-topic-section {\\n    padding-top: 40px;\\n  }\\n\\n  section {\\n    padding-top: 30px;\\n  }\\n\\n  p {\\n    overflow: hidden;\\n    font-size: 22px;\\n    max-width: 700px;\\n    margin: auto;\\n\\n    line-height: 1.3;\\n    letter-spacing: -.003em;\\n    font-weight: 400;\\n  }\\n\\n///////////// Link styles /////////////////\\n\\n  a.canopy-selectable-link {\\n    text-decoration: underline #DDDDDD;\\n    color: black;\\n    cursor: pointer;\\n\\n    &:hover {\\n      text-decoration: underline;\\n    }\\n\\n    &:focus {\\n      outline:0;\\n    }\\n\\n    &.canopy-open-link {\\n      text-shadow: .8px 0px 0px #000000;\\n      text-decoration: underline;\\n    }\\n\\n    &.canopy-selected-link {\\n      background-color: #edeefc;\\n      text-shadow: 0px 0px 0px #000000;\\n      text-decoration: none;\\n    }\\n\\n    &.canopy-url-link {\\n      &:hover {\\n        color: #4078c0;\\n      }\\n\\n      &.canopy-selected-link {\\n        color: #4078c0;\\n      }\\n    }\\n\\n    /*\\n    &.canopy-dfs-previously-selected-link {\\n      color: #ff0000 !important;\\n    }\\n\\n    &.canopy-reverse-dfs-previously-selected-link {\\n      color: #0000ff !important;\\n    }\\n    */\\n  }\\n\\n///////////// Markdown styles /////////////////\\n\\n  span.canopy-text-span {\\n    display: block;\\n  }\\n\\n  hr.footnote-rule {\\n    width: 700px;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 1px solid #ccc;\\n    margin: 12px 0;\\n    padding: 0;\\n  }\\n\\n  sup {\\n    font-size: 60%;\\n    padding: 2px;\\n  }\\n\\n  .footnote-span {\\n    font-size: 80%;\\n  }\\n\\n  blockquote {\\n    margin: 7px 10px;\\n    background-color: #eff0f1;\\n    padding: 5px;\\n    font-size: 90%;\\n\\n    a.canopy-selectable-link {\\n      text-decoration: underline #D3D3D3;\\n    }\\n  }\\n\\n  pre {\\n    margin: 7px 10px;\\n    background-color: #eff0f1;\\n    padding: 5px;\\n    font-size: 85%;\\n  }\\n\\n  code {\\n    background-color: #eff0f1;\\n    font-size: 90%;\\n  }\\n\\n  table {\\n    margin: 7px auto;\\n    table-layout: fixed;\\n    width: 70%;\\n    border-collapse: collapse;\\n    border: 2px solid black;\\n\\n    td, th {\\n      border: 2px solid black;\\n      text-align: center;\\n      padding: 6px;\\n    }\\n  }\\n\\n  img {\\n    max-width: 200px;\\n    max-height: 275px;\\n  }\\n\\n  div.canopy-image-div {\\n    float: right;\\n    border: 1px solid #c8ccd1;\\n    padding: 3px;\\n    background-color: #f8f9fa;\\n    font-size: 94%;\\n    text-align: center;\\n    overflow: hidden;\\n    min-width: 172px;\\n    min-height: 230px;\\n    margin: 10px;\\n  }\\n\\n  div.canopy-image-div > sup {\\n    display: block;\\n  }\\n\\n  .canopy-url-link-span > svg {\\n    height: 15px;\\n    width: 12px;\\n    display: none;\\n  }\\n\\n  .canopy-selected-link + svg, .canopy-url-link-span:hover > svg {\\n    display: inline;\\n    vertical-align: middle;\\n  }\\n\\n  ol, ul {\\n    margin: 7px 10px;\\n  }\\n\\n  div.canopy-raw-html {\\n    display: inline;\\n  }\\n}\\n\\n#_canopy > section.canopy-topic-section {\\n  padding-top: 30px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import Path from 'models/path';\nimport Link from 'models/link';\nimport { canopyContainer } from 'helpers/getters';\nimport { ancestorElement } from 'helpers/getters';\n\nclass Paragraph {\n  // A paragraph instance represents a visible paragraph, not\n  // specifically the DOM element of type paragraph.\n  //\n  // Visible paragraphs in the UI are created with a section element\n  // that has a paragraph element child.\n  //\n  // paragraph.sectionElement returns the section element, whereas\n  // paragraph.paragraphElement returns the paragraph element.\n\n  constructor(sectionElement) {\n    if (!sectionElement || sectionElement.tagName !== 'SECTION' ) throw \"Paragraph instantiation requires section element\";\n    if (!sectionElement.classList.contains('canopy-section')) throw \"Paragraph class requires Canopy section element\";\n    this.sectionElement = sectionElement;\n    this.transferDataset();\n  }\n\n  equals(otherParagraph) {\n    if (!otherParagraph) return false;\n    return this.sectionElement === otherParagraph.sectionElement;\n  }\n\n  display() {\n    this.sectionElement.style.display = 'block';\n  }\n\n  get element() {\n    throw \"Depreciated in favor of #sectionElement property\";\n  }\n\n  transferDataset() {\n    this.topicName = this.sectionElement.dataset.topicName;\n    this.subtopicName = this.sectionElement.dataset.subtopicName;\n    this.pathDepth = this.sectionElement.dataset.pathDepth;\n  }\n\n  get topic() {\n    throw \"Depreciated in favor of #topicName\";\n  }\n\n  get subtopic() {\n    throw \"Depreciated in favor of #subtopicName\";\n  }\n\n  get paragraphElement() {\n    let paragraphElement = Array.from(this.sectionElement.childNodes).\n      find((element) => element.tagName === 'P');\n\n    if (!paragraphElement) throw \"Paragraph has no paragraph element\";\n    return paragraphElement;\n  }\n\n  get path() {\n    let pathArray = [];\n    let currentElement = this.sectionElement;\n\n    while (currentElement !== canopyContainer) {\n      let currentTopic = currentElement.dataset.topicName;\n\n      pathArray.unshift([\n        currentTopic,\n        currentElement.dataset.subtopicName\n      ]);\n\n      while (currentElement.dataset.topicName === currentTopic) {\n        currentElement = currentElement.parentNode;\n      }\n    }\n\n    return new Path(pathArray);\n  }\n\n  get links() {\n    if (this.linkObjects) return this.linkObjects;\n    let linkElements = this.paragraphElement.querySelectorAll('a.canopy-selectable-link');\n    this.linkObjects = Array.from(linkElements).map((element) => new Link(element));\n    return this.linkObjects;\n  }\n\n  get firstLink() {\n    return this.links[0] || null;\n  }\n\n  get lastLink() {\n    return this.links[this.links.length - 1] || null;\n  }\n\n  get isPageRoot() {\n    return this.sectionElement.parentNode === canopyContainer\n  }\n\n  get isTopic() {\n    return this.topicName === this.subtopicName;\n  }\n\n  get hasLinks() {\n    return this.links.length > 0;\n  }\n\n  linkBySelector(callback) {\n    return this.links.find(callback);\n  }\n\n  linksBySelector(callback) {\n    return this.links.filter(callback);\n  }\n\n  linkByTarget(targetTopic, targetSubtopic) {\n    targetSubtopic = targetSubtopic || targetTopic;\n\n    return this.linkBySelector(\n      (link) => link.targetTopic === targetTopic && link.targetSubtopic === targetSubtopic\n    );\n  }\n\n  get parentLink() {\n    if (this.sectionElement.parentNode === canopyContainer) { return null; }\n\n    return this.parentParagraph && this.parentParagraph.linkByTarget(\n      this.sectionElement.dataset.topicName,\n      this.sectionElement.dataset.subtopicName\n    );\n  }\n\n  get displayTopicName() {\n    return this.sectionElement.dataset.displayTopicName;\n  }\n\n  get parentParagraph() {\n    if (this.sectionElement) {\n      let parentElement = ancestorElement(this.sectionElement, 'canopy-section');\n      return parentElement ? new Paragraph(parentElement) : null;\n    } else {\n      return null;\n    }\n  }\n\n  get topicParagraph() {\n    if (this.isTopic) {\n      return this;\n    } else {\n      return new Paragraph(ancestorElement(this.sectionElement, 'canopy-topic-section'));\n    }\n  }\n\n  get isTopicRoot() {\n    return this.topicName === this.subtopicName;\n  }\n\n  static get current() {\n    return Path.current.paragraph;\n  }\n\n  static get pageRoot() {\n    let path = Path.forTopic(Path.current.firstTopic);\n    return path.paragraph;\n  }\n\n  static containingLink(link) {\n    if (!link instanceof Link) throw \"Must provide link instance argument\";\n    let sectionElement = ancestorElement(link.element, 'canopy-section');\n    return new Paragraph(sectionElement);\n  }\n\n}\n\nexport default Paragraph;\n","import { ancestorElement } from 'helpers/getters';\nimport { canopyContainer } from 'helpers/getters';\nimport Path from 'models/path';\nimport Paragraph from 'models/paragraph';\n\nclass Link {\n  constructor(argument) {\n    // There are three ways to instantiate a link object:\n    // 1. You can provide a DOM element\n    // 2. You can provide a metadata object\n    //   (This is helpful when storing link selection in the session or history)\n    // 3. You can provide a callback that returns the link\n    //   (This is helpful for selecting links that are not yet rendered)\n\n    if (argument.tagName === 'A') {\n      this.element = argument;\n    } else if (argument instanceof Link) {\n      throw \"Cannot instantiate link from link\";\n    } else if (typeof argument === 'object') {\n      this.metadataObject = argument;\n    } else if (typeof argument === 'function') {\n      this.selectorCallback = argument;\n    } else {\n      throw 'Invalid argument to Link constructor';\n    }\n  }\n\n  equals(otherLink) {\n    return this.element === otherLink.element;\n  }\n\n  matches(otherLink) {\n    if (!otherLink) throw 'Invalid link argument to Link#matches';\n\n    return this.targetTopic === otherLink.targetTopic &&\n      this.targetSubtopic === otherLink.targetSubtopic &&\n      this.relativeLinkNumber === otherLink.relativeLinkNumber;\n  }\n\n  contradicts(path) {\n    if (!path instanceof Path) throw 'Invalid path argument to Link#contradicts';\n    return this.pathWhenSelected.string !== path.string;\n  }\n\n  get element () {\n    if (this.linkElement) {\n      return this.linkElement\n    } else if (this.metadataObject) {\n      this.element = Link.elementFromMetadata(this.metadata);\n      return this.linkElement;\n    } else if (this.selectorCallback) {\n      let link = this.selectorCallback();\n      this.element = link.element;\n      if (!this.element) throw \"Link selector callback didn't select link\";\n      return this.linkElement;\n    }\n  }\n\n  set element(argument) {\n    if (argument instanceof HTMLAnchorElement) {\n      this.linkElement = argument;\n    } else if (argument instanceof Link) {\n      this.linkElement = argument.element;\n    }\n    this.transferDataset();\n  }\n\n  transferDataset() {\n    this._targetTopic = this.element.dataset.targetTopic;\n    this._targetSubtopic = this.element.dataset.targetSubtopic;\n    this._enclosingTopic = this.element.dataset.enclosingTopic;\n    this._enclosingSubtopic = this.element.dataset.enclosingSubtopic;\n    this._typeValue = this.element.dataset.type;\n  }\n\n  get targetTopic() {\n    return this.element.dataset.targetTopic;\n  }\n  get targetSubtopic() {\n    return this.element.dataset.targetSubtopic;\n  }\n  get enclosingTopic() {\n    return this.element.dataset.enclosingTopic;\n  }\n  get enclosingSubtopic() {\n    return this.element.dataset.enclosingSubtopic;\n  }\n\n  get type() {\n    return this.element.dataset.type;\n  }\n\n  get enclosingSectionElement() {\n    return ancestorElement(this.element, 'canopy-section');\n  }\n\n  get sectionElement() {\n    throw \"Depreciated in favor of #enclosingSectionElement\";\n  }\n\n  get enclosingParagraphElement() {\n    return ancestorElement(this.element, 'canopy-paragraph');\n  }\n\n  get parentParagraphElement() {\n    throw \"Depreciated in favor of #enclosingParagraphElement\";\n  }\n\n  get enclosingParagraph() {\n    return new Paragraph(this.enclosingSectionElement);\n  }\n\n  get targetParagraph() {\n    if (!this.isParent) return null;\n\n    let childNodes = Array.from(this.enclosingParagraph.sectionElement.childNodes);\n\n    let paragraphElement = childNodes.find((childElement) =>\n        childElement.tagName === 'SECTION' &&\n        childElement.dataset.topicName === this.targetTopic &&\n        childElement.dataset.subtopicName === this.targetSubtopic);\n\n    if (!paragraphElement) {\n      throw `Did not find paragraph child element matching link ${this.targetTopic}/${this.targetSubtopic}`;\n    }\n\n    return new Paragraph(paragraphElement);\n  }\n\n  atNewPath(newPath) { // get matching link at new path\n    let newEnclosingParagraph;\n    if (this.isParent) {\n      newEnclosingParagraph = newPath.paragraph.parentParagraph;\n    } else {\n      newEnclosingParagraph = newPath.paragraph;\n    }\n    return newEnclosingParagraph\n      .links\n      .find(this.matcher);\n  }\n\n  get localPathWhenSelected() {\n    if (this.isGlobal) {\n      return new Path(this.pathWhenSelected.pathArray.slice(-2));\n    } else {\n      return this.pathWhenSelected.lastSegment;\n    }\n  }\n\n  get matcher() {\n    return (link) => link.matches(this);\n  }\n\n  get relativeLinkNumber() {\n    if (this.storedRelativeLinkNumber) return this.storedRelativeLinkNumber;\n    this.storedRelativeLinkNumber = this.\n      enclosingParagraph.\n      links.\n      map(e => e.element).\n      indexOf(this.element);\n\n    return this.storedRelativeLinkNumber;\n  }\n\n  get metadata() {\n    if (this.metadataObject) {\n      return this.metadataObject;\n    } else if(this.linkElement) {\n      let metadata = Link.collectMetadata(this.linkElement);\n      this.metadataObject = metadata;\n    } else if (this.selectorCallback) {\n      this.element = this.selectorCallback();\n    } else {\n      throw \"Link has neither supplied metadata, dom element, nor selector function\";\n    }\n  }\n\n  get targetPath() {\n    if (this.isGlobal) {\n      return this.enclosingParagraph.path.addSegment(this.targetTopic, this.targetSubtopic);\n    } else if (this.isLocal) {\n      return this.enclosingParagraph.path.replaceTerminalSubtopic(this.targetSubtopic);\n    } else {\n      return null; // eg URL link\n    }\n  }\n\n  get path() {\n    throw \"Depreciated in favor of #pathWhenSelected\";\n  }\n\n  get pathWhenSelected() {\n    if (this.isGlobal) {\n      return this.enclosingParagraph.path.addSegment(this.targetTopic, this.targetSubtopic);\n    } else if (this.isLocal) {\n      return this.enclosingParagraph.path.replaceTerminalSubtopic(this.targetSubtopic);\n    } else {\n      return this.enclosingParagraph.path;\n    }\n  }\n\n  static collectMetadata(linkElement) {\n    let link = new Link(linkElement);\n    let paragraph = Paragraph.containingLink(link);\n\n    // changing the metadata schema requires changing Link#containsLinkSelectionMetadata\n    return {\n      pathString: paragraph.path.string, // initial page load with session/history link selection requires this\n      text: linkElement.dataset.text,\n      relativeLinkNumber: link.relativeLinkNumber\n    };\n  }\n\n  static containsLinkSelectionMetadata(object) {\n    return object.hasOwnProperty('relativeLinkNumber');\n  }\n\n  static elementFromMetadata(object) {\n    let path = new Path(object.pathString);\n    let paragraph = path.paragraph;\n    if (!paragraph) throw \"Link selection data refers to non-existant link\";\n    let link = paragraph.linkBySelector(\n      (link, i) => link.element.dataset.text === object.text &&\n        i === object.relativeLinkNumber\n    );\n\n    return link && link.element || null;\n  }\n\n  get nextSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[links.length - 1])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink + 1];\n    } else {\n      return null;\n    }\n  }\n\n  get previousSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[0])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink - 1];\n    } else {\n      return null;\n    }\n  }\n\n  get siblings() {\n    return this.enclosingParagraph.links;\n  }\n\n  get firstSibling() {\n    return this.siblings[0];\n  }\n\n  get lastSibling() {\n    return this.siblings[this.siblings.length - 1];\n  }\n\n  get firstChildLink() {\n    return this.targetParagraph.firstLink;\n  }\n\n  get lastChildLink() {\n    return this.targetParagraph.lastLink;\n  }\n\n  get parentLink() {\n    return this.enclosingParagraph.parentLink;\n  }\n\n  get grandParentLink() {\n    return this.parentLink.parentLink;\n  }\n\n  get topicParagraph() {\n    return ancestorElement(this.element, 'canopy-topic-section');\n  }\n\n  get selected() {\n    return this.element.classList.includes('canopy-selected-link');\n  }\n\n  open() {\n    this.element.classList.add('canopy-open-link');\n  }\n\n  get isOpen() {\n    return this.element.classList.contains('canopy-open-link');\n  }\n\n  get isClosed() {\n    return !this.isOpen;\n  }\n\n  get isGlobal() {\n    return this.type === 'global';\n  }\n\n  get isLocal() {\n    return this.type === 'local';\n  }\n\n  get isParent() {\n    return this.isGlobal || this.isLocal;\n  }\n\n  static select(linkToSelect) {\n    linkToSelect && linkToSelect.element.classList.add('canopy-selected-link');\n    Link.persistInHistory(linkToSelect);\n    Link.persistInSession(linkToSelect);\n  }\n\n  static selectionPresentInEvent(e) {\n    return e.state && Link.containsLinkSelectionMetadata(e.state);\n  }\n\n  static get sessionSelection() {\n    let sessionData = sessionStorage.getItem(Path.current.string);\n    if (sessionData && sessionData !== 'null') {\n      return new Link(JSON.parse(sessionData));\n    } else {\n      return null;\n    }\n  }\n\n  static get historySelection() {\n    if (history.state && Link.containsLinkSelectionMetadata(history.state)) {\n      return new Link(history.state);\n    } else {\n      return null;\n    }\n  }\n\n  static get priorSelection() {\n    return this.historySelection || this.sessionSelection || null;\n  }\n\n  static get selection() {\n    let selectedLink = document.querySelector('a.canopy-selected-link');\n    if (selectedLink) {\n      return new Link(selectedLink);\n    } else {\n      return null;\n    }\n  }\n\n  static persistInSession(link) {\n    // This has to be static because Link.selection hasn't always updated\n    // between when a new link is selected and when we want to persist that selection\n    let linkData = link && JSON.stringify(link.metadata);\n    sessionStorage.setItem(location.pathname + location.hash, linkData || null);\n  }\n\n  static persistInHistory(link) {\n    // This has to be static because Link.selection hasn't always updated\n    // between when a new link is selected and when we want to persist that selection\n    history.replaceState(\n      link && link.metadata || null,\n      document.title,\n      window.location.href\n    );\n  }\n\n  // selectALink returns a callback that will pick a link to select\n  // once the DOM has rendered.\n  //\n  // selectALink takes a path to clarify which path is intended in case\n  // there are multiple rendered in the DOM, and the path has not updated yet.\n\n  static selectALink(path) {\n    path = path || Path.current;\n\n    return new Link(() => {\n      let paragraph = path.paragraph;\n      return paragraph.parentLink || paragraph.firstLink;\n    });\n  }\n\n  static hasTarget(topic, subtopic) {\n    if (!topic) throw \"No topic provided\";\n\n    return (link) => {\n      return link.targetTopic === topic &&\n        link.targetSubtopic === (subtopic || topic);\n    }\n  }\n\n  static current() {\n    throw \"Link#current does not exist, try Link#selection\";\n  }\n}\n\nexport default Link;\n","import Link from 'models/link';\n\nconst canopyContainer = document.getElementById('_canopy');\n\nconst defaultTopic = canopyContainer && canopyContainer.dataset.defaultTopic;\n\nconst projectPathPrefix = canopyContainer && canopyContainer.dataset.projectPathPrefix;\n\nfunction ancestorElement(currentElement, className) {\n  let parentElement = currentElement.parentElement;\n  while (parentElement.classList && !parentElement.classList.contains(className)) {\n    if (parentElement === canopyContainer) return null;\n    parentElement = parentElement.parentNode;\n  }\n  return parentElement;\n}\n\nexport {\n  canopyContainer,\n  defaultTopic,\n  projectPathPrefix,\n  ancestorElement\n};\n","const slugFor = (string) => {\n  if (!string) {return string}\n\n  return string.replace(/ /g, '_');\n}\n\nconst htmlIdFor = (topicName, subtopicName) => {\n  return '_canopy_' + slugFor(topicName + '_' + subtopicName);\n}\n\nfunction removeMarkdownTokens(string) {\n  if (!string) return string;\n  return string.\n    replace(/([^\\\\]|^)_/g, '$1').\n    replace(/([^\\\\]|^)\\*/g, '$1').\n    replace(/([^\\\\]|^)`/g, '$1').\n    replace(/([^\\\\]|^)~/g, '$1');\n}\n\nexport {\n  slugFor,\n  htmlIdFor,\n  removeMarkdownTokens\n};\n\n","import { defaultTopic, canopyContainer, projectPathPrefix } from 'helpers/getters';\nimport { selectedLink, metadataForLink } from 'helpers/getters';\nimport { slugFor } from 'helpers/identifiers';\nimport Paragraph from 'models/paragraph';\nimport Link from 'models/link';\n\nclass Path {\n  constructor(argument) {\n    if (!argument) {\n      this.pathArray = [['', '']];\n    } else if (Array.isArray(argument)) {\n      if (argument.length === 0) {\n        this.pathArray = [['', '']];\n      } else {\n        this.pathArray = JSON.parse(JSON.stringify(argument));\n      }\n      this.pathString = Path.arrayToString(this.pathArray);\n    } else if (typeof argument === 'string' || argument instanceof String) {\n      this.pathString = argument;\n      this.pathArray = Path.stringToArray(this.pathString);\n    }\n  }\n\n  equals(otherPath) {\n    return this.string === otherPath.string;\n  }\n\n  addSegment(topic, subtopic) {\n    if (this.empty) return new Path([[topic, subtopic]]);\n    return new Path(this.pathArray.concat([[topic, subtopic]]));\n  }\n\n  replaceTerminalSubtopic(newSubtopic) {\n    let lastSegment = this.lastSegment;\n    return this.withoutLastSegment.addSegment(lastSegment.topic, newSubtopic);\n  }\n\n  toString() {\n    return this.string;\n  }\n\n  get array() {\n    return this.pathArray;\n  }\n\n  get string() {\n    return this.pathString;\n  }\n\n  get firstTopic() {\n    return this.pathArray[0][0];\n  }\n\n  get topic() {\n    return this.pathArray[0][0];\n  }\n\n  get rootPath() {\n    return new Path([[this.topic, this.topic]]);\n  }\n\n  get firstSubtopic() {\n    return this.pathArray[0][1];\n  }\n\n  get subtopic() {\n    return this.pathArray[0][1];\n  }\n\n  get secondTopic() {\n    return this.pathArray[1] && this.pathArray[1][0];\n  }\n\n  get secondSubtopic() {\n    return this.pathArray[1] && this.pathArray[1][1];\n  }\n\n  get firstSegment() {\n    return new Path([[this.pathArray[0][0], this.pathArray[0][1]]]);\n  }\n\n  get lastSegment() {\n    return new Path(this.pathArray.slice(-1));\n  }\n\n  get withoutFirstSegment() {\n    return new Path(this.pathArray.slice(1));\n  }\n\n  get withoutLastSegment() {\n    return new Path(this.pathArray.slice(0, -1));\n  }\n\n  get clone() {\n    return new Path(JSON.parse(JSON.stringify(this.pathArray)));\n  }\n\n  get length() {\n    if (this.pathArray[0][0] === '') {\n      return 0;\n    } else {\n      return this.pathArray.length;\n    }\n  }\n\n  get sectionElement() {\n    return Path.elementAtRelativePath(this, canopyContainer);\n  }\n\n  get paragraph() {\n    if (this.sectionElement) {\n      return new Paragraph(this.sectionElement);\n    } else {\n      return null;\n    }\n  }\n\n  get empty() {\n    return this.pathArray[0][0] === '';\n  }\n\n  static get default() {\n    return new Path([[defaultTopic, defaultTopic]]);\n  }\n\n  static get current() {\n   let pathString = window.location.pathname + window.location.hash;\n    if (pathString.indexOf(projectPathPrefix) === 0) {\n      pathString = pathString.slice(projectPathPrefix.length);\n    }\n\n    return new Path(pathString);\n  }\n\n  static get initial() {\n    if (Path.current.empty) {\n      return Path.default;\n    } else {\n      return Path.current;\n    }\n  }\n\n  static forTopic(topic) {\n    return new Path([[topic, topic]]);\n  }\n\n  static forSegment(topic, subtopic) {\n    return new Path([[topic, subtopic]]);\n  }\n\n  static stringToArray(pathString) {\n    if (pathString.indexOf(projectPathPrefix) === 0) {\n      pathString = pathString.slice(projectPathPrefix.length);\n    }\n\n    if (pathString === '/') {\n      return [['','']];\n    }\n\n    let slashSeparatedUnits = pathString.\n      replace(/_/g, ' ').\n      split('/').\n      filter((string) => string !== '');\n\n    slashSeparatedUnits = Path.fixOrphanSubtopics(pathString, slashSeparatedUnits);\n\n    let pathArray = slashSeparatedUnits.map((slashSeparatedUnit) => {\n      // Capture two groups: (letters)#(optional_more_letters)\n      let match = slashSeparatedUnit.match(/([^#]*)(?:#([^#]*))?/);\n      return [\n        match[1] || match[2] || null,\n        match[2] || match[1] || null,\n      ];\n    }).filter((segment) => segment[0] !== null);\n\n    return pathArray;\n  }\n\n  static arrayToString(pathArray) {\n    if (Array.isArray(pathArray) && pathArray.length === 0) {\n      return '/';\n    }\n\n    if (!(Array.isArray(pathArray) && Array.isArray(pathArray[0]))) {\n      throw 'Path array must be two-dimensional array';\n    }\n\n    let pathString = '/';\n\n    if (projectPathPrefix) {\n      pathString += projectPathPrefix;\n    }\n\n    pathString += pathArray.map(([topic, subtopic]) => {\n      let pathSegmentString = slugFor(topic);\n      if (subtopic && subtopic !== topic) {\n        pathSegmentString += \"#\" + slugFor(subtopic);\n      }\n      return pathSegmentString;\n    }).join('/');\n\n    return pathString;\n  }\n\n  static fixOrphanSubtopics(pathString, slashSeparatedUnits) {\n    // eg /Topic/#Subtopic/A#B  -> /Topic#Subtopic/A#B\n\n    if (pathString.match(/\\/#\\w+/)) {\n      for (let i = 1; i < slashSeparatedUnits.length; i++) {\n        if (slashSeparatedUnits[i].match(/^#/)) {\n          if (!slashSeparatedUnits[i - 1].match(/#/)) { // eg /Topic/#Subtopic -> /Topic#Subtopic\n            let newItem = slashSeparatedUnits[i - 1] + slashSeparatedUnits[i];\n            let newArray = slashSeparatedUnits.slice(0, i - 1).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          } else { // eg /Topic#Subtopic/#Subtopic2 -> /Topic#Subtopic/Subtopic2\n            let newItem = slashSeparatedUnits[i].slice(1);\n            let newArray = slashSeparatedUnits.slice(0, i).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          }\n        }\n      }\n    }\n\n    return slashSeparatedUnits;\n  }\n\n  static validateConnectingLink(parentElement, pathToDisplay) {\n    if (parentElement === canopyContainer) return;\n    let parentParagraph = new Paragraph(parentElement);\n    if (!parentParagraph.linkBySelector(Link.hasTarget(pathToDisplay.firstTopic))) {\n      throw \"Parent element has no connecting link to subsequent path segment\";\n    }\n  }\n\n  static elementAtRelativePath(suppliedPath, suppliedRootElement) {\n    let rootElement = suppliedRootElement;\n    if (!suppliedRootElement) { rootElement = canopyContainer; }\n    let path = suppliedPath.clone;\n\n    let currentNode = rootElement;\n    if (rootElement === canopyContainer) {\n      currentNode = rootElement.querySelector(\n        `[data-topic-name=\"${path.firstTopic}\"]` +\n        `[data-subtopic-name=\"${path.firstSubtopic}\"]` +\n        `[data-path-depth=\"${0}\"]`\n      );\n      if (path.length === 1) { return currentNode; }\n      path = path.withoutFirstSegment;\n    }\n\n    let subpath = path.clone;\n    for (let i = 0; i < path.length; i++) {\n      let newPathDepth = Number(currentNode.dataset.pathDepth) + 1;\n\n      currentNode = currentNode.querySelector(\n        `[data-topic-name=\"${subpath.firstTopic}\"]` +\n        `[data-subtopic-name=\"${subpath.firstSubtopic}\"]` +\n        `[data-path-depth=\"${newPathDepth}\"]`\n      );\n\n      subpath = subpath.withoutFirstSegment;\n    }\n\n    return currentNode;\n  }\n\n  static setPath(newPath) {\n    let oldPath = Path.current;\n    let documentTitle = newPath.firstTopic;\n    let historyApiFunction = newPath.equals(oldPath) ? replaceState : pushState;\n\n    historyApiFunction(\n      history.state, // this will be changed via Link#persistInHistory\n      documentTitle,\n      newPath.string\n    );\n\n    function replaceState(a, b, c) {\n      history.replaceState(a, b, c);\n    }\n\n    function pushState(a, b, c) {\n      history.pushState(a, b, c);\n    }\n  }\n}\n\nexport default Path;\n","function renderStyledText(text) {\n  let buffer = '';\n  let escaped = false;\n  let styles = {\n    B: false,\n    I: false,\n    S: false,\n    CODE: false\n  };\n\n  let stylesByText = {\n    '_': 'I',\n    '*': 'B',\n    '~': 'S',\n    '`': 'CODE'\n  }\n\n  let elements = [];\n\n  for (let i = 0; i < text.length; i++) {\n    if (!escaped && ['_', '*', '~', '`'].includes(text[i])) {\n      let textNode = document.createTextNode(buffer);\n      buffer = '';\n      let styleElementHead;\n      let styleElementTail;\n\n      Object.keys(styles).forEach(function(styleKey) {\n        if (styles[styleKey]) {\n          let element = document.createElement(styleKey);\n          styleElementTail && styleElementTail.appendChild(element);\n          styleElementHead = styleElementHead || element;\n          styleElementTail = element;\n        }\n      });\n\n      if (styleElementTail) {\n        styleElementTail.appendChild(textNode);\n        elements.push(styleElementHead);\n      } else {\n        elements.push(textNode);\n      }\n      styles[stylesByText[text[i]]] = !styles[stylesByText[text[i]].toUpperCase()];\n    } else if (!escaped && text[i] === '\\\\') {\n      escaped = true;\n    } else {\n      buffer += text[i];\n      escaped = false;\n    }\n  }\n\n  if (buffer) {\n    let textNode = document.createTextNode(buffer);\n    elements.push(textNode);\n  }\n\n  return elements;\n}\n\nexport default renderStyledText;\n","import { canopyContainer } from 'helpers/getters';\n\nimport renderStyledText from 'render/render_styled_text';\nimport displayPath from 'display/display_path';\n\nfunction setHeader(topicName) {\n  let existingHeader = document.querySelector('#_canopy h1')\n  if (existingHeader) { existingHeader.remove(); }\n  let headerDomElement = document.createElement('h1');\n  let styleElements = renderStyledText(topicName);\n  Array.from(styleElements).forEach((element) => {headerDomElement.appendChild(element)});\n  canopyContainer.prepend(headerDomElement);\n};\n\nfunction determineParagraphToDisplay(linkToSelect, paragraph, displayOptions) {\n  // if (linkToSelect && displaySectionBelowLink(linkToSelect)) {\n    // return childSectionElementOfParentLink(linkToSelect);\n  // } else {\n    return paragraph;\n  // }\n}\n\nfunction displaySectionBelowLink(linkToSelect) {\n  return linkToSelect &&\n    (\n      linkToSelect.dataset.type === 'local' ||\n      redundantParentLinkInSameParagraphAsPrimary(linkToSelect)\n    );\n}\n\nfunction redundantParentLinkInSameParagraphAsPrimary(linkToSelect) {\n  return linkToSelect &&\n    linkToSelect.dataset.type === 'redundant-local' &&\n    siblingOfLinkLike(linkToSelect, (linkElement) => {\n      return linkElement.dataset &&\n        linkElement.dataset.targetTopic === linkToSelect.dataset.targetTopic &&\n        linkElement.dataset.targetSubtopic === linkToSelect.dataset.targetSubtopic;\n    })\n}\n\nfunction hideAllSectionElements() {\n  Array.from(document.getElementsByTagName(\"section\")).forEach((sectionElement) => {\n    sectionElement.style.display = 'none';\n  });\n}\n\nfunction deselectAllLinks() {\n  Array.from(document.getElementsByTagName(\"a\")).forEach((linkElement) => {\n    linkElement.classList.remove('canopy-selected-link');\n    linkElement.classList.remove('canopy-open-link');\n  });\n}\n\nfunction hideSectionElement(sectionElement) {\n  sectionElement.style.display = 'none';\n}\n\nfunction showSectionElement(sectionElement) {\n  sectionElement.style.display = 'block';\n}\n\nfunction showsectionElementContainingLink(linkElement) {\n  showSectionElement(sectionElementContainingLink(linkElement));\n}\n\nfunction tryPathPrefix(path, displayOptions) {\n  console.log(\"No section element found for path: \", JSON.stringify(path.toString()));\n  console.log(\"Trying: \", JSON.stringify(path.withoutLastSegment));\n  if (path.length > 1) {\n    return displayPath(path.withoutLastSegment, null, displayOptions);\n  } else {\n    throw \"Invalid path: \" + path.array;\n  }\n}\n\nconst resetDom = () => {\n  deselectAllLinks();\n  hideAllSectionElements();\n}\n\nexport {\n  setHeader,\n  displaySectionBelowLink,\n  resetDom,\n  tryPathPrefix\n};\n","import Path from 'models/path';\nimport { canopyContainer } from 'helpers/getters';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\nimport updateView from 'display/update_view';\nimport {\n  setHeader,\n  addSelectedLinkClass,\n  tryPathPrefix,\n  resetDom\n} from 'display/helpers';\n\nconst displayPath = (pathToDisplay, linkToSelect, displayOptions) => {\n  displayOptions = displayOptions || {};\n  if (!pathToDisplay.paragraph) return tryPathPrefix(pathToDisplay, displayOptions);\n  if (linkToSelect && linkToSelect.contradicts(pathToDisplay)) {\n    console.log(`Path: \"${pathToDisplay}\" contradicts link selection path: \"${linkToSelect.pathWhenSelected}\"`)\n    return updateView(linkToSelect.pathWhenSelected, linkToSelect, displayOptions);\n  }\n\n  resetDom();\n\n  if (!displayOptions.pathAlreadySet) Path.setPath(pathToDisplay);\n  setHeader(Paragraph.pageRoot.displayTopicName);\n  document.title = pathToDisplay.firstTopic;\n  Link.select(linkToSelect); // if null, persists deselect\n\n  displayPathTo(pathToDisplay.paragraph, linkToSelect);\n  window.scrollTo(0, canopyContainer.scrollHeight);\n};\n\nconst displayPathTo = (paragraph) => {\n  paragraph.display();\n  if (paragraph.isPageRoot) return;\n  paragraph.parentLink && paragraph.parentLink.open();\n  displayPathTo(paragraph.parentParagraph);\n}\n\nexport default displayPath;\n","let REQUEST_CACHE = {};\n\nexport default REQUEST_CACHE;\n","import { slugFor } from 'helpers/identifiers';\nimport { onParentLinkClick, onGlobalLinkClick } from 'render/click_handlers';\nimport externalLinkIconSvg from 'raw-loader!assets/external_link_icon/icon.svg';\nimport renderStyledText from 'render/render_styled_text';\nimport eagerLoad from 'requests/eager_load';\nimport Link from 'models/link';\n\nfunction renderTokenElement(token, renderContext) {\n  if (token.type === 'text') {\n    return renderTextToken(token);\n  } else if (token.type === 'local') {\n    return renderParentLink(token, renderContext);\n  } else if (token.type === 'global') {\n    return renderGlobalLink(token, renderContext);\n  } else if (token.type === 'url') {\n    return renderLinkLiteral(token);\n  } else if (token.type === 'image') {\n    return renderImage(token);\n  } else if (token.type === 'html') {\n    return renderHtml(token);\n  } else if (token.type === 'footnote') {\n    return renderFootnoteSymbol(token);\n  }\n}\n\nfunction renderTextToken(token) {\n  let spanElement = document.createElement('SPAN');\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, spanElement);\n\n  return spanElement;\n}\n\nfunction renderParentLink(token, renderContext) {\n  let {\n    localLinkSubtreeCallback\n  } = renderContext;\n\n  localLinkSubtreeCallback(token);\n  return renderRegularParentLink(token)\n}\n\nfunction renderRegularParentLink(token) {\n  let linkElement = renderSharedParentLinkBase(token);\n  linkElement.classList.add('canopy-local-link');\n  linkElement.dataset.type = 'local';\n  linkElement.href = `/${slugFor(token.targetTopic)}#${slugFor(token.enclosingSubtopic)}`;\n  return linkElement;\n}\n\nfunction renderRedundantParentLink(token) {\n  let linkElement = renderSharedParentLinkBase(token);\n  linkElement.classList.add('canopy-redundant-local-link');\n  linkElement.dataset.type = 'redundant-local';\n  linkElement.href = `/${slugFor(token.enclosingTopic)}#${slugFor(token.enclosingSubtopic)}`;\n  return linkElement;\n}\n\nfunction renderSharedParentLinkBase(token) {\n  let styleElements = renderStyledText(token.text);\n  let linkElement = document.createElement('a');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n  appendElementsToParent(styleElements, linkElement);\n  linkElement.addEventListener(\n    'click',\n    onParentLinkClick(token.targetTopic, token.targetSubtopic, new Link(linkElement))\n  );\n  return linkElement;\n}\n\nfunction renderGlobalLink(token, renderContext) {\n  let {\n    pathArray,\n    subtopicName,\n    globalLinkSubtreeCallback\n  } = renderContext;\n\n  let linkElement = createGlobalLinkElement(token, pathArray);\n\n  globalLinkSubtreeCallback(token, linkElement);\n\n  return linkElement;\n}\n\nfunction createGlobalLinkElement(token) {\n  let styleElements = renderStyledText(token.text);\n  let linkElement = document.createElement('a');\n  appendElementsToParent(styleElements, linkElement);\n  linkElement.classList.add('canopy-global-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.type = 'global';\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n  linkElement.href = `/${slugFor(token.targetTopic)}#${slugFor(token.targetSubtopic)}`;\n  linkElement.addEventListener(\n    'click',\n    onGlobalLinkClick(new Link(linkElement))\n  );\n  return linkElement\n}\n\nfunction renderLinkLiteral(token) {\n  let linkSpan = document.createElement('SPAN');\n  let linkElement = document.createElement('a');\n  linkSpan.classList.add('canopy-url-link-span');\n  linkElement.classList.add('canopy-url-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.setAttribute('href', token.url);\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n  linkElement.dataset.type = 'url';\n  linkElement.dataset.text = token.text;\n  linkSpan.appendChild(linkElement);\n  linkElement.innerHTML += externalLinkIconSvg.replace(/\\r?\\n|\\r/g, '');\n  return linkSpan;\n}\n\nfunction renderImage(token) {\n  let divElement = document.createElement('DIV');\n  divElement.classList.add('canopy-image-div');\n\n  let imageElement = document.createElement('IMG');\n  divElement.appendChild(imageElement);\n\n  imageElement.setAttribute('src', token.resourceUrl);\n\n  let anchorElement = document.createElement('A');\n  anchorElement.setAttribute('href', token.anchorUrl || token.resourceUrl);\n  anchorElement.appendChild(imageElement);\n  divElement.appendChild(anchorElement);\n\n  if (token.title) {\n    imageElement.setAttribute('title', token.title);\n    let captionElement = document.createElement('SUP');\n    let captionDiv = document.createElement('DIV');\n    captionElement.appendChild(document.createTextNode(token.title));\n    captionElement.classList.add('canopy-image-caption');\n    captionDiv.classList.add('canopy-caption-div');\n    divElement.appendChild(captionElement);\n  } else {\n    divElement.appendChild(anchorElement);\n  }\n\n  if (token.altText) {\n    imageElement.setAttribute('alt', token.altText);\n  }\n\n  return divElement;\n}\n\nfunction renderHtml(token) {\n  let divElement = document.createElement('DIV');\n  divElement.innerHTML = token.html;\n  divElement.classList.add('canopy-raw-html');\n  return divElement;\n}\n\n\nfunction renderFootnoteSymbol(token) {\n  let superscriptElement = document.createElement('SUP');\n  let textNode = document.createTextNode(token.text);\n  superscriptElement.appendChild(textNode);\n  return superscriptElement;\n}\n\nfunction appendElementsToParent(collection, parent) {\n  collection.forEach((item) => {\n    parent.appendChild(item);\n  });\n}\n\nexport default renderTokenElement;\n","import updateView from 'display/update_view';\nimport { sectionElementContainingLink } from 'helpers/getters';\nimport Path from 'models/path';\n\nfunction onParentLinkClick (targetTopic, targetSubtopic, link) {\n  return (e) => {\n    e.preventDefault();\n    let pathToLink = link.enclosingParagraph.path;\n    let newPath;\n\n    if (link.isOpen) {\n      newPath = pathToLink.replaceTerminalSubtopic(link.enclosingParagraph.subtopicName);\n    } else {\n      newPath = pathToLink.replaceTerminalSubtopic(link.targetSubtopic);\n    }\n\n    updateView(newPath);\n  };\n};\n\nfunction onGlobalLinkClick (link) {\n  return (e) => {\n    e.preventDefault();\n\n    let path;\n    if (e.altKey) {\n      if (link.isOpen) { // close global child\n        path = link.enclosingParagraph.path;\n      } else { // open global child\n        path = link.pathWhenSelected;\n      }\n    } else { // Redirect to global child\n      path = Path.forSegment(link.targetTopic, link.targetSubtopic);\n    }\n\n    if (e.metaKey) {\n      window.open(\n        location.origin + path.string,\n        '_blank'\n      );\n    } else {\n      updateView(path)\n    }\n  }\n}\n\nexport { onParentLinkClick, onGlobalLinkClick };\n","export default \"export default \\\"<svg xmlns:svg=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   xmlns=\\\\\\\"http://www.w3.org/2000/svg\\\\\\\"\\\\n   version=\\\\\\\"1.0\\\\\\\"\\\\n   width=\\\\\\\"12\\\\\\\"\\\\n   height=\\\\\\\"12\\\\\\\"\\\\n   id=\\\\\\\"svg2\\\\\\\">\\\\n  <defs id=\\\\\\\"defs4\\\\\\\"></defs>\\\\n  <rect\\\\n     width=\\\\\\\"5.9999995\\\\\\\"\\\\n     height=\\\\\\\"6\\\\\\\"\\\\n     x=\\\\\\\"1.5\\\\\\\"\\\\n     y=\\\\\\\"4.5\\\\\\\"\\\\n     id=\\\\\\\"rect3170\\\\\\\"\\\\n     style=\\\\\\\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:#0066cc;stroke-width:0.99999994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\\\\\\\"></rect>\\\\n  <path\\\\n     d=\\\\\\\"M 4,2.5 L 5,3.5 L 5.25,4.25 L 2.75,6.5 L 5.5,9.25 L 7.75,6.75 L 8.5,7 L 9.5,8 L 11,6.5 L 11,1 L 5.5,1 L 4,2.5 z\\\\\\\"\\\\n     id=\\\\\\\"path2395\\\\\\\"\\\\n     style=\\\\\\\"fill:#0066ff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\\\\\\\"></path>\\\\n  <path\\\\n     d=\\\\\\\"M 6,2 L 10,2 L 10,6 L 9.5,6.75 L 8.25,4.75 L 5.25,8 L 4,6.75 L 7.25,3.75 L 5.25,2.5 L 6,2 z\\\\\\\"\\\\n     id=\\\\\\\"path2398\\\\\\\"\\\\n     style=\\\\\\\"fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\\\\\\\" ></path>\\\\n</svg>\\\\n\\\";\";","import renderTokenElement from 'render/render_token_element';\n\nlet BlockRenderers = {\n  'text': renderTextBlock,\n  'code': renderCodeBlock,\n  'quote': renderQuoteBlock,\n  'list': renderListBlock,\n  'table': renderTableBlock,\n  'footnote': renderFootnoteBlock\n};\n\nfunction renderTextBlock(blockObject, renderContext) {\n  let lineSpans = [];\n\n  blockObject.tokensByLine.forEach(\n    (tokensOfLine, lineNumber) => {\n      let lineSpan = document.createElement('SPAN');\n      lineSpan.classList.add('canopy-text-span');\n      lineSpans.push(lineSpan);\n\n      tokensOfLine.forEach(\n        (token) => {\n          let tokenElement = renderTokenElement(token, renderContext);\n          lineSpan.appendChild(tokenElement);\n        }\n      )\n    }\n  );\n\n  return lineSpans;\n}\n\nfunction renderCodeBlock(blockObject, renderContext) {\n  let preElement = document.createElement('PRE');\n  let codeBlockElement = document.createElement('CODE');\n  preElement.appendChild(codeBlockElement);\n\n  blockObject.lines.forEach(\n    (lineText, lineNumber) => {\n      lineNumber > 0 && codeBlockElement.appendChild(document.createElement('BR'));\n      let lineTextNode = document.createTextNode(lineText);\n      codeBlockElement.appendChild(lineTextNode);\n    }\n  );\n\n  return [preElement];\n}\n\nfunction renderQuoteBlock(blockObject, renderContext) {\n  let blockQuoteElement = document.createElement('BLOCKQUOTE');\n\n  blockObject.tokensByLine.forEach(\n    (tokensOfLine, lineNumber) => {\n      lineNumber > 0 && blockQuoteElement.appendChild(\n        document.createElement('br')\n      );\n\n      tokensOfLine.forEach(\n        (token) => {\n          let tokenElement = renderTokenElement(token, renderContext);\n          blockQuoteElement.appendChild(tokenElement);\n        }\n      );\n    }\n  );\n\n  return [blockQuoteElement];\n}\n\nfunction renderListBlock(blockObject, renderContext) {\n  return renderListNodes(blockObject.topLevelNodes);\n\n  function renderListNodes(listNodeObjects) {\n    let listElement = blockObject.topLevelNodes[0].ordered ?\n      document.createElement('OL') :\n      document.createElement('UL');\n\n    listElement.setAttribute('type', listNodeObjects[0].ordinal);\n\n    listNodeObjects.forEach((listNodeObject) => {\n      let listItemElement = document.createElement('LI');\n\n      let tokenElementsOfLine = listNodeObject.tokensOfLine.forEach(\n        (token) => {\n          let tokenElement = renderTokenElement(token, renderContext);\n          listItemElement.appendChild(tokenElement);\n        }\n      );\n\n      if (listNodeObject.children.length > 0) {\n        let childList = renderListNodes(listNodeObject.children);\n        listItemElement.appendChild(childList);\n      }\n\n      listElement.appendChild(listItemElement);\n    });\n    return listElement;\n  }\n}\n\nfunction renderTableBlock(blockObject, renderContext) {\n  let tableElement = document.createElement('TABLE');\n  blockObject.tokensByCellByRow.forEach(\n    (tokensByCellOfRow, rowIndex) => {\n      let tableRowElement = document.createElement('TR');\n      tokensByCellOfRow.forEach(\n        (tokensOfCell) => {\n          let tableCellElement = document.createElement('TD');\n\n          tokensOfCell.forEach(\n            (token) => {\n              let tokenElement = renderTokenElement(token, renderContext);\n              tableCellElement.appendChild(tokenElement);\n            }\n          );\n\n          tableRowElement.appendChild(tableCellElement);\n        }\n      )\n      tableElement.appendChild(tableRowElement);\n    }\n  );\n  return [tableElement];\n}\n\nfunction renderFootnoteBlock(blockObject, renderContext) {\n  let horizonalRule = document.createElement('HR');\n  horizonalRule.classList.add('footnote-rule');\n\n  let footnoteSpans = Array.prototype.concat.apply([], blockObject.footnoteObjects.map(\n    (footnoteObject, index) => {\n      let footnoteSpan = document.createElement('SPAN');\n      footnoteSpan.classList.add('footnote-span');\n      let textNode = document.createTextNode(footnoteObject.superscript + '. ');\n      footnoteSpan.appendChild(textNode);\n      footnoteObject.tokens.forEach((token) => {\n        let tokenElement = renderTokenElement(token, renderContext);\n        footnoteSpan.appendChild(tokenElement);\n      });\n      let result = [];\n      index > 0 && result.push(document.createElement('BR'));\n      result.push(footnoteSpan);\n      return result;\n    }\n  ));\n\n  return [horizonalRule].concat(footnoteSpans);\n}\n\nexport default BlockRenderers;\n","import { htmlIdFor } from 'helpers/identifiers';\nimport displayPath from 'display/display_path';\nimport fetchAndRenderPath from 'render/fetch_and_render_path';\nimport BlockRenderers from 'render/block_renderers';\nimport eagerLoad from 'requests/eager_load';\nimport Path from 'models/path'\nimport Paragraph from 'models/paragraph';\n\nfunction renderDomTree(renderContext) {\n  let {\n    pathToDisplay,\n    subtopicName,\n    paragraphsBySubtopic\n  } = renderContext;\n\n  let sectionElement = createSectionElement(renderContext);\n\n  renderContext.promises = [];\n  renderContext.localLinkSubtreeCallback = localLinkSubtreeCallback(sectionElement, renderContext);\n  renderContext.globalLinkSubtreeCallback = globalLinkSubtreeCallback(sectionElement, renderContext);\n\n  let blocksOfParagraph = paragraphsBySubtopic[subtopicName];\n  let blockElements = renderElementsForBlocks(blocksOfParagraph, renderContext);\n\n  blockElements.forEach((blockElement) => {\n    let paragraph = new Paragraph(sectionElement);\n    paragraph.paragraphElement.appendChild(blockElement);\n  });\n\n  return Promise.all(renderContext.promises).then((_) => sectionElement);\n}\n\nfunction localLinkSubtreeCallback(sectionElement, renderContext) {\n  return (token) => {\n    let promisedSubtree = renderDomTree(\n      Object.assign({}, renderContext, {\n        subtopicName: token.targetSubtopic,\n        placeHolderElement: null\n      })\n    );\n\n    promisedSubtree.then((subtree) => {\n      sectionElement.appendChild(subtree);\n    });\n\n    renderContext.promises.push(promisedSubtree);\n  }\n}\n\nfunction globalLinkSubtreeCallback(sectionElement, renderContext) {\n  let {\n    pathToDisplay,\n    pathDepth,\n    subtopicName,\n    promises\n  } = renderContext;\n\n  return (token, linkElement) => {\n    eagerLoad(token.targetTopic);\n\n    if (globalLinkIsOpen(linkElement, pathToDisplay, subtopicName)) {\n      let newPath = pathToDisplay.withoutFirstSegment;\n      let whenTopicTreeAppended = fetchAndRenderPath(newPath, sectionElement);\n      promises.push(whenTopicTreeAppended)\n    }\n  }\n}\n\nfunction createSectionElement(renderContext) {\n  let {\n    topicName, subtopicName, displayTopicName, pathDepth\n  } = renderContext;\n\n  let sectionElement = document.createElement('section');\n  sectionElement.classList.add('canopy-section');\n  let paragraphElement = document.createElement('p');\n  paragraphElement.classList.add('canopy-paragraph');\n  sectionElement.appendChild(paragraphElement);\n  sectionElement.style.display = 'none';\n  sectionElement.dataset.topicName = topicName;\n  sectionElement.dataset.displayTopicName = displayTopicName;\n  sectionElement.dataset.subtopicName = subtopicName;\n  sectionElement.dataset.pathDepth = pathDepth;\n\n  if (topicName === subtopicName) {\n    pathDepth > 0 && sectionElement.prepend(document.createElement('hr'));\n    sectionElement.classList.add('canopy-topic-section');\n  }\n\n  return sectionElement;\n}\n\nfunction renderElementsForBlocks(blocksOfParagraph, renderContext) {\n  let elementArray = [];\n\n  blocksOfParagraph.forEach(\n    (blockObject) => {\n      let renderer = BlockRenderers[blockObject.type];\n      let blockElements = renderer(\n        blockObject,\n        renderContext\n      )\n      elementArray = elementArray.concat(blockElements);\n    }\n  );\n\n  return elementArray;\n}\n\nfunction globalLinkIsOpen(linkElement, path, currentlyRenderingSubtopicName) {\n  let subtopicOfPathContainingOpenGlobalReference = path.firstSubtopic;\n  let openGlobalLinkExists = path.secondTopic;\n\n  let openGlobalLinkTargetTopic = path.secondTopic;\n  let openGlobalLinkTargetSubtopic = openGlobalLinkTargetTopic;\n  let thisGlobalLinkIsPointingToTheRightThingToBeOpen =\n    linkElement.dataset.targetTopic === openGlobalLinkTargetTopic &&\n    linkElement.dataset.targetSubtopic === openGlobalLinkTargetSubtopic;\n\n  let thisGlobalLinkIsInCorrectSubtopicToBeOpen = currentlyRenderingSubtopicName === \n    subtopicOfPathContainingOpenGlobalReference;\n\n  return openGlobalLinkExists &&\n    thisGlobalLinkIsPointingToTheRightThingToBeOpen &&\n    thisGlobalLinkIsInCorrectSubtopicToBeOpen;\n    \n}\n\nexport default renderDomTree;\n","import { projectPathPrefix } from 'helpers/getters';\nimport { slugFor } from 'helpers/identifiers';\nimport REQUEST_CACHE from 'requests/request_cache';\n\nfunction eagerLoad(topicName) {\n  if (REQUEST_CACHE[topicName]) return;\n  let dataPath = projectPathPrefix + '/_data/' + slugFor(topicName.toLowerCase()) + '.json';\n\n  return fetch(dataPath).\n    then(res => {\n      return res.json().then((json) => {\n        REQUEST_CACHE[topicName] = json;\n        return json;\n      });\n    });\n}\n\nexport default eagerLoad;\n","import renderDomTree from 'render/render_dom_tree';\nimport requestJson from 'requests/request_json';\nimport Paragraph from 'models/paragraph';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport { canopyContainer } from 'helpers/getters';\n\nconst fetchAndRenderPath = (pathToDisplay, parentElement) => {\n  if (pathToDisplay.length === 0) {\n    return Promise.resolve(null);\n  }\n\n  let preexistingElement = Path.elementAtRelativePath(pathToDisplay.firstSegment, parentElement);\n  if (preexistingElement) {\n    Path.validateConnectingLink(parentElement, pathToDisplay);\n    return fetchAndRenderPath(pathToDisplay.withoutFirstSegment, preexistingElement);\n  }\n\n  let uponResponsePromise = requestJson(pathToDisplay.firstTopic);\n\n  let uponRender = uponResponsePromise.then(({ paragraphsBySubtopic, displayTopicName }) => {\n    return renderDomTree(\n      {\n        topicName: pathToDisplay.firstTopic,\n        subtopicName: pathToDisplay.firstTopic,\n        pathToDisplay,\n        displayTopicName,\n        paragraphsBySubtopic,\n        pathDepth: Number(parentElement.dataset.pathDepth) + 1 || 0\n      },\n    );\n  });\n\n  return uponRender.then((domTree) => parentElement.appendChild(domTree));\n}\n\nfunction createPlaceholderElement(topicName, subtopicName, pathDepth) {\n  let sectionElement = document.createElement('section');\n  sectionElement.dataset.topicName = topicName;\n  sectionElement.dataset.subtopicName = subtopicName;\n  sectionElement.dataset.pathDepth = pathDepth;\n  return sectionElement;\n}\n\nexport default fetchAndRenderPath;\n","import { slugFor } from 'helpers/identifiers';\nimport { canopyContainer, defaultTopic, projectPathPrefix } from 'helpers/getters';\nimport updateView from 'display/update_view';\nimport REQUEST_CACHE from 'requests/request_cache';\nimport Path from 'models/path';\n\nconst requestJson = (topicName) => {\n  if (REQUEST_CACHE[topicName]) return Promise.resolve(REQUEST_CACHE[topicName]);\n\n  let dataPath = projectPathPrefix + '/_data/' + slugFor(topicName.toLowerCase()) + '.json';\n\n  return fetch(dataPath).\n    then(res => {\n      return res.json().then((json) => {\n        REQUEST_CACHE[topicName] = json;\n        return json;\n      });\n    }).catch((e) => {\n      if (canopyContainer.childNodes.length === 0 && topicName !== defaultTopic) {\n        updateView(Path.default)\n      }\n      return Promise.reject(\"Unrecognized path: \" + topicName);\n    });\n}\n\nexport default requestJson;\n","import fetchAndRenderPath from 'render/fetch_and_render_path';\nimport displayPath from 'display/display_path';\nimport Link from 'models/link';\nimport Path from 'models/path';\nimport { defaultTopic, canopyContainer } from 'helpers/getters';\n\nconst updateView = (pathToDisplay, linkToSelect, displayOptions) => {\n  validatePathAndLink(pathToDisplay, linkToSelect);\n\n  let newTreeAppended = fetchAndRenderPath(pathToDisplay, canopyContainer);\n\n  newTreeAppended.then(() => {\n    displayPath(\n      pathToDisplay,\n      linkToSelect,\n      displayOptions\n    );\n  });\n}\n\nfunction validatePathAndLink(pathToDisplay, linkToSelect) {\n  if (!(pathToDisplay instanceof Path)) throw \"Invalid path argument\";\n  if (linkToSelect && !(linkToSelect instanceof Link)) throw \"Invalid link selection argument\";\n}\n\nexport default updateView;\n","import { canopyContainer } from 'helpers/getters';\n\nimport updateView from 'display/update_view';\nimport { deselectAllLinks } from 'display/helpers';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\n\nfunction moveUpward() {\n  let link = Link.selection;\n\n  if (link.enclosingParagraph.equals(Paragraph.pageRoot)) {\n    return updateView(link.enclosingParagraph.path);\n  }\n\n  return updateView(\n    link.parentLink.pathWhenSelected,\n    link.parentLink\n  );\n}\n\nfunction moveDownward() {\n  let path = Path.current;\n  let oldLink = Link.selection;\n\n  if (oldLink.isParent) {\n    let newLink = oldLink.targetParagraph.firstLink;\n\n    if (!newLink){\n      return;\n    }\n\n    if (newLink.isLocal) {\n      return updateView(\n        newLink.pathWhenSelected,\n        newLink\n      );\n    }\n\n    if (newLink.isGlobal) {\n      return updateView(\n        Path.current.addSegment(newLink.targetTopic, newLink.targetTopic),\n        Link.selection.targetParagraph.firstLink\n      );\n    }\n  }\n}\n\nfunction moveLeftward() {\n  let link = Link.selection.previousSibling || Link.selection.lastSibling;\n  return updateView(\n    link.pathWhenSelected,\n    link,\n  );\n}\n\nfunction moveRightward() {\n  let link = Link.selection.nextSibling || Link.selection.firstSibling;\n\n  return updateView(\n    link.pathWhenSelected,\n    link,\n  );\n}\n\nfunction moveDownOrRedirect(newTab, altKey) {\n  if (Link.selection.isLocal) {\n    return moveDownward();\n  }\n\n  if (Link.selection.isGlobal) {\n    let path;\n    let link;\n\n    if (altKey) { // in-line topic mode\n      if (Link.selection.targetParagraph.hasLinks) { // select first child link\n        link = Link.selection.targetParagraph.firstLink;\n        path = Paragraph.current.firstLink.pathWhenSelected;\n      } else { // there is nothing in the previewed child to select\n        return;\n      }\n    }\n\n    if (!altKey) { // redirecting to new topic page\n      path = Link.selection.targetPath.lastSegment;\n      link = Link.selectALink(path);\n    }\n\n    if (newTab) {\n      return window.open(\n        location.origin + path.string,\n        '_blank'\n      );\n    }\n\n    updateView(\n      path,\n      link\n    );\n  } else if (Link.selection.type === 'url') {\n    if (newTab) {\n      return window.open(\n        Link.selection.element.href,\n        '_blank'\n      );\n    } else {\n      window.location = Link.selection.element.href;\n    }\n  }\n}\n\nfunction depthFirstSearch(dfsDirectionInteger) {\n  let link = Link.selection;\n\n  // Open a parent link\n  if (link.isLocal && link.isClosed) {\n    return updateView(\n      Path.current.replaceTerminalSubtopic(link.targetSubtopic),\n      link.firstChildLink || link,\n    );\n  }\n\n  // Close a parent link\n  if (link.isLocal && link.isClosed && !link.targetParagraph.hasLinks) {\n    return updateView(\n      Path.current.replaceTerminalSubtopic(link.targetSubtopic),\n      link.parentLink.nextSibling || link.grandParentLink,\n    );\n  }\n\n  if (link.isGlobal) {\n    let linkToSelect = link.parentLink.nextSibling || link.grandParentLink;\n    return updateView(\n      linkToSelect.enclosingParagraph.path,\n      { linkToSelect }\n    );\n  }\n\n  // Move to the next sibling including parent link with no children\n  if (dfsDirectionInteger === 1 && link.nextSibling && !link.nextSibling.equals(link)) {\n    return updateView(\n      link.nextSibling.enclosingParagraph.path,\n      link.nextSibling,\n    );\n  }\n\n  if (dfsDirectionInteger === -1 && link.previousSibling && !link.previousSibling.equals(link)) {\n    return updateView(\n      link.nextSibling.enclosingParagraph.path,\n      link.previousSibling,\n    );\n  }\n\n  // Cycle\n  if (dfsDirectionInteger === 1 && link.topicParagraph.lastLink) {\n    return updateView(\n      Path.current,\n      link.firstSibling,\n    );\n  }\n\n  if (dfsDirectionInteger === -1 && link.topicParagraph.firstLink) {\n    return updateView(\n      Path.current,\n      link.lastSibling,\n    );\n  }\n}\n\nfunction zoomOnLocalPath() {\n  let currentLink = Link.selection;\n  let newPath = currentLink.localPathWhenSelected;\n\n  let newLink = new Link(() => currentLink.atNewPath(newPath));\n\n  return updateView(\n    newPath,\n    newLink,\n  );\n}\n\nfunction removeSelection() {\n  return updateView(Path.current);\n}\n\nexport {\n  moveUpward,\n  moveDownward,\n  moveLeftward,\n  moveRightward,\n  moveDownOrRedirect,\n  depthFirstSearch,\n  zoomOnLocalPath,\n  removeSelection\n};\n","import {\n  currentSection,\n  selectedLink,\n  metadataForLink,\n} from 'helpers/getters';\n\nimport {\n  moveUpward,\n  moveDownward,\n  moveLeftward,\n  moveRightward,\n  moveDownOrRedirect,\n  depthFirstSearch,\n  zoomOnLocalPath,\n  removeSelection\n} from 'keys/key_handlers';\nimport updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nconst registerKeyListeners = () => {\n  window.addEventListener('keydown', function(e) {\n    let modifiers =\n      (e.metaKey ? 'command-' : '') +\n      (e.altKey ? 'alt-' : '') +\n      (e.ctrlKey ? 'ctrl-' : '') +\n      (e.shiftKey ? 'shift-' : '');\n\n    let keyName = keyNames[e.keyCode];\n    let shortcutName = modifiers + keyName;\n\n    if (keyName === 'tab') {\n      e.preventDefault();\n    }\n\n    if (Link.selection) {\n      (shortcutRelationships[shortcutName]||function(){})()\n    } else if (shortcutRelationships[shortcutName]) {\n      updateView(\n        Path.current,\n        Link.selectALink(Path.current)\n      );\n    }\n  });\n}\n\nconst shortcutRelationships = {\n  'left': moveLeftward,\n  'up': moveUpward,\n  'down': moveDownward,\n  'right': moveRightward,\n\n  'h': moveLeftward,\n  'j': moveDownward,\n  'k': moveUpward,\n  'l': moveRightward,\n\n  'escape': removeSelection,\n  'z': zoomOnLocalPath,\n\n  'return': moveDownOrRedirect,\n  'command-return': moveDownOrRedirect.bind(null, true),\n  'alt-return': moveDownOrRedirect.bind(null, false, true),\n  'command-alt-return': moveDownOrRedirect.bind(null, true, true),\n\n  'tab': depthFirstSearch.bind(null, 1),\n  'shift-tab': depthFirstSearch.bind(null, -1)\n}\n\nconst keyNames = {\n  37: 'left',\n  39: 'right',\n  38: 'up',\n  40: 'down',\n\n  71: 'g',\n  72: 'h',\n  75: 'k',\n  74: 'j',\n  76: 'l',\n  186: ';',\n  90: 'z',\n\n  13: 'return',\n  9: 'tab',\n  27: 'escape',\n\n  192: '`',\n\n  49: '1',\n  50: '2',\n  51: '3',\n  52: '4',\n  53: '5',\n\n}\n\nexport default registerKeyListeners;\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nfunction registerPopStateListener() {\n  window.addEventListener('popstate', (e) => {\n    Link.persistInHistory(Link.selection);\n\n    let linkSelection = Link.selectionPresentInEvent(e) ? new Link(e.state) : null;\n\n    updateView(\n      Path.current,\n      linkSelection || Link.sessionSelection,\n      {\n        pathAlreadySet: true\n      }\n    );\n  });\n}\n\nexport default registerPopStateListener;\n","import css from 'style/canopy.scss';\nimport updateView from 'display/update_view';\nimport registerKeyListeners from 'keys/register_key_listeners';\nimport registerPopStateListener from 'history/register_pop_state_listener';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nregisterKeyListeners();\nregisterPopStateListener();\n\nupdateView(\n  Path.initial,\n  Link.priorSelection\n);\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","nc","Paragraph","sectionElement","tagName","classList","contains","transferDataset","Path","paragraph","link","Link","ancestorElement","otherParagraph","display","topicName","dataset","subtopicName","pathDepth","paragraphElement","Array","from","childNodes","find","pathArray","currentElement","canopyContainer","currentTopic","unshift","linkObjects","linkElements","querySelectorAll","links","callback","filter","targetTopic","targetSubtopic","linkBySelector","parentParagraph","linkByTarget","displayTopicName","parentElement","isTopic","argument","metadataObject","selectorCallback","linkElement","pathString","path","string","text","relativeLinkNumber","object","linkToSelect","add","persistInHistory","persistInSession","state","containsLinkSelectionMetadata","sessionData","sessionStorage","getItem","parse","history","historySelection","sessionSelection","selectedLink","linkData","metadata","setItem","location","pathname","hash","replaceState","title","href","parentLink","firstLink","topic","subtopic","otherLink","pathWhenSelected","elementFromMetadata","HTMLAnchorElement","_targetTopic","_targetSubtopic","_enclosingTopic","enclosingTopic","_enclosingSubtopic","enclosingSubtopic","_typeValue","type","enclosingSectionElement","isParent","enclosingParagraph","childElement","newPath","matcher","isGlobal","slice","lastSegment","matches","storedRelativeLinkNumber","indexOf","collectMetadata","addSegment","isLocal","replaceTerminalSubtopic","equals","siblings","targetParagraph","lastLink","includes","isOpen","getElementById","defaultTopic","projectPathPrefix","className","slugFor","replace","isArray","arrayToString","String","stringToArray","current","empty","slashSeparatedUnits","split","fixOrphanSubtopics","slashSeparatedUnit","match","segment","pathSegmentString","newItem","pathToDisplay","firstTopic","suppliedPath","suppliedRootElement","rootElement","clone","currentNode","firstSubtopic","withoutFirstSegment","subpath","newPathDepth","Number","oldPath","documentTitle","b","c","pushState","otherPath","newSubtopic","withoutLastSegment","elementAtRelativePath","buffer","escaped","styles","B","I","S","CODE","stylesByText","elements","textNode","styleElementHead","styleElementTail","keys","forEach","styleKey","toUpperCase","displayPathTo","isPageRoot","open","displayOptions","contradicts","console","log","updateView","getElementsByTagName","pathAlreadySet","existingHeader","headerDomElement","styleElements","renderStyledText","prepend","setHeader","scrollTo","scrollHeight","displayPath","array","tryPathPrefix","appendElementsToParent","collection","parent","token","renderContext","spanElement","renderTextToken","localLinkSubtreeCallback","addEventListener","preventDefault","pathToLink","renderSharedParentLinkBase","renderRegularParentLink","renderParentLink","globalLinkSubtreeCallback","altKey","metaKey","origin","createGlobalLinkElement","renderGlobalLink","linkSpan","url","innerHTML","externalLinkIconSvg","renderLinkLiteral","divElement","imageElement","resourceUrl","anchorElement","anchorUrl","captionElement","captionDiv","altText","renderImage","html","renderHtml","superscriptElement","renderFootnoteSymbol","blockObject","lineSpans","tokensByLine","tokensOfLine","lineNumber","lineSpan","tokenElement","renderTokenElement","preElement","codeBlockElement","lines","lineText","lineTextNode","blockQuoteElement","renderListNodes","listNodeObjects","listElement","topLevelNodes","ordered","ordinal","listNodeObject","listItemElement","children","childList","tableElement","tokensByCellByRow","tokensByCellOfRow","rowIndex","tableRowElement","tokensOfCell","tableCellElement","horizonalRule","footnoteSpans","footnoteObjects","footnoteObject","footnoteSpan","superscript","tokens","renderDomTree","paragraphsBySubtopic","createSectionElement","promises","promisedSubtree","assign","placeHolderElement","then","subtree","REQUEST_CACHE","dataPath","toLowerCase","fetch","res","json","eagerLoad","currentlyRenderingSubtopicName","subtopicOfPathContainingOpenGlobalReference","openGlobalLinkExists","secondTopic","openGlobalLinkTargetTopic","openGlobalLinkTargetSubtopic","thisGlobalLinkIsPointingToTheRightThingToBeOpen","globalLinkIsOpen","whenTopicTreeAppended","fetchAndRenderPath","blockElements","blocksOfParagraph","elementArray","renderer","BlockRenderers","renderElementsForBlocks","blockElement","Promise","all","_","resolve","preexistingElement","firstSegment","reject","requestJson","domTree","validatePathAndLink","moveUpward","moveDownward","oldLink","newLink","moveLeftward","moveRightward","moveDownOrRedirect","newTab","depthFirstSearch","dfsDirectionInteger","isClosed","firstChildLink","hasLinks","nextSibling","grandParentLink","previousSibling","topicParagraph","firstSibling","lastSibling","shortcutRelationships","currentLink","localPathWhenSelected","atNewPath","bind","keyNames","modifiers","ctrlKey","shiftKey","keyName","keyCode","shortcutName","linkSelection"],"sourceRoot":""}