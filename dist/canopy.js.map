{"version":3,"file":"canopy.js","mappings":"qBAgBAA,EAAOC,QATP,SAASC,EAAsBC,GAC7B,IAAIC,EAAYD,EAAOE,QAAQ,+CAAgD,UAC/E,OAAID,IAAcD,EACTD,EAAsBE,GAEtBD,CAEV,C,sLCdD,IAAID,EAAwBI,EAAQ,KACpCA,EAAQ,K,IAEFC,EAAAA,WAGJ,WAAYJ,I,4FAAQ,SAClBK,KAAKC,QAAUN,EAEfK,KAAKE,UAAYR,EAAsBC,GACpCQ,MAAM,SAASC,KAAI,SAAAT,GAAM,OAAIA,EAAOE,QAAQ,MAAO,GAA1B,IAA+BQ,KAAK,QAEhEL,KAAKM,iBAAmBC,IAAIC,OAAOR,KAAKE,WAExCF,KAAKS,KAAOT,KAAKE,UACdL,QAAQ,KAAM,OACdA,QAAQ,QAAS,UACjBA,QAAQ,KAAM,OACdA,QAAQ,KAAM,OACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,KAEjBG,KAAKU,KAAOV,KAAKE,UACdS,cACAd,QAAQ,MAAO,IACfA,QAAQ,KAAM,IACdA,QAAQ,KAAM,IACdA,QAAQ,KAAM,KAGjBG,KAAKY,SAAWZ,KAAKS,KAErBT,KAAKa,gBAAkBC,mBAAmBd,KAAKS,KAChD,C,iDAED,SAAqBd,GAEnB,IAAIoB,EAAQ,IAAIhB,EADhBJ,EAASA,EAAOE,QAAQ,YAAa,SAGrC,OADAkB,EAAMd,QAAU,KACTc,CACR,G,6BAED,SAAuBpB,GACrBA,EA4BJ,SAAoCA,GAElC,OAAOA,EAAOQ,MAAM,WACjBC,KAAI,SAAAT,GAAM,OAAIA,EACZQ,MAAM,SACNC,KAAI,SAAAT,GAAM,OAAIA,EAAOE,QAAQ,KAAM,IAAzB,IACVQ,KAAK,OAHG,IAITA,KAAK,SACV,CApCYW,CAA2BrB,GAOpC,IAAIoB,EAAQ,IAAIhB,EALhBJ,GADAA,EAASsB,mBAAmBtB,IAEzBE,QAAQ,MAAO,OACfA,QAAQ,KAAM,OACdA,QAAQ,KAAM,QAKjB,OADAkB,EAAMd,QAAU,KACTc,CACR,I,yFAnDGhB,GAsDNA,EAAMiB,2BAA6B,SAAoCrB,GAErE,OAAOA,EAAOQ,MAAM,WACjBC,KAAI,SAAAT,GAAM,OAAIA,EACZQ,MAAM,SACNC,KAAI,SAAAT,GAAM,OAAIA,EAAOE,QAAQ,KAAM,IAAzB,IACVQ,KAAK,OAHG,IAITA,KAAK,SACV,EAEDN,EAAMmB,2BAA6B,SAAoCvB,GACrE,OAAOA,EAAOQ,MAAM,KAAKC,KAAI,SAAAT,GAAM,OAAK,IAAII,EAAMJ,GAASiB,QAAxB,IAAkCP,KAAK,IAC3E,EAYDb,EAAOC,QAAUM,C,6EC9EboB,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAAC5B,EAAO6B,GAAI,k6EAAm6E,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,wCAAwC,MAAQ,GAAG,SAAW,sjCAAsjC,eAAiB,CAAC,2tHAA2tH,WAAa,MAEr1O,S,uBCDA7B,EAAOC,QAAU,SAAU6B,GACzB,IAAIC,EAAO,GA6FX,OA3FAA,EAAKC,SAAW,WACd,OAAOxB,KAAKI,KAAI,SAAUqB,GACxB,IAAIC,EAAU,GACVC,OAA+B,IAAZF,EAAK,GA4B5B,OA1BIA,EAAK,KACPC,GAAW,cAAcE,OAAOH,EAAK,GAAI,QAGvCA,EAAK,KACPC,GAAW,UAAUE,OAAOH,EAAK,GAAI,OAGnCE,IACFD,GAAW,SAASE,OAAOH,EAAK,GAAGI,OAAS,EAAI,IAAID,OAAOH,EAAK,IAAM,GAAI,OAG5EC,GAAWJ,EAAuBG,GAE9BE,IACFD,GAAW,KAGTD,EAAK,KACPC,GAAW,KAGTD,EAAK,KACPC,GAAW,KAGNA,CACT,IAAGrB,KAAK,GACV,EAGAkB,EAAKO,EAAI,SAAWC,EAASC,EAAOC,EAAQC,EAAUC,GAC7B,iBAAZJ,IACTA,EAAU,CAAC,CAAC,KAAMA,OAASK,KAG7B,IAAIC,EAAyB,CAAC,EAE9B,GAAIJ,EACF,IAAK,IAAIK,EAAI,EAAGA,EAAItC,KAAK6B,OAAQS,IAAK,CACpC,IAAIjB,EAAKrB,KAAKsC,GAAG,GAEP,MAANjB,IACFgB,EAAuBhB,IAAM,EAEjC,CAGF,IAAK,IAAIkB,EAAK,EAAGA,EAAKR,EAAQF,OAAQU,IAAM,CAC1C,IAAId,EAAO,GAAGG,OAAOG,EAAQQ,IAEzBN,GAAUI,EAAuBZ,EAAK,WAIrB,IAAVU,SACc,IAAZV,EAAK,KAGdA,EAAK,GAAK,SAASG,OAAOH,EAAK,GAAGI,OAAS,EAAI,IAAID,OAAOH,EAAK,IAAM,GAAI,MAAMG,OAAOH,EAAK,GAAI,MAF/FA,EAAK,GAAKU,GAOVH,IACGP,EAAK,IAGRA,EAAK,GAAK,UAAUG,OAAOH,EAAK,GAAI,MAAMG,OAAOH,EAAK,GAAI,KAC1DA,EAAK,GAAKO,GAHVP,EAAK,GAAKO,GAOVE,IACGT,EAAK,IAGRA,EAAK,GAAK,cAAcG,OAAOH,EAAK,GAAI,OAAOG,OAAOH,EAAK,GAAI,KAC/DA,EAAK,GAAKS,GAHVT,EAAK,GAAK,GAAGG,OAAOM,IAOxBX,EAAKH,KAAKK,GACZ,CACF,EAEOF,CACT,C,uBCnGA/B,EAAOC,QAAU,SAAUgC,GACzB,IAAIC,EAAUD,EAAK,GACfe,EAAaf,EAAK,GAEtB,IAAKe,EACH,OAAOd,EAGT,GAAoB,mBAATe,KAAqB,CAC9B,IAAIC,EAASD,KAAKE,SAAS7B,mBAAmB8B,KAAKC,UAAUL,MACzDM,EAAO,+DAA+DlB,OAAOc,GAC7EK,EAAgB,OAAOnB,OAAOkB,EAAM,OACpCE,EAAaR,EAAWS,QAAQ7C,KAAI,SAAU8C,GAChD,MAAO,iBAAiBtB,OAAOY,EAAWW,YAAc,IAAIvB,OAAOsB,EAAQ,MAC7E,IACA,MAAO,CAACxB,GAASE,OAAOoB,GAAYpB,OAAO,CAACmB,IAAgB1C,KAAK,KACnE,CAEA,MAAO,CAACqB,GAASrB,KAAK,KACxB,C,sBCpBE,IAAS+C,SAYQ,IAAV,EAAAC,EAAwB,EAAAA,EAASrD,KARxCR,EAAOC,QAQuC,SAAS2D,GAExD,GAAIA,EAAK7C,KAAO6C,EAAK7C,IAAIC,OACxB,OAAO4C,EAAK7C,IAAIC,OAIjB,IAAI8C,EAAY,SAASC,GACxB,GAAwB,GAApBC,UAAU3B,OACb,MAAM,IAAI4B,UAAU,sCAQrB,IANA,IAGIC,EAHA/D,EAASgE,OAAOJ,GAChB1B,EAASlC,EAAOkC,OAChB+B,GAAS,EAETC,EAAS,GACTC,EAAgBnE,EAAOoE,WAAW,KAC7BH,EAAQ/B,GAOA,IANhB6B,EAAW/D,EAAOoE,WAAWH,IA2B5BC,GAbCH,GAAY,GAAUA,GAAY,IAAuB,KAAZA,GAGpC,GAATE,GAAcF,GAAY,IAAUA,GAAY,IAIvC,GAATE,GACAF,GAAY,IAAUA,GAAY,IACjB,IAAjBI,EAIS,KAAOJ,EAASlC,SAAS,IAAM,IAOhC,GAAToC,GACU,GAAV/B,GACY,IAAZ6B,KAWAA,GAAY,KACA,IAAZA,GACY,IAAZA,GACAA,GAAY,IAAUA,GAAY,IAClCA,GAAY,IAAUA,GAAY,IAClCA,GAAY,IAAUA,GAAY,KAdxB,KAAO/D,EAAOqE,OAAOJ,GAiBrBjE,EAAOqE,OAAOJ,GAhDxBC,GAAU,IAyDZ,OAAOA,CACR,EAOA,OALKT,EAAK7C,MACT6C,EAAK7C,IAAM,CAAC,GAGb6C,EAAK7C,IAAIC,OAAS8C,EACXA,CAER,CApGmBW,CAAQb,E,uBCH3B,IAAIc,EAAc,GAElB,SAASC,EAAqBC,GAG5B,IAFA,IAAIP,GAAU,EAEL/B,EAAI,EAAGA,EAAIoC,EAAYrC,OAAQC,IACtC,GAAIoC,EAAYpC,GAAGsC,aAAeA,EAAY,CAC5CP,EAAS/B,EACT,KACF,CAGF,OAAO+B,CACT,CAEA,SAASQ,EAAa9C,EAAM+C,GAI1B,IAHA,IAAIC,EAAa,CAAC,EACdC,EAAc,GAET1C,EAAI,EAAGA,EAAIP,EAAKM,OAAQC,IAAK,CACpC,IAAIL,EAAOF,EAAKO,GACZT,EAAKiD,EAAQG,KAAOhD,EAAK,GAAK6C,EAAQG,KAAOhD,EAAK,GAClDiD,EAAQH,EAAWlD,IAAO,EAC1B+C,EAAa,GAAGxC,OAAOP,EAAI,KAAKO,OAAO8C,GAC3CH,EAAWlD,GAAMqD,EAAQ,EACzB,IAAIC,EAAoBR,EAAqBC,GACzCQ,EAAM,CACRC,IAAKpD,EAAK,GACVO,MAAOP,EAAK,GACZqD,UAAWrD,EAAK,GAChBS,SAAUT,EAAK,GACfU,MAAOV,EAAK,IAGd,IAA2B,IAAvBkD,EACFT,EAAYS,GAAmBI,aAC/Bb,EAAYS,GAAmBK,QAAQJ,OAClC,CACL,IAAII,EAAUC,EAAgBL,EAAKN,GACnCA,EAAQY,QAAUpD,EAClBoC,EAAYiB,OAAOrD,EAAG,EAAG,CACvBsC,WAAYA,EACZY,QAASA,EACTD,WAAY,GAEhB,CAEAP,EAAYpD,KAAKgD,EACnB,CAEA,OAAOI,CACT,CAEA,SAASS,EAAgBL,EAAKN,GAC5B,IAAIc,EAAMd,EAAQe,OAAOf,GAezB,OAdAc,EAAIE,OAAOV,GAEG,SAAiBW,GAC7B,GAAIA,EAAQ,CACV,GAAIA,EAAOV,MAAQD,EAAIC,KAAOU,EAAOvD,QAAU4C,EAAI5C,OAASuD,EAAOT,YAAcF,EAAIE,WAAaS,EAAOrD,WAAa0C,EAAI1C,UAAYqD,EAAOpD,QAAUyC,EAAIzC,MACzJ,OAGFiD,EAAIE,OAAOV,EAAMW,EACnB,MACEH,EAAII,QAER,CAGF,CAEAhG,EAAOC,QAAU,SAAU8B,EAAM+C,GAG/B,IAAImB,EAAkBpB,EADtB9C,EAAOA,GAAQ,GADf+C,EAAUA,GAAW,CAAC,GAGtB,OAAO,SAAgBoB,GACrBA,EAAUA,GAAW,GAErB,IAAK,IAAI5D,EAAI,EAAGA,EAAI2D,EAAgB5D,OAAQC,IAAK,CAC/C,IACI8B,EAAQO,EADKsB,EAAgB3D,IAEjCoC,EAAYN,GAAOmB,YACrB,CAIA,IAFA,IAAIY,EAAqBtB,EAAaqB,EAASpB,GAEtCsB,EAAK,EAAGA,EAAKH,EAAgB5D,OAAQ+D,IAAM,CAClD,IAEIC,EAAS1B,EAFKsB,EAAgBG,IAIK,IAAnC1B,EAAY2B,GAAQd,aACtBb,EAAY2B,GAAQb,UAEpBd,EAAYiB,OAAOU,EAAQ,GAE/B,CAEAJ,EAAkBE,CACpB,CACF,C,uBCrGA,IAAIG,EAAO,CAAC,EAoCZtG,EAAOC,QAVP,SAA0BsG,EAAQC,GAChC,IAAIC,EAxBN,SAAmBA,GACjB,QAA4B,IAAjBH,EAAKG,GAAyB,CACvC,IAAIC,EAAcC,SAASC,cAAcH,GAEzC,GAAII,OAAOC,mBAAqBJ,aAAuBG,OAAOC,kBAC5D,IAGEJ,EAAcA,EAAYK,gBAAgBC,IAI5C,CAHE,MAAOC,GAEPP,EAAc,IAChB,CAGFJ,EAAKG,GAAUC,CACjB,CAEA,OAAOJ,EAAKG,EACd,CAKeS,CAAUX,GAEvB,IAAKE,EACH,MAAM,IAAIU,MAAM,2GAGlBV,EAAOW,YAAYZ,EACrB,C,uBC1BAxG,EAAOC,QAPP,SAA4B6E,GAC1B,IAAIuC,EAAUV,SAASW,cAAc,SAGrC,OAFAxC,EAAQyC,cAAcF,EAASvC,EAAQ0C,YACvC1C,EAAQyB,OAAOc,EAASvC,EAAQA,SACzBuC,CACT,C,6BCGArH,EAAOC,QARP,SAAwCwH,GACtC,IAAIC,EAAmD,KAEnDA,GACFD,EAAaE,aAAa,QAASD,EAEvC,C,uBC4DA1H,EAAOC,QAZP,SAAgB6E,GACd,IAAI2C,EAAe3C,EAAQ8C,mBAAmB9C,GAC9C,MAAO,CACLgB,OAAQ,SAAgBV,IAzD5B,SAAeqC,EAAc3C,EAASM,GACpC,IAAIC,EAAM,GAEND,EAAI1C,WACN2C,GAAO,cAAcjD,OAAOgD,EAAI1C,SAAU,QAGxC0C,EAAI5C,QACN6C,GAAO,UAAUjD,OAAOgD,EAAI5C,MAAO,OAGrC,IAAIL,OAAiC,IAAdiD,EAAIzC,MAEvBR,IACFkD,GAAO,SAASjD,OAAOgD,EAAIzC,MAAMN,OAAS,EAAI,IAAID,OAAOgD,EAAIzC,OAAS,GAAI,OAG5E0C,GAAOD,EAAIC,IAEPlD,IACFkD,GAAO,KAGLD,EAAI5C,QACN6C,GAAO,KAGLD,EAAI1C,WACN2C,GAAO,KAGT,IAAIC,EAAYF,EAAIE,UAEhBA,GAA6B,oBAATrC,OACtBoC,GAAO,uDAAuDjD,OAAOa,KAAKE,SAAS7B,mBAAmB8B,KAAKC,UAAUiC,MAAe,QAMtIR,EAAQ+C,kBAAkBxC,EAAKoC,EAAc3C,EAAQA,QACvD,CAiBMgD,CAAML,EAAc3C,EAASM,EAC/B,EACAY,OAAQ,YAjBZ,SAA4ByB,GAE1B,GAAgC,OAA5BA,EAAaM,WACf,OAAO,EAGTN,EAAaM,WAAWC,YAAYP,EACtC,CAWMQ,CAAmBR,EACrB,EAEJ,C,uBCpDAzH,EAAOC,QAZP,SAA2BoF,EAAKoC,GAC9B,GAAIA,EAAaS,WACfT,EAAaS,WAAWC,QAAU9C,MAC7B,CACL,KAAOoC,EAAaW,YAClBX,EAAaO,YAAYP,EAAaW,YAGxCX,EAAaL,YAAYT,SAAS0B,eAAehD,GACnD,CACF,C,GCZIiD,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB5F,IAAjB6F,EACH,OAAOA,EAAaxI,QAGrB,IAAID,EAASsI,EAAyBE,GAAY,CACjD3G,GAAI2G,EAEJvI,QAAS,CAAC,GAOX,OAHAyI,EAAoBF,GAAUG,KAAK3I,EAAOC,QAASD,EAAQA,EAAOC,QAASsI,GAGpEvI,EAAOC,OACf,CCrBAsI,EAAoBK,EAAK5I,IACxB,IAAI6I,EAAS7I,GAAUA,EAAO8I,WAC7B,IAAO9I,EAAiB,QACxB,IAAM,EAEP,OADAuI,EAAoBQ,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdN,EAAoBQ,EAAI,CAAC9I,EAASgJ,KACjC,IAAI,IAAIC,KAAOD,EACXV,EAAoBY,EAAEF,EAAYC,KAASX,EAAoBY,EAAElJ,EAASiJ,IAC5EE,OAAOC,eAAepJ,EAASiJ,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDX,EAAoB1E,EAAI,WACvB,GAA0B,iBAAf2F,WAAyB,OAAOA,WAC3C,IACC,OAAOhJ,MAAQ,IAAIiJ,SAAS,cAAb,EAGhB,CAFE,MAAOxC,GACR,GAAsB,iBAAXJ,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB0B,EAAoBY,EAAI,CAAC/D,EAAKsE,IAAUN,OAAOO,UAAUC,eAAejB,KAAKvD,EAAKsE,GCAlFnB,EAAoBsB,QAAKjH,E,4ICWrBkC,EAAU,CAAC,EAEfA,EAAQ+C,kBAAoB,IAC5B/C,EAAQyC,cAAgB,IAElBzC,EAAQyB,OAAS,SAAc,KAAM,QAE3CzB,EAAQe,OAAS,IACjBf,EAAQ8C,mBAAqB,IAEhB,IAAI,IAAS9C,GAKJ,KAAW,YAAiB,WC1BlD,IAAMgF,EAAkBnD,SAASoD,eAAe,WAE1CC,EAAeF,GAAmBA,EAAgBG,QAAQD,aAE1DE,EAAoBJ,GAAmBA,EAAgBG,QAAQC,kBAE/DC,EAAWL,GAAmBA,EAAgBG,QAAQE,SAE5D,SAASC,EAAmBC,EAAgBC,GAE1C,IADA,IAAIC,EAAgBF,EAAeE,cAC5BA,EAAcC,YAAcD,EAAcC,UAAUC,SAASH,IAAY,CAC9E,GAAIC,IAAkBT,EAAiB,OAAO,KAC9CS,EAAgBA,EAAcxC,UAC/B,CACD,OAAOwC,CACR,CCbD,QAFoB,CAAC,E,kaC0crB,QArcMG,WACJ,WAAYC,GAQV,G,4FARoB,SAQK,MAArBA,EAASC,QACXpK,KAAK6G,QAAUsD,MACV,IAAIA,aAAoBD,EAC7B,MAAM,IAAIvD,MAAM,qCACX,GAAwB,WAApB,EAAOwD,GAChBnK,KAAKqK,eAAiBF,MACjB,IAAwB,mBAAbA,EAGhB,MAAM,IAAIxD,MAAM,wCAFhB3G,KAAKsK,iBAAmBH,CAGzB,EACF,C,qDA2MD,SAAuBI,GACrB,IAAIC,EAAO,IAAIN,EAAKK,GAIpB,MAAO,CACLE,WAJcC,EAAAA,eAAyBF,GAIjBG,KAAKhL,OAC3BiL,KAAML,EAAYd,QAAQmB,KAC1BC,mBAAoBL,EAAKK,mBAE5B,G,2CAED,SAAqCC,GACnC,YAAqC1I,IAA9B0I,EAAOD,kBACf,G,iCAED,SAA2BC,GACzB,IACIC,EADO,IAAIC,EAAKF,EAAOL,YACNM,UACrB,IAAKA,EAAW,MAAM,IAAIpE,MAAM,mDAChC,IAAI6D,EAAOO,EAAUE,gBACnB,SAACT,EAAM1I,GAAP,OAAa0I,EAAK3D,QAAQ4C,QAAQmB,OAASE,EAAOF,MAChD9I,IAAMgJ,EAAOD,kBADf,IAIF,OAAOL,GAAQA,EAAK3D,SAAW,IAChC,G,oBAoGD,SAAcqE,GACZA,GAAgBA,EAAarE,QAAQmD,UAAUmB,IAAI,wBACnDjB,EAAKkB,iBAAiBF,GACtBhB,EAAKmB,iBAAiBH,GACtBhB,EAAKoB,yBAAyBJ,EAC/B,G,qCAED,SAA+BzE,GAC7B,OAAOA,EAAE8E,OAASrB,EAAKsB,8BAA8B/E,EAAE8E,MACxD,G,4BAED,WACE,IAAIE,EAAcC,eAAeC,QAAQX,EAAAA,QAAAA,QACzC,GAAIS,GAA+B,SAAhBA,EAAwB,CACzC,IAAIjB,EAAO,IAAIN,EAAKtH,KAAKgJ,MAAMH,IAC/B,IAAMjB,EAAK3D,OAAiC,CAAtB,SAAQ2D,EAAO,IAAO,CAC5C,OAAOA,CACR,CACC,OAAO,IAEV,G,4BAED,WACE,GAAIqB,QAAQN,OAASrB,EAAKsB,8BAA8BK,QAAQN,OAAQ,CACtE,IAAIf,EAAO,IAAIN,EAAK2B,QAAQN,OAC5B,IAAMf,EAAK3D,OAAiC,CAAtB,SAAQ2D,EAAO,IAAO,CAC5C,OAAOA,CACR,CACC,OAAO,IAEV,G,0BAED,WACE,OAAOxK,KAAK8L,kBAAoB9L,KAAK+L,kBAAoB,IAC1D,G,qBAED,WACE,IAAIC,EAAe7F,SAASC,cAAc,0BAC1C,OAAI4F,EACK,IAAI9B,EAAK8B,GAET,IAEV,G,8BAED,SAAwBxB,GAGtB,IAAIyB,EAAWzB,GAAQ5H,KAAKC,UAAU2H,EAAK0B,UAC3CR,eAAeS,QAAQC,SAASC,SAAWD,SAASE,KAAML,GAAY,KACvE,G,8BAED,SAAwBzB,GAGtBqB,QAAQU,aACN/B,GAAQA,EAAK0B,UAAY,KACzB/F,SAASqG,MACTnG,OAAO+F,SAASK,KAEnB,G,yBAQD,SAAmB9B,GACjB,OAAO,IAAIT,GAAK,WAEd,IAAIa,GADJJ,EAAOA,GAAQK,EAAAA,SACMD,UACrB,OAAOA,EAAU2B,WAAa3B,EAAU4B,UACzC,GACF,G,qBAED,WACE,MAAM,IAAIhG,MAAM,kDACjB,G,sCAGD,SAAgC6D,GAC9B,GAAIA,EAAM,CACR,IAAIoC,EAA4BhK,KAAKgJ,MAAMF,eAAeC,QAAQ,8BAAgC,MAClGiB,EAA0BpC,EAAKqC,mBAAmBlC,MAAQH,EAAK0B,SAC/DR,eAAeS,QAAQ,4BAA6BvJ,KAAKC,UAAU+J,GACpE,CACF,G,sCAED,SAAgC7B,GAC9B,IAAI6B,EAA4BhK,KAAKgJ,MAAMF,eAAeC,QAAQ,8BAAgC,MAClG,GAAIiB,EAA0B7B,EAAUJ,MAAO,CAC7C,IAAIH,EAAO,IAAIN,EAAK0C,EAA0B7B,EAAUJ,OACxD,IACE,GAAIH,EAAK3D,QACP,OAAO2D,CAIV,CAFC,SACA,OAAO,IACR,CACF,CACF,K,uBA5aD,SAAOsC,GACL,OAAO9M,KAAK6G,UAAYiG,EAAUjG,OACnC,G,qBAED,SAAQiG,GACN,IAAKA,EAAW,MAAM,IAAInG,MAAM,yCAEhC,OAAO3G,KAAK+M,cAAgBD,EAAUC,aACpC/M,KAAKgN,iBAAmBF,EAAUE,gBAClChN,KAAK6K,qBAAuBiC,EAAUjC,kBACzC,G,yBAED,SAAYF,GACV,KAAMA,aAAgBK,GAAO,MAAM,IAAIrE,MAAM,6CAC7C,OAAO3G,KAAKiN,0BAA0BtN,SAAWgL,EAAKhL,MACvD,G,mBAED,WACE,GAAIK,KAAKuK,YACP,OAAOvK,KAAKuK,YACP,GAAIvK,KAAKqK,eAAgB,CAE9B,GADArK,KAAK6G,QAAUqD,EAAKgD,oBAAoBlN,KAAKkM,WACxClM,KAAKuK,YAAa,MAAM,IAAI5D,MAAM,yCACvC,OAAO3G,KAAKuK,WACb,CAAM,GAAIvK,KAAKsK,iBAAkB,CAChC,IAAIE,EAAOxK,KAAKsK,mBAChB,IAAKE,EAAM,MAAM,IAAI7D,MAAM,2CAE3B,OADA3G,KAAK6G,QAAU2D,EAAK3D,QACb7G,KAAKuK,WACb,CACF,E,IAED,SAAYJ,GACNA,aAAoBgD,kBACtBnN,KAAKuK,YAAcJ,EACVA,aAAoBD,IAC7BlK,KAAKuK,YAAcJ,EAAStD,SAE9B7G,KAAKoN,iBACN,G,6BAED,WAGOpN,KAAKuK,cACVvK,KAAKqN,aAAerN,KAAKuK,YAAYd,QAAQsD,YAC7C/M,KAAKsN,gBAAkBtN,KAAKuK,YAAYd,QAAQuD,eAChDhN,KAAKuN,gBAAkBvN,KAAKuK,YAAYd,QAAQ+D,eAChDxN,KAAKyN,mBAAqBzN,KAAKuK,YAAYd,QAAQiE,kBACnD1N,KAAK2N,WAAa3N,KAAKuK,YAAYd,QAAQmE,KAC5C,G,uBAED,WACE,OAAO7N,IAAAA,cAAoBC,KAAK6G,QAAQ4C,QAAQsD,YACjD,G,0BACD,WACE,OAAOhN,IAAAA,cAAoBC,KAAK6G,QAAQ4C,QAAQuD,eACjD,G,0BACD,WACE,OAAOjN,IAAAA,cAAoBC,KAAK6G,QAAQ4C,QAAQ+D,eACjD,G,6BACD,WACE,OAAOzN,IAAAA,cAAoBC,KAAK6G,QAAQ4C,QAAQiE,kBACjD,G,qBAED,WACE,MAAM,IAAI/G,MAAM,8DACjB,G,wBAED,WACE,MAAM,IAAIA,MAAM,uEACjB,G,gBAED,WACE,OAAO3G,KAAK6G,QAAQ4C,QAAQmE,IAC7B,G,mCAED,WACE,OAAOhE,EAAmB5J,KAAK6G,QAAS,iBACzC,G,0BAED,WACE,MAAM,IAAIF,MAAM,mDACjB,G,qCAED,WACE,OAAOiD,EAAmB5J,KAAK6G,QAAS,mBACzC,G,kCAED,WACE,MAAM,IAAIF,MAAM,qDACjB,G,8BAED,WACE,OAAO,IAAI+D,EAAU1K,KAAK6N,wBAC3B,G,2BAED,WACE,IAAK7N,KAAK8N,SAAU,OAAO,KAE3B,IAAIC,EAAY/N,KAAK6M,mBAAmBkB,UACpC/N,KAAKgO,mBAAkBD,EAAYE,OAAOF,GAAa,GAE3D,IAAIG,EAAiBlO,KAAK6M,mBAAmBqB,eAAe9H,cACxD,mCAA4BpG,KAAK+M,YAAY7M,UAA7C,qCACwBF,KAAKgN,eAAe9M,UAD5C,kCAEqB6N,EAFrB,MAKJ,IAAKG,EACH,MAAM,IAAIvH,MAAJ,8DAAiE3G,KAAK+M,YAAY7M,UAAlF,aAAgGF,KAAKgN,eAAe9M,UAApH,MAGR,OAAO,IAAIwK,EAAUwD,EACtB,G,uBAED,SAAUC,GAAS,WACjB,OAAO,IAAIjE,GAAK,WAOd,OALI,EAAK4D,SACiBK,EAAQpD,UAAUqD,gBAElBD,EAAQpD,WAG/BsD,MACAC,KAAK,EAAKC,QACd,GACF,G,wCAED,WACE,OAAIvO,KAAKgO,iBACA,IAAIhD,EAAKhL,KAAKiN,0BAA0BuB,UAAUC,OAAO,IAEzDzO,KAAKiN,0BAA0ByB,WAEzC,G,mBAED,WAAc,WACZ,OAAO,SAAClE,GAAD,OAAUA,EAAKmE,QAAQ,EAAvB,CACR,G,8BAED,WACE,OAAI3O,KAAK4O,2BACT5O,KAAK4O,yBAA2B5O,KAC9B6M,mBACAwB,MACAjO,KAAI,SAAAqG,GAAC,OAAIA,EAAEI,OAAN,IACLgI,QAAQ7O,KAAK6G,UAL2B7G,KAAK4O,wBAQhD,G,oBAGD,WACE,GAAI5O,KAAKqK,eACP,OAAOrK,KAAKqK,eACP,GAAGrK,KAAKuK,YAAa,CAC1B,IAAI2B,EAAWhC,EAAK4E,gBAAgB9O,KAAKuK,aAEzC,OADAvK,KAAKqK,eAAiB6B,EACfA,CACR,CAAM,GAAIlM,KAAKsK,iBAEd,OADAtK,KAAK6G,QAAU7G,KAAKsK,mBACbtK,KAAKkM,SAEZ,MAAM,IAAIvF,MAAM,yEAEnB,G,sBAED,WACE,OAAI3G,KAAKgO,iBACAhO,KAAK6M,mBAAmBlC,KAAKoE,WAAW/O,KAAK+M,YAAa/M,KAAKgN,gBAC7DhN,KAAKgP,QACPhP,KAAK6M,mBAAmBlC,KAAKsE,wBAAwBjP,KAAKgN,gBAE1D,IAEV,G,gBAED,WACE,MAAM,IAAIrG,MAAM,qDACjB,G,yBAED,WACE,MAAM,IAAIA,MAAM,qDACjB,G,qCAED,WACE,OAAI3G,KAAKgO,iBACAhO,KAAK6M,mBAAmBlC,KAAKoE,WAAW/O,KAAK+M,YAAa/M,KAAKgN,gBAC7DhN,KAAKgP,QACPhP,KAAK6M,mBAAmBlC,KAAKsE,wBAAwBjP,KAAKgN,gBAE1DhN,KAAK6M,mBAAmBlC,IAElC,G,+BAED,WACE,OAAO3K,KAAKiN,yBACb,G,uBA8BD,WACE,IAAIoB,EAAQrO,KAAK6M,mBAAmBwB,MACpC,GAAKrO,KAAKkP,OAAOb,EAAMA,EAAMxM,OAAS,IAKpC,OAAO,KAJP,IAAIsN,EAAed,EAAMjO,KAAI,SAACoK,GAAD,OAAUA,EAAK3D,OAAf,IAE7B,OAAOwH,EADkBc,EAAaN,QAAQ7O,KAAK6G,SACjB,EAIrC,G,2BAED,WACE,IAAIwH,EAAQrO,KAAK6M,mBAAmBwB,MACpC,GAAKrO,KAAKkP,OAAOb,EAAM,IAKrB,OAAO,KAJP,IAAIc,EAAed,EAAMjO,KAAI,SAACoK,GAAD,OAAUA,EAAK3D,OAAf,IAE7B,OAAOwH,EADkBc,EAAaN,QAAQ7O,KAAK6G,SACjB,EAIrC,G,oBAED,WACE,OAAO7G,KAAK6M,mBAAmBwB,KAChC,G,wBAED,WACE,OAAOrO,KAAKoP,SAAS,EACtB,G,uBAED,WACE,OAAOpP,KAAKoP,SAASpP,KAAKoP,SAASvN,OAAS,EAC7C,G,0BAED,WACE,OAAO7B,KAAKqP,gBAAgB3C,SAC7B,G,yBAED,WACE,OAAO1M,KAAKqP,gBAAgBC,QAC7B,G,sBAED,WACE,OAAOtP,KAAK6M,mBAAmBF,UAChC,G,2BAED,WAAsB,MACpB,iBAAO3M,KAAK2M,kBAAZ,aAAO,EAAiBA,UACzB,G,0BAED,WACE,OAAO/C,EAAmB5J,KAAK6G,QAAS,uBACzC,G,oBAED,WACE,OAAO7G,KAAK6G,QAAQmD,UAAUuF,SAAS,uBACxC,G,kBAED,WACEvP,KAAK6G,QAAQmD,UAAUmB,IAAI,mBAC5B,G,kBAED,WACE,OAAOnL,KAAK6G,QAAQmD,UAAUC,SAAS,mBACxC,G,oBAED,WACE,OAAQjK,KAAKwP,MACd,G,sBAED,WACE,OAAOxP,KAAK6G,QAAQmD,UAAUC,SAAS,uBACxC,G,oBAED,WACE,MAAqB,WAAdjK,KAAK4N,IACb,G,oBAED,WACE,MAAqB,WAAd5N,KAAK4N,IACb,G,4BAED,WACE,MAAqB,WAAd5N,KAAK4N,MAAmC,WAAd5N,KAAK4N,IACvC,G,mBAED,WACE,MAAqB,UAAd5N,KAAK4N,IACb,G,oBAED,WACE,OAAO5N,KAAKyP,UAAYzP,KAAKgP,SAAWhP,KAAK0P,QAC9C,G,uBAED,WACE,OAAO1P,KAAKqP,gBAAgBM,QAC7B,M,gFA3VGzF,G,sKC+MN,QA9MMQ,WAUJ,WAAYwD,GACV,G,4FAD0B,UACrBA,GAA6C,YAA3BA,EAAe9D,QAAwB,MAAM,IAAIzD,MAAM,oDAC9E,IAAKuH,EAAelE,UAAUC,SAAS,kBAAmB,MAAM,IAAItD,MAAM,mDAC1E3G,KAAKkO,eAAiBA,EACtBlO,KAAKoN,iBACN,C,2CA0KD,WACE,OAAO,IAAI1C,EAAUvE,SAASC,cAAc,4BAC7C,G,oBAMD,WAEE,OADW4E,EAAAA,QAAAA,cACCD,SACb,G,4BAED,SAAsBP,GACpB,KAAMA,aAAgBN,GAAO,MAAM,IAAIvD,MAAM,uCAE7C,OAAO,IAAI+D,EADUd,EAAmBY,EAAK3D,QAAS,kBAEvD,K,uBAzLD,SAAO+I,GACL,QAAKA,GACE5P,KAAKkO,iBAAmB0B,EAAe1B,cAC/C,G,qBAED,WACElO,KAAKkO,eAAelI,MAAM/F,QAAU,OACrC,G,mBAED,WACE,MAAM,IAAI0G,MAAM,mDACjB,G,6BAED,WACE3G,KAAK6P,WAAa7P,KAAKkO,eAAezE,QAAQqG,UAC9C9P,KAAK+P,cAAgB/P,KAAKkO,eAAezE,QAAQuG,aACjDhQ,KAAK+N,UAAY/N,KAAKkO,eAAezE,QAAQsE,SAC9C,G,iBAED,WACE,OAAOhO,IAAAA,cAAoBC,KAAKkO,eAAezE,QAAQqG,UACxD,G,oBAED,WACE,OAAO/P,IAAAA,cAAoBC,KAAKkO,eAAezE,QAAQuG,aACxD,G,qBAED,WACE,MAAM,IAAIrJ,MAAM,iCACjB,G,wBAED,WACE,MAAM,IAAIA,MAAM,oCACjB,G,4BAED,WACE,IAAIsJ,EAAmBC,MAAMC,KAAKnQ,KAAKkO,eAAekC,YACpD9B,MAAK,SAACzH,GAAD,MAAiC,MAApBA,EAAQuD,OAArB,IAEP,IAAK6F,EAAkB,MAAM,IAAItJ,MAAM,sCACvC,OAAOsJ,CACR,G,gBAED,WAME,IALA,IAAIzB,EAAY,GACZ3E,EAAiB7J,KAAKkO,eACtBmC,EAAmBrQ,KACnBsQ,EAAwBtQ,KAAKuQ,eAE1B1G,IAAmBP,GAQxB,IAPAgH,EAAwBD,EAAiBE,eAEzC/B,EAAUgC,QAAQ,CAChBzQ,IAAAA,cAAoB8J,EAAeJ,QAAQqG,WAC3C/P,IAAAA,cAAoB8J,EAAeJ,QAAQuG,gBAGtCnG,IAAmBP,GAAmB+G,EAAiBE,eAAerB,OAAOoB,KAClFzG,EAAiBA,EAAetC,cACT+B,IAAiB+G,EAAmB,IAAI3F,EAAUb,IAI7E,OAAO,IAAImB,EAAKwD,EACjB,G,iBAED,WACE,GAAIxO,KAAKyQ,YAAa,OAAOzQ,KAAKyQ,YAClC,IAAItB,EAAenP,KAAKiQ,iBAAiBS,iBAAiB,4BAE1D,OADA1Q,KAAKyQ,YAAcP,MAAMC,KAAKhB,GAAc/O,KAAI,SAACyG,GAAD,OAAa,IAAIqD,EAAKrD,EAAtB,IACzC7G,KAAKyQ,WACb,G,qBAED,WACE,OAAOzQ,KAAKqO,MAAM,IAAM,IACzB,G,oBAED,WACE,OAAOrO,KAAKqO,MAAMrO,KAAKqO,MAAMxM,OAAS,IAAM,IAC7C,G,sBAED,WACE,OAAO7B,KAAKkO,eAAe3G,aAAe+B,CAC3C,G,mBAED,WACE,OAAOtJ,KAAKe,MAAML,OAASV,KAAK2Q,SAASjQ,IAC1C,G,oBAED,WACE,OAAOV,KAAKqO,MAAMxM,OAAS,CAC5B,G,4BAED,SAAe+O,GACb,OAAO5Q,KAAKqO,MAAMC,KAAKsC,EACxB,G,6BAED,SAAgBA,GACd,OAAO5Q,KAAKqO,MAAMwC,OAAOD,EAC1B,G,0BAED,SAAa7D,EAAaC,GAGxB,OAFAA,EAAiBA,GAAkBD,EAE5B/M,KAAKiL,gBACV,SAACT,GAAD,OAAUA,EAAKuC,YAAYrM,OAASqM,EAAYrM,MAAQ8J,EAAKwC,eAAetM,OAASsM,EAAetM,IAApG,GAEH,G,sBAED,WACE,OAAIV,KAAKkO,eAAe3G,aAAe+B,EAA0B,KAE1DtJ,KAAKoO,iBAAmBpO,KAAKoO,gBAAgB0C,aAClD9Q,KAAKe,MACLf,KAAK2Q,SAER,G,uBAED,WAAkB,WAChB,OAAI3Q,KAAKkO,eAAe3G,aAAe+B,EAA0B,KAE1DtJ,KAAKoO,gBAAgB2C,iBAC1B,SAAAvG,GACE,OAAQA,EAAKwE,SAAWxE,EAAKiF,WAC3B,EAAK1O,MAAML,OAAS8J,EAAKuC,YAAYrM,MACrC,EAAKiQ,SAASjQ,OAAS8J,EAAKwC,eAAetM,IAC9C,GAEJ,G,oCAED,WAA+B,WAC7B,OAAIV,KAAKgR,SAAmB,GACvBhR,KAAKuQ,eAAenC,gBAElBpO,KAAKuQ,eAAenC,gBAAgB2C,iBACzC,SAAAvG,GACE,OAAOA,EAAKkF,UACV,EAAK3O,MAAML,OAAS8J,EAAKuC,YAAYrM,MACrC,EAAKiQ,SAASjQ,OAAS8J,EAAKwC,eAAetM,IAC9C,IAPgD,EASpD,G,4BAED,WACE,OAAOV,KAAKkO,eAAezE,QAAQwH,gBACpC,G,2BAED,WACE,GAAIjR,KAAKkO,eAAgB,CACvB,IAAInE,EAAgBH,EAAmB5J,KAAKkO,eAAgB,kBAC5D,OAAOnE,EAAgB,IAAIW,EAAUX,GAAiB,IACvD,CACC,OAAO,IAEV,G,0BAED,WACE,OAAI/J,KAAKkR,QACAlR,KAEA,IAAI0K,EAAUd,EAAmB5J,KAAKkO,eAAgB,wBAEhE,G,uBAED,WACE,OAAOlO,KAAK8P,YAAc9P,KAAKgQ,YAChC,G,oBAMD,WACEhQ,KAAKkO,eAAelE,UAAUmB,IAAI,0BACnC,M,gFA/LGT,G,omCC2TN,QA7TMM,WACJ,WAAYb,I,4FAAU,SACfA,EAEM+F,MAAMiB,QAAQhH,IACC,IAApBA,EAAStI,OACX7B,KAAKwO,UAAY,IAEjBxO,KAAKwO,UAAYrE,EAASsE,QAC1BzD,EAAKoG,kBAAkBpR,KAAKwO,YAE9BxO,KAAKyK,WAAaO,EAAKqG,cAAcrR,KAAKwO,aACb,iBAAbrE,GAAyBA,aAAoBxG,UAC7D3D,KAAKwO,UAAYxD,EAAKsG,cAAcnH,GACpCnK,KAAKyK,WAAaO,EAAKqG,cAAcrR,KAAKwO,YAX1CxO,KAAKwO,UAAY,EAapB,C,uDAMD,SAAyB+C,GACvBA,EAAMC,SAAQ,SAAAC,GACZ,GAAqB,IAAjBA,EAAM5P,OAAc,MAAM6P,SAAS,gCAAD,OAAiCD,IACvE,KAAMA,EAAM,aAAc1R,KAAY0R,EAAM,aAAc1R,KAAQ,MAAM2R,SAAS,gCAAD,OAAiCD,GAClH,GACF,G,mBAgGD,WACE,IAAI1Q,EAAQhB,IAAAA,cAAoByJ,GAChC,OAAO,IAAIwB,EAAK,CAAC,CAACjK,EAAOA,IAC1B,G,mBAED,WACE,IAAI0J,EAAapE,OAAO+F,SAASK,KAAKgC,MAAMpI,OAAO+F,SAASuF,OAAO9P,QAQnE,OANI6H,GAAqE,IAAhDe,EAAWoE,QAAX,WAAuBnF,MAC9Ce,EAAaA,EAAWgE,MAAM/E,EAAkB7H,OAAS,IAG1B,IAA7B4I,EAAWoE,QAAQ,QAAapE,EAAaA,EAAWgE,MAAM,IAE3D,IAAIzD,EAAKP,EACjB,G,4BAED,WACE,OAAIO,EAAK4G,QAAQC,MACR7G,EAAI,QAEJA,EAAK4G,OAEf,G,sBAED,SAAgB7Q,GACd,OAAO,IAAIiK,EAAK,CAAC,CAACjK,EAAOA,IAC1B,G,wBAED,SAAkBA,EAAO4P,GACvB,OAAO,IAAI3F,EAAK,CAAC,CAACjK,EAAO4P,IAC1B,G,2BAED,SAAqBlG,GACnB,GAA0B,iBAAfA,EAAyB,MAAMiH,SAAS,qCAEnD,GAAmB,MAAfjH,EACF,MAAO,GAGT,IAAIqH,EAAsBrH,EACxBtK,MAAM,KACN0Q,QAAO,SAAClR,GAAD,MAAuB,KAAXA,CAAZ,IAIL6O,GAFJsD,EAAsB9G,EAAK+G,mBAAmBtH,EAAYqH,IAEtB1R,KAAI,SAAC4R,GAEvC,IAAIC,EAAQD,EAAmBC,MAAM,wBACrC,MAAO,CACLA,EAAM,IAAMA,EAAM,IAAM,KACxBA,EAAM,IAAMA,EAAM,IAAM,KAE3B,IAAEpB,QAAO,SAACqB,GAAD,OAA4B,OAAfA,EAAQ,EAArB,IAOV,OALY1D,EAAUpO,KAAI,yBAAE+R,EAAF,KAAeC,EAAf,WAAmC,CAC3DrS,IAAAA,gBAAsBoS,GACtBpS,IAAAA,gBAAsBqS,GAFE,GAM3B,G,2BAED,SAAqB5D,GACnB,IAAK0B,MAAMiB,QAAQ3C,GAAY,MAAMkD,SAAS,0BAE9C,GAAIxB,MAAMiB,QAAQ3C,IAAmC,IAArBA,EAAU3M,OACxC,MAAO,IAGT,IAAKqO,MAAMiB,QAAQ3C,EAAU,IAC3B,MAAMkD,SAAS,4CAajB,MAViB,IAEHlD,EAAUpO,KAAI,YAAuB,aAArBW,EAAqB,KAAd4P,EAAc,KAC7C0B,EAAoBtR,EAAMN,KAI9B,OAHIkQ,GAAYA,EAASlQ,OAASM,EAAMN,OACtC4R,GAAqB,IAAM1B,EAASlQ,MAE/B4R,CACR,IAAEhS,KAAK,IAGT,G,gCAED,SAA0BoK,EAAYqH,GAIpC,GAA0B,iBAAfrH,EAAyB,MAAMiH,SAAS,wCACnD,IAAKxB,MAAMiB,QAAQW,GAAsB,MAAMJ,SAAS,wCAExD,GAAIjH,EAAWwH,MAAM,UACnB,IAAK,IAAInQ,EAAI,EAAGA,EAAIgQ,EAAoBjQ,OAAQC,IAC9C,GAAIgQ,EAAoBhQ,GAAGmQ,MAAM,MAAO,CACtC,GAAKH,EAAoBhQ,EAAI,GAAGmQ,MAAM,KAM/B,CACL,IAAIK,EAAUR,EAAoBhQ,GAAG2M,MAAM,GAI3C,OAHeqD,EAAoBrD,MAAM,EAAG3M,GAC1CF,OAAO,CAAC0Q,IACR1Q,OAAOkQ,EAAoBrD,MAAM3M,EAAI,GAExC,CAXC,IAAIwQ,EAAUR,EAAoBhQ,EAAI,GAAKgQ,EAAoBhQ,GAI/D,OAHegQ,EAAoBrD,MAAM,EAAG3M,EAAI,GAC9CF,OAAO,CAAC0Q,IACR1Q,OAAOkQ,EAAoBrD,MAAM3M,EAAI,GAS1C,CAIL,OAAOgQ,CACR,G,iCAED,SAA2B/H,EAAewI,GACxC,IAAKxI,EAAe,MAAM2H,SAAS,2BACnC,KAAMa,aAAyBvH,GAAO,MAAM0G,SAAS,uCAErD,GAAI3H,IAAkBT,EAAiB,OAAO,EAE9C,IAAI8E,EAAkB,IAAI1D,EAAUX,GACpC,QAAKqE,EAAgB0C,aAAayB,EAAcC,cAC9CC,QAAQC,MAAM,0BAAmBtE,EAAgBrN,MAAMb,UAAzC,aAAuDkO,EAAgBuC,SAASzQ,UAAhF,mEACmCqS,EAAcC,WADjD,aACgED,EAAcC,WAD9E,OAEP,EAIV,G,mCAED,SAA6BG,EAAcC,GACzC,KAAMD,aAAwB3H,GAAO,MAAM0G,SAAS,wCAC/CkB,GAAwBA,EAAoBxI,QAEjD,IAAIyI,EAAcD,EACbA,IAAuBC,EAAcvJ,GAC1C,IAAIqB,EAAOgI,EAEPG,EAAcD,EAClB,GAAIA,IAAgBvJ,EAAiB,CAOnC,GANAwJ,EAAcD,EAAYzM,cACxB,4BAAqBuE,EAAK6H,WAAWlS,iBAArC,qCACwBqK,EAAKoI,cAAczS,iBAD3C,kCAEqB,EAFrB,OAKkB,IAAhBqK,EAAK9I,OAAgB,OAAOiR,EAChC,IAAKA,EAAa,OAAO,KACzBnI,EAAOA,EAAKqI,mBACb,CAGD,IADA,IAAIC,EAAUtI,EACL7I,EAAI,EAAGA,EAAI6I,EAAK9I,OAAQC,IAAK,CACpC,IAAIoR,EAAejF,OAAO6E,EAAYrJ,QAAQsE,WAAa,EAO3D,KANA+E,EAAcA,EAAY1M,cACxB,4BAAqB6M,EAAQT,WAAWlS,iBAAxC,qCACwB2S,EAAQF,cAAczS,iBAD9C,kCAEqB4S,EAFrB,QAKgB,OAAO,KACzBD,EAAUA,EAAQD,mBACnB,CAED,OAAOF,CACR,G,qBAED,SAAe3E,GACb,KAAMA,aAAmBnD,GAAO,MAAM0G,SAAS,+BAE/C,IAAIyB,EAAUnI,EAAK4G,QACfwB,EAAgBjF,EAAQqE,WAAWvS,QACnCoT,EAAqBlF,EAAQe,OAAOiE,GASxC,SAAsB3K,EAAG8K,EAAGC,GAC1B1H,QAAQU,aAAa/D,EAAG8K,EAAGC,EAC5B,EAED,SAAmB/K,EAAG8K,EAAGC,GACvB1H,QAAQ2H,UAAUhL,EAAG8K,EAAGC,EACzB,EAdGE,GAAkB/J,EAAoB,IAAH,OAAOA,GAAsB,KAAOC,EAAW,KAAO,IAAMwE,EAAQxO,OAE3G0T,EACExH,QAAQN,MACR6H,EACAK,EAUH,K,uBAxSD,SAAOC,GACL,OAAO1T,KAAKL,SAAW+T,EAAU/T,MAClC,G,wBASD,SAAWoB,EAAO4P,GAChB,OAAI3Q,KAAK6R,MAAc,IAAI7G,EAAK,CAAC,CAACjK,EAAO4P,KAClC,IAAI3F,EAAKhL,KAAKwO,UAAU5M,OAAO,CAAC,CAACb,EAAO4P,KAChD,G,qCAED,SAAwBgD,GACtB,IAAIjF,EAAc1O,KAAK0O,YACvB,OAAO1O,KAAK4T,mBAAmB7E,WAAWL,EAAY8D,WAAYmB,EACnE,G,sBAED,WACE,OAAO3T,KAAKL,MACb,G,iBAED,WACE,OAAOK,KAAKwO,SACb,G,kBAED,WACE,OAAOxO,KAAKyK,UACb,G,yBAED,WACE,OAAIzK,KAAK6B,OAAS,EACT,IAAImJ,EAAK,CAAC,CAAChL,KAAKwS,WAAYxS,KAAKwS,cAEjCxS,IAEV,G,sBAED,WACE,OAAOA,KAAKwO,UAAU,GAAG,EAC1B,G,qBAED,WACE,OAAOxO,KAAK0O,YAAY3N,KACzB,G,iBAED,WAAY,MACV,iBAAOf,KAAK0O,YAAYF,UAAU,UAAlC,aAAO,EAAgC,EACxC,G,yBAED,WACE,OAAOxO,KAAKwO,UAAU,GAAG,EAC1B,G,uBAED,WACE,OAAOxO,KAAKwO,UAAU,IAAMxO,KAAKwO,UAAU,GAAG,EAC/C,G,0BAED,WACE,OAAOxO,KAAKwO,UAAU,IAAMxO,KAAKwO,UAAU,GAAG,EAC/C,G,wBAED,WACE,OAAO,IAAIxD,EAAKhL,KAAKwO,UAAUC,MAAM,EAAG,GACzC,G,uBAED,WACE,OAAO,IAAIzD,EAAKhL,KAAKwO,UAAUC,OAAO,GACvC,G,+BAED,WACE,OAAO,IAAIzD,EAAKhL,KAAKwO,UAAUC,MAAM,GACtC,G,8BAED,WACE,OAAO,IAAIzD,EAAKhL,KAAKwO,UAAUC,MAAM,GAAI,GAC1C,G,kBAED,WACE,OAAKzO,KAAKwO,UAAU,GAGXxO,KAAKwO,UAAU3M,OAFf,CAIV,G,0BAED,WACE,OAAOmJ,EAAK6I,sBAAsB7T,KAAMsJ,EACzC,G,qBAED,WACE,OAAItJ,KAAKkO,eACA,IAAIxD,EAAU1K,KAAKkO,gBAEnB,IAEV,G,iBAED,WACE,OAAQlO,KAAKwO,UAAU,EACxB,M,gFAzHGxD,GCoBN,EAnBoB,SAACjK,GACnB,GAAI+S,EAAc/S,EAAMb,WAAY,OAAO4T,EAAc/S,EAAMb,WAC/D,IAAI6T,EAAWrK,EAAoB,UAAY3I,EAAMF,gBAAkB,QAEnEmT,EAAUC,MAAMF,GAClBG,MAAK,SAAAC,GACH,OAAOA,EAAIC,OAAOF,MAAK,SAACE,GACtB,OAAOA,CACR,GACF,IALW,OAKH,WAEP,OADAN,EAAc/S,EAAMb,gBAAakC,EAC1BiS,QAAQC,OAAO,IAAI3N,MAAJ,sCAAyC5F,EAAMF,gBAA/C,MACvB,IAIH,OAFAiT,EAAc/S,EAAMb,WAAa8T,EAE1BA,CACR,ECaD,SAASO,EAA4B/J,GACnC,OAAO,SAAC/D,GAEN,IAAIkE,EAAMO,EADVzE,EAAE+N,iBAEF,IAAIC,EAAShO,EAAEiO,SAAWjO,EAAEkO,QAE5B,OAAKF,GAAWhO,EAAEmO,SAAUpK,EAAKqK,WAK5BJ,GAAWhO,EAAEmO,QAAWpK,EAAKqK,YAM7BJ,GAAUhO,EAAEmO,QACfjK,EAAOK,EAAAA,WAAgBR,EAAKuC,YAAavC,EAAKwC,gBACvC8H,EAAWnK,EAAMO,EAAc,CAAE6J,YAAa,UAGnDN,IAAWhO,EAAEmO,QACfjK,EAAOH,EAAKyC,0BACL5G,OAAO2O,KAAK5I,SAASuF,OAAShH,EAAKhL,OAAQ,WAGhD8U,GAAUhO,EAAEmO,QACdjK,EAAOK,EAAAA,WAAgBR,EAAKuC,YAAavC,EAAKwC,gBACvC3G,OAAO2O,KAAK5I,SAASuF,OAAShH,EAAKhL,OAAQ,gBAFpD,GAfEgL,EAAOH,EAAKyC,0BAEL6H,EAAWnK,EADlBO,EAAeV,KANfG,EAAOH,EAAKqC,mBAAmBlC,KACxBmK,EAAWnK,EAAMO,GAuB3B,CACF,CCnED,MC4FA,EA5FA,SAA0BN,GACxB,IAaIqK,EAbAC,EAAS,GACTC,GAAU,EAEVC,EAAa,GAEbC,EAAe,CACjB,EAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,QAGHC,EAAW,GAiBf1K,EAAQ,SAAS2K,EAAuB3K,GACtC,IAAI4K,EAAU5K,EAAK/K,QAAQ,yEAA0E,6BACrG,OAAI+K,IAAS4K,EACJA,EAEAD,EAAuBC,EAEjC,CAPO,CAVR5K,GAJAA,EAAOA,EAAK/K,QAAQ,sBAAsB,SAACoS,GAAD,OAAWA,EAAM9R,MAAM,IAAIE,KAAK,KAAhC,KAI9BR,QAAQ,uDAAuD,SAAC4V,EAAGC,EAA0BC,EAAUC,EAAOC,GACxH,OAAOH,EACHC,EACAC,EACC/V,QAAQ,0BAA2B,MACnCA,QAAQ,QAAS,MACjBM,MAAM,IAAIE,KAAK,MAChBwV,CACL,KAWD,IAAK,IAAI/T,EAAI,EAAGA,EAAI8I,EAAK/I,OAAQC,IAAK,CACpC,IAAIgU,EAAYlL,EAAK6D,MAAM3M,GAAGmQ,MAAM,gBAChC8D,EAAanL,EAAK6D,MAAM3M,GAAGmQ,MAAM,iBAErC,GAAI6D,EAAW,CACb,IAAIE,EAAiBF,EAAU,GAC/B,GAAIZ,EAAQ,CACV,IAAIe,EAAW9P,SAAS0B,eAAeqN,GACvCA,EAAS,GACTD,EAAcA,EAAYrO,YAAYqP,GAAYX,EAASlU,KAAK6U,EACjE,CAED,IAAIhP,EAAed,SAASW,cAAcuO,EAAaW,IACvDf,EAAcA,EAAYrO,YAAYK,GAAgBqO,EAASlU,KAAK6F,GACpEgO,EAAchO,EACdmO,EAAWhU,KAAK4U,GAChBlU,GAAMgU,EAAU,GAAGjU,OAAS,CAE7B,MAAM,GAAIkU,GAAcX,EAAW3G,OAAO,GAAG,KAAOsH,EAAW,GAAI,CAClE,GAAIb,EAAQ,CACV,IAAIe,EAAW9P,SAAS0B,eAAeqN,GACvCA,EAAS,GACLD,EACFA,EAAYrO,YAAYqP,GAExBX,EAASlU,KAAK6U,EAEjB,CACDhB,EAAcA,EAAY1N,YAAc,KACxC6N,EAAWc,MACXpU,GAAMiU,EAAW,GAAGlU,OAAS,CAE9B,MAAUkU,GAAcX,EAAW3G,OAAO,GAAG,KAAOsH,EAAW,IAC9Db,GAAUa,EAAW,GACrBjU,GAAMiU,EAAW,GAAGlU,OAAS,GAEnBsT,GAAuB,OAAZvK,EAAK9I,IAI1BoT,GAAUtK,EAAK9I,GACfqT,GAAU,GAJVA,GAAU,CAMb,CAED,GAAID,EAAQ,CACV,IAAIe,EAAW9P,SAAS0B,eAAeqN,GACvCI,EAASlU,KAAK6U,EACf,CAED,OAAOX,CACR,ECpFD,SAASa,EAAmBC,EAAOC,GACjC,MAAmB,SAAfD,EAAMxI,KAiCZ,SAAyBwI,GACvB,IAAIE,EAAcnQ,SAASW,cAAc,QAIzC,OAFAyP,EADoBC,EAAiBJ,EAAMxL,MACL0L,GAE/BA,CACR,CAtCUG,CAAgBL,GACC,UAAfA,EAAMxI,KAuCnB,SAAyBwI,EAAOC,GAM9B,OADAK,EAFIL,EADFK,0BAGuBN,GAI3B,SAAgCA,GAC9B,IHvDqD5L,EGuDjDD,EAAcpE,SAASW,cAAc,KACzCyD,EAAYP,UAAUmB,IAAI,0BAC1BZ,EAAYd,QAAQsD,YAAcqJ,EAAMrJ,YACxCxC,EAAYd,QAAQuD,eAAiBoJ,EAAMpJ,eAC3CzC,EAAYd,QAAQ+D,eAAiB4I,EAAM5I,eAC3CjD,EAAYd,QAAQiE,kBAAoB0I,EAAM1I,kBAC9CnD,EAAYd,QAAQmB,KAAOwL,EAAMxL,KAGjC2L,EADoBC,EAAiBJ,EAAMxL,MACLL,GAEtCA,EAAYoM,iBACV,SACiBP,EAAMrJ,YAAaqJ,EAAMpJ,eHpESxC,EGoEO,IAAIN,EAAKK,GHnE9D,SAAC9D,GAEN,IAAIkE,EAAMO,EADVzE,EAAE+N,iBAEF,IAe6C,EAfzCC,EAAShO,EAAEiO,SAAWjO,EAAEkO,QAE5B,GAAIF,IAAWhO,EAAEmO,OACf,OAAOvO,OAAO2O,KAAK5I,SAASuF,OAASnH,EAAKoM,WAAWjX,OAAQ,UAG/D,GAAI8U,GAAUhO,EAAEmO,OACd,OAAOvO,OAAO2O,KAAK5I,SAASuF,OAASnH,EAAKoM,WAAWlI,YAAY/O,OAAQ,UAG3E,IAAK8U,GAAUhO,EAAEmO,OAAQ,CACvB,IAAIjK,EAAOH,EAAKoM,WAAWlI,YAC3B,OAAOoG,EAAWnK,EAAMH,EAAKqM,UAAUlM,GACxC,CAED,OAAK8J,GAAWhO,EAAEmO,SAAUpK,EAAKqK,WAK5BJ,GAAWhO,EAAEmO,QAAWpK,EAAKqK,gBAAlC,GACElK,EAAOH,EAAKyC,0BAEL6H,EAAWnK,EADlBO,EAAeV,KANfG,GAAO,UAAAH,EAAKmC,kBAAL,eAAiBM,4BAA6BjC,EAAAA,QAAAA,cAC9C8J,EAAWnK,EAAMO,GAQ3B,IG0CDX,EAAYP,UAAUmB,IAAI,qBAC1BZ,EAAYd,QAAQmE,KAAO,QAE3B,IAAIb,EAAc,IAAIhN,IAAJ,CAAUqW,EAAMrJ,aAC9BC,EAAiB,IAAIjN,IAAJ,CAAUqW,EAAMpJ,gBAErC,OADAzC,EAAYkC,KAAZ,WAAuBM,EAAYtM,KAAnC,YAA2CuM,EAAevM,MACnD8J,CACR,CA3BQuM,CAAuBV,EAC/B,CA7CUW,CAAgBX,EAAOC,GACN,WAAfD,EAAMxI,KAwEnB,SAA0BwI,EAAOC,GAI3BA,EAFF7H,UADF,IAEEwI,EACEX,EADFW,0BAGEzM,EAON,SAAiC6L,GAC/B,IAAI7L,EAAcpE,SAASW,cAAc,KAEzCyP,EADoBC,EAAiBJ,EAAMxL,MACLL,GAEtCA,EAAYP,UAAUmB,IAAI,sBAC1BZ,EAAYP,UAAUmB,IAAI,0BAC1BZ,EAAYd,QAAQmE,KAAO,SAE3BrD,EAAYd,QAAQsD,YAAcqJ,EAAMrJ,YACxCxC,EAAYd,QAAQuD,eAAiBoJ,EAAMpJ,eAC3CzC,EAAYd,QAAQ+D,eAAiB4I,EAAM5I,eAC3CjD,EAAYd,QAAQiE,kBAAoB0I,EAAM1I,kBAE9CnD,EAAYd,QAAQmB,KAAOwL,EAAMxL,KAEjC,IAAImC,EAAchN,IAAAA,cAAoBqW,EAAMrJ,aAO5C,OANAxC,EAAYkC,KAAZ,WAAuBM,EAAYtM,MAEnC8J,EAAYoM,iBACV,QACApC,EAA2B,IAAIrK,EAAKK,KAE/BA,CACR,CA/BmB0M,CAAwBb,GAI1C,OAFAY,EAA0BZ,EAAO7L,GAE1BA,CACR,CAlFU2M,CAAiBd,EAAOC,GACP,WAAfD,EAAMxI,KA6GnB,SAA0BwI,EAAOC,GAO/B,OAJIA,EADF7H,UAQJ,SAAiC4H,GAC/B,IAAI7L,EAAcpE,SAASW,cAAc,KAGzCyP,EADoBC,EAAiBJ,EAAMxL,MACLL,GAEtCA,EAAYP,UAAUmB,IAAI,sBAC1BZ,EAAYP,UAAUmB,IAAI,0BAC1BZ,EAAYd,QAAQmE,KAAO,SAE3BrD,EAAYd,QAAQsD,YAAcqJ,EAAMrJ,YACxCxC,EAAYd,QAAQuD,eAAiBoJ,EAAMpJ,eAC3CzC,EAAYd,QAAQ+D,eAAiB4I,EAAM5I,eAC3CjD,EAAYd,QAAQiE,kBAAoB0I,EAAM1I,kBAC9CnD,EAAYd,QAAQmB,KAAOwL,EAAMxL,KAEjC,IAAImC,EAAc,IAAIhN,IAAJ,CAAUqW,EAAMrJ,aAC9BC,EAAiB,IAAIjN,IAAJ,CAAUqW,EAAMpJ,gBAQrC,OAPAzC,EAAYkC,KAAZ,WAAuBM,EAAYtM,KAAnC,YAA2CuM,EAAevM,MAE1D8J,EAAYoM,iBACV,QACApC,EAA2B,IAAIrK,EAAKK,KAG/BA,CACR,CA/BmB4M,CAAwBf,EAG3C,CApHUgB,CAAiBhB,EAAOC,GACP,QAAfD,EAAMxI,KAiJnB,SAA2BwI,GACzB,IAAIiB,EAAWlR,SAASW,cAAc,QAClCyD,EAAcpE,SAASW,cAAc,KAYzC,OAXAuQ,EAASrN,UAAUmB,IAAI,wBACvBZ,EAAYP,UAAUmB,IAAI,mBAC1BZ,EAAYP,UAAUmB,IAAI,0BAC1BZ,EAAYpD,aAAa,OAAQiP,EAAMkB,KAEvCf,EADoBC,EAAiBJ,EAAMxL,MACLL,GACtCA,EAAYd,QAAQmE,KAAO,MAC3BrD,EAAYd,QAAQmB,KAAOwL,EAAMxL,KACjCyM,EAASzQ,YAAY2D,GACrBA,EAAYgN,WF5Kd,olCE4K2BC,QAA4B,YAAa,IAE3DH,CACR,CA/JUI,CAAkBrB,GACD,UAAfA,EAAMxI,KAgKnB,SAAqBwI,GACnB,IAAIsB,EAAavR,SAASW,cAAc,OACxC4Q,EAAW1N,UAAUmB,IAAI,oBAEzB,IAAIwM,EAAexR,SAASW,cAAc,OAC1C4Q,EAAW9Q,YAAY+Q,GAEvBA,EAAaxQ,aAAa,MAAOiP,EAAMwB,aACvCD,EAAa3N,UAAUmB,IAAI,gBAE3B,IAAI0M,EAAgB1R,SAASW,cAAc,KAM3C,GALA+Q,EAAc1Q,aAAa,OAAQiP,EAAM0B,WAAa1B,EAAMwB,aAC5DC,EAAc1Q,aAAa,SAAU,UACrC0Q,EAAcjR,YAAY+Q,GAC1BD,EAAW9Q,YAAYiR,GAEnBzB,EAAM5J,MAAO,CACfmL,EAAaxQ,aAAa,QAASiP,EAAM5J,OACzC,IAAIuL,EAAiB5R,SAASW,cAAc,OACxCkR,EAAa7R,SAASW,cAAc,OACxCiR,EAAenR,YAAYT,SAAS0B,eAAeuO,EAAM5J,QACzDuL,EAAe/N,UAAUmB,IAAI,wBAC7B6M,EAAWhO,UAAUmB,IAAI,sBACzBuM,EAAW9Q,YAAYmR,EACxB,MACCL,EAAW9Q,YAAYiR,GAOzB,OAJIzB,EAAM6B,SACRN,EAAaxQ,aAAa,MAAOiP,EAAM6B,SAGlCP,CACR,CAhMUQ,CAAY9B,GACK,iBAAfA,EAAMxI,KAiMnB,SAA2BwI,GACzB,IAAIsB,EAAavR,SAASW,cAAc,OAGxC,OAFA4Q,EAAWH,UAAYnB,EAAM+B,KAC7BT,EAAW1N,UAAUmB,IAAI,mBAClBuM,CACR,CArMUU,CAAkBhC,GACD,aAAfA,EAAMxI,KAuMnB,SAA8BwI,GAC5B,IAAIiC,EAAqBlS,SAASW,cAAc,OAC5CmP,EAAW9P,SAAS0B,eAAeuO,EAAMxL,MAE7C,OADAyN,EAAmBzR,YAAYqP,GACxBoC,CACR,CA3MUC,CAAqBlC,GACJ,eAAfA,EAAMxI,KAkNnB,SAAyBwI,GACvB,IAAImC,EAAapS,SAASW,cAAc,OACpC0R,EAAmBrS,SAASW,cAAc,QAK9C,OAJAyR,EAAW3R,YAAY4R,GAEvBA,EAAiBC,UAAYrC,EAAMxL,KAE5B2N,CACR,CAzNUG,CAAgBtC,GACC,UAAfA,EAAMxI,KA0NnB,SAA0BwI,GACxB,IAAIuC,EAAoBxS,SAASW,cAAc,cAI/C,OAFA6R,EAAkBF,UAAYrC,EAAMxL,KAE7B+N,CACR,CA/NUC,CAAiBxC,GACA,SAAfA,EAAMxI,KACRiL,EAAWzC,EAAM0C,eACA,UAAf1C,EAAMxI,KA2PnB,SAAqBwI,EAAOC,GAC1B,IAAI0C,EAAe5S,SAASW,cAAc,SAqB1C,OApBAsP,EAAM4C,KAAKxH,SACT,SAACyH,GACC,IAAIC,EAAkB/S,SAASW,cAAc,MAC7CmS,EAAkBzH,SAChB,SAAC2H,GACC,IAAIC,EAAmBjT,SAASW,cAAc,MAE9CqS,EAAa3H,SACX,SAAC4E,GACC,IAAIiD,EAAelD,EAAmBC,EArQzCkD,WAsQGF,EAAiBxS,YAAYyS,EAC9B,IAGHH,EAAgBtS,YAAYwS,EAC7B,IAEHL,EAAanS,YAAYsS,EAC1B,IAEIH,CACR,CAjRUO,CAAYlD,GACK,eAAfA,EAAMxI,KAkRnB,SAAyBwI,GACvB,IAAImD,EAAgBpT,SAASW,cAAc,OAG3C,OAFAyS,EAAchC,UAAYnB,EAAM+B,KAChCoB,EAAcvP,UAAUmB,IAAI,mBACrBoO,CACR,CAtRUC,CAAgBpD,GACC,kBAAfA,EAAMxI,OAwRb6L,EAAgBtT,SAASW,cAAc,OAC7BkD,UAAUmB,IAAI,wBACrBsO,GAxRmB,kBAAfrD,EAAMxI,KA2RnB,SAA4B8L,EAAmBrD,GAC7C,IAAIsD,EAAexT,SAASW,cAAc,QAC1C6S,EAAa3P,UAAUmB,IAAI,wBAC3B,IAAI8K,EAAW9P,SAAS0B,eAAe6R,EAAkBE,YAAc,MAOvE,OANAD,EAAa/S,YAAYqP,GACzByD,EAAkBG,OAAOrI,SAAQ,SAAC4E,GAChC,IAAIiD,EAAelD,EAAmBC,EAhS/B0D,WAiSPH,EAAa/S,YAAYyS,EAC1B,IAEMM,CACR,CArSUG,CAAmB1D,QADrB,EAqRT,IACMqD,CAnRL,CA6LD,SAASlD,EAAuBwD,EAAYC,GAC1CD,EAAWvI,SAAQ,SAAC/P,GAClBuY,EAAOpT,YAAYnF,EACpB,GACF,CAoBD,SAASoX,EAAWoB,GAClB,IAAIC,EAAcD,EAAgB,GAAGE,QACnChU,SAASW,cAAc,MACvBX,SAASW,cAAc,MAuBzB,OArBImT,EAAgB,GAAGE,SACrBD,EAAY/S,aAAa,OAAQ8S,EAAgB,GAAGG,SAGtDH,EAAgBzI,SAAQ,SAAC6I,GACvB,IAAIC,EAAkBnU,SAASW,cAAc,MAS7C,GAPAuT,EAAeE,aAAa/I,SAC1B,SAAC4E,GACC,IAAIiD,EAAelD,EAAmBC,GACtCkE,EAAgB1T,YAAYyS,EAC7B,IAGCgB,EAAeG,SAAS3Y,OAAS,EAAG,CACtC,IAAI4Y,EAAY5B,EAAWwB,EAAeG,UAC1CF,EAAgB1T,YAAY6T,EAC7B,CAEDP,EAAYtT,YAAY0T,EACzB,IACMJ,CACR,CAqDD,UCxNA,QA5GA,SAASQ,EAAcrE,GACrB,IACE1F,EAEE0F,EAFF1F,SACAgK,EACEtE,EADFsE,qBAGEzM,EAsDN,SAA8BmI,GAC5B,IACEtV,EACEsV,EADFtV,MAAO4P,EACL0F,EADK1F,SAAUM,EACfoF,EADepF,iBAAkBlD,EACjCsI,EADiCtI,UAGjCG,EAAiB/H,SAASW,cAAc,WAC5CoH,EAAelE,UAAUmB,IAAI,kBAC7B,IAAI8E,EAAmB9J,SAASW,cAAc,KAc9C,OAbAmJ,EAAiBjG,UAAUmB,IAAI,oBAC/B+C,EAAetH,YAAYqJ,GAC3B/B,EAAelI,MAAM/F,QAAU,OAC/BiO,EAAezE,QAAQwH,iBAAmBA,EAC1C/C,EAAezE,QAAQqG,UAAY/O,EAAMb,UACzCgO,EAAezE,QAAQuG,aAAeW,EAASzQ,UAC/CgO,EAAezE,QAAQsE,UAAYA,EAE/BhN,EAAMb,YAAcyQ,EAASzQ,YAC3B6N,EAAY,GAAGG,EAAe0M,QAAQzU,SAASW,cAAc,OACjEoH,EAAelE,UAAUmB,IAAI,yBAGxB+C,CACR,CA5EsB2M,CAAqBxE,GACtCtL,EAAY,IAAIL,EAAUwD,GAE9BmI,EAAcyE,wBAA0B,GACxCzE,EAAcK,yBAchB,SAAkCxI,EAAgBmI,GAChD,OAAO,SAACD,GACN,IAAI2E,EAAkBL,EACpB9R,OAAOoS,OAAO,CAAC,EAAG3E,EAAe,CAC/B1F,SAAU5Q,IAAAA,cAAoBqW,EAAMpJ,mBAIxC+N,EAAgB7G,MAAK,SAAC+G,GACpB/M,EAAetH,YAAYqU,EAC5B,IAED5E,EAAcyE,wBAAwB1Z,KAAK2Z,EAC5C,CACF,CA5B0CrE,CAAyBxI,EAAgBmI,GAClFA,EAAcW,0BA6BhB,SAAmC9I,EAAgBmI,GACjD,IACE9D,EAGE8D,EAHF9D,cACA5B,EAEE0F,EAFF1F,SACAmK,EACEzE,EADFyE,wBAGF,OAAO,SAAC1E,EAAO7L,GACb,IAAIxJ,EAAQhB,IAAAA,cAAoBqW,EAAMrJ,aAClCvC,EAAO,IAAIN,EAAKK,GAGpB,GAFA2Q,EAAYna,GAqChB,SAA0ByJ,EAAMG,EAAMwQ,GACpC,IAAIC,EAA8CzQ,EAAKoI,cACnDsI,EAAuB1Q,EAAK2Q,YAE5BC,EAA4B5Q,EAAK2Q,YACjCE,EAA+BD,EAG/BE,EACFjR,EAAKuC,YAAY7M,aAAcqb,aAA/B,EAA+BA,EAA2Brb,YAC1DsK,EAAKwC,eAAe9M,aAAcsb,aAAlC,EAAkCA,EAA8Btb,WAG9Dwb,EAA4CP,EAA2Bjb,YACzEkb,EAA4Clb,UAE9C,OAAOmb,GACLI,GACAC,CACH,CAtDOC,CAAiBnR,EAAM+H,EAAe5B,GAAW,CACnD,IAAIxC,EAAUoE,EAAcS,oBACxB4I,EAAwBC,EAAmB1N,EAASD,GACxD4M,EAAwB1Z,KAAKwa,EAC9B,CACF,CACF,CA/C2C5E,CAA0B9I,EAAgBmI,GAEpF,IAAIyF,EAAoBnB,EAAqBhK,EAASzQ,WACtD,IAAK4b,EAAmB,MAAM,IAAInV,MAAJ,6CAAgDgK,EAASzQ,YAOvF,OALA4b,EAAkBtK,SAAQ,SAAC4E,GACzB,IAAIvP,EAAUsP,EAAmBC,EAAOC,GACxCtL,EAAUkF,iBAAiBrJ,YAAYC,EACxC,IAEMwN,QAAQ0H,IAAI1F,EAAcyE,yBAAyB5G,MAAK,kBAAMhG,CAAN,GAChE,ECID,EA7B2B,SAArB2N,EAAsBtJ,EAAexI,GACzC,GAA6B,IAAzBwI,EAAc1Q,OAChB,OAAOwS,QAAQ2H,QAAQ,MAGzB,IAAIC,EAAqBjR,EAAAA,sBAA2BuH,EAAc2J,aAAcnS,GAChF,OAAIkS,EACGjR,EAAAA,oBAAyBjB,EAAewI,GACtCsJ,EAAmBtJ,EAAcS,oBAAqBiJ,GADO5H,QAAQ2H,UAIpDd,EAAY3I,EAAcC,YAEf0B,MAAK,YAAgD,IAA7CyG,EAA6C,EAA7CA,qBAAsB1J,EAAuB,EAAvBA,iBACjE,OAAOyJ,EACL,CACE3Z,MAAOwR,EAAcC,WACrB7B,SAAU4B,EAAcC,WACxBD,cAAAA,EACAtB,iBAAAA,EACA0J,qBAAAA,EACA5M,UAAWE,OAAOlE,EAAcN,QAAQsE,WAAa,GAAK,GAG/D,IAEiBmG,MAAK,SAACiI,GAAD,OAAapS,EAAcnD,YAAYuV,EAAvC,GACxB,ECiBD,ICnBMC,EAAgB,SAAhBA,EAAiBrR,GACrBA,EAAU9K,UACN8K,EAAUsR,aACdtR,EAAU4B,YAAc5B,EAAUuR,YAAY9K,SAAQ,SAAAhH,GAAI,OAAIA,EAAKwK,MAAT,IAC1DjK,EAAUwR,yBAAyB/K,SAAQ,SAAAhH,GAAI,OAAIA,EAAKwK,MAAT,IAC3CjK,EAAU4B,aAAezC,EAAAA,WAAgBA,EAAAA,OAAYa,EAAU4B,YACnEyP,EAAcrR,EAAUqD,iBACzB,EAED,QA5BoB,SAACmE,EAAerH,EAAcsR,GAEhD,GADAA,EAAiBA,GAAkB,CAAC,GAC/BjK,EAAcxH,UAAW,ODuBhC,SAAuBJ,EAAM6R,GAE3B,GADA/J,QAAQC,MAAM,sCAAuC/H,EAAKhL,QACtDgL,EAAK9I,OAAS,EAEhB,OADA4Q,QAAQgK,IAAI,WAAY9R,EAAKiJ,mBAAmBjU,QACzC+c,EAAY/R,EAAKiJ,oBACnB,GAAI4I,EAAeG,gBAIxB,MAAM,IAAIhW,MAAM,gDAFhB,OADA8L,QAAQC,MAAM,iEAAmE1H,EAAAA,SAC1E8J,EAAW9J,EAAAA,QAAc,KAAM,CAAE2R,iBAAiB,GAI5D,CClCsCC,CAAcrK,EAAeiK,GAClE,IAAMtR,SAAAA,EAAcrE,OAA2E,CAAjE,SAAQ,OAAOiO,EAAWvC,EAAe,KAAMiK,EAAkB,CAC/F,GAAItR,SAAAA,EAAc2R,YAAYtK,GAC5B,OAAOuC,EAAW5J,EAAa+B,0BAA2B/B,EAAcsR,GDQ1EtM,MAAMC,KAAKhK,SAAS2W,qBAAqB,MAAMtL,SAAQ,SAACjH,GACtDA,EAAYP,UAAUxE,OAAO,wBAC7B+E,EAAYP,UAAUxE,OAAO,mBAC9B,IATD0K,MAAMC,KAAKhK,SAAS2W,qBAAqB,YAAYtL,SAAQ,SAACtD,GAC5DA,EAAelI,MAAM/F,QAAU,MAChC,IAWDiQ,MAAMC,KAAKhK,SAASuK,iBAAiB,6BAA6Bc,SAAQ,SAACtD,GACzEA,EAAelE,UAAUxE,OAAO,0BACjC,ICbDwF,EAAAA,SAAaE,aAAA,EAAAA,EAAc6R,sBAAuBxK,GDZpD,SAAmBzC,GACjB,IAAIkN,EAAiB7W,SAASC,cAAc,eACxC4W,GAAkBA,EAAexX,SACrC,IAAIyX,EAAmB9W,SAASW,cAAc,MAC1CoW,EAAgB1G,EAAiB1G,GACrCI,MAAMC,KAAK+M,GAAe1L,SAAQ,SAAC3K,GAAaoW,EAAiBrW,YAAYC,EAAS,IACtFyC,EAAgBsR,QAAQqC,EACzB,CCMCE,CAAU5K,EAAc6K,cAAcrS,UAAUkG,kBAChD9K,SAASqG,MAAQ+F,EAAc6K,cAAcrS,UAAUhK,MAAMb,UAC7DgK,EAAAA,OAAYgB,GAEZqH,EAAcxH,UAAUsS,SACxBjB,EAAc7J,EAAcxH,WD6B9B,SAAoByR,GAClB,IAAIc,EAAWd,EAAezH,aAAe,SACzCwI,EAAMrT,EAAAA,UAAiBA,EAAAA,UAAAA,QAAAA,UAA2D,IAAvB7D,OAAOmX,OAAOC,OAAgB,EAE7FpX,OAAOqX,SACL,CACEH,IAAAA,EACAD,SAAAA,GAGL,CCtCCK,CAAWnB,EACZ,ECLD,EAfmB,SAACjK,EAAerH,EAAcsR,GAM/C,OFqDF,SAA6BjK,EAAerH,GAC1C,KAAMqH,aAAyBvH,GAAO,MAAM,IAAIrE,MAAM,yBACtD,GAAIuE,KAAkBA,aAAwBhB,GAAO,MAAM,IAAIvD,MAAM,kCACtE,CE7DCiX,CAAoBrL,EAAerH,GAC/BqH,EAAcV,QAAOU,EAAgBvH,EAAAA,SAEnB6Q,EAAmBtJ,EAAejJ,GAAlC,OAAyD,SAAA7C,GAAC,OAAIgM,QAAQC,MAAMjM,EAAlB,IAEzDyN,MAAK,WAC1BwI,EACEnK,EACArH,EACAsR,EAEH,IANM,OAME,SAAA/V,GAAC,OAAIgM,QAAQC,MAAMjM,EAAlB,GACX,ECfD,SAASoX,IACP,IAAIrT,EAAON,EAAAA,UAEX,OAAIM,EAAKqC,mBAAmBqC,OAAOxE,EAAAA,UAC1BoK,EAAWtK,EAAKqC,mBAAmBlC,MAGrCmK,EACLtK,EAAKmC,WAAWM,0BAChB,IAAI/C,GAAK,kBAAMA,EAAAA,yBAA8BM,EAAKmC,WAAWE,qBAAuBrC,EAAKmC,UAAhF,IAEZ,CAED,SAASmR,IACP,IAAItT,EAAON,EAAAA,UACP6T,EAAU7T,EAAAA,yBAA8BM,EAAKqC,mBAAmB0D,eAAenC,kBACjF5D,EAAKqC,mBAAmB0D,eAAe5D,WAEzC,OAAOmI,GACLiJ,aAAA,EAAAA,EAAS9Q,4BAA6BjC,EAAAA,QACtC+S,GAAWvT,EAEd,CAED,SAASwT,IACP,IAAIC,EAAU/T,EAAAA,UASd,GAPI+T,EAAQvO,UACVoF,EACEmJ,EAAQhR,0BACRgR,EAAQ5O,gBAAgB1C,YAIxBsR,EAAQxO,UAAYwO,EAAQjP,QAAS,SACnC+O,GAAU,UAAAE,EAAQ5O,uBAAR,eAAyB3C,aAAzB,UAAsCuR,EAAQ5O,uBAA9C,aAAsC,EAAyB1C,YAE7EmI,EACEiJ,EAAQ9Q,0BACR,IAAI/C,GAAK,kBAAMA,EAAAA,yBAA8B6T,EAAQlR,qBAAuBkR,CAAnE,IAEZ,CAEIE,EAAQnQ,UACXgH,EACEmJ,EAAQhR,0BACRgR,EAGL,CAED,SAASC,IACP,IAAI1T,EAAON,EAAAA,UAAAA,iBAAkCA,EAAAA,UAAAA,YAC7C,OAAO4K,EACLtK,EAAKyC,0BACLzC,EAEH,CAED,SAAS2T,IACP,IAAI3T,EAAON,EAAAA,UAAAA,aAA8BA,EAAAA,UAAAA,aAEzC,OAAO4K,EACLtK,EAAKyC,0BACLzC,EAEH,CAED,SAAS4T,EAAT,GAAgD,IAAlB3J,EAAkB,EAAlBA,OAAQG,EAAU,EAAVA,OACpC,GAAI1K,EAAAA,UAAAA,UAA2B0K,EAAQ,SACjCpK,GAAO,UAAAN,EAAAA,UAAAA,uBAAA,eAAgCwC,aAAhC,UAA6CxC,EAAAA,UAAAA,uBAA7C,aAA6C,EAAgCyC,YACpFhC,EAAOH,EAAKyC,0BAEhB,OAAIwH,EACKpO,OAAO2O,KAAK5I,SAASuF,OAASzH,EAAAA,UAAAA,WAAAA,YAAuC,UAErE4K,EAAWnK,EAAMH,EAE3B,CAED,GAAIN,EAAAA,UAAAA,SAAyB,CAC3B,GAAIuK,EAAQ,CACV,IAAI9J,EAAOT,EAAAA,UAAAA,WAAAA,YACX,OAAO7D,OAAO2O,KAAK5I,SAASuF,OAAShH,EAAKhL,OAAQ,SACnD,CAED,IAAK8U,EAAQ,CACX,IAAI9J,EAAOT,EAAAA,UAAAA,WAAAA,YACX,OAAO4K,EACLnK,EACAT,EAAAA,YAAiBS,GACjB,CAAEoK,YAAa,QAElB,CACF,CAED,GAAI7K,EAAAA,UAAAA,SAAyB,CAC3B,IAAIS,EAAOT,EAAAA,UAAAA,WAAAA,YAEX,OAAIuK,EACKpO,OAAO2O,KAAK5I,SAASuF,OAAShH,EAAKhL,OAAQ,UAE3CmV,EACLnK,EACAT,EAAAA,UAAAA,WAAAA,UAAoCS,GACpC,CAAEoK,YAAa,QAGpB,CAED,GAA4B,QAAxB7K,EAAAA,UAAAA,KAA+B,CACjC,GAAIuK,EACF,OAAOpO,OAAO2O,KAAK9K,EAAAA,UAAAA,QAAAA,KAA6B,UAEhD7D,OAAO+F,SAAWlC,EAAAA,UAAAA,QAAAA,IAErB,CACF,CC1GD,IA0BMmU,EAAwB,CAC5B,KAAQH,EACR,GAAML,EACN,KAAQG,EACR,MAASG,EAET,EAAKD,EACL,EAAKF,EACL,EAAKH,EACL,EAAKM,EAEL,ODmIF,WACE,OAAOrJ,EAAW9J,EAAAA,QAAAA,cACnB,ECpIC,EDqHF,WACE,IAAIsT,EAAcpU,EAAAA,UACdiE,EAAUmQ,EAAYC,6BAEtBR,EAAUO,EAAYzH,UAAU1I,GAEpC,OAAO2G,EACL3G,EACA4P,EACA,CAAEhJ,YAAa,QAElB,EC/HC,EDqIF,WACE,OAAO1O,OAAO2O,KAAK3O,OAAO+F,SAASK,KAAM,SAC1C,ECtIC,WAAYqR,EACZ,UAAWA,EAEX,MAAS,kBAAMM,EAAmB,CAAC,EAA1B,EACT,aAAc,kBAAMA,EAAmB,CAAE3J,QAAQ,GAAnC,EACd,aAAc,kBAAM2J,EAAmB,CAAE3J,QAAQ,GAAnC,EACd,YAAa,kBAAM2J,EAAmB,CAAE3J,QAAQ,EAAOG,QAAQ,GAAlD,EACb,iBAAkB,kBAAMwJ,EAAmB,CAAE3J,QAAQ,EAAMG,QAAQ,GAAjD,EAClB,iBAAkB,kBAAMwJ,EAAmB,CAAE3J,QAAQ,EAAMG,QAAQ,GAAjD,EAElB,ID0DF,WACE,IAAIpK,EAAON,EAAAA,UAGX,GAAIM,EAAKwE,SAAWxE,EAAKgU,YAAa,CACpC,IAAIC,EAAWjU,EAAKkU,gBAAkBlU,EAAKmU,aAAenU,EAC1D,OAAOsK,EACL2J,EAASxR,0BACTwR,EAEH,CAED,GAAIjU,EAAKwD,iBAAkB,OACrB9C,EAAeV,EAAKmU,cAAL,UAAoBnU,EAAKmC,kBAAzB,aAAoB,EAAiBgS,cAAenU,EAAKqC,mBAAmBH,UAC/F,OAAOoI,EACL5J,EAAa2B,mBAAmBlC,KAChCO,EAEH,CAGD,GAAIV,EAAKmU,cAAgBnU,EAAKmU,YAAYzP,OAAO1E,GAC/C,OAAOsK,EACLtK,EAAKmU,YAAY9R,mBAAmBlC,KACpCH,EAAKmU,aAKT,GAAInU,EAAKoU,YAAY1P,OAAO1E,GAAO,CACjC,IAAIU,EAAgB,SAAS2T,EAAerU,GAC1C,OAAMA,EAAKmC,YAAcnC,EAAKmC,WAAWqC,QAE9BxE,EAAKmC,WAAWgS,YAClBnU,EAAKmC,WAAWgS,YAEhBE,EAAcrU,EAAKmC,YAJnBnC,EAAKsU,YAMf,CARmB,CAQjBtU,GAEH,OAAOsK,EACL5J,EAAa+B,0BACb/B,EAEH,CACF,GCpGK6T,EAAW,CACf,GAAI,OACJ,GAAI,QACJ,GAAI,KACJ,GAAI,OAEJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,IAAK,IACL,GAAI,IACJ,GAAI,IAEJ,GAAI,QACJ,EAAG,MACH,GAAI,SAEJ,IAAK,IAEL,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,KA7EJ1Y,OAAOsQ,iBAAiB,WAAW,SAASlQ,GAC1C,IAAIuY,GACDvY,EAAEiO,QAAU,QAAU,KACtBjO,EAAEkO,QAAU,QAAU,KACtBlO,EAAEmO,OAAS,OAAS,KACpBnO,EAAEwY,SAAW,SAAW,IAEvBC,EAAUH,EAAStY,EAAE0Y,SACrBC,EAAeJ,EAAYE,EAE3B,CAAC,MAAO,OAAQ,MAAM3P,SAAS2P,IACjCzY,EAAE+N,iBAGAtK,EAAAA,WACDmU,EAAsBe,IAAe,WAAY,KACzCf,EAAsBe,IAC/BtK,EACE9J,EAAAA,QACAd,EAAAA,cAGL,ICjCG,sBAAuB2B,UACzBA,QAAQwT,kBAAoB,UAG9BhZ,OAAOsQ,iBAAiB,YAAY,SAAClQ,GACnC,IAIIsO,EAJAuK,EAAgBpV,EAAAA,wBAA6BzD,GAAK,IAAIyD,EAAKzD,EAAE8E,OAAS,KAE1E,IAAM+T,EAAczY,OAA0C,CAA/B,SAAQyY,EAAgB,IAAO,CAI5DvK,EADErK,EAAAA,QAAAA,KAAAA,cAAAA,OAA4CM,EAAAA,QAAAA,eAChC,SAEA,OAGhB8J,EACE9J,EAAAA,iBACAsU,GAAiBpV,EAAAA,iBACjB,CAAE6K,YAAAA,GAEL,ICjBHD,EACE9J,EAAAA,iBACAd,EAAAA,eACA,CAAE6K,YAAa,Q","sources":["webpack:///./cli/commands/shared/remove_style_characters.js","webpack:///./cli/commands/shared/topic.js","webpack:///./client/style/canopy.scss","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack:///./node_modules/css.escape/css.escape.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack:///./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack:///./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack:///./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack:///./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/nonce","webpack:///./client/style/canopy.scss?ec98","webpack:///./client/helpers/getters.js","webpack:///./client/requests/request_cache.js","webpack:///./client/models/link.js","webpack:///./client/models/paragraph.js","webpack:///./client/models/path.js","webpack:///./client/requests/request_json.js","webpack:///./client/render/click_handlers.js","webpack:///./client/assets/external_link_icon/icon.svg","webpack:///./client/render/render_styled_text.js","webpack:///./client/render/render_token_element.js","webpack:///./client/render/render_dom_tree.js","webpack:///./client/render/fetch_and_render_path.js","webpack:///./client/display/helpers.js","webpack:///./client/display/display_path.js","webpack:///./client/display/update_view.js","webpack:///./client/keys/key_handlers.js","webpack:///./client/keys/register_key_listeners.js","webpack:///./client/history/register_pop_state_listener.js","webpack:///./client/canopy.js"],"sourcesContent":["/*\nThis function removes style characters from a string, eg '*_a_* -> 'a'\nIn order to remove multiple layers of wrapping, eg *_a_*, each call removes the outermost layer,\n  then, if there was a difference between the previous value and this one, we try once more.\n  If there was no difference, then we have run out of style tokens and can return.\n*/\n\nfunction removeStyleCharacters(string) {\n  let newString = string.replace(/(^|(?:.?[^\\S])+)([_`*~])((?:.*?\\S))\\2(\\W+|$)/, '$1$3$4');\n  if (newString !== string) {\n    return removeStyleCharacters(newString);\n  } else {\n    return string;\n  }\n}\n\nmodule.exports = removeStyleCharacters;\n","let removeStyleCharacters = require('./remove_style_characters');\nrequire('css.escape');\n\nclass Topic {\n  // There are several permutations of the topic key\n\n  constructor(string) {\n    this.display = string; // the string precisely as it appears in the expl file\n\n    this.mixedCase = removeStyleCharacters(string)  // the display verison sans style characters * _ ~ ` and a trailing question mark, encoding style characters\n      .split(/\\\\\\\\/g).map(string => string.replace(/\\\\/g, '')).join('\\\\\\\\'); // Remove backslashes that are escaping literal characters now that removeStyleCharacters has already run\n\n    this.escapedMixedCase = CSS.escape(this.mixedCase);\n\n    this.slug = this.mixedCase // This string encodes characters that will cause problems in the URL, but we do not encode all characters eg quotation marks\n      .replace(/%/g, '%25')\n      .replace(/\\\\\\\\/g, '%5C%5C') // a double backslash represents a literal backslash not an escape character\n      .replace(/#/g, '%23')\n      .replace(/`/g, '%60') // Chrome automatically replaces in URL and could be misinterpreted on the command line as subshell\n      .replace(/_/g, '%5C_') // Literal style characters are escaped so that when we parse the URL, we don't remove them with removeStyleCharacters\n      .replace(/ /g, '_'); // This must be done after literal underscores have received encoded backslashes above to distinguish between them and these\n\n    this.caps = this.mixedCase // This is the string that is used to find matches between links and topic names.\n      .toUpperCase() // We want matches to be case-insensitive\n      .replace(/\\?$/, '') // It should match whether or not both have trailing question marks\n      .replace(/\"/g, '') // We remove quotation marks so matches ignore them\n      .replace(/'/g, '')\n      .replace(/_/g, ' '); // We de-slugify the URL and turn it to caps to retreive the given topic from the response data, but if there were literal underscores originally\n                           // this information is lost. Therefore, we remove all underscores to make sure we can use the URL topic name to find the given topic.\n\n    this.fileName = this.slug; // This is the string that will be used for the file name on disk\n\n    this.requestFileName = encodeURIComponent(this.slug); // This is the string that will be used to _request_ the file name on disk, so it needs to be encoded\n  }\n\n  static fromMixedCase(string) {\n    string = string.replace(/([`_~*])/g, '\\\\$1'); // In mixed case style character literals are unescaped, so we escape them to avoid double-processing\n    let topic = new Topic(string);\n    topic.display = null; // If a topic instance was instantiated from the mixed-case string, the display version is irretrievable\n    return topic;\n  }\n\n  static fromEncodedSlug(string) {\n    string = convertUnderscoresToSpaces(string);\n    string = decodeURIComponent(string);\n    string = string\n      .replace(/\\*/g, '\\\\*') // underscores are escaped in the URL itself, but for the other style characters we must escape them so that\n      .replace(/`/g, '\\\\`')  // they don't get stripped by removeStyleCharacters\n      .replace(/~/g, '\\\\~');\n\n    let topic = new Topic(string); // Encoded style characters decode to escaped style characters, so we can use the regular\n                                   // \"display -> mixed case\" processing step, even though this isn't the display string\n    topic.display = null; // The encoded slug was formed from the mixed case, so that is the best we can reconstruct from it\n    return topic;\n  }\n}\n\nTopic.convertUnderscoresToSpaces = function convertUnderscoresToSpaces(string) {\n  // We want to turn underscores into spaces, but not escaped underscores ie %5C_, but yes escaped escaped underscores ie %5C%5C_\n  return string.split(/%5C%5C/g) // first remove double backslashes to avoid seeing %5C%5C_ as an underscore literal\n    .map(string => string\n      .split(/%5C_/g) // now remove escaped backslashes to avoid seeing them as spaces converted to underscores\n      .map(string => string.replace(/_/g, ' '))\n      .join('%5C_') //convert underscores not preceded by single %5C to spaces\n    ).join('%5C%5C');\n}\n\nTopic.convertSpacesToUnderscores = function convertSpacesToUnderscores(string) {\n  return string.split('/').map(string => (new Topic(string)).fileName).join('/');\n}\n\nfunction convertUnderscoresToSpaces(string) {\n  // We want to turn underscores into spaces, but not escaped underscores ie %5C_, but yes escaped escaped underscores ie %5C%5C_\n  return string.split(/%5C%5C/g) // first remove double backslashes to avoid seeing %5C%5C_ as an underscore literal\n    .map(string => string\n      .split(/%5C_/g) // now remove escaped backslashes to avoid seeing them as spaces converted to underscores\n      .map(string => string.replace(/_/g, ' '))\n      .join('%5C_') //convert underscores not preceded by single %5C to spaces\n    ).join('%5C%5C');\n}\n\nmodule.exports = Topic;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#_canopy{padding-top:15px;padding-bottom:55px}#_canopy h1{text-align:center;margin:auto;width:40%;margin-top:10px}#_canopy hr{width:9%;display:block;height:1px;border:0;border-top:5px solid #ccc;margin:0px auto;padding-bottom:30px}#_canopy section.canopy-topic-section{padding-top:40px}#_canopy section.canopy-selected-section{padding-bottom:80vh}#_canopy section{padding-top:30px}#_canopy p{overflow:hidden;font-size:22px;max-width:700px;margin:auto;line-height:1.3;letter-spacing:-0.003em;font-weight:400}#_canopy a.canopy-selectable-link{text-decoration:underline #ddd;color:#000;cursor:pointer}#_canopy a.canopy-selectable-link:hover{text-decoration:underline}#_canopy a.canopy-selectable-link:focus{outline:0}#_canopy a.canopy-selectable-link.canopy-open-link{text-shadow:.8px 0px 0px #000;text-decoration:underline}#_canopy a.canopy-selectable-link.canopy-selected-link{background-color:#edeefc;text-shadow:0px 0px 0px #000;text-decoration:none}#_canopy a.canopy-selectable-link.canopy-selected-link:hover{text-decoration:underline}#_canopy span.canopy-text-span{display:block}#_canopy hr.canopy-footnote-rule{width:700px;display:block;height:1px;border:0;border-top:1px solid #ccc;margin:12px 0;padding:0}#_canopy sup{font-size:60%;padding:2px}#_canopy .canopy-footnote-span{font-size:80%}#_canopy blockquote{padding:0 .7em;border-left:.25em solid #d3d3d3;color:#565e67;margin-block-start:.5em;margin-block-end:.5em;margin-inline-start:0px;margin-inline-end:0px}#_canopy blockquote a.canopy-selectable-link{text-decoration:underline #d3d3d3}#_canopy pre{margin:7px 10px;background-color:#eff0f1;padding:5px;font-size:85%}#_canopy code{background-color:#eff0f1;font-size:90%}#_canopy table{margin:7px auto;table-layout:fixed;width:70%;border-collapse:collapse;border:2px solid #000}#_canopy table td,#_canopy table th{border:2px solid #000;text-align:center;padding:6px}#_canopy .canopy-image{width:220px;max-height:250px}#_canopy div.canopy-image-div{float:right;border:1px solid #c8ccd1;padding:3px;background-color:#f8f9fa;font-size:94%;text-align:center;overflow:hidden;margin:10px}#_canopy div.canopy-image-div>sup{display:block}#_canopy .canopy-url-link-span>svg{height:15px;width:12px;display:none}#_canopy .canopy-selected-link+svg,#_canopy .canopy-url-link-span:hover>svg{display:inline;vertical-align:middle}#_canopy ol,#_canopy ul{margin:7px 10px}#_canopy div.canopy-raw-html{display:inline}#_canopy>section.canopy-topic-section{padding-top:30px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./client/style/canopy.scss\"],\"names\":[],\"mappings\":\"AAAA,SACE,gBAAA,CACA,mBAAA,CAEA,YACE,iBAAA,CACA,WAAA,CACA,SAAA,CACA,eAAA,CAGF,YACE,QAAA,CACA,aAAA,CACA,UAAA,CACA,QAAA,CACA,yBAAA,CACA,eAAA,CACA,mBAAA,CAGF,sCACE,gBAAA,CAGF,yCAME,mBAAA,CAGF,iBACE,gBAAA,CAGF,WACE,eAAA,CACA,cAAA,CACA,eAAA,CACA,WAAA,CAEA,eAAA,CACA,uBAAA,CACA,eAAA,CAKF,kCACE,8BAAA,CACA,UAAA,CACA,cAAA,CAEA,wCACE,yBAAA,CAGF,wCACE,SAAA,CAGF,mDACE,6BAAA,CACA,yBAAA,CAGF,uDACE,wBAAA,CACA,4BAAA,CACA,oBAAA,CAEA,6DACE,yBAAA,CAiBN,+BACE,aAAA,CAGF,iCACE,WAAA,CACA,aAAA,CACA,UAAA,CACA,QAAA,CACA,yBAAA,CACA,aAAA,CACA,SAAA,CAGF,aACE,aAAA,CACA,WAAA,CAGF,+BACE,aAAA,CAGF,oBACE,cAAA,CACA,+BAAA,CACA,aAAA,CAEA,uBAAA,CACA,qBAAA,CACA,uBAAA,CACA,qBAAA,CAEA,6CACE,iCAAA,CAIJ,aACE,eAAA,CACA,wBAAA,CACA,WAAA,CACA,aAAA,CAGF,cACE,wBAAA,CACA,aAAA,CAGF,eACE,eAAA,CACA,kBAAA,CACA,SAAA,CACA,wBAAA,CACA,qBAAA,CAEA,oCACE,qBAAA,CACA,iBAAA,CACA,WAAA,CAIJ,uBACE,WAAA,CACA,gBAAA,CAGF,8BACE,WAAA,CACA,wBAAA,CACA,WAAA,CACA,wBAAA,CACA,aAAA,CACA,iBAAA,CACA,eAAA,CACA,WAAA,CAGF,kCACE,aAAA,CAGF,mCACE,WAAA,CACA,UAAA,CACA,YAAA,CAGF,4EACE,cAAA,CACA,qBAAA,CAGF,wBACE,eAAA,CAGF,6BACE,cAAA,CAIJ,sCACE,gBAAA\",\"sourcesContent\":[\"#_canopy {\\n  padding-top: 15px;\\n  padding-bottom: 55px;\\n\\n  h1 {\\n    text-align: center;\\n    margin: auto;\\n    width: 40%;\\n    margin-top: 10px;\\n  }\\n\\n  hr {\\n    width: 9%;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 5px solid #ccc;\\n    margin: 0px auto;\\n    padding-bottom: 30px;\\n  }\\n\\n  section.canopy-topic-section {\\n    padding-top: 40px;\\n  }\\n\\n  section.canopy-selected-section {\\n    /* Removing DOM elements from the bottom of the screen can force the page to scroll upward to the existing elements\\n    which is not animated. If we keep a padding on the bottom of the last element just beyond the viewport, then\\n    removal of elements from the bottom of the visible stack never brings the real bottom of the page into view, and so\\n    the scroll upwards can be animated using the window.scrollTo method. */\\n\\n    padding-bottom: calc(80vh);\\n  }\\n\\n  section {\\n    padding-top: 30px;\\n  }\\n\\n  p {\\n    overflow: hidden;\\n    font-size: 22px;\\n    max-width: 700px;\\n    margin: auto;\\n\\n    line-height: 1.3;\\n    letter-spacing: -.003em;\\n    font-weight: 400;\\n  }\\n\\n///////////// Link styles /////////////////\\n\\n  a.canopy-selectable-link {\\n    text-decoration: underline #DDDDDD;\\n    color: black;\\n    cursor: pointer;\\n\\n    &:hover {\\n      text-decoration: underline;\\n    }\\n\\n    &:focus {\\n      outline:0;\\n    }\\n\\n    &.canopy-open-link {\\n      text-shadow: .8px 0px 0px #000000;\\n      text-decoration: underline;\\n    }\\n\\n    &.canopy-selected-link {\\n      background-color: #edeefc;\\n      text-shadow: 0px 0px 0px #000000;\\n      text-decoration: none;\\n\\n      &:hover {\\n        text-decoration: underline;\\n      }\\n    }\\n\\n    /*\\n    &.canopy-dfs-previously-selected-link {\\n      color: #ff0000 !important;\\n    }\\n\\n    &.canopy-reverse-dfs-previously-selected-link {\\n      color: #0000ff !important;\\n    }\\n    */\\n  }\\n\\n/////////////////////////////////////////////\\n\\n  span.canopy-text-span {\\n    display: block;\\n  }\\n\\n  hr.canopy-footnote-rule {\\n    width: 700px;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 1px solid #ccc;\\n    margin: 12px 0;\\n    padding: 0;\\n  }\\n\\n  sup {\\n    font-size: 60%;\\n    padding: 2px;\\n  }\\n\\n  .canopy-footnote-span {\\n    font-size: 80%;\\n  }\\n\\n  blockquote {\\n    padding: 0 .7em;\\n    border-left: 0.25em solid lightgray;\\n    color: #565e67;\\n\\n    margin-block-start: .5em;\\n    margin-block-end: .5em;\\n    margin-inline-start: 0px;\\n    margin-inline-end: 0px;\\n\\n    a.canopy-selectable-link {\\n      text-decoration: underline #D3D3D3;\\n    }\\n  }\\n\\n  pre {\\n    margin: 7px 10px;\\n    background-color: #eff0f1;\\n    padding: 5px;\\n    font-size: 85%;\\n  }\\n\\n  code {\\n    background-color: #eff0f1;\\n    font-size: 90%;\\n  }\\n\\n  table {\\n    margin: 7px auto;\\n    table-layout: fixed;\\n    width: 70%;\\n    border-collapse: collapse;\\n    border: 2px solid black;\\n\\n    td, th {\\n      border: 2px solid black;\\n      text-align: center;\\n      padding: 6px;\\n    }\\n  }\\n\\n  .canopy-image {\\n    width: 220px;\\n    max-height: 250px;\\n  }\\n\\n  div.canopy-image-div {\\n    float: right;\\n    border: 1px solid #c8ccd1;\\n    padding: 3px;\\n    background-color: #f8f9fa;\\n    font-size: 94%;\\n    text-align: center;\\n    overflow: hidden;\\n    margin: 10px;\\n  }\\n\\n  div.canopy-image-div > sup {\\n    display: block;\\n  }\\n\\n  .canopy-url-link-span > svg {\\n    height: 15px;\\n    width: 12px;\\n    display: none;\\n  }\\n\\n  .canopy-selected-link + svg, .canopy-url-link-span:hover > svg {\\n    display: inline;\\n    vertical-align: middle;\\n  }\\n\\n  ol, ul {\\n    margin: 7px 10px;\\n  }\\n\\n  div.canopy-raw-html {\\n    display: inline;\\n  }\\n}\\n\\n#_canopy > section.canopy-topic-section {\\n  padding-top: 30px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n;(function(root, factory) {\n\t// https://github.com/umdjs/umd/blob/master/returnExports.js\n\tif (typeof exports == 'object') {\n\t\t// For Node.js.\n\t\tmodule.exports = factory(root);\n\t} else if (typeof define == 'function' && define.amd) {\n\t\t// For AMD. Register as an anonymous module.\n\t\tdefine([], factory.bind(root, root));\n\t} else {\n\t\t// For browser globals (not exposing the function separately).\n\t\tfactory(root);\n\t}\n}(typeof global != 'undefined' ? global : this, function(root) {\n\n\tif (root.CSS && root.CSS.escape) {\n\t\treturn root.CSS.escape;\n\t}\n\n\t// https://drafts.csswg.org/cssom/#serialize-an-identifier\n\tvar cssEscape = function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index < length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: theres no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, []\n\t\t\t\t(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), []\n\t\t\t\t(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), []\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &&\n\t\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 &&\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, []\n\t\t\t\tindex == 0 &&\n\t\t\t\tlength == 1 &&\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), []\n\t\t\tif (\n\t\t\t\tcodeUnit >= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 ||\n\t\t\t\tcodeUnit >= 0x0041 && codeUnit <= 0x005A ||\n\t\t\t\tcodeUnit >= 0x0061 && codeUnit <= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n\n\tif (!root.CSS) {\n\t\troot.CSS = {};\n\t}\n\n\troot.CSS.escape = cssEscape;\n\treturn cssEscape;\n\n}));\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","const canopyContainer = document.getElementById('_canopy');\n\nconst defaultTopic = canopyContainer && canopyContainer.dataset.defaultTopic;\n\nconst projectPathPrefix = canopyContainer && canopyContainer.dataset.projectPathPrefix;\n\nconst hashUrls = canopyContainer && canopyContainer.dataset.hashUrls;\n\nfunction getAncestorElement(currentElement, className) {\n  let parentElement = currentElement.parentElement;\n  while (parentElement.classList && !parentElement.classList.contains(className)) {\n    if (parentElement === canopyContainer) return null;\n    parentElement = parentElement.parentNode;\n  }\n  return parentElement;\n}\n\nexport {\n  canopyContainer,\n  defaultTopic,\n  projectPathPrefix,\n  hashUrls,\n  getAncestorElement\n};\n","let REQUEST_CACHE = {};\n\nexport default REQUEST_CACHE;\n","import { getAncestorElement } from 'helpers/getters';\nimport Path from 'models/path';\nimport Paragraph from 'models/paragraph';\nimport Topic from '../../cli/commands/shared/topic';\n\nclass Link {\n  constructor(argument) {\n    // There are three ways to instantiate a link object:\n    // 1. You can provide a DOM element\n    // 2. You can provide a metadata object\n    //   (This is helpful when storing link selection in the session or history)\n    // 3. You can provide a callback that returns the link\n    //   (This is helpful for selecting links that are not yet rendered)\n\n    if (argument.tagName === 'A') {\n      this.element = argument;\n    } else if (argument instanceof Link) {\n      throw new Error(\"Cannot instantiate link from link\");\n    } else if (typeof argument === 'object') {\n      this.metadataObject = argument;\n    } else if (typeof argument === 'function') {\n      this.selectorCallback = argument;\n    } else {\n      throw new Error('Invalid argument to Link constructor');\n    }\n  }\n\n  equals(otherLink) {\n    return this.element === otherLink.element;\n  }\n\n  matches(otherLink) {\n    if (!otherLink) throw new Error('Invalid link argument to Link#matches');\n\n    return this.targetTopic === otherLink.targetTopic &&\n      this.targetSubtopic === otherLink.targetSubtopic &&\n      this.relativeLinkNumber === otherLink.relativeLinkNumber;\n  }\n\n  contradicts(path) {\n    if (!(path instanceof Path)) throw new Error('Invalid path argument to Link#contradicts');\n    return this.paragraphPathWhenSelected.string !== path.string;\n  }\n\n  get element () {\n    if (this.linkElement) {\n      return this.linkElement\n    } else if (this.metadataObject) {\n      this.element = Link.elementFromMetadata(this.metadata);\n      if (!this.linkElement) throw new Error('Metadata refered to non-existant link');\n      return this.linkElement;\n    } else if (this.selectorCallback) {\n      let link = this.selectorCallback();\n      if (!link) throw new Error('Link selector callback provided no link');\n      this.element = link.element;\n      return this.linkElement;\n    }\n  }\n\n  set element(argument) {\n    if (argument instanceof HTMLAnchorElement) {\n      this.linkElement = argument;\n    } else if (argument instanceof Link) {\n      this.linkElement = argument.element;\n    }\n    this.transferDataset();\n  }\n\n  transferDataset() {\n    // This is just to make it easier to inspect and debug DOM elements\n    // Getters are used instead of properties to allow lazy access for callback-specified links\n    if (!this.linkElement) return;\n    this._targetTopic = this.linkElement.dataset.targetTopic;\n    this._targetSubtopic = this.linkElement.dataset.targetSubtopic;\n    this._enclosingTopic = this.linkElement.dataset.enclosingTopic;\n    this._enclosingSubtopic = this.linkElement.dataset.enclosingSubtopic;\n    this._typeValue = this.linkElement.dataset.type;\n  }\n\n  get targetTopic() {\n    return Topic.fromMixedCase(this.element.dataset.targetTopic);\n  }\n  get targetSubtopic() {\n    return Topic.fromMixedCase(this.element.dataset.targetSubtopic);\n  }\n  get enclosingTopic() {\n    return Topic.fromMixedCase(this.element.dataset.enclosingTopic);\n  }\n  get enclosingSubtopic() {\n    return Topic.fromMixedCase(this.element.dataset.enclosingSubtopic);\n  }\n\n  get topicName() {\n    throw new Error('Links have no topicName, only targetTopic or enclosingTopic');\n  }\n\n  get subtopicName() {\n    throw new Error('Links have no subtopicName, only targetSubtopic or enclosingSubtopic');\n  }\n\n  get type() {\n    return this.element.dataset.type;\n  }\n\n  get enclosingSectionElement() {\n    return getAncestorElement(this.element, 'canopy-section');\n  }\n\n  get sectionElement() {\n    throw new Error(\"Depreciated in favor of #enclosingSectionElement\");\n  }\n\n  get enclosingParagraphElement() {\n    return getAncestorElement(this.element, 'canopy-paragraph');\n  }\n\n  get parentParagraphElement() {\n    throw new Error(\"Depreciated in favor of #enclosingParagraphElement\");\n  }\n\n  get enclosingParagraph() {\n    return new Paragraph(this.enclosingSectionElement);\n  }\n\n  get targetParagraph() {\n    if (!this.isParent) return null;\n\n    let pathDepth = this.enclosingParagraph.pathDepth;\n    if (this.isGlobalOrImport) pathDepth = Number(pathDepth) + 1;\n\n    let sectionElement = this.enclosingParagraph.sectionElement.querySelector(\n        `section[data-topic-name=\"${this.targetTopic.mixedCase}\"]` +\n        `[data-subtopic-name=\"${this.targetSubtopic.mixedCase}\"]` +\n        `[data-path-depth=\"${pathDepth}\"`\n      );\n\n    if (!sectionElement) {\n      throw new Error(`Did not find paragraph child element matching link [${this.targetTopic.mixedCase}, ${this.targetSubtopic.mixedCase}]`);\n    }\n\n    return new Paragraph(sectionElement);\n  }\n\n  atNewPath(newPath) { // get link instantiated with callback that returns matching link at new path\n    return new Link(() => {\n      let newEnclosingParagraph;\n      if (this.isParent) {\n        newEnclosingParagraph = newPath.paragraph.parentParagraph;\n      } else {\n        newEnclosingParagraph = newPath.paragraph;\n      }\n      return newEnclosingParagraph\n        .links\n        .find(this.matcher);\n    });\n  }\n\n  get localPathSegmentWhenSelected() {\n    if (this.isGlobalOrImport) {\n      return new Path(this.paragraphPathWhenSelected.pathArray.slice(-2));\n    } else {\n      return this.paragraphPathWhenSelected.lastSegment;\n    }\n  }\n\n  get matcher() {\n    return (link) => link.matches(this);\n  }\n\n  get relativeLinkNumber() {\n    if (this.storedRelativeLinkNumber) return this.storedRelativeLinkNumber;\n    this.storedRelativeLinkNumber = this.\n      enclosingParagraph.\n      links.\n      map(e => e.element).\n      indexOf(this.element);\n\n    return this.storedRelativeLinkNumber;\n  }\n\n  /* eslint getter-return: \"off\" */\n  get metadata() {\n    if (this.metadataObject) {\n      return this.metadataObject;\n    } else if(this.linkElement) {\n      let metadata = Link.collectMetadata(this.linkElement);\n      this.metadataObject = metadata;\n      return metadata;\n    } else if (this.selectorCallback) {\n      this.element = this.selectorCallback();\n      return this.metadata; // now that there is a this.linkElement\n    } else {\n      throw new Error(\"Link has neither supplied metadata, dom element, nor selector function\");\n    }\n  }\n\n  get targetPath() {\n    if (this.isGlobalOrImport) {\n      return this.enclosingParagraph.path.addSegment(this.targetTopic, this.targetSubtopic);\n    } else if (this.isLocal) {\n      return this.enclosingParagraph.path.replaceTerminalSubtopic(this.targetSubtopic);\n    } else {\n      return null; // eg URL link\n    }\n  }\n\n  get path() {\n    throw new Error(\"Depreciated in favor of #paragraphPathWhenSelected\");\n  }\n\n  get pathToDisplay() {\n    throw new Error(\"Depreciated in favor of #paragraphPathWhenSelected\");\n  }\n\n  get paragraphPathWhenSelected() {\n    if (this.isGlobalOrImport) {\n      return this.enclosingParagraph.path.addSegment(this.targetTopic, this.targetSubtopic);\n    } else if (this.isLocal) {\n      return this.enclosingParagraph.path.replaceTerminalSubtopic(this.targetSubtopic);\n    } else {\n      return this.enclosingParagraph.path;\n    }\n  }\n\n  get urlPathWhenSelected() {\n    return this.paragraphPathWhenSelected;\n  }\n\n  static collectMetadata(linkElement) {\n    let link = new Link(linkElement);\n    let paragraph = Paragraph.containingLink(link);\n\n    // changing the metadata schema requires changing Link#containsLinkSelectionMetadata\n    return {\n      pathString: paragraph.path.string, // initial page load with session/history link selection requires this\n      text: linkElement.dataset.text,\n      relativeLinkNumber: link.relativeLinkNumber\n    };\n  }\n\n  static containsLinkSelectionMetadata(object) {\n    return object.relativeLinkNumber !== undefined;\n  }\n\n  static elementFromMetadata(object) {\n    let path = new Path(object.pathString);\n    let paragraph = path.paragraph;\n    if (!paragraph) throw new Error(\"Link selection data refers to non-existant link\");\n    let link = paragraph.linkBySelector(\n      (link, i) => link.element.dataset.text === object.text &&\n        i === object.relativeLinkNumber\n    );\n\n    return link && link.element || null;\n  }\n\n  get nextSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[links.length - 1])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink + 1];\n    } else {\n      return null;\n    }\n  }\n\n  get previousSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[0])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink - 1];\n    } else {\n      return null;\n    }\n  }\n\n  get siblings() {\n    return this.enclosingParagraph.links;\n  }\n\n  get firstSibling() {\n    return this.siblings[0];\n  }\n\n  get lastSibling() {\n    return this.siblings[this.siblings.length - 1];\n  }\n\n  get firstChildLink() {\n    return this.targetParagraph.firstLink;\n  }\n\n  get lastChildLink() {\n    return this.targetParagraph.lastLink;\n  }\n\n  get parentLink() {\n    return this.enclosingParagraph.parentLink;\n  }\n\n  get grandParentLink() {\n    return this.parentLink?.parentLink;\n  }\n\n  get topicParagraph() {\n    return getAncestorElement(this.element, 'canopy-topic-section');\n  }\n\n  get selected() {\n    return this.element.classList.includes('canopy-selected-link');\n  }\n\n  open() {\n    this.element.classList.add('canopy-open-link');\n  }\n\n  get isOpen() {\n    return this.element.classList.contains('canopy-open-link');\n  }\n\n  get isClosed() {\n    return !this.isOpen;\n  }\n\n  get isSelected() {\n    return this.element.classList.contains('canopy-selected-link');\n  }\n\n  get isGlobal() {\n    return this.type === 'global';\n  }\n\n  get isImport() {\n    return this.type === 'import';\n  }\n\n  get isGlobalOrImport() {\n    return this.type === 'global' || this.type === 'import';\n  }\n\n  get isLocal() {\n    return this.type === 'local';\n  }\n\n  get isParent() {\n    return this.isGlobal || this.isLocal || this.isImport;\n  }\n\n  get hasChildren() {\n    return this.targetParagraph.hasLinks;\n  }\n\n  static select(linkToSelect) {\n    linkToSelect && linkToSelect.element.classList.add('canopy-selected-link');\n    Link.persistInHistory(linkToSelect);\n    Link.persistInSession(linkToSelect);\n    Link.persistLastSelectionData(linkToSelect);\n  }\n\n  static selectionPresentInEvent(e) {\n    return e.state && Link.containsLinkSelectionMetadata(e.state);\n  }\n\n  static get sessionSelection() {\n    let sessionData = sessionStorage.getItem(Path.current.string);\n    if (sessionData && sessionData !== 'null') {\n      let link = new Link(JSON.parse(sessionData));\n      try { link.element; } catch { link = null; } // in case metadata is invalid\n      return link;\n    } else {\n      return null;\n    }\n  }\n\n  static get historySelection() {\n    if (history.state && Link.containsLinkSelectionMetadata(history.state)) {\n      let link = new Link(history.state);\n      try { link.element; } catch { link = null; } // in case metadata is invalid\n      return link;\n    } else {\n      return null;\n    }\n  }\n\n  static get priorSelection() {\n    return this.historySelection || this.sessionSelection || null;\n  }\n\n  static get selection() {\n    let selectedLink = document.querySelector('a.canopy-selected-link');\n    if (selectedLink) {\n      return new Link(selectedLink);\n    } else {\n      return null;\n    }\n  }\n\n  static persistInSession(link) {\n    // This has to be static because Link.selection hasn't always updated\n    // between when a new link is selected and when we want to persist that selection\n    let linkData = link && JSON.stringify(link.metadata);\n    sessionStorage.setItem(location.pathname + location.hash, linkData || null);\n  }\n\n  static persistInHistory(link) {\n    // This has to be static because Link.selection hasn't always updated\n    // between when a new link is selected and when we want to persist that selection\n    history.replaceState(\n      link && link.metadata || null,\n      document.title,\n      window.location.href\n    );\n  }\n\n  // selectALink returns a callback that will pick a link to select\n  // once the DOM has rendered.\n  //\n  // selectALink takes a path to clarify which path is intended in case\n  // there are multiple rendered in the DOM, and the path has not updated yet.\n\n  static selectALink(path) {\n    return new Link(() => {\n      path = path || Path.current;\n      let paragraph = path.paragraph;\n      return paragraph.firstLink || paragraph.parentLink;\n    });\n  }\n\n  static current() {\n    throw new Error(\"Link#current does not exist, try Link#selection\");\n  }\n\n  // If someone eg presses up from the second link in a paragraph, pressing down should return them there.\n  static persistLastSelectionData(link) {\n    if (link) {\n      let lastSelectionsOfParagraph = JSON.parse(sessionStorage.getItem('lastSelectionsOfParagraph') || '{}');\n      lastSelectionsOfParagraph[link.enclosingParagraph.path] = link.metadata;\n      sessionStorage.setItem('lastSelectionsOfParagraph', JSON.stringify(lastSelectionsOfParagraph));\n    }\n  }\n\n  static lastSelectionOfParagraph(paragraph) {\n    let lastSelectionsOfParagraph = JSON.parse(sessionStorage.getItem('lastSelectionsOfParagraph') || '{}');\n    if (lastSelectionsOfParagraph[paragraph.path]) {\n      let link = new Link(lastSelectionsOfParagraph[paragraph.path]);\n      try { // sometimes metadata from previous versions is stored and doesn't correspond to real links anymore\n        if (link.element) {\n          return link;\n        }\n      } catch {\n        return null;\n      }\n    }\n  }\n}\n\nexport default Link;\n","import Path from 'models/path';\nimport Link from 'models/link';\nimport { canopyContainer } from 'helpers/getters';\nimport { getAncestorElement } from 'helpers/getters';\nimport Topic from '../../cli/commands/shared/topic';\n\nclass Paragraph {\n  // A paragraph instance represents a visible paragraph, not\n  // specifically the DOM element of type paragraph.\n  //\n  // Visible paragraphs in the UI are created with a section element\n  // that has a paragraph element child.\n  //\n  // paragraph.sectionElement returns the section element, whereas\n  // paragraph.paragraphElement returns the paragraph element.\n\n  constructor(sectionElement) {\n    if (!sectionElement || sectionElement.tagName !== 'SECTION' ) throw new Error(\"Paragraph instantiation requires section element\");\n    if (!sectionElement.classList.contains('canopy-section')) throw new Error(\"Paragraph class requires Canopy section element\");\n    this.sectionElement = sectionElement;\n    this.transferDataset();\n  }\n\n  equals(otherParagraph) {\n    if (!otherParagraph) return false;\n    return this.sectionElement === otherParagraph.sectionElement;\n  }\n\n  display() {\n    this.sectionElement.style.display = 'block';\n  }\n\n  get element() {\n    throw new Error(\"Depreciated in favor of #sectionElement property\");\n  }\n\n  transferDataset() { // This is so we can more easily debug in the console\n    this._topicName = this.sectionElement.dataset.topicName;\n    this._subtopicName = this.sectionElement.dataset.subtopicName;\n    this.pathDepth = this.sectionElement.dataset.pathDepth;\n  }\n\n  get topic () {\n    return Topic.fromMixedCase(this.sectionElement.dataset.topicName);\n  }\n\n  get subtopic () {\n    return Topic.fromMixedCase(this.sectionElement.dataset.subtopicName);\n  }\n\n  get topicName() {\n    throw new Error(\"Depreciated in favor of #topic\");\n  }\n\n  get subtopicName() {\n    throw new Error(\"Depreciated in favor of #subtopic\");\n  }\n\n  get paragraphElement() {\n    let paragraphElement = Array.from(this.sectionElement.childNodes).\n      find((element) => element.tagName === 'P');\n\n    if (!paragraphElement) throw new Error(\"Paragraph has no paragraph element\");\n    return paragraphElement;\n  }\n\n  get path() {\n    let pathArray = [];\n    let currentElement = this.sectionElement;\n    let currentParagraph = this;\n    let currentTopicParagraph = this.topicParagraph;\n\n    while (currentElement !== canopyContainer) {\n      currentTopicParagraph = currentParagraph.topicParagraph;\n\n      pathArray.unshift([\n        Topic.fromMixedCase(currentElement.dataset.topicName),\n        Topic.fromMixedCase(currentElement.dataset.subtopicName)\n      ]);\n\n      while (currentElement !== canopyContainer && currentParagraph.topicParagraph.equals(currentTopicParagraph)) {\n        currentElement = currentElement.parentNode;\n        if (currentElement !== canopyContainer) currentParagraph = new Paragraph(currentElement);\n      }\n    }\n\n    return new Path(pathArray);\n  }\n\n  get links() {\n    if (this.linkObjects) return this.linkObjects;\n    let linkElements = this.paragraphElement.querySelectorAll('a.canopy-selectable-link');\n    this.linkObjects = Array.from(linkElements).map((element) => new Link(element));\n    return this.linkObjects;\n  }\n\n  get firstLink() {\n    return this.links[0] || null;\n  }\n\n  get lastLink() {\n    return this.links[this.links.length - 1] || null;\n  }\n\n  get isPageRoot() {\n    return this.sectionElement.parentNode === canopyContainer\n  }\n\n  get isTopic() {\n    return this.topic.caps === this.subtopic.caps;\n  }\n\n  get hasLinks() {\n    return this.links.length > 0;\n  }\n\n  linkBySelector(callback) {\n    return this.links.find(callback);\n  }\n\n  linksBySelector(callback) {\n    return this.links.filter(callback);\n  }\n\n  linkByTarget(targetTopic, targetSubtopic) {\n    targetSubtopic = targetSubtopic || targetTopic;\n\n    return this.linkBySelector(\n      (link) => link.targetTopic.caps === targetTopic.caps && link.targetSubtopic.caps === targetSubtopic.caps\n    );\n  }\n\n  get parentLink() {\n    if (this.sectionElement.parentNode === canopyContainer) { return null; }\n\n    return this.parentParagraph && this.parentParagraph.linkByTarget(\n      this.topic,\n      this.subtopic\n    );\n  }\n\n  get parentLinks() {\n    if (this.sectionElement.parentNode === canopyContainer) { return null; }\n\n    return this.parentParagraph.linksBySelector(\n      link => {\n        return (link.isLocal || link.isGlobal) &&\n          this.topic.caps === link.targetTopic.caps &&\n          this.subtopic.caps === link.targetSubtopic.caps;\n      }\n    );\n  }\n\n  get ancestorImportReferences() {\n    if (this.pageRoot) { return []; }\n    if (!this.topicParagraph.parentParagraph) { return []; }\n\n    return this.topicParagraph.parentParagraph.linksBySelector(\n      link => {\n        return link.isImport &&\n          this.topic.caps === link.targetTopic.caps &&\n          this.subtopic.caps === link.targetSubtopic.caps;\n      }\n    );\n  }\n\n  get displayTopicName() {\n    return this.sectionElement.dataset.displayTopicName;\n  }\n\n  get parentParagraph() {\n    if (this.sectionElement) {\n      let parentElement = getAncestorElement(this.sectionElement, 'canopy-section');\n      return parentElement ? new Paragraph(parentElement) : null;\n    } else {\n      return null;\n    }\n  }\n\n  get topicParagraph() {\n    if (this.isTopic) {\n      return this;\n    } else {\n      return new Paragraph(getAncestorElement(this.sectionElement, 'canopy-topic-section'));\n    }\n  }\n\n  get isTopicRoot() {\n    return this.topicName === this.subtopicName;\n  }\n\n  static get current() {\n    return new Paragraph(document.querySelector('.canopy-selected-section'));\n  }\n\n  select() {\n    this.sectionElement.classList.add('canopy-selected-section');\n  }\n\n  static get pageRoot() {\n    let path = Path.current.rootTopicPath;\n    return path.paragraph;\n  }\n\n  static containingLink(link) {\n    if (!(link instanceof Link)) throw new Error(\"Must provide link instance argument\");\n    let sectionElement = getAncestorElement(link.element, 'canopy-section');\n    return new Paragraph(sectionElement);\n  }\n\n}\n\nexport default Paragraph;\n","import { defaultTopic, canopyContainer, projectPathPrefix, hashUrls } from 'helpers/getters';\nimport Paragraph from 'models/paragraph';\nimport Topic from '../../cli/commands/shared/topic';\n\nclass Path {\n  constructor(argument) {\n    if (!argument) {\n      this.pathArray = [];\n    } else if (Array.isArray(argument)) {\n      if (argument.length === 0) {\n        this.pathArray = [];\n      } else {\n        this.pathArray = argument.slice();\n        Path.validatePathArray(this.pathArray);\n      }\n      this.pathString = Path.arrayToString(this.pathArray);\n    } else if (typeof argument === 'string' || argument instanceof String) {\n      this.pathArray = Path.stringToArray(argument);\n      this.pathString = Path.arrayToString(this.pathArray); // array formation removes invalid segments so we reform the string\n    }\n  }\n\n  equals(otherPath) {\n    return this.string === otherPath.string;\n  }\n\n  static validatePathArray(array) {\n    array.forEach(tuple => {\n      if (tuple.length !== 2) throw newError(`Invalid path segment format: ${tuple}`);\n      if (!(tuple[0] instanceof Topic) || !(tuple[1] instanceof Topic)) throw newError(`Invalid path segment format: ${tuple}`);\n    })\n  }\n\n  addSegment(topic, subtopic) {\n    if (this.empty) return new Path([[topic, subtopic]]);\n    return new Path(this.pathArray.concat([[topic, subtopic]]));\n  }\n\n  replaceTerminalSubtopic(newSubtopic) {\n    let lastSegment = this.lastSegment;\n    return this.withoutLastSegment.addSegment(lastSegment.firstTopic, newSubtopic);\n  }\n\n  toString() {\n    return this.string;\n  }\n\n  get array() {\n    return this.pathArray;\n  }\n\n  get string() {\n    return this.pathString;\n  }\n\n  get rootTopicPath() {\n    if (this.length > 0) {\n      return new Path([[this.firstTopic, this.firstTopic]]);\n    } else {\n      return this;\n    }\n  }\n\n  get firstTopic() {\n    return this.pathArray[0][0];\n  }\n\n  get lastTopic() {\n    return this.lastSegment.topic;\n  }\n\n  get topic() {\n    return this.lastSegment.pathArray[0]?.[0];\n  }\n\n  get firstSubtopic() {\n    return this.pathArray[0][1];\n  }\n\n  get secondTopic() {\n    return this.pathArray[1] && this.pathArray[1][0];\n  }\n\n  get secondSubtopic() {\n    return this.pathArray[1] && this.pathArray[1][1];\n  }\n\n  get firstSegment() {\n    return new Path(this.pathArray.slice(0, 1));\n  }\n\n  get lastSegment() {\n    return new Path(this.pathArray.slice(-1));\n  }\n\n  get withoutFirstSegment() {\n    return new Path(this.pathArray.slice(1));\n  }\n\n  get withoutLastSegment() {\n    return new Path(this.pathArray.slice(0, -1));\n  }\n\n  get length() {\n    if (!this.pathArray[0]) {\n      return 0;\n    } else {\n      return this.pathArray.length;\n    }\n  }\n\n  get sectionElement() {\n    return Path.elementAtRelativePath(this, canopyContainer);\n  }\n\n  get paragraph() {\n    if (this.sectionElement) {\n      return new Paragraph(this.sectionElement);\n    } else {\n      return null;\n    }\n  }\n\n  get empty() {\n    return !this.pathArray[0];\n  }\n\n  static get default() {\n    let topic = Topic.fromMixedCase(defaultTopic);\n    return new Path([[topic, topic]]);\n  }\n\n  static get current() {\n    let pathString = window.location.href.slice(window.location.origin.length)\n\n    if (projectPathPrefix && pathString.indexOf(`/${projectPathPrefix}`) === 0) {\n      pathString = pathString.slice(projectPathPrefix.length + 1); // remove prefix and leading slash\n    }\n\n    if (pathString.indexOf('/#') === 0) pathString = pathString.slice(2);  // remove hash sign plus leading slash\n\n    return new Path(pathString);\n  }\n\n  static get currentOrDefault() {\n    if (Path.current.empty) {\n      return Path.default;\n    } else {\n      return Path.current;\n    }\n  }\n\n  static forTopic(topic) {\n    return new Path([[topic, topic]]);\n  }\n\n  static forSegment(topic, subtopic) {\n    return new Path([[topic, subtopic]]);\n  }\n\n  static stringToArray(pathString) {\n    if (typeof pathString !== 'string') throw newError(\"Function requires string argument\");\n\n    if (pathString === '/') {\n      return [];\n    }\n\n    let slashSeparatedUnits = pathString.\n      split('/').\n      filter((string) => string !== '');\n\n    slashSeparatedUnits = Path.fixOrphanSubtopics(pathString, slashSeparatedUnits);\n\n    let pathArray = slashSeparatedUnits.map((slashSeparatedUnit) => {\n      // Capture two groups: (letters)#(optional_more_letters)\n      let match = slashSeparatedUnit.match(/([^#]*)(?:#([^#]*))?/);\n      return [\n        match[1] || match[2] || null,\n        match[2] || match[1] || null,\n      ];\n    }).filter((segment) => segment[0] !== null);\n\n    pathArray = pathArray.map(([topicString, subtopicString]) => [\n      Topic.fromEncodedSlug(topicString),\n      Topic.fromEncodedSlug(subtopicString)\n    ]);\n\n    return pathArray;\n  }\n\n  static arrayToString(pathArray) {\n    if (!Array.isArray(pathArray)) throw newError('Argument must be array');\n\n    if (Array.isArray(pathArray) && pathArray.length === 0) {\n      return '/';\n    }\n\n    if (!Array.isArray(pathArray[0])) {\n      throw newError('Path array must be two-dimensional array');\n    }\n\n    let pathString = '/';\n\n    pathString += pathArray.map(([topic, subtopic]) => {\n      let pathSegmentString = topic.slug;\n      if (subtopic && subtopic.slug !== topic.slug) {\n        pathSegmentString += \"#\" + subtopic.slug;\n      }\n      return pathSegmentString;\n    }).join('/');\n\n    return pathString;\n  }\n\n  static fixOrphanSubtopics(pathString, slashSeparatedUnits) {\n    // Sometimes browsers insert forward slashes before the first pound sign which we have to remove\n    // eg /Topic/#Subtopic/A#B  -> /Topic#Subtopic/A#B\n\n    if (typeof pathString !== 'string') throw newError(\"pathString must be a string argument\");\n    if (!Array.isArray(slashSeparatedUnits)) throw newError('slashSeparatedUnits must be an array');\n\n    if (pathString.match(/\\/#\\w+/)) {\n      for (let i = 1; i < slashSeparatedUnits.length; i++) {\n        if (slashSeparatedUnits[i].match(/^#/)) {\n          if (!slashSeparatedUnits[i - 1].match(/#/)) { // eg /Topic/#Subtopic -> /Topic#Subtopic\n            let newItem = slashSeparatedUnits[i - 1] + slashSeparatedUnits[i];\n            let newArray = slashSeparatedUnits.slice(0, i - 1).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          } else { // eg /Topic#Subtopic/#Subtopic2 -> /Topic#Subtopic/Subtopic2\n            let newItem = slashSeparatedUnits[i].slice(1);\n            let newArray = slashSeparatedUnits.slice(0, i).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          }\n        }\n      }\n    }\n\n    return slashSeparatedUnits;\n  }\n\n  static connectingLinkValid(parentElement, pathToDisplay) {\n    if (!parentElement) throw newError('Parent element required');\n    if (!(pathToDisplay instanceof Path)) throw newError('pathToDisplay must be a Path object');\n\n    if (parentElement === canopyContainer) return true;\n\n    let parentParagraph = new Paragraph(parentElement);\n    if (!parentParagraph.linkByTarget(pathToDisplay.firstTopic)) {\n      console.error(`Parent element [${parentParagraph.topic.mixedCase}, ${parentParagraph.subtopic.mixedCase}] has no ` +\n        `connecting link to subsequent path segment [${pathToDisplay.firstTopic}, ${pathToDisplay.firstTopic}]`);\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  static elementAtRelativePath(suppliedPath, suppliedRootElement) {\n    if (!(suppliedPath instanceof Path)) throw newError('pathToDisplay must be a Path object');\n    if (!suppliedRootElement || !suppliedRootElement.tagName) 'Root element must be a DOM node';\n\n    let rootElement = suppliedRootElement;\n    if (!suppliedRootElement) { rootElement = canopyContainer; }\n    let path = suppliedPath;\n\n    let currentNode = rootElement;\n    if (rootElement === canopyContainer) {\n      currentNode = rootElement.querySelector(\n        `[data-topic-name=\"${path.firstTopic.escapedMixedCase}\"]` +\n        `[data-subtopic-name=\"${path.firstSubtopic.escapedMixedCase}\"]` +\n        `[data-path-depth=\"${0}\"]`\n      );\n\n      if (path.length === 1) { return currentNode; }\n      if (!currentNode) return null;\n      path = path.withoutFirstSegment;\n    }\n\n    let subpath = path;\n    for (let i = 0; i < path.length; i++) {\n      let newPathDepth = Number(currentNode.dataset.pathDepth) + 1;\n      currentNode = currentNode.querySelector(\n        `[data-topic-name=\"${subpath.firstTopic.escapedMixedCase}\"]` +\n        `[data-subtopic-name=\"${subpath.firstSubtopic.escapedMixedCase}\"]` +\n        `[data-path-depth=\"${newPathDepth}\"]`\n      );\n\n      if (!currentNode) return null;\n      subpath = subpath.withoutFirstSegment;\n    }\n\n    return currentNode;\n  }\n\n  static setPath(newPath) {\n    if (!(newPath instanceof Path)) throw newError('newPath must be Path object');\n\n    let oldPath = Path.current;\n    let documentTitle = newPath.firstTopic.display;\n    let historyApiFunction = newPath.equals(oldPath) ? replaceState : pushState;\n    let fullPathString = (projectPathPrefix ? `/${projectPathPrefix}` : '') + (hashUrls ? '/#' : '') + newPath.string;\n\n    historyApiFunction(\n      history.state, // this will be changed via Link#persistInHistory\n      documentTitle,\n      fullPathString\n    );\n\n    function replaceState(a, b, c) {\n      history.replaceState(a, b, c);\n    }\n\n    function pushState(a, b, c) {\n      history.pushState(a, b, c);\n    }\n  }\n}\n\nexport default Path;\n","import { canopyContainer, defaultTopic, projectPathPrefix } from 'helpers/getters';\nimport updateView from 'display/update_view';\nimport REQUEST_CACHE from 'requests/request_cache';\nimport Path from 'models/path';\n\nconst requestJson = (topic) => {\n  if (REQUEST_CACHE[topic.mixedCase]) return REQUEST_CACHE[topic.mixedCase];\n  let dataPath = projectPathPrefix + '/_data/' + topic.requestFileName + '.json';\n\n  let promise = fetch(dataPath).\n    then(res => {\n      return res.json().then((json) => {\n        return json;\n      });\n    }).catch(() => {\n      REQUEST_CACHE[topic.mixedCase] = undefined; // in case error is connectivity related & will work again later\n      return Promise.reject(new Error(`Unable to find topic file: \"${topic.requestFileName}\"`));\n    });\n\n  REQUEST_CACHE[topic.mixedCase] = promise;\n\n  return promise;\n}\n\nexport default requestJson;\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\n\nfunction onLocalLinkClick(targetTopic, targetSubtopic, link) {\n  return (e) => {\n    e.preventDefault();\n    let path, linkToSelect;\n    let newTab = e.metaKey || e.ctrlKey; // mac vs linux and windows\n\n    if (newTab && !e.altKey) { // no zoom\n      return window.open(location.origin + link.targetPath.string, '_blank');\n    }\n\n    if (newTab && e.altKey) { // zoom\n      return window.open(location.origin + link.targetPath.lastSegment.string, '_blank');\n    }\n\n    if (!newTab && e.altKey) { //zoom\n      let path = link.targetPath.lastSegment;\n      return updateView(path, link.atNewPath(path));\n    }\n\n    if (!newTab && !e.altKey && link.isSelected) {\n      path = link.parentLink?.paragraphPathWhenSelected || Path.current.rootTopicPath;\n      return updateView(path, linkToSelect);\n    }\n\n    if (!newTab && !e.altKey && !link.isSelected) {\n      path = link.paragraphPathWhenSelected;\n      linkToSelect = link;\n      return updateView(path, linkToSelect);\n    }\n  };\n}\n\nfunction onGlobalAndImportLinkClick (link) {\n  return (e) => {\n    e.preventDefault();\n    let path, linkToSelect;\n    let newTab = e.metaKey || e.ctrlKey; // mac vs linux and windows\n\n    if (!newTab && !e.altKey && link.isSelected) { // close global child\n      path = link.enclosingParagraph.path;\n      return updateView(path, linkToSelect);\n    }\n\n    if (!newTab && !e.altKey && !link.isSelected) { // open global child\n      path = link.paragraphPathWhenSelected;\n      linkToSelect = link;\n      return updateView(path, linkToSelect);\n    }\n\n    if (!newTab && e.altKey) { // Redirect to global child\n      path = Path.forSegment(link.targetTopic, link.targetSubtopic);\n      return updateView(path, linkToSelect, { scrollStyle: 'auto' });\n    }\n\n    if (newTab && !e.altKey) { // inline\n      path = link.paragraphPathWhenSelected; // open the link in new tab\n      return window.open(location.origin + path.string, '_blank');\n    }\n\n    if (newTab && e.altKey) {\n      path = Path.forSegment(link.targetTopic, link.targetSubtopic);\n      return window.open(location.origin + path.string, '_blank');\n    }\n  }\n}\n\nexport { onLocalLinkClick, onGlobalAndImportLinkClick };\n","export default \"<svg xmlns:svg=\\\"http://www.w3.org/2000/svg\\\"\\n   xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n   version=\\\"1.0\\\"\\n   width=\\\"12\\\"\\n   height=\\\"12\\\"\\n   id=\\\"svg2\\\">\\n  <defs id=\\\"defs4\\\"></defs>\\n  <rect\\n     width=\\\"5.9999995\\\"\\n     height=\\\"6\\\"\\n     x=\\\"1.5\\\"\\n     y=\\\"4.5\\\"\\n     id=\\\"rect3170\\\"\\n     style=\\\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:#0066cc;stroke-width:0.99999994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\\\"></rect>\\n  <path\\n     d=\\\"M 4,2.5 L 5,3.5 L 5.25,4.25 L 2.75,6.5 L 5.5,9.25 L 7.75,6.75 L 8.5,7 L 9.5,8 L 11,6.5 L 11,1 L 5.5,1 L 4,2.5 z\\\"\\n     id=\\\"path2395\\\"\\n     style=\\\"fill:#0066ff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\\\"></path>\\n  <path\\n     d=\\\"M 6,2 L 10,2 L 10,6 L 9.5,6.75 L 8.25,4.75 L 5.25,8 L 4,6.75 L 7.25,3.75 L 5.25,2.5 L 6,2 z\\\"\\n     id=\\\"path2398\\\"\\n     style=\\\"fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\\\" ></path>\\n</svg>\\n\";","function renderStyledText(text) {\n  let buffer = '';\n  let escaped = false;\n\n  let styleStack = [];\n\n  let stylesByText = {\n    '_': 'I',\n    '*': 'B',\n    '~': 'S',\n    '`': 'CODE'\n  }\n\n  let elements = [];\n  let styleParent;\n\n  text = text.replace(/{{(OPEN|CLOSE).}}/g, (match) => match.split('').join('\\\\')); // Escape literal style tokens in user input\n\n  // Single backslashes are an escape character in code snippets in order to allow escaping the backtick character.\n  // Thus, we want to escape everything in the code snippet, but not in such a way that user-entered single backslashes get doubled and become literals.\n  text = text.replace(/(^|[\\s}_*`~]+)([`])(.*?[^\\\\])(\\2)(?=[\\s.,{*_`~]|$)/g, (_, characterBeforeCodeBlock, backtick, block, backtick2) => {\n    return characterBeforeCodeBlock\n      + backtick\n      + block // For each code block,\n        .replace(/([^\\\\]|^)\\\\(?=[^\\\\]|$)/g, '$1') // remove all user-entered single backslashes from code snippet, or those added from previous line\n        .replace(/\\\\\\\\/g, '\\\\') // replace user-entered double backslashes with single backslashes\n        .split('').join('\\\\') // insert backslashes before all characters to treat code snippet as literal\n      + backtick2;\n  });\n\n  text = (function convertStyleCharacters(text) {\n    let newText = text.replace(/(^|[\\s}_*`~]+)([*`_~])(.*?(?!{{CLOSE|{{OPEN|\\\\))(\\2)(?=[\\s.,{*_`~]|$)/g, '$1{{OPEN$2}}$3{{CLOSE$4}}')\n    if (text === newText){\n      return newText;\n    } else {\n      return convertStyleCharacters(newText);\n    }\n  })(text); // Do multiple sweeps of the string replacing valid style characters with tokens until none remain\n\n  for (let i = 0; i < text.length; i++) {\n    let openMatch = text.slice(i).match(/^{{OPEN(.)}}/);\n    let closeMatch = text.slice(i).match(/^{{CLOSE(.)}}/);\n\n    if (openMatch) { // We are at the first style character of a pair\n      let styleCharacter = openMatch[1];\n      if (buffer) {\n        let textNode = document.createTextNode(buffer);\n        buffer = '';\n        styleParent ? styleParent.appendChild(textNode) : elements.push(textNode);\n      }\n\n      let styleElement = document.createElement(stylesByText[styleCharacter]);\n      styleParent ? styleParent.appendChild(styleElement) : elements.push(styleElement);\n      styleParent = styleElement;\n      styleStack.push(styleCharacter);\n      i += (openMatch[0].length - 1);\n\n    } else if (closeMatch && styleStack.slice(-1)[0] === closeMatch[1]) { // this closing style character closes the most recent open one\n      if (buffer) {\n        let textNode = document.createTextNode(buffer);\n        buffer = '';\n        if (styleParent) {\n          styleParent.appendChild(textNode);\n        } else {\n          elements.push(textNode);\n        }\n      }\n      styleParent = styleParent.parentNode || null;\n      styleStack.pop();\n      i += (closeMatch[0].length - 1);\n\n    } else if (closeMatch && styleStack.slice(-1)[0] !== closeMatch[1]) { // this style character does not match the most recent one and is rejected\n      buffer += closeMatch[1];\n      i += (closeMatch[0].length - 1);\n\n    } else if (!escaped && text[i] === '\\\\') { // handle escape character\n      escaped = true;\n\n    } else { // handle regular character\n      buffer += text[i];\n      escaped = false;\n    }\n  }\n\n  if (buffer) {\n    let textNode = document.createTextNode(buffer);\n    elements.push(textNode);\n  }\n\n  return elements;\n}\n\nexport default renderStyledText;\n","import { onLocalLinkClick, onGlobalAndImportLinkClick } from 'render/click_handlers';\nimport externalLinkIconSvg from 'assets/external_link_icon/icon.svg';\nimport renderStyledText from 'render/render_styled_text';\nimport Link from 'models/link';\nimport Topic from '../../cli/commands/shared/topic';\n\nfunction renderTokenElement(token, renderContext) {\n  if (token.type === 'text') {\n    return renderTextToken(token);\n  } else if (token.type === 'local') {\n    return renderLocalLink(token, renderContext);\n  } else if (token.type === 'global') {\n    return renderGlobalLink(token, renderContext);\n  } else if (token.type === 'import') {\n    return renderImportLink(token, renderContext);\n  } else if (token.type === 'url') {\n    return renderLinkLiteral(token);\n  } else if (token.type === 'image') {\n    return renderImage(token);\n  } else if (token.type === 'html_element') {\n    return renderHtmlElement(token);\n  } else if (token.type === 'footnote') {\n    return renderFootnoteSymbol(token);\n  } else if (token.type === 'code_block') {\n    return renderCodeBlock(token);\n  } else if (token.type === 'quote') {\n    return renderBlockQuote(token);\n  } else if (token.type === 'list') {\n    return renderList(token.topLevelNodes);\n  } else if (token.type === 'table') {\n    return renderTable(token)\n  } else if (token.type === 'html_block') {\n    return renderHtmlBlock(token);\n  } else if (token.type === 'footnote_rule') {\n    return renderFootnoteRule(token);\n  } else if (token.type === 'footnote_line') {\n    return renderFootnoteLine(token);\n  }\n}\n\nfunction renderTextToken(token) {\n  let spanElement = document.createElement('SPAN');\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, spanElement);\n\n  return spanElement;\n}\n\nfunction renderLocalLink(token, renderContext) {\n  let {\n    localLinkSubtreeCallback\n  } = renderContext;\n\n  localLinkSubtreeCallback(token);\n  return createLocalLinkElement(token)\n}\n\nfunction createLocalLinkElement(token) {\n  let linkElement = document.createElement('a');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n\n  linkElement.addEventListener(\n    'click',\n    onLocalLinkClick(token.targetTopic, token.targetSubtopic, new Link(linkElement))\n  );\n\n  linkElement.classList.add('canopy-local-link');\n  linkElement.dataset.type = 'local';\n\n  let targetTopic = new Topic(token.targetTopic);\n  let targetSubtopic = new Topic(token.targetSubtopic);\n  linkElement.href = `/${targetTopic.slug}#${targetSubtopic.slug}`;\n  return linkElement;\n}\n\nfunction renderGlobalLink(token, renderContext) {\n  let {\n    pathArray,\n    globalLinkSubtreeCallback\n  } = renderContext;\n\n  let linkElement = createGlobalLinkElement(token, pathArray);\n\n  globalLinkSubtreeCallback(token, linkElement);\n\n  return linkElement;\n}\n\nfunction createGlobalLinkElement(token) {\n  let linkElement = document.createElement('a');\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n\n  linkElement.classList.add('canopy-global-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.type = 'global';\n\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n\n  linkElement.dataset.text = token.text;\n\n  let targetTopic = Topic.fromMixedCase(token.targetTopic);\n  linkElement.href = `/${targetTopic.slug}`;\n\n  linkElement.addEventListener(\n    'click',\n    onGlobalAndImportLinkClick(new Link(linkElement))\n  );\n  return linkElement\n}\n\nfunction renderImportLink(token, renderContext) {\n  let {\n    pathArray\n  } = renderContext;\n\n  let linkElement = createImportLinkElement(token, pathArray);\n\n  return linkElement;\n}\n\nfunction createImportLinkElement(token) {\n  let linkElement = document.createElement('a');\n\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n\n  linkElement.classList.add('canopy-global-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.type = 'import';\n\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n\n  let targetTopic = new Topic(token.targetTopic);\n  let targetSubtopic = new Topic(token.targetSubtopic);\n  linkElement.href = `/${targetTopic.slug}#${targetSubtopic.slug}`;\n\n  linkElement.addEventListener(\n    'click',\n    onGlobalAndImportLinkClick(new Link(linkElement))\n  );\n\n  return linkElement\n}\n\nfunction renderLinkLiteral(token) {\n  let linkSpan = document.createElement('SPAN');\n  let linkElement = document.createElement('a');\n  linkSpan.classList.add('canopy-url-link-span');\n  linkElement.classList.add('canopy-url-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.setAttribute('href', token.url);\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n  linkElement.dataset.type = 'url';\n  linkElement.dataset.text = token.text;\n  linkSpan.appendChild(linkElement);\n  linkElement.innerHTML += externalLinkIconSvg.replace(/\\r?\\n|\\r/g, '');\n\n  return linkSpan;\n}\n\nfunction renderImage(token) {\n  let divElement = document.createElement('DIV');\n  divElement.classList.add('canopy-image-div');\n\n  let imageElement = document.createElement('IMG');\n  divElement.appendChild(imageElement);\n\n  imageElement.setAttribute('src', token.resourceUrl);\n  imageElement.classList.add('canopy-image');\n\n  let anchorElement = document.createElement('A');\n  anchorElement.setAttribute('href', token.anchorUrl || token.resourceUrl);\n  anchorElement.setAttribute('target', '_blank');\n  anchorElement.appendChild(imageElement);\n  divElement.appendChild(anchorElement);\n\n  if (token.title) {\n    imageElement.setAttribute('title', token.title);\n    let captionElement = document.createElement('SUP');\n    let captionDiv = document.createElement('DIV');\n    captionElement.appendChild(document.createTextNode(token.title));\n    captionElement.classList.add('canopy-image-caption');\n    captionDiv.classList.add('canopy-caption-div');\n    divElement.appendChild(captionElement);\n  } else {\n    divElement.appendChild(anchorElement);\n  }\n\n  if (token.altText) {\n    imageElement.setAttribute('alt', token.altText);\n  }\n\n  return divElement;\n}\n\nfunction renderHtmlElement(token) {\n  let divElement = document.createElement('DIV');\n  divElement.innerHTML = token.html;\n  divElement.classList.add('canopy-raw-html');\n  return divElement;\n}\n\n\nfunction renderFootnoteSymbol(token) {\n  let superscriptElement = document.createElement('SUP');\n  let textNode = document.createTextNode(token.text);\n  superscriptElement.appendChild(textNode);\n  return superscriptElement;\n}\n\nfunction appendElementsToParent(collection, parent) {\n  collection.forEach((item) => {\n    parent.appendChild(item);\n  });\n}\n\nfunction renderCodeBlock(token) {\n  let preElement = document.createElement('PRE');\n  let codeBlockElement = document.createElement('CODE');\n  preElement.appendChild(codeBlockElement);\n\n  codeBlockElement.innerText = token.text;\n\n  return preElement;\n}\n\nfunction renderBlockQuote(token) {\n  let blockQuoteElement = document.createElement('BLOCKQUOTE');\n\n  blockQuoteElement.innerText = token.text;\n\n  return blockQuoteElement;\n}\n\nfunction renderList(listNodeObjects) {\n  let listElement = listNodeObjects[0].ordered ?\n    document.createElement('OL') :\n    document.createElement('UL');\n\n  if (listNodeObjects[0].ordered) {\n    listElement.setAttribute('type', listNodeObjects[0].ordinal);\n  }\n\n  listNodeObjects.forEach((listNodeObject) => {\n    let listItemElement = document.createElement('LI');\n\n    listNodeObject.tokensOfLine.forEach(\n      (token) => {\n        let tokenElement = renderTokenElement(token);\n        listItemElement.appendChild(tokenElement);\n      }\n    );\n\n    if (listNodeObject.children.length > 0) {\n      let childList = renderList(listNodeObject.children);\n      listItemElement.appendChild(childList);\n    }\n\n    listElement.appendChild(listItemElement);\n  });\n  return listElement;\n}\n\nfunction renderTable(token, renderContext) {\n  let tableElement = document.createElement('TABLE');\n  token.rows.forEach(\n    (tokensByCellOfRow) => {\n      let tableRowElement = document.createElement('TR');\n      tokensByCellOfRow.forEach(\n        (tokensOfCell) => {\n          let tableCellElement = document.createElement('TD');\n\n          tokensOfCell.forEach(\n            (token) => {\n              let tokenElement = renderTokenElement(token, renderContext);\n              tableCellElement.appendChild(tokenElement);\n            }\n          );\n\n          tableRowElement.appendChild(tableCellElement);\n        }\n      )\n      tableElement.appendChild(tableRowElement);\n    }\n  );\n  return tableElement;\n}\n\nfunction renderHtmlBlock(token) {\n  let htmlContainer = document.createElement('DIV');\n  htmlContainer.innerHTML = token.html;\n  htmlContainer.classList.add('canopy-raw-html');\n  return htmlContainer;\n}\n\nfunction renderFootnoteRule() {\n  let horizonalRule = document.createElement('HR');\n  horizonalRule.classList.add('canopy-footnote-rule');\n  return horizonalRule;\n}\n\nfunction renderFootnoteLine(footnoteLineToken, renderContext) {\n  let footnoteSpan = document.createElement('SPAN');\n  footnoteSpan.classList.add('canopy-footnote-span');\n  let textNode = document.createTextNode(footnoteLineToken.superscript + '. ');\n  footnoteSpan.appendChild(textNode);\n  footnoteLineToken.tokens.forEach((token) => {\n    let tokenElement = renderTokenElement(token, renderContext);\n    footnoteSpan.appendChild(tokenElement);\n  });\n\n  return footnoteSpan;\n}\n\nexport default renderTokenElement;\n","import fetchAndRenderPath from 'render/fetch_and_render_path';\nimport requestJson from 'requests/request_json';\nimport Paragraph from 'models/paragraph';\nimport Link from 'models/link';\nimport Topic from '../../cli/commands/shared/topic';\nimport renderTokenElement from 'render/render_token_element';\n\nfunction renderDomTree(renderContext) {\n  let {\n    subtopic,\n    paragraphsBySubtopic\n  } = renderContext;\n\n  let sectionElement = createSectionElement(renderContext);\n  let paragraph = new Paragraph(sectionElement);\n\n  renderContext.displayBlockingPromises = [];\n  renderContext.localLinkSubtreeCallback = localLinkSubtreeCallback(sectionElement, renderContext);\n  renderContext.globalLinkSubtreeCallback = globalLinkSubtreeCallback(sectionElement, renderContext);\n\n  let tokensOfParagraph = paragraphsBySubtopic[subtopic.mixedCase];\n  if (!tokensOfParagraph) throw new Error(`Paragraph with subtopic not found: ${subtopic.mixedCase}`);\n\n  tokensOfParagraph.forEach((token) => {\n    let element = renderTokenElement(token, renderContext);\n    paragraph.paragraphElement.appendChild(element);\n  });\n\n  return Promise.all(renderContext.displayBlockingPromises).then(() => sectionElement);\n}\n\nfunction localLinkSubtreeCallback(sectionElement, renderContext) {\n  return (token) => {\n    let promisedSubtree = renderDomTree(\n      Object.assign({}, renderContext, {\n        subtopic: Topic.fromMixedCase(token.targetSubtopic)\n      })\n    );\n\n    promisedSubtree.then((subtree) => {\n      sectionElement.appendChild(subtree);\n    });\n\n    renderContext.displayBlockingPromises.push(promisedSubtree);\n  }\n}\n\nfunction globalLinkSubtreeCallback(sectionElement, renderContext) {\n  let {\n    pathToDisplay,\n    subtopic,\n    displayBlockingPromises\n  } = renderContext;\n\n  return (token, linkElement) => {\n    let topic = Topic.fromMixedCase(token.targetTopic);\n    let link = new Link(linkElement);\n    requestJson(topic); // eager-load and cache\n\n    if (globalLinkIsOpen(link, pathToDisplay, subtopic)) {\n      let newPath = pathToDisplay.withoutFirstSegment;\n      let whenTopicTreeAppended = fetchAndRenderPath(newPath, sectionElement);\n      displayBlockingPromises.push(whenTopicTreeAppended)\n    }\n  }\n}\n\nfunction createSectionElement(renderContext) {\n  let {\n    topic, subtopic, displayTopicName, pathDepth\n  } = renderContext;\n\n  let sectionElement = document.createElement('section');\n  sectionElement.classList.add('canopy-section');\n  let paragraphElement = document.createElement('p');\n  paragraphElement.classList.add('canopy-paragraph');\n  sectionElement.appendChild(paragraphElement);\n  sectionElement.style.display = 'none';\n  sectionElement.dataset.displayTopicName = displayTopicName;\n  sectionElement.dataset.topicName = topic.mixedCase;\n  sectionElement.dataset.subtopicName = subtopic.mixedCase;\n  sectionElement.dataset.pathDepth = pathDepth;\n\n  if (topic.mixedCase === subtopic.mixedCase) {\n    if (pathDepth > 0) sectionElement.prepend(document.createElement('hr'));\n    sectionElement.classList.add('canopy-topic-section');\n  }\n\n  return sectionElement;\n}\n\n// When rendering the links of a paragraph, is a given link the parent link of\n// the next paragraph in the visible path?\n\nfunction globalLinkIsOpen(link, path, currentlyRenderingSubtopic) {\n  let subtopicOfPathContainingOpenGlobalReference = path.firstSubtopic;\n  let openGlobalLinkExists = path.secondTopic;\n\n  let openGlobalLinkTargetTopic = path.secondTopic;\n  let openGlobalLinkTargetSubtopic = openGlobalLinkTargetTopic;\n\n  // Is the given global link's target the same as the next path segment's topic?\n  let thisGlobalLinkIsPointingToTheRightThingToBeOpen =\n    link.targetTopic.mixedCase === openGlobalLinkTargetTopic?.mixedCase &&\n    link.targetSubtopic.mixedCase === openGlobalLinkTargetSubtopic?.mixedCase;\n\n  // Is this global link in the currently visible lowest subtopic of the given\n  let thisGlobalLinkIsInCorrectSubtopicToBeOpen = currentlyRenderingSubtopic.mixedCase ===\n    subtopicOfPathContainingOpenGlobalReference.mixedCase;\n\n  return openGlobalLinkExists &&\n    thisGlobalLinkIsPointingToTheRightThingToBeOpen &&\n    thisGlobalLinkIsInCorrectSubtopicToBeOpen;\n}\n\nexport default renderDomTree;\n","import renderDomTree from 'render/render_dom_tree';\nimport requestJson from 'requests/request_json';\nimport Path from 'models/path';\n\nconst fetchAndRenderPath = (pathToDisplay, parentElement) => {\n  if (pathToDisplay.length === 0) {\n    return Promise.resolve(null);\n  }\n\n  let preexistingElement = Path.elementAtRelativePath(pathToDisplay.firstSegment, parentElement);\n  if (preexistingElement) {\n    if (!Path.connectingLinkValid(parentElement, pathToDisplay)) return Promise.resolve();\n    return fetchAndRenderPath(pathToDisplay.withoutFirstSegment, preexistingElement);\n  }\n\n  let uponResponsePromise = requestJson(pathToDisplay.firstTopic);\n\n  let uponRender = uponResponsePromise.then(({ paragraphsBySubtopic, displayTopicName }) => {\n    return renderDomTree(\n      {\n        topic: pathToDisplay.firstTopic,\n        subtopic: pathToDisplay.firstTopic,\n        pathToDisplay,\n        displayTopicName,\n        paragraphsBySubtopic,\n        pathDepth: Number(parentElement.dataset.pathDepth) + 1 || 0\n      },\n    );\n  });\n\n  return uponRender.then((domTree) => parentElement.appendChild(domTree));\n}\n\nexport default fetchAndRenderPath;\n","import { canopyContainer } from 'helpers/getters';\nimport renderStyledText from 'render/render_styled_text';\nimport displayPath from 'display/display_path';\nimport Link from 'models/link';\nimport Path from 'models/path';\nimport updateView from 'display/update_view';\n\nfunction setHeader(topicName) {\n  let existingHeader = document.querySelector('#_canopy h1')\n  if (existingHeader) { existingHeader.remove(); }\n  let headerDomElement = document.createElement('h1');\n  let styleElements = renderStyledText(topicName);\n  Array.from(styleElements).forEach((element) => {headerDomElement.appendChild(element)});\n  canopyContainer.prepend(headerDomElement);\n}\n\nfunction hideAllSectionElements() {\n  Array.from(document.getElementsByTagName(\"section\")).forEach((sectionElement) => {\n    sectionElement.style.display = 'none';\n  });\n}\n\nfunction deselectAllLinks() {\n  Array.from(document.getElementsByTagName(\"a\")).forEach((linkElement) => {\n    linkElement.classList.remove('canopy-selected-link');\n    linkElement.classList.remove('canopy-open-link');\n  });\n}\n\nfunction deselectSectionElement() {\n  Array.from(document.querySelectorAll('.canopy-selected-section')).forEach((sectionElement) => {\n    sectionElement.classList.remove('canopy-selected-section');\n  });\n}\n\nfunction tryPathPrefix(path, displayOptions) {\n  console.error(\"No section element found for path: \", path.string);\n  if (path.length > 1) {\n    console.log(\"Trying: \", path.withoutLastSegment.string);\n    return displayPath(path.withoutLastSegment);\n  } else if(!displayOptions.defaultRedirect) {\n    console.error(\"No path prefixes remain to try. Redirecting to default topic: \" + Path.default);\n    return updateView(Path.default, null, { defaultRedirect: true });\n  } else {\n    throw new Error('Redirect to default topic failed terminally.')\n  }\n}\n\nconst resetDom = () => {\n  deselectAllLinks();\n  hideAllSectionElements();\n  deselectSectionElement();\n}\n\nfunction scrollPage(displayOptions) {\n  let behavior = displayOptions.scrollStyle || 'smooth';\n  let top = Link.selection ? Link.selection.element.offsetTop - (window.screen.height * .22) : 0;\n\n  window.scrollTo(\n    {\n      top,\n      behavior\n    }\n  );\n}\n\nfunction validatePathAndLink(pathToDisplay, linkToSelect) {\n  if (!(pathToDisplay instanceof Path)) throw new Error('Invalid path argument');\n  if (linkToSelect && !(linkToSelect instanceof Link)) throw new Error('Invalid link selection argument');\n}\n\nexport {\n  setHeader,\n  resetDom,\n  tryPathPrefix,\n  scrollPage,\n  validatePathAndLink\n};\n","import Path from 'models/path';\nimport Link from 'models/link';\nimport updateView from 'display/update_view';\nimport {\n  setHeader,\n  tryPathPrefix,\n  resetDom,\n  scrollPage\n} from 'display/helpers';\n\nconst displayPath = (pathToDisplay, linkToSelect, displayOptions) => {\n  displayOptions = displayOptions || {};\n  if (!pathToDisplay.paragraph) return tryPathPrefix(pathToDisplay, displayOptions);\n  try { linkToSelect?.element } catch { return updateView(pathToDisplay, null, displayOptions); }\n  if (linkToSelect?.contradicts(pathToDisplay)) {\n    return updateView(linkToSelect.paragraphPathWhenSelected, linkToSelect, displayOptions);\n  }\n\n  resetDom();\n  Path.setPath(linkToSelect?.urlPathWhenSelected || pathToDisplay);\n  setHeader(pathToDisplay.rootTopicPath.paragraph.displayTopicName);\n  document.title = pathToDisplay.rootTopicPath.paragraph.topic.mixedCase;\n  Link.select(linkToSelect); // if null, persists deselect\n\n  pathToDisplay.paragraph.select();\n  displayPathTo(pathToDisplay.paragraph);\n  scrollPage(displayOptions);\n};\n\nconst displayPathTo = (paragraph) => {\n  paragraph.display();\n  if (paragraph.isPageRoot) return;\n  paragraph.parentLink && paragraph.parentLinks.forEach(link => link.open());\n  paragraph.ancestorImportReferences.forEach(link => link.open());\n  if (paragraph.parentLink && !Link.selection) Link.select(paragraph.parentLink);\n  displayPathTo(paragraph.parentParagraph);\n}\n\nexport default displayPath;\n","import fetchAndRenderPath from 'render/fetch_and_render_path';\nimport displayPath from 'display/display_path';\nimport Link from 'models/link';\nimport Path from 'models/path';\nimport { canopyContainer } from 'helpers/getters';\nimport { validatePathAndLink } from 'display/helpers';\n\nconst updateView = (pathToDisplay, linkToSelect, displayOptions) => {\n  validatePathAndLink(pathToDisplay, linkToSelect);\n  if (pathToDisplay.empty) pathToDisplay = Path.default;\n\n  let newTreeAppended = fetchAndRenderPath(pathToDisplay, canopyContainer).catch(e => console.error(e));\n\n  return newTreeAppended.then(() => {\n    displayPath(\n      pathToDisplay,\n      linkToSelect,\n      displayOptions\n    );\n  }).catch(e => console.error(e));\n}\n\nexport default updateView;\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\n\nfunction moveUpward() {\n  let link = Link.selection;\n\n  if (link.enclosingParagraph.equals(Paragraph.pageRoot)) {\n    return updateView(link.enclosingParagraph.path); // deselect link\n  }\n\n  return updateView(\n    link.parentLink.paragraphPathWhenSelected,\n    new Link(() => Link.lastSelectionOfParagraph(link.parentLink.enclosingParagraph) || link.parentLink)\n  );\n}\n\nfunction topicParentLink() {\n  let link = Link.selection;\n  let newLink = Link.lastSelectionOfParagraph(link.enclosingParagraph.topicParagraph.parentParagraph) ||\n    link.enclosingParagraph.topicParagraph.parentLink;\n\n  return updateView(\n    newLink?.paragraphPathWhenSelected || Path.current,\n    newLink || link\n  );\n}\n\nfunction moveDownward() {\n  let oldLink = Link.selection;\n\n  if (oldLink.isImport) {\n    updateView(\n      oldLink.paragraphPathWhenSelected,\n      oldLink.targetParagraph.parentLink\n    );\n  }\n\n  if (oldLink.isGlobal || oldLink.isLocal) {\n    let newLink = oldLink.targetParagraph?.firstLink || oldLink.targetParagraph?.parentLink;\n\n    updateView(\n      newLink.paragraphPathWhenSelected,\n      new Link(() => Link.lastSelectionOfParagraph(newLink.enclosingParagraph) || newLink)\n    );\n  }\n\n  if (!oldLink.isParent) {\n    updateView(\n      oldLink.paragraphPathWhenSelected,\n      oldLink\n    );\n  }\n}\n\nfunction moveLeftward() {\n  let link = Link.selection.previousSibling || Link.selection.lastSibling;\n  return updateView(\n    link.paragraphPathWhenSelected,\n    link\n  );\n}\n\nfunction moveRightward() {\n  let link = Link.selection.nextSibling || Link.selection.firstSibling;\n\n  return updateView(\n    link.paragraphPathWhenSelected,\n    link\n  );\n}\n\nfunction moveDownOrRedirect({ newTab, altKey }) {\n  if (Link.selection.isLocal && !altKey) {\n    let link = Link.selection.targetParagraph?.firstLink || Link.selection.targetParagraph?.parentLink;\n    let path = link.paragraphPathWhenSelected;\n\n    if (newTab) {\n      return window.open(location.origin + Link.selection.targetPath.lastSegment, '_blank'); // zoom\n    } else {\n      return updateView(path, link); // no zoom\n    }\n  }\n\n  if (Link.selection.isGlobal) {\n    if (newTab) { // open link at new path in new tab\n      let path = Link.selection.targetPath.lastSegment;\n      return window.open(location.origin + path.string, '_blank');\n    }\n\n    if (!newTab) {\n      let path = Link.selection.targetPath.lastSegment;\n      return updateView(\n        path,\n        Link.selectALink(path),\n        { scrollStyle: 'auto' }\n      )\n    }\n  }\n\n  if (Link.selection.isImport) { // redirect\n    let path = Link.selection.targetPath.lastSegment;\n\n    if (newTab) {\n      return window.open(location.origin + path.string, '_blank');\n    } else {\n      return updateView(\n        path,\n        Link.selection.parentLink.atNewPath(path),\n        { scrollStyle: 'auto' }\n      )\n    }\n  }\n\n  if (Link.selection.type === 'url') {\n    if (newTab) {\n      return window.open(Link.selection.element.href, '_blank');\n    } else {\n      window.location = Link.selection.element.href;\n    }\n  }\n}\n\nfunction depthFirstSearch() {\n  let link = Link.selection;\n\n  // Open a parent link\n  if (link.isLocal && link.hasChildren) {\n    let nextLink = link.firstChildLink || link.nextSibling || link;\n    return updateView(\n      nextLink.paragraphPathWhenSelected,\n      nextLink\n    );\n  }\n\n  if (link.isGlobalOrImport) {\n    let linkToSelect = link.nextSibling || link.parentLink?.nextSibling || link.enclosingParagraph.firstLink;\n    return updateView(\n      linkToSelect.enclosingParagraph.path,\n      linkToSelect\n    );\n  }\n\n  // Move to the next sibling including parent link with no children\n  if (link.nextSibling && !link.nextSibling.equals(link)) {\n    return updateView(\n      link.nextSibling.enclosingParagraph.path,\n      link.nextSibling,\n    );\n  }\n\n  // Move to next parent sibling, grandparent sibling, etc.\n  if (link.lastSibling.equals(link)) {\n    let linkToSelect = (function parentSibling (link) {\n      if (!(link.parentLink && link.parentLink.isLocal)) { // If there is no parent link that is local\n        return link.firstSibling; // cycle\n      } else if (link.parentLink.nextSibling) { // If there is a parent-sibling link select that\n        return link.parentLink.nextSibling;\n      } else {\n        return parentSibling(link.parentLink) // otherwise repeat the above steps using the local parent link\n      }\n    })(link);\n\n    return updateView(\n      linkToSelect.paragraphPathWhenSelected,\n      linkToSelect\n    );\n  }\n}\n\nfunction zoomOnLocalPath() {\n  let currentLink = Link.selection;\n  let newPath = currentLink.localPathSegmentWhenSelected;\n\n  let newLink = currentLink.atNewPath(newPath);\n\n  return updateView(\n    newPath,\n    newLink,\n    { scrollStyle: 'auto' }\n  );\n}\n\nfunction removeSelection() {\n  return updateView(Path.current.rootTopicPath);\n}\n\nfunction duplicate() {\n  return window.open(window.location.href, '_blank');\n}\n\nexport {\n  moveUpward,\n  topicParentLink,\n  moveDownward,\n  moveLeftward,\n  moveRightward,\n  moveDownOrRedirect,\n  depthFirstSearch,\n  zoomOnLocalPath,\n  removeSelection,\n  duplicate\n};\n","import {\n  moveUpward,\n  topicParentLink,\n  moveDownward,\n  moveLeftward,\n  moveRightward,\n  moveDownOrRedirect,\n  depthFirstSearch,\n  zoomOnLocalPath,\n  removeSelection,\n  duplicate\n} from 'keys/key_handlers';\nimport updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nconst registerKeyListeners = () => {\n  window.addEventListener('keydown', function(e) {\n    let modifiers =\n      (e.metaKey ? 'meta-' : '') +\n      (e.ctrlKey ? 'ctrl-' : '') +\n      (e.altKey ? 'alt-' : '') +\n      (e.shiftKey ? 'shift-' : '');\n\n    let keyName = keyNames[e.keyCode];\n    let shortcutName = modifiers + keyName;\n\n    if (['tab', 'down', 'up'].includes(keyName)) {\n      e.preventDefault();\n    }\n\n    if (Link.selection) {\n      (shortcutRelationships[shortcutName]||function(){})()\n    } else if (shortcutRelationships[shortcutName]) {\n      updateView(\n        Path.current,\n        Link.selectALink()\n      );\n    }\n  });\n}\n\nconst shortcutRelationships = {\n  'left': moveLeftward,\n  'up': moveUpward,\n  'down': moveDownward,\n  'right': moveRightward,\n\n  'h': moveLeftward,\n  'j': moveDownward,\n  'k': moveUpward,\n  'l': moveRightward,\n\n  'escape': removeSelection,\n  'z': zoomOnLocalPath,\n  'd': duplicate,\n  'shift-up': topicParentLink,\n  'shift-k': topicParentLink,\n\n  'enter': () => moveDownOrRedirect({}),\n  'meta-enter': () => moveDownOrRedirect({ newTab: true }), // mac\n  'ctrl-enter': () => moveDownOrRedirect({ newTab: true }), // windows & linux\n  'alt-enter': () => moveDownOrRedirect({ newTab: false, altKey: true }),\n  'meta-alt-enter': () => moveDownOrRedirect({ newTab: true, altKey: true }), // mac\n  'ctrl-alt-enter': () => moveDownOrRedirect({ newTab: true, altKey: true }), // windows & linux\n\n  'tab': depthFirstSearch\n}\n\nconst keyNames = {\n  37: 'left',\n  39: 'right',\n  38: 'up',\n  40: 'down',\n\n  71: 'g',\n  72: 'h',\n  75: 'k',\n  74: 'j',\n  76: 'l',\n  186: ';',\n  90: 'z',\n  68: 'd',\n\n  13: 'enter',\n  9: 'tab',\n  27: 'escape',\n\n  192: '`',\n\n  49: '1',\n  50: '2',\n  51: '3',\n  52: '4',\n  53: '5',\n\n}\n\nexport default registerKeyListeners;\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\n\nfunction registerPopStateListener() {\n  if ('scrollRestoration' in history) {\n    history.scrollRestoration = 'manual';\n  }\n\n  window.addEventListener('popstate', (e) => {\n    let linkSelection = Link.selectionPresentInEvent(e) ? new Link(e.state) : null;\n\n    try { linkSelection.element; } catch { linkSelection = null; } // in case metadata is invalid\n\n    let scrollStyle;\n    if (Paragraph.current.path.rootTopicPath.equals(Path.current.rootTopicPath)) { // Navigating within the same page\n      scrollStyle = 'smooth';\n    } else { // Nagivating to a new page\n      scrollStyle = 'auto';\n    }\n\n    updateView(\n      Path.currentOrDefault,\n      linkSelection || Link.sessionSelection,\n      { scrollStyle }\n    );\n  });\n}\n\nexport default registerPopStateListener;\n","import 'style/canopy.scss';\nimport updateView from 'display/update_view';\nimport registerKeyListeners from 'keys/register_key_listeners';\nimport registerPopStateListener from 'history/register_pop_state_listener';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nregisterKeyListeners();\nregisterPopStateListener();\n\nupdateView(\n  Path.currentOrDefault,\n  Link.priorSelection,\n  { scrollStyle: 'auto' }\n);\n"],"names":["module","exports","removeStyleCharacters","string","newString","replace","require","Topic","this","display","mixedCase","split","map","join","escapedMixedCase","CSS","escape","slug","caps","toUpperCase","fileName","requestFileName","encodeURIComponent","topic","convertUnderscoresToSpaces","decodeURIComponent","convertSpacesToUnderscores","___CSS_LOADER_EXPORT___","push","id","cssWithMappingToString","list","toString","item","content","needLayer","concat","length","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","root","g","cssEscape","value","arguments","TypeError","codeUnit","String","index","result","firstCodeUnit","charCodeAt","charAt","factory","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","globalThis","Function","prop","prototype","hasOwnProperty","nc","canopyContainer","getElementById","defaultTopic","dataset","projectPathPrefix","hashUrls","getAncestorElement","currentElement","className","parentElement","classList","contains","Link","argument","tagName","metadataObject","selectorCallback","linkElement","link","pathString","Paragraph","path","text","relativeLinkNumber","object","paragraph","Path","linkBySelector","linkToSelect","add","persistInHistory","persistInSession","persistLastSelectionData","state","containsLinkSelectionMetadata","sessionData","sessionStorage","getItem","parse","history","historySelection","sessionSelection","selectedLink","linkData","metadata","setItem","location","pathname","hash","replaceState","title","href","firstLink","parentLink","lastSelectionsOfParagraph","enclosingParagraph","otherLink","targetTopic","targetSubtopic","paragraphPathWhenSelected","elementFromMetadata","HTMLAnchorElement","transferDataset","_targetTopic","_targetSubtopic","_enclosingTopic","enclosingTopic","_enclosingSubtopic","enclosingSubtopic","_typeValue","type","enclosingSectionElement","isParent","pathDepth","isGlobalOrImport","Number","sectionElement","newPath","parentParagraph","links","find","matcher","pathArray","slice","lastSegment","matches","storedRelativeLinkNumber","indexOf","collectMetadata","addSegment","isLocal","replaceTerminalSubtopic","equals","linkElements","siblings","targetParagraph","lastLink","includes","isOpen","isGlobal","isImport","hasLinks","otherParagraph","_topicName","topicName","_subtopicName","subtopicName","paragraphElement","Array","from","childNodes","currentParagraph","currentTopicParagraph","topicParagraph","unshift","linkObjects","querySelectorAll","subtopic","callback","filter","linkByTarget","linksBySelector","pageRoot","displayTopicName","isTopic","isArray","validatePathArray","arrayToString","stringToArray","array","forEach","tuple","newError","origin","current","empty","slashSeparatedUnits","fixOrphanSubtopics","slashSeparatedUnit","match","segment","topicString","subtopicString","pathSegmentString","newItem","pathToDisplay","firstTopic","console","error","suppliedPath","suppliedRootElement","rootElement","currentNode","firstSubtopic","withoutFirstSegment","subpath","newPathDepth","oldPath","documentTitle","historyApiFunction","b","c","pushState","fullPathString","otherPath","newSubtopic","withoutLastSegment","elementAtRelativePath","REQUEST_CACHE","dataPath","promise","fetch","then","res","json","Promise","reject","onGlobalAndImportLinkClick","preventDefault","newTab","metaKey","ctrlKey","altKey","isSelected","updateView","scrollStyle","open","styleParent","buffer","escaped","styleStack","stylesByText","elements","convertStyleCharacters","newText","_","characterBeforeCodeBlock","backtick","block","backtick2","openMatch","closeMatch","styleCharacter","textNode","pop","renderTokenElement","token","renderContext","spanElement","appendElementsToParent","renderStyledText","renderTextToken","localLinkSubtreeCallback","addEventListener","targetPath","atNewPath","createLocalLinkElement","renderLocalLink","globalLinkSubtreeCallback","createGlobalLinkElement","renderGlobalLink","createImportLinkElement","renderImportLink","linkSpan","url","innerHTML","externalLinkIconSvg","renderLinkLiteral","divElement","imageElement","resourceUrl","anchorElement","anchorUrl","captionElement","captionDiv","altText","renderImage","html","renderHtmlElement","superscriptElement","renderFootnoteSymbol","preElement","codeBlockElement","innerText","renderCodeBlock","blockQuoteElement","renderBlockQuote","renderList","topLevelNodes","tableElement","rows","tokensByCellOfRow","tableRowElement","tokensOfCell","tableCellElement","tokenElement","renderTable","htmlContainer","renderHtmlBlock","horizonalRule","footnoteLineToken","footnoteSpan","superscript","tokens","renderFootnoteLine","collection","parent","listNodeObjects","listElement","ordered","ordinal","listNodeObject","listItemElement","tokensOfLine","children","childList","renderDomTree","paragraphsBySubtopic","prepend","createSectionElement","displayBlockingPromises","promisedSubtree","assign","subtree","requestJson","currentlyRenderingSubtopic","subtopicOfPathContainingOpenGlobalReference","openGlobalLinkExists","secondTopic","openGlobalLinkTargetTopic","openGlobalLinkTargetSubtopic","thisGlobalLinkIsPointingToTheRightThingToBeOpen","thisGlobalLinkIsInCorrectSubtopicToBeOpen","globalLinkIsOpen","whenTopicTreeAppended","fetchAndRenderPath","tokensOfParagraph","all","resolve","preexistingElement","firstSegment","domTree","displayPathTo","isPageRoot","parentLinks","ancestorImportReferences","displayOptions","log","displayPath","defaultRedirect","tryPathPrefix","contradicts","getElementsByTagName","urlPathWhenSelected","existingHeader","headerDomElement","styleElements","setHeader","rootTopicPath","select","behavior","top","screen","height","scrollTo","scrollPage","validatePathAndLink","moveUpward","topicParentLink","newLink","moveDownward","oldLink","moveLeftward","moveRightward","moveDownOrRedirect","shortcutRelationships","currentLink","localPathSegmentWhenSelected","hasChildren","nextLink","firstChildLink","nextSibling","lastSibling","parentSibling","firstSibling","keyNames","modifiers","shiftKey","keyName","keyCode","shortcutName","scrollRestoration","linkSelection"],"sourceRoot":""}