{"version":3,"file":"canopy.js","mappings":"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","sources":["webpack:///./client/style/canopy.scss","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack:///./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack:///./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack:///./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack:///./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/nonce","webpack:///./client/style/canopy.scss?ec98","webpack:///./client/models/paragraph.js","webpack:///./client/models/link.js","webpack:///./client/helpers/getters.js","webpack:///./client/helpers/identifiers.js","webpack:///./client/models/path.js","webpack:///./client/render/render_styled_text.js","webpack:///./client/display/helpers.js","webpack:///./client/display/display_path.js","webpack:///./client/render/click_handlers.js","webpack:///./client/assets/external_link_icon/icon.svg","webpack:///./client/requests/request_cache.js","webpack:///./client/requests/topic_name.js","webpack:///./client/render/render_token_element.js","webpack:///./client/render/block_renderers.js","webpack:///./client/render/render_dom_tree.js","webpack:///./client/requests/eager_load.js","webpack:///./client/render/fetch_and_render_path.js","webpack:///./client/requests/request_json.js","webpack:///./client/display/update_view.js","webpack:///./client/keys/key_handlers.js","webpack:///./client/keys/register_key_listeners.js","webpack:///./client/history/register_pop_state_listener.js","webpack:///./client/canopy.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#_canopy{padding-top:15px;padding-bottom:55px}#_canopy h1{text-align:center;margin:auto;width:40%;margin-top:10px}#_canopy hr{width:9%;display:block;height:1px;border:0;border-top:5px solid #ccc;margin:0px auto;padding-bottom:30px}#_canopy section.canopy-topic-section{padding-top:40px}#_canopy section.canopy-selected-section{padding-bottom:100px}#_canopy section{padding-top:30px}#_canopy p{overflow:hidden;font-size:22px;max-width:700px;margin:auto;line-height:1.3;letter-spacing:-0.003em;font-weight:400}#_canopy a.canopy-selectable-link{text-decoration:underline #ddd;color:#000;cursor:pointer}#_canopy a.canopy-selectable-link:hover{text-decoration:underline}#_canopy a.canopy-selectable-link:focus{outline:0}#_canopy a.canopy-selectable-link.canopy-open-link{text-shadow:.8px 0px 0px #000;text-decoration:underline}#_canopy a.canopy-selectable-link.canopy-selected-link{background-color:#edeefc;text-shadow:0px 0px 0px #000;text-decoration:none}#_canopy a.canopy-selectable-link.canopy-selected-link:hover{text-decoration:underline}#_canopy span.canopy-text-span{display:block}#_canopy hr.footnote-rule{width:700px;display:block;height:1px;border:0;border-top:1px solid #ccc;margin:12px 0;padding:0}#_canopy sup{font-size:60%;padding:2px}#_canopy .footnote-span{font-size:80%}#_canopy blockquote{margin:7px 10px;background-color:#eff0f1;padding:5px;font-size:90%}#_canopy blockquote a.canopy-selectable-link{text-decoration:underline #d3d3d3}#_canopy pre{margin:7px 10px;background-color:#eff0f1;padding:5px;font-size:85%}#_canopy code{background-color:#eff0f1;font-size:90%}#_canopy table{margin:7px auto;table-layout:fixed;width:70%;border-collapse:collapse;border:2px solid #000}#_canopy table td,#_canopy table th{border:2px solid #000;text-align:center;padding:6px}#_canopy img{max-width:200px;max-height:275px}#_canopy div.canopy-image-div{float:right;border:1px solid #c8ccd1;padding:3px;background-color:#f8f9fa;font-size:94%;text-align:center;overflow:hidden;min-width:172px;min-height:230px;margin:10px}#_canopy div.canopy-image-div>sup{display:block}#_canopy .canopy-url-link-span>svg{height:15px;width:12px;display:none}#_canopy .canopy-selected-link+svg,#_canopy .canopy-url-link-span:hover>svg{display:inline;vertical-align:middle}#_canopy ol,#_canopy ul{margin:7px 10px}#_canopy div.canopy-raw-html{display:inline}#_canopy>section.canopy-topic-section{padding-top:30px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./client/style/canopy.scss\"],\"names\":[],\"mappings\":\"AAAA,SACE,gBAAA,CACA,mBAAA,CAEA,YACE,iBAAA,CACA,WAAA,CACA,SAAA,CACA,eAAA,CAGF,YACE,QAAA,CACA,aAAA,CACA,UAAA,CACA,QAAA,CACA,yBAAA,CACA,eAAA,CACA,mBAAA,CAGF,sCACE,gBAAA,CAGF,yCACE,oBAAA,CAGF,iBACE,gBAAA,CAGF,WACE,eAAA,CACA,cAAA,CACA,eAAA,CACA,WAAA,CAEA,eAAA,CACA,uBAAA,CACA,eAAA,CAKF,kCACE,8BAAA,CACA,UAAA,CACA,cAAA,CAEA,wCACE,yBAAA,CAGF,wCACE,SAAA,CAGF,mDACE,6BAAA,CACA,yBAAA,CAGF,uDACE,wBAAA,CACA,4BAAA,CACA,oBAAA,CAEA,6DACE,yBAAA,CAiBN,+BACE,aAAA,CAGF,0BACE,WAAA,CACA,aAAA,CACA,UAAA,CACA,QAAA,CACA,yBAAA,CACA,aAAA,CACA,SAAA,CAGF,aACE,aAAA,CACA,WAAA,CAGF,wBACE,aAAA,CAGF,oBACE,eAAA,CACA,wBAAA,CACA,WAAA,CACA,aAAA,CAEA,6CACE,iCAAA,CAIJ,aACE,eAAA,CACA,wBAAA,CACA,WAAA,CACA,aAAA,CAGF,cACE,wBAAA,CACA,aAAA,CAGF,eACE,eAAA,CACA,kBAAA,CACA,SAAA,CACA,wBAAA,CACA,qBAAA,CAEA,oCACE,qBAAA,CACA,iBAAA,CACA,WAAA,CAIJ,aACE,eAAA,CACA,gBAAA,CAGF,8BACE,WAAA,CACA,wBAAA,CACA,WAAA,CACA,wBAAA,CACA,aAAA,CACA,iBAAA,CACA,eAAA,CACA,eAAA,CACA,gBAAA,CACA,WAAA,CAGF,kCACE,aAAA,CAGF,mCACE,WAAA,CACA,UAAA,CACA,YAAA,CAGF,4EACE,cAAA,CACA,qBAAA,CAGF,wBACE,eAAA,CAGF,6BACE,cAAA,CAIJ,sCACE,gBAAA\",\"sourcesContent\":[\"#_canopy {\\n  padding-top: 15px;\\n  padding-bottom: 55px;\\n\\n  h1 {\\n    text-align: center;\\n    margin: auto;\\n    width: 40%;\\n    margin-top: 10px;\\n  }\\n\\n  hr {\\n    width: 9%;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 5px solid #ccc;\\n    margin: 0px auto;\\n    padding-bottom: 30px;\\n  }\\n\\n  section.canopy-topic-section {\\n    padding-top: 40px;\\n  }\\n\\n  section.canopy-selected-section {\\n    padding-bottom: 100px;\\n  }\\n\\n  section {\\n    padding-top: 30px;\\n  }\\n\\n  p {\\n    overflow: hidden;\\n    font-size: 22px;\\n    max-width: 700px;\\n    margin: auto;\\n\\n    line-height: 1.3;\\n    letter-spacing: -.003em;\\n    font-weight: 400;\\n  }\\n\\n///////////// Link styles /////////////////\\n\\n  a.canopy-selectable-link {\\n    text-decoration: underline #DDDDDD;\\n    color: black;\\n    cursor: pointer;\\n\\n    &:hover {\\n      text-decoration: underline;\\n    }\\n\\n    &:focus {\\n      outline:0;\\n    }\\n\\n    &.canopy-open-link {\\n      text-shadow: .8px 0px 0px #000000;\\n      text-decoration: underline;\\n    }\\n\\n    &.canopy-selected-link {\\n      background-color: #edeefc;\\n      text-shadow: 0px 0px 0px #000000;\\n      text-decoration: none;\\n\\n      &:hover {\\n        text-decoration: underline;\\n      }\\n    }\\n\\n    /*\\n    &.canopy-dfs-previously-selected-link {\\n      color: #ff0000 !important;\\n    }\\n\\n    &.canopy-reverse-dfs-previously-selected-link {\\n      color: #0000ff !important;\\n    }\\n    */\\n  }\\n\\n///////////// Markdown styles /////////////////\\n\\n  span.canopy-text-span {\\n    display: block;\\n  }\\n\\n  hr.footnote-rule {\\n    width: 700px;\\n    display: block;\\n    height: 1px;\\n    border: 0;\\n    border-top: 1px solid #ccc;\\n    margin: 12px 0;\\n    padding: 0;\\n  }\\n\\n  sup {\\n    font-size: 60%;\\n    padding: 2px;\\n  }\\n\\n  .footnote-span {\\n    font-size: 80%;\\n  }\\n\\n  blockquote {\\n    margin: 7px 10px;\\n    background-color: #eff0f1;\\n    padding: 5px;\\n    font-size: 90%;\\n\\n    a.canopy-selectable-link {\\n      text-decoration: underline #D3D3D3;\\n    }\\n  }\\n\\n  pre {\\n    margin: 7px 10px;\\n    background-color: #eff0f1;\\n    padding: 5px;\\n    font-size: 85%;\\n  }\\n\\n  code {\\n    background-color: #eff0f1;\\n    font-size: 90%;\\n  }\\n\\n  table {\\n    margin: 7px auto;\\n    table-layout: fixed;\\n    width: 70%;\\n    border-collapse: collapse;\\n    border: 2px solid black;\\n\\n    td, th {\\n      border: 2px solid black;\\n      text-align: center;\\n      padding: 6px;\\n    }\\n  }\\n\\n  img {\\n    max-width: 200px;\\n    max-height: 275px;\\n  }\\n\\n  div.canopy-image-div {\\n    float: right;\\n    border: 1px solid #c8ccd1;\\n    padding: 3px;\\n    background-color: #f8f9fa;\\n    font-size: 94%;\\n    text-align: center;\\n    overflow: hidden;\\n    min-width: 172px;\\n    min-height: 230px;\\n    margin: 10px;\\n  }\\n\\n  div.canopy-image-div > sup {\\n    display: block;\\n  }\\n\\n  .canopy-url-link-span > svg {\\n    height: 15px;\\n    width: 12px;\\n    display: none;\\n  }\\n\\n  .canopy-selected-link + svg, .canopy-url-link-span:hover > svg {\\n    display: inline;\\n    vertical-align: middle;\\n  }\\n\\n  ol, ul {\\n    margin: 7px 10px;\\n  }\\n\\n  div.canopy-raw-html {\\n    display: inline;\\n  }\\n}\\n\\n#_canopy > section.canopy-topic-section {\\n  padding-top: 30px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import Path from 'models/path';\nimport Link from 'models/link';\nimport { canopyContainer } from 'helpers/getters';\nimport { ancestorElement } from 'helpers/getters';\n\nclass Paragraph {\n  // A paragraph instance represents a visible paragraph, not\n  // specifically the DOM element of type paragraph.\n  //\n  // Visible paragraphs in the UI are created with a section element\n  // that has a paragraph element child.\n  //\n  // paragraph.sectionElement returns the section element, whereas\n  // paragraph.paragraphElement returns the paragraph element.\n\n  constructor(sectionElement) {\n    if (!sectionElement || sectionElement.tagName !== 'SECTION' ) throw \"Paragraph instantiation requires section element\";\n    if (!sectionElement.classList.contains('canopy-section')) throw \"Paragraph class requires Canopy section element\";\n    this.sectionElement = sectionElement;\n    this.transferDataset();\n  }\n\n  equals(otherParagraph) {\n    if (!otherParagraph) return false;\n    return this.sectionElement === otherParagraph.sectionElement;\n  }\n\n  display() {\n    this.sectionElement.style.display = 'block';\n  }\n\n  get element() {\n    throw \"Depreciated in favor of #sectionElement property\";\n  }\n\n  transferDataset() {\n    this.topicName = this.sectionElement.dataset.topicName;\n    this.subtopicName = this.sectionElement.dataset.subtopicName;\n    this.pathDepth = this.sectionElement.dataset.pathDepth;\n  }\n\n  get topic() {\n    throw \"Depreciated in favor of #topicName\";\n  }\n\n  get subtopic() {\n    throw \"Depreciated in favor of #subtopicName\";\n  }\n\n  get paragraphElement() {\n    let paragraphElement = Array.from(this.sectionElement.childNodes).\n      find((element) => element.tagName === 'P');\n\n    if (!paragraphElement) throw \"Paragraph has no paragraph element\";\n    return paragraphElement;\n  }\n\n  get path() {\n    let pathArray = [];\n    let currentElement = this.sectionElement;\n\n    while (currentElement !== canopyContainer) {\n      let currentTopic = currentElement.dataset.topicName;\n\n      pathArray.unshift([\n        currentTopic,\n        currentElement.dataset.subtopicName\n      ]);\n\n      while (currentElement.dataset.topicName === currentTopic) {\n        currentElement = currentElement.parentNode;\n      }\n    }\n\n    return new Path(pathArray);\n  }\n\n  get links() {\n    if (this.linkObjects) return this.linkObjects;\n    let linkElements = this.paragraphElement.querySelectorAll('a.canopy-selectable-link');\n    this.linkObjects = Array.from(linkElements).map((element) => new Link(element));\n    return this.linkObjects;\n  }\n\n  get firstLink() {\n    return this.links[0] || null;\n  }\n\n  get lastLink() {\n    return this.links[this.links.length - 1] || null;\n  }\n\n  get isPageRoot() {\n    return this.sectionElement.parentNode === canopyContainer\n  }\n\n  get isTopic() {\n    return this.topicName === this.subtopicName;\n  }\n\n  get hasLinks() {\n    return this.links.length > 0;\n  }\n\n  linkBySelector(callback) {\n    return this.links.find(callback);\n  }\n\n  linksBySelector(callback) {\n    return this.links.filter(callback);\n  }\n\n  linkByTarget(targetTopic, targetSubtopic) {\n    targetSubtopic = targetSubtopic || targetTopic;\n\n    return this.linkBySelector(\n      (link) => link.targetTopic === targetTopic && link.targetSubtopic === targetSubtopic\n    );\n  }\n\n  get parentLink() {\n    if (this.sectionElement.parentNode === canopyContainer) { return null; }\n\n    return this.parentParagraph && this.parentParagraph.linkByTarget(\n      this.topicName,\n      this.subtopicName\n    );\n  }\n\n  get parentLinks() {\n    if (this.sectionElement.parentNode === canopyContainer) { return null; }\n\n    return this.parentParagraph.linksBySelector(\n      link => {\n        return this.topicName === link.targetTopic &&\n          this.subtopicName === link.targetSubtopic;\n      }\n    );\n  }\n\n  get ancestorImportReferences() {\n    if (this.pageRoot) { return []; }\n    if (!this.topicParagraph.parentParagraph) { return []; }\n\n    return this.topicParagraph.parentParagraph.linksBySelector(\n      link => {\n        return this.topicName === link.targetTopic &&\n          this.subtopicName === link.targetSubtopic;\n      }\n    );\n  }\n\n  get displayTopicName() {\n    return this.sectionElement.dataset.displayTopicName;\n  }\n\n  get parentParagraph() {\n    if (this.sectionElement) {\n      let parentElement = ancestorElement(this.sectionElement, 'canopy-section');\n      return parentElement ? new Paragraph(parentElement) : null;\n    } else {\n      return null;\n    }\n  }\n\n  get topicParagraph() {\n    if (this.isTopic) {\n      return this;\n    } else {\n      return new Paragraph(ancestorElement(this.sectionElement, 'canopy-topic-section'));\n    }\n  }\n\n  get isTopicRoot() {\n    return this.topicName === this.subtopicName;\n  }\n\n  static get current() {\n    return Path.current.paragraph;\n  }\n\n  get select() {\n    this.sectionElement.classList.add('canopy-selected-section');\n  }\n\n  static get pageRoot() {\n    let path = Path.forTopic(Path.current.firstTopic);\n    return path.paragraph;\n  }\n\n  static containingLink(link) {\n    if (!link instanceof Link) throw \"Must provide link instance argument\";\n    let sectionElement = ancestorElement(link.element, 'canopy-section');\n    return new Paragraph(sectionElement);\n  }\n\n}\n\nexport default Paragraph;\n","import { ancestorElement } from 'helpers/getters';\nimport { canopyContainer } from 'helpers/getters';\nimport Path from 'models/path';\nimport Paragraph from 'models/paragraph';\n\nclass Link {\n  constructor(argument) {\n    // There are three ways to instantiate a link object:\n    // 1. You can provide a DOM element\n    // 2. You can provide a metadata object\n    //   (This is helpful when storing link selection in the session or history)\n    // 3. You can provide a callback that returns the link\n    //   (This is helpful for selecting links that are not yet rendered)\n\n    if (argument.tagName === 'A') {\n      this.element = argument;\n    } else if (argument instanceof Link) {\n      throw \"Cannot instantiate link from link\";\n    } else if (typeof argument === 'object') {\n      this.metadataObject = argument;\n    } else if (typeof argument === 'function') {\n      this.selectorCallback = argument;\n    } else {\n      throw 'Invalid argument to Link constructor';\n    }\n  }\n\n  equals(otherLink) {\n    return this.element === otherLink.element;\n  }\n\n  matches(otherLink) {\n    if (!otherLink) throw 'Invalid link argument to Link#matches';\n\n    return this.targetTopic === otherLink.targetTopic &&\n      this.targetSubtopic === otherLink.targetSubtopic &&\n      this.relativeLinkNumber === otherLink.relativeLinkNumber;\n  }\n\n  contradicts(path) {\n    if (!path instanceof Path) throw 'Invalid path argument to Link#contradicts';\n    return this.pathToDisplay.string !== path.string;\n  }\n\n  get element () {\n    if (this.linkElement) {\n      return this.linkElement\n    } else if (this.metadataObject) {\n      this.element = Link.elementFromMetadata(this.metadata);\n      return this.linkElement;\n    } else if (this.selectorCallback) {\n      let link = this.selectorCallback();\n      if (!link) throw 'Link selector callback provided no link';\n      this.element = link.element;\n      return this.linkElement;\n    }\n  }\n\n  set element(argument) {\n    if (argument instanceof HTMLAnchorElement) {\n      this.linkElement = argument;\n    } else if (argument instanceof Link) {\n      this.linkElement = argument.element;\n    }\n    this.transferDataset();\n  }\n\n  transferDataset() {\n    // This is just to make it easier to inspect and debug DOM elements\n    // Getters are used instead of properties to allow lazy access for callback-specified links\n    if (!this.linkElement) return;\n    this._targetTopic = this.linkElement.dataset.targetTopic;\n    this._targetSubtopic = this.linkElement.dataset.targetSubtopic;\n    this._enclosingTopic = this.linkElement.dataset.enclosingTopic;\n    this._enclosingSubtopic = this.linkElement.dataset.enclosingSubtopic;\n    this._typeValue = this.linkElement.dataset.type;\n  }\n\n  get targetTopic() {\n    return this.element.dataset.targetTopic;\n  }\n  get targetSubtopic() {\n    return this.element.dataset.targetSubtopic;\n  }\n  get enclosingTopic() {\n    return this.element.dataset.enclosingTopic;\n  }\n  get enclosingSubtopic() {\n    return this.element.dataset.enclosingSubtopic;\n  }\n\n  get topicName() {\n    throw 'Links have no topicName, only targetTopic or enclosingTopic';\n  }\n\n  get subtopicName() {\n    throw 'Links have no subtopicName, only targetSubtopic or enclosingSubtopic';\n  }\n\n  get type() {\n    return this.element.dataset.type;\n  }\n\n  get enclosingSectionElement() {\n    return ancestorElement(this.element, 'canopy-section');\n  }\n\n  get sectionElement() {\n    throw \"Depreciated in favor of #enclosingSectionElement\";\n  }\n\n  get enclosingParagraphElement() {\n    return ancestorElement(this.element, 'canopy-paragraph');\n  }\n\n  get parentParagraphElement() {\n    throw \"Depreciated in favor of #enclosingParagraphElement\";\n  }\n\n  get enclosingParagraph() {\n    return new Paragraph(this.enclosingSectionElement);\n  }\n\n  get targetParagraph() {\n    if (!this.isParent) return null;\n\n    let pathDepth = this.enclosingParagraph.pathDepth;\n    if (this.isGlobalOrImport) pathDepth = Number(pathDepth) + 1;\n\n    let sectionElement = this.enclosingParagraph.sectionElement.querySelector(\n        `section[data-topic-name=\"${this.targetTopic}\"]` +\n        `[data-subtopic-name=\"${this.targetSubtopic}\"]` +\n        `[data-path-depth=\"${pathDepth}\"`\n      );\n\n    if (!sectionElement) {\n      throw `Did not find paragraph child element matching link [${this.targetTopic}, ${this.targetSubtopic}]`;\n    }\n\n    return new Paragraph(sectionElement);\n  }\n\n  atNewPath(newPath) { // get link instantiated with callback that returns matching link at new path\n    return new Link(() => {\n      let newEnclosingParagraph;\n      if (this.isParent) {\n        newEnclosingParagraph = newPath.paragraph.parentParagraph;\n      } else {\n        newEnclosingParagraph = newPath.paragraph;\n      }\n      return newEnclosingParagraph\n        .links\n        .find(this.matcher);\n    });\n  }\n\n  get localPathWhenSelected() {\n    if (this.isGlobalOrImport) {\n      return new Path(this.pathToDisplay.pathArray.slice(-2));\n    } else {\n      return this.pathToDisplay.lastSegment;\n    }\n  }\n\n  get matcher() {\n    return (link) => link.matches(this);\n  }\n\n  get relativeLinkNumber() {\n    if (this.storedRelativeLinkNumber) return this.storedRelativeLinkNumber;\n    this.storedRelativeLinkNumber = this.\n      enclosingParagraph.\n      links.\n      map(e => e.element).\n      indexOf(this.element);\n\n    return this.storedRelativeLinkNumber;\n  }\n\n  get metadata() {\n    if (this.metadataObject) {\n      return this.metadataObject;\n    } else if(this.linkElement) {\n      let metadata = Link.collectMetadata(this.linkElement);\n      this.metadataObject = metadata;\n      return metadata;\n    } else if (this.selectorCallback) {\n      this.element = this.selectorCallback();\n      return this.metadata; // now that there is a this.linkElement\n    } else {\n      throw \"Link has neither supplied metadata, dom element, nor selector function\";\n    }\n  }\n\n  get targetPath() {\n    if (this.isGlobalOrImport) {\n      return this.enclosingParagraph.path.addSegment(this.targetTopic, this.targetSubtopic);\n    } else if (this.isLocal) {\n      return this.enclosingParagraph.path.replaceTerminalSubtopic(this.targetSubtopic);\n    } else {\n      return null; // eg URL link\n    }\n  }\n\n  get path() {\n    throw \"Depreciated in favor of #pathToDisplay\";\n  }\n\n  get pathToDisplay() {\n    if (this.isGlobalOrImport) {\n      return this.enclosingParagraph.path.addSegment(this.targetTopic, this.targetSubtopic);\n    } else if (this.isLocal) {\n      return this.enclosingParagraph.path.replaceTerminalSubtopic(this.targetSubtopic);\n    } else {\n      return this.enclosingParagraph.path;\n    }\n  }\n\n  static collectMetadata(linkElement) {\n    let link = new Link(linkElement);\n    let paragraph = Paragraph.containingLink(link);\n\n    // changing the metadata schema requires changing Link#containsLinkSelectionMetadata\n    return {\n      pathString: paragraph.path.string, // initial page load with session/history link selection requires this\n      text: linkElement.dataset.text,\n      relativeLinkNumber: link.relativeLinkNumber\n    };\n  }\n\n  static containsLinkSelectionMetadata(object) {\n    return object.hasOwnProperty('relativeLinkNumber');\n  }\n\n  static elementFromMetadata(object) {\n    let path = new Path(object.pathString);\n    let paragraph = path.paragraph;\n    if (!paragraph) throw \"Link selection data refers to non-existant link\";\n    let link = paragraph.linkBySelector(\n      (link, i) => link.element.dataset.text === object.text &&\n        i === object.relativeLinkNumber\n    );\n\n    return link && link.element || null;\n  }\n\n  get nextSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[links.length - 1])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink + 1];\n    } else {\n      return null;\n    }\n  }\n\n  get previousSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[0])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink - 1];\n    } else {\n      return null;\n    }\n  }\n\n  get siblings() {\n    return this.enclosingParagraph.links;\n  }\n\n  get firstSibling() {\n    return this.siblings[0];\n  }\n\n  get lastSibling() {\n    return this.siblings[this.siblings.length - 1];\n  }\n\n  get firstChildLink() {\n    return this.targetParagraph.firstLink;\n  }\n\n  get lastChildLink() {\n    return this.targetParagraph.lastLink;\n  }\n\n  get parentLink() {\n    return this.enclosingParagraph.parentLink;\n  }\n\n  get grandParentLink() {\n    return this.parentLink?.parentLink;\n  }\n\n  get topicParagraph() {\n    return ancestorElement(this.element, 'canopy-topic-section');\n  }\n\n  get selected() {\n    return this.element.classList.includes('canopy-selected-link');\n  }\n\n  open() {\n    this.element.classList.add('canopy-open-link');\n  }\n\n  get isOpen() {\n    return this.element.classList.contains('canopy-open-link');\n  }\n\n  get isClosed() {\n    return !this.isOpen;\n  }\n\n  get isSelected() {\n    return this.element.classList.contains('canopy-selected-link');\n  }\n\n  get isGlobal() {\n    return this.type === 'global';\n  }\n\n  get isImport() {\n    return this.type === 'import';\n  }\n\n  get isGlobalOrImport() {\n    return this.type === 'global' || this.type === 'import';\n  }\n\n  get isLocal() {\n    return this.type === 'local';\n  }\n\n  get isParent() {\n    return this.isGlobal || this.isLocal || this.isImport;\n  }\n\n  get hasChildren() {\n    return this.targetParagraph.hasLinks;\n  }\n\n  static select(linkToSelect) {\n    linkToSelect && linkToSelect.element.classList.add('canopy-selected-link');\n    Link.persistInHistory(linkToSelect);\n    Link.persistInSession(linkToSelect);\n  }\n\n  static selectionPresentInEvent(e) {\n    return e.state && Link.containsLinkSelectionMetadata(e.state);\n  }\n\n  static get sessionSelection() {\n    let sessionData = sessionStorage.getItem(Path.current.string);\n    if (sessionData && sessionData !== 'null') {\n      return new Link(JSON.parse(sessionData));\n    } else {\n      return null;\n    }\n  }\n\n  static get historySelection() {\n    if (history.state && Link.containsLinkSelectionMetadata(history.state)) {\n      return new Link(history.state);\n    } else {\n      return null;\n    }\n  }\n\n  static get priorSelection() {\n    return this.historySelection || this.sessionSelection || null;\n  }\n\n  static get selection() {\n    let selectedLink = document.querySelector('a.canopy-selected-link');\n    if (selectedLink) {\n      return new Link(selectedLink);\n    } else {\n      return null;\n    }\n  }\n\n  static persistInSession(link) {\n    // This has to be static because Link.selection hasn't always updated\n    // between when a new link is selected and when we want to persist that selection\n    let linkData = link && JSON.stringify(link.metadata);\n    sessionStorage.setItem(location.pathname + location.hash, linkData || null);\n  }\n\n  static persistInHistory(link) {\n    // This has to be static because Link.selection hasn't always updated\n    // between when a new link is selected and when we want to persist that selection\n    history.replaceState(\n      link && link.metadata || null,\n      document.title,\n      window.location.href\n    );\n  }\n\n  // selectALink returns a callback that will pick a link to select\n  // once the DOM has rendered.\n  //\n  // selectALink takes a path to clarify which path is intended in case\n  // there are multiple rendered in the DOM, and the path has not updated yet.\n\n  static selectALink(path) {\n    return new Link(() => {\n      path = path || Path.current;\n      let paragraph = path.paragraph;\n      return paragraph.firstLink || paragraph.parentLink;\n    });\n  }\n\n  static current() {\n    throw \"Link#current does not exist, try Link#selection\";\n  }\n}\n\nexport default Link;\n","import Link from 'models/link';\n\nconst canopyContainer = document.getElementById('_canopy');\n\nconst defaultTopic = canopyContainer && canopyContainer.dataset.defaultTopic;\n\nconst projectPathPrefix = canopyContainer && canopyContainer.dataset.projectPathPrefix;\n\nconst hashUrls = canopyContainer && canopyContainer.dataset.hashUrls;\n\nfunction ancestorElement(currentElement, className) {\n  let parentElement = currentElement.parentElement;\n  while (parentElement.classList && !parentElement.classList.contains(className)) {\n    if (parentElement === canopyContainer) return null;\n    parentElement = parentElement.parentNode;\n  }\n  return parentElement;\n}\n\nexport {\n  canopyContainer,\n  defaultTopic,\n  projectPathPrefix,\n  hashUrls,\n  ancestorElement\n};\n","const slugFor = (string) => {\n  if (!string) {return string}\n\n  return string.replace(/ /g, '_');\n}\n\nexport {\n  slugFor\n};\n\n","import { defaultTopic, canopyContainer, projectPathPrefix, hashUrls } from 'helpers/getters';\nimport { selectedLink, metadataForLink } from 'helpers/getters';\nimport { slugFor } from 'helpers/identifiers';\nimport Paragraph from 'models/paragraph';\nimport Link from 'models/link';\n\nclass Path {\n  constructor(argument) {\n    if (!argument) {\n      this.pathArray = [['', '']];\n    } else if (Array.isArray(argument)) {\n      if (argument.length === 0) {\n        this.pathArray = [['', '']];\n      } else {\n        this.pathArray = JSON.parse(JSON.stringify(argument));\n        Path.validatePathArray(this.pathArray);\n      }\n      this.pathString = Path.arrayToString(this.pathArray);\n    } else if (typeof argument === 'string' || argument instanceof String) {\n      this.pathString = argument;\n      this.pathArray = Path.stringToArray(this.pathString);\n    }\n  }\n\n  equals(otherPath) {\n    return this.string === otherPath.string;\n  }\n\n  static validatePathArray(array) {\n    array.forEach(tuple => {\n      if (tuple.length !== 2) throw `Invalid path segment format: ${tuple}`;\n      if (typeof tuple[0] !== 'string' || typeof tuple[1] !== 'string') throw `Invalid path segment format: ${tuple}`;\n    })\n  }\n\n  addSegment(topic, subtopic) {\n    if (this.empty) return new Path([[topic, subtopic]]);\n    return new Path(this.pathArray.concat([[topic, subtopic]]));\n  }\n\n  replaceTerminalSubtopic(newSubtopic) {\n    let lastSegment = this.lastSegment;\n    return this.withoutLastSegment.addSegment(lastSegment.topic, newSubtopic);\n  }\n\n  toString() {\n    return this.string;\n  }\n\n  get array() {\n    return this.pathArray;\n  }\n\n  get string() {\n    return this.pathString;\n  }\n\n  get firstTopic() {\n    return this.pathArray[0][0];\n  }\n\n  get topic() {\n    return this.pathArray[0][0];\n  }\n\n  get rootTopicPath() {\n    return new Path([[this.topic, this.topic]]);\n  }\n\n  get firstSubtopic() {\n    return this.pathArray[0][1];\n  }\n\n  get subtopic() {\n    return this.pathArray[0][1];\n  }\n\n  get secondTopic() {\n    return this.pathArray[1] && this.pathArray[1][0];\n  }\n\n  get secondSubtopic() {\n    return this.pathArray[1] && this.pathArray[1][1];\n  }\n\n  get firstSegment() {\n    return new Path([[this.pathArray[0][0], this.pathArray[0][1]]]);\n  }\n\n  get lastSegment() {\n    return new Path(this.pathArray.slice(-1));\n  }\n\n  get withoutFirstSegment() {\n    return new Path(this.pathArray.slice(1));\n  }\n\n  get withoutLastSegment() {\n    return new Path(this.pathArray.slice(0, -1));\n  }\n\n  get clone() {\n    return new Path(JSON.parse(JSON.stringify(this.pathArray)));\n  }\n\n  get length() {\n    if (this.pathArray[0][0] === '') {\n      return 0;\n    } else {\n      return this.pathArray.length;\n    }\n  }\n\n  get sectionElement() {\n    return Path.elementAtRelativePath(this, canopyContainer);\n  }\n\n  get paragraph() {\n    if (this.sectionElement) {\n      return new Paragraph(this.sectionElement);\n    } else {\n      return null;\n    }\n  }\n\n  get empty() {\n    return this.pathArray[0][0] === '';\n  }\n\n  static get default() {\n    return new Path([[defaultTopic, defaultTopic]]);\n  }\n\n  static get current() {\n    let pathString = window.location.pathname + window.location.hash;\n\n    if (projectPathPrefix && pathString.indexOf(`/${projectPathPrefix}`) === 0) {\n      pathString = pathString.slice(projectPathPrefix.length + 1);\n    }\n\n    if (pathString.indexOf('#/') === 0) pathString = pathString.slice(1);  // example.com[/#]/Topic\n\n    return new Path(pathString);\n  }\n\n  static get initial() {\n    if (Path.current.empty) {\n      return Path.default;\n    } else {\n      return Path.current;\n    }\n  }\n\n  static forTopic(topic) {\n    return new Path([[topic, topic]]);\n  }\n\n  static forSegment(topic, subtopic) {\n    return new Path([[topic, subtopic]]);\n  }\n\n  static stringToArray(pathString) {\n    if (typeof pathString !== 'string') throw \"Function requires string argument\";\n\n    if (pathString.indexOf(projectPathPrefix) === 1) {\n      pathString = pathString.slice(projectPathPrefix.length + 1);\n    }\n\n    if (pathString === '/') {\n      return [['','']];\n    }\n\n    let slashSeparatedUnits = pathString.\n      replace(/_/g, ' ').\n      split('/').\n      filter((string) => string !== '');\n\n    slashSeparatedUnits = Path.fixOrphanSubtopics(pathString, slashSeparatedUnits);\n\n    let pathArray = slashSeparatedUnits.map((slashSeparatedUnit) => {\n      // Capture two groups: (letters)#(optional_more_letters)\n      let match = slashSeparatedUnit.match(/([^#]*)(?:#([^#]*))?/);\n      return [\n        match[1] || match[2] || null,\n        match[2] || match[1] || null,\n      ];\n    }).filter((segment) => segment[0] !== null);\n\n    return pathArray;\n  }\n\n  static arrayToString(pathArray) {\n    if (!Array.isArray(pathArray)) throw 'Argument must be array';\n\n    if (Array.isArray(pathArray) && pathArray.length === 0) {\n      return '/';\n    }\n\n    if (!Array.isArray(pathArray[0])) {\n      throw 'Path array must be two-dimensional array';\n    }\n\n    let pathString = '/';\n\n    pathString += pathArray.map(([topic, subtopic]) => {\n      let pathSegmentString = slugFor(topic);\n      if (subtopic && subtopic !== topic) {\n        pathSegmentString += \"#\" + slugFor(subtopic);\n      }\n      return pathSegmentString;\n    }).join('/');\n\n    return pathString;\n  }\n\n  static fixOrphanSubtopics(pathString, slashSeparatedUnits) {\n    // eg /Topic/#Subtopic/A#B  -> /Topic#Subtopic/A#B\n\n    if (typeof pathString !== 'string') throw \"pathString must be a string argument\";\n    if (!Array.isArray(slashSeparatedUnits)) throw 'slashSeparatedUnits must be an array';\n\n    if (pathString.match(/\\/#\\w+/)) {\n      for (let i = 1; i < slashSeparatedUnits.length; i++) {\n        if (slashSeparatedUnits[i].match(/^#/)) {\n          if (!slashSeparatedUnits[i - 1].match(/#/)) { // eg /Topic/#Subtopic -> /Topic#Subtopic\n            let newItem = slashSeparatedUnits[i - 1] + slashSeparatedUnits[i];\n            let newArray = slashSeparatedUnits.slice(0, i - 1).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          } else { // eg /Topic#Subtopic/#Subtopic2 -> /Topic#Subtopic/Subtopic2\n            let newItem = slashSeparatedUnits[i].slice(1);\n            let newArray = slashSeparatedUnits.slice(0, i).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          }\n        }\n      }\n    }\n\n    return slashSeparatedUnits;\n  }\n\n  static connectingLinkValid(parentElement, pathToDisplay) {\n    if (!parentElement) throw 'Parent element required';\n    if (!pathToDisplay instanceof Path) throw 'pathToDisplay must be a Path object';\n\n    if (parentElement === canopyContainer) return true;\n\n    let parentParagraph = new Paragraph(parentElement);\n    if (!parentParagraph.linkByTarget(pathToDisplay.firstTopic)) {\n      console.error(\"Parent element has no connecting link to subsequent path segment\");\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  static elementAtRelativePath(suppliedPath, suppliedRootElement) {\n    if (!suppliedPath instanceof Path) throw 'pathToDisplay must be a Path object';\n    if (!suppliedRootElement || !suppliedRootElement.tagName) 'Root element must be a DOM node';\n\n    let rootElement = suppliedRootElement;\n    if (!suppliedRootElement) { rootElement = canopyContainer; }\n    let path = suppliedPath.clone;\n\n    let currentNode = rootElement;\n    if (rootElement === canopyContainer) {\n      currentNode = rootElement.querySelector(\n        `[data-topic-name=\"${path.firstTopic}\"]` +\n        `[data-subtopic-name=\"${path.firstSubtopic}\"]` +\n        `[data-path-depth=\"${0}\"]`\n      );\n      if (path.length === 1) { return currentNode; }\n      if (!currentNode) return null;\n      path = path.withoutFirstSegment;\n    }\n\n    let subpath = path.clone;\n    for (let i = 0; i < path.length; i++) {\n      let newPathDepth = Number(currentNode.dataset.pathDepth) + 1;\n\n      currentNode = currentNode.querySelector(\n        `[data-topic-name=\"${subpath.firstTopic}\"]` +\n        `[data-subtopic-name=\"${subpath.firstSubtopic}\"]` +\n        `[data-path-depth=\"${newPathDepth}\"]`\n      );\n\n      if (!currentNode) return null;\n      subpath = subpath.withoutFirstSegment;\n    }\n\n    return currentNode;\n  }\n\n  static setPath(newPath, link) {\n    if (!newPath instanceof Path) throw 'newPath must be Path object';\n\n    let oldPath = Path.current;\n    let documentTitle = newPath.firstTopic;\n    let historyApiFunction = newPath.equals(oldPath) ? replaceState : pushState;\n    let fullPathString = (projectPathPrefix ? `/${projectPathPrefix}` : '') + (hashUrls ? '/#' : '') + newPath.string;\n\n    historyApiFunction(\n      history.state, // this will be changed via Link#persistInHistory\n      documentTitle,\n      fullPathString\n    );\n\n    function replaceState(a, b, c) {\n      history.replaceState(a, b, c);\n    }\n\n    function pushState(a, b, c) {\n      history.pushState(a, b, c);\n    }\n  }\n}\n\nexport default Path;\n","function renderStyledText(text) {\n  let buffer = '';\n  let escaped = false;\n\n  let styleStack = [];\n\n  let stylesByText = {\n    '_': 'I',\n    '*': 'B',\n    '~': 'S',\n    '`': 'CODE'\n  }\n\n  let elements = [];\n  let styleParent;\n\n  for (let i = 0; i < text.length; i++) {\n    let openMatch = text.slice(i).match(/^([^_`*~A-Za-z]*)([_`*~]).*\\2(?:\\W+|$)/); // eg (_abc_)\n    let closeMatch = text.slice(i).match(/^([_`*~])(?:[^_`*~A-Za-z]+|$)/); // eg _)\n    let closeStyle = closeMatch && styleStack.slice(-1)[0] === closeMatch[1];\n\n    if (!escaped && styleStack[0] !== '`' && openMatch) { // we ignore further characters within ` blocks\n      let [_, pretext, styleCharacter] = openMatch;\n\n      if (buffer || pretext) {\n        let textNode = document.createTextNode(buffer + pretext);\n        buffer = '';\n        if (styleParent) {\n          styleParent.appendChild(textNode);\n        } else {\n          elements.push(textNode);\n        }\n      }\n\n      let styleElement = document.createElement(stylesByText[styleCharacter]);\n      if (styleParent) {\n        styleParent.appendChild(styleElement);\n      } else {\n        elements.push(styleElement);\n      }\n      styleParent = styleElement;\n      styleStack.push(styleCharacter);\n    } else if (closeStyle) {\n      if (buffer) {\n        let textNode = document.createTextNode(buffer);\n        buffer = '';\n        if (styleParent) {\n          styleParent.appendChild(textNode);\n        } else {\n          elements.push(textNode);\n        }\n      }\n      styleParent = styleParent.parentNode || null;\n      styleStack.pop();\n    } else if (!escaped && text[i] === '\\\\') {\n      escaped = true;\n    } else {\n      buffer += text[i];\n      escaped = false;\n    }\n  }\n\n  if (buffer) {\n    let textNode = document.createTextNode(buffer);\n    elements.push(textNode);\n  }\n\n  return elements;\n}\n\nexport default renderStyledText;\n","import { canopyContainer } from 'helpers/getters';\n\nimport renderStyledText from 'render/render_styled_text';\nimport displayPath from 'display/display_path';\n\nfunction setHeader(topicName) {\n  let existingHeader = document.querySelector('#_canopy h1')\n  if (existingHeader) { existingHeader.remove(); }\n  let headerDomElement = document.createElement('h1');\n  let styleElements = renderStyledText(topicName);\n  Array.from(styleElements).forEach((element) => {headerDomElement.appendChild(element)});\n  canopyContainer.prepend(headerDomElement);\n};\n\nfunction determineParagraphToDisplay(linkToSelect, paragraph, displayOptions) {\n  // if (linkToSelect && displaySectionBelowLink(linkToSelect)) {\n    // return childSectionElementOfParentLink(linkToSelect);\n  // } else {\n    return paragraph;\n  // }\n}\n\nfunction displaySectionBelowLink(linkToSelect) {\n  return\n    linkToSelect?.dataset.type === 'local' ||\n    redundantParentLinkInSameParagraphAsPrimary(linkToSelect)\n}\n\nfunction redundantParentLinkInSameParagraphAsPrimary(linkToSelect) {\n  return linkToSelect?.dataset.type === 'redundant-local' &&\n    siblingOfLinkLike(linkToSelect, (linkElement) => {\n      return linkElement.dataset &&\n        linkElement.dataset.targetTopic === linkToSelect.dataset.targetTopic &&\n        linkElement.dataset.targetSubtopic === linkToSelect.dataset.targetSubtopic;\n    })\n}\n\nfunction hideAllSectionElements() {\n  Array.from(document.getElementsByTagName(\"section\")).forEach((sectionElement) => {\n    sectionElement.style.display = 'none';\n  });\n}\n\nfunction deselectAllLinks() {\n  Array.from(document.getElementsByTagName(\"a\")).forEach((linkElement) => {\n    linkElement.classList.remove('canopy-selected-link');\n    linkElement.classList.remove('canopy-open-link');\n  });\n}\n\nfunction deselectSectionElement() {\n  Array.from(document.querySelectorAll('.canopy-selected-section')).forEach((sectionElement) => {\n    sectionElement.classList.remove('canopy-selected-section');\n  });\n}\n\nfunction hideSectionElement(sectionElement) {\n  sectionElement.style.display = 'none';\n}\n\nfunction showSectionElement(sectionElement) {\n  sectionElement.style.display = 'block';\n}\n\nfunction showsectionElementContainingLink(linkElement) {\n  showSectionElement(sectionElementContainingLink(linkElement));\n}\n\nfunction tryPathPrefix(path, displayOptions) {\n  console.log(\"No section element found for path: \", JSON.stringify(path.toString()));\n  console.log(\"Trying: \", JSON.stringify(path.withoutLastSegment));\n  if (path.length > 1) {\n    return displayPath(path.withoutLastSegment, null, displayOptions);\n  } else {\n    throw \"Invalid path: \" + path.array;\n  }\n}\n\nconst resetDom = () => {\n  deselectAllLinks();\n  hideAllSectionElements();\n  deselectSectionElement();\n}\n\nfunction pathForUrl(pathToDisplay, link) {\n  // Import references display the path to the target paragraph, but the URL should be the link's enclosing paragraph\n  if (link && link.type === 'import') {\n    return link.enclosingParagraph.path;\n  } else {\n    return pathToDisplay; // otherwise the path of the displayed paragraph should be the path used in the URL\n  }\n}\n\nexport {\n  setHeader,\n  displaySectionBelowLink,\n  resetDom,\n  tryPathPrefix,\n  pathForUrl\n};\n","import Path from 'models/path';\nimport { canopyContainer } from 'helpers/getters';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\nimport updateView from 'display/update_view';\nimport {\n  setHeader,\n  addSelectedLinkClass,\n  tryPathPrefix,\n  resetDom,\n  pathForUrl\n} from 'display/helpers';\n\nconst displayPath = (pathToDisplay, linkToSelect, displayOptions) => {\n  displayOptions = displayOptions || {};\n  if (!pathToDisplay.paragraph) return tryPathPrefix(pathToDisplay, displayOptions);\n  if (linkToSelect?.contradicts(pathToDisplay)) {\n    return updateView(linkToSelect.pathToDisplay, linkToSelect, displayOptions);\n  }\n\n  resetDom();\n  if (!displayOptions.pathAlreadySet) Path.setPath(pathForUrl(pathToDisplay, linkToSelect));\n  setHeader(Paragraph.pageRoot.displayTopicName);\n  document.title = pathToDisplay.firstTopic;\n  Link.select(linkToSelect); // if null, persists deselect\n\n  pathToDisplay.paragraph.select;\n  displayPathTo(pathToDisplay.paragraph);\n  if (!displayOptions.noScrolling) window.scrollTo(0, canopyContainer.scrollHeight);\n};\n\nconst displayPathTo = (paragraph) => {\n  paragraph.display();\n  if (paragraph.isPageRoot) return;\n  paragraph.parentLink && paragraph.parentLinks.forEach(link => link.open());\n  paragraph.ancestorImportReferences.forEach(link => link.open());\n  if (paragraph.parentLink && !Link.selection) Link.select(paragraph.parentLink);\n  displayPathTo(paragraph.parentParagraph);\n}\n\nexport default displayPath;\n","import updateView from 'display/update_view';\nimport { sectionElementContainingLink } from 'helpers/getters';\nimport Path from 'models/path';\n\nfunction onLocalLinkClick(targetTopic, targetSubtopic, link) {\n  return (e) => {\n    e.preventDefault();\n    let pathToLink = link.enclosingParagraph.path;\n    let newPath, linkToSelect;\n\n    if (e.metaKey && !e.altKey) { // no zoom\n      return window.open(location.origin + link.targetPath.string, '_blank');\n    }\n\n    if (e.metaKey && e.altKey) { // zoom\n      return window.open(location.origin + link.targetPath.lastSegment.string, '_blank');\n    }\n\n    if (e.altKey) { //zoom\n      let path = link.targetPath.lastSegment;\n      return updateView(path, link.atNewPath(path));\n    }\n\n    if (link.isOpen) {\n      newPath = pathToLink.replaceTerminalSubtopic(link.enclosingParagraph.subtopicName);\n    } else {\n      newPath = pathToLink.replaceTerminalSubtopic(link.targetSubtopic);\n      linkToSelect = link;\n    }\n\n    updateView(newPath, linkToSelect, { noScrolling: true });\n  };\n};\n\nfunction onGlobalLinkClick (link) {\n  return (e) => {\n    e.preventDefault();\n\n    let path, linkToSelect;\n    if (!e.altKey) {\n      if (link.isSelected) { // close global child\n        path = link.enclosingParagraph.path;\n      } else { // open global child\n        path = link.pathToDisplay;\n        linkToSelect = link;\n      }\n    } else { // Redirect to global child\n      path = Path.forSegment(link.targetTopic, link.targetSubtopic);\n    }\n\n    if (e.metaKey) {\n      window.open(\n        location.origin + path.string,\n        '_blank'\n      );\n    } else {\n      updateView(path, linkToSelect, { noScrolling: true })\n    }\n  }\n}\n\nexport { onLocalLinkClick, onGlobalLinkClick };\n","export default \"<svg xmlns:svg=\\\"http://www.w3.org/2000/svg\\\"\\n   xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n   version=\\\"1.0\\\"\\n   width=\\\"12\\\"\\n   height=\\\"12\\\"\\n   id=\\\"svg2\\\">\\n  <defs id=\\\"defs4\\\"></defs>\\n  <rect\\n     width=\\\"5.9999995\\\"\\n     height=\\\"6\\\"\\n     x=\\\"1.5\\\"\\n     y=\\\"4.5\\\"\\n     id=\\\"rect3170\\\"\\n     style=\\\"fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:#0066cc;stroke-width:0.99999994;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1\\\"></rect>\\n  <path\\n     d=\\\"M 4,2.5 L 5,3.5 L 5.25,4.25 L 2.75,6.5 L 5.5,9.25 L 7.75,6.75 L 8.5,7 L 9.5,8 L 11,6.5 L 11,1 L 5.5,1 L 4,2.5 z\\\"\\n     id=\\\"path2395\\\"\\n     style=\\\"fill:#0066ff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\\\"></path>\\n  <path\\n     d=\\\"M 6,2 L 10,2 L 10,6 L 9.5,6.75 L 8.25,4.75 L 5.25,8 L 4,6.75 L 7.25,3.75 L 5.25,2.5 L 6,2 z\\\"\\n     id=\\\"path2398\\\"\\n     style=\\\"fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1\\\" ></path>\\n</svg>\\n\";","let REQUEST_CACHE = {};\n\nexport default REQUEST_CACHE;\n","class TopicName {\n  // There are several permutations of the topic key:\n  // There is the \"display\" topic, this is the string precisely as it appears in the expl file\n  // There is a \"mixed case\" topic, which is the displayTopic sans style characters * _ ~ ` and a trailing question mark.\n  // There is an all caps topic, this is the mixed case topic but all caps, used for case-insensitive matching\n  // Filenames are the mixed case topic name sans characters that cause problems in file paths, like quotation marks.\n  constructor(string) {\n    this.display = string;\n    this.mixedCase = removeStyleCharacters(string).replace(/\\?$/, '');\n    this.slug = this.mixedCase.replace(/ /g, '_');\n    this.caps = this.mixedCase.toUpperCase();\n    this.fileName = this.slug.replace(/['\"\\\\\\/]/g, '');\n    this.capsFile = this.fileName.toUpperCase();\n  }\n}\n\nfunction removeStyleCharacters(string) {\n  let newString = string.replace(/([^_`*~A-Za-z]*)([_`*~])(.*?)\\2(\\W+|$)/, '$1$3$4');\n  if (newString !== string) {\n    return removeStyleCharacters(newString);\n  } else {\n    return string;\n  }\n}\n\nexport default TopicName;\n","import { slugFor } from 'helpers/identifiers';\nimport { onLocalLinkClick, onGlobalLinkClick } from 'render/click_handlers';\nimport externalLinkIconSvg from 'assets/external_link_icon/icon.svg';\nimport renderStyledText from 'render/render_styled_text';\nimport eagerLoad from 'requests/eager_load';\nimport Link from 'models/link';\n\nfunction renderTokenElement(token, renderContext) {\n  if (token.type === 'text') {\n    return renderTextToken(token);\n  } else if (token.type === 'local') {\n    return renderLocalLink(token, renderContext);\n  } else if (token.type === 'global') {\n    return renderGlobalLink(token, renderContext);\n  } else if (token.type === 'import') {\n    return renderImportLink(token, renderContext);\n  } else if (token.type === 'url') {\n    return renderLinkLiteral(token);\n  } else if (token.type === 'image') {\n    return renderImage(token);\n  } else if (token.type === 'html') {\n    return renderHtml(token);\n  } else if (token.type === 'footnote') {\n    return renderFootnoteSymbol(token);\n  }\n}\n\nfunction renderTextToken(token) {\n  let spanElement = document.createElement('SPAN');\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, spanElement);\n\n  return spanElement;\n}\n\nfunction renderLocalLink(token, renderContext) {\n  let {\n    localLinkSubtreeCallback\n  } = renderContext;\n\n  localLinkSubtreeCallback(token);\n  return createLocalLinkElement(token)\n}\n\nfunction createLocalLinkElement(token) {\n  let linkElement = document.createElement('a');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n\n  linkElement.addEventListener(\n    'click',\n    onLocalLinkClick(token.targetTopic, token.targetSubtopic, new Link(linkElement))\n  );\n\n  linkElement.classList.add('canopy-local-link');\n  linkElement.dataset.type = 'local';\n  linkElement.href = `/${slugFor(token.targetTopic)}#${slugFor(token.targetSubtopic)}`;\n  return linkElement;\n}\n\nfunction renderGlobalLink(token, renderContext) {\n  let {\n    pathArray,\n    subtopicName,\n    globalLinkSubtreeCallback\n  } = renderContext;\n\n  let linkElement = createGlobalLinkElement(token, pathArray);\n\n  globalLinkSubtreeCallback(token, linkElement);\n\n  return linkElement;\n}\n\nfunction createGlobalLinkElement(token) {\n  let linkElement = document.createElement('a');\n\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n\n  linkElement.classList.add('canopy-global-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.type = 'global';\n\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n\n  linkElement.dataset.text = token.text;\n\n  linkElement.href = `/${slugFor(token.targetTopic)}`;\n  linkElement.addEventListener(\n    'click',\n    onGlobalLinkClick(new Link(linkElement))\n  );\n  return linkElement\n}\n\nfunction renderImportLink(token, renderContext) {\n  let {\n    pathArray,\n    subtopicName,\n    globalLinkSubtreeCallback\n  } = renderContext;\n\n  let linkElement = createImportLinkElement(token, pathArray);\n\n  return linkElement;\n}\n\nfunction createImportLinkElement(token) {\n  let linkElement = document.createElement('a');\n\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n\n  linkElement.classList.add('canopy-global-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.type = 'import';\n\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n\n  linkElement.href = `/${slugFor(token.targetTopic)}#${slugFor(token.targetSubtopic)}`;\n\n  linkElement.addEventListener(\n    'click',\n    onGlobalLinkClick(new Link(linkElement))\n  );\n\n  return linkElement\n}\n\nfunction renderLinkLiteral(token) {\n  let linkSpan = document.createElement('SPAN');\n  let linkElement = document.createElement('a');\n  linkSpan.classList.add('canopy-url-link-span');\n  linkElement.classList.add('canopy-url-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.setAttribute('href', token.url);\n  let styleElements = renderStyledText(token.text);\n  appendElementsToParent(styleElements, linkElement);\n  linkElement.dataset.type = 'url';\n  linkElement.dataset.text = token.text;\n  linkSpan.appendChild(linkElement);\n  linkElement.innerHTML += externalLinkIconSvg.replace(/\\r?\\n|\\r/g, '');\n\n  return linkSpan;\n}\n\nfunction renderImage(token) {\n  let divElement = document.createElement('DIV');\n  divElement.classList.add('canopy-image-div');\n\n  let imageElement = document.createElement('IMG');\n  divElement.appendChild(imageElement);\n\n  imageElement.setAttribute('src', token.resourceUrl);\n\n  let anchorElement = document.createElement('A');\n  anchorElement.setAttribute('href', token.anchorUrl || token.resourceUrl);\n  anchorElement.appendChild(imageElement);\n  divElement.appendChild(anchorElement);\n\n  if (token.title) {\n    imageElement.setAttribute('title', token.title);\n    let captionElement = document.createElement('SUP');\n    let captionDiv = document.createElement('DIV');\n    captionElement.appendChild(document.createTextNode(token.title));\n    captionElement.classList.add('canopy-image-caption');\n    captionDiv.classList.add('canopy-caption-div');\n    divElement.appendChild(captionElement);\n  } else {\n    divElement.appendChild(anchorElement);\n  }\n\n  if (token.altText) {\n    imageElement.setAttribute('alt', token.altText);\n  }\n\n  return divElement;\n}\n\nfunction renderHtml(token) {\n  let divElement = document.createElement('DIV');\n  divElement.innerHTML = token.html;\n  divElement.classList.add('canopy-raw-html');\n  return divElement;\n}\n\n\nfunction renderFootnoteSymbol(token) {\n  let superscriptElement = document.createElement('SUP');\n  let textNode = document.createTextNode(token.text);\n  superscriptElement.appendChild(textNode);\n  return superscriptElement;\n}\n\nfunction appendElementsToParent(collection, parent) {\n  collection.forEach((item) => {\n    parent.appendChild(item);\n  });\n}\n\nexport default renderTokenElement;\n","import renderTokenElement from 'render/render_token_element';\n\nlet BlockRenderers = {\n  'text': renderTextBlock,\n  'code': renderCodeBlock,\n  'quote': renderQuoteBlock,\n  'list': renderListBlock,\n  'table': renderTableBlock,\n  'html': renderHtmlBlock,\n  'footnote': renderFootnoteBlock\n};\n\nfunction renderTextBlock(blockObject, renderContext) {\n  let lineSpans = [];\n\n  blockObject.tokensByLine.forEach(\n    (tokensOfLine, lineNumber) => {\n      let lineSpan = document.createElement('SPAN');\n      lineSpan.classList.add('canopy-text-span');\n      lineSpans.push(lineSpan);\n\n      tokensOfLine.forEach(\n        (token) => {\n          let tokenElement = renderTokenElement(token, renderContext);\n          lineSpan.appendChild(tokenElement);\n        }\n      )\n    }\n  );\n\n  return lineSpans;\n}\n\nfunction renderCodeBlock(blockObject, renderContext) {\n  let preElement = document.createElement('PRE');\n  let codeBlockElement = document.createElement('CODE');\n  preElement.appendChild(codeBlockElement);\n\n  blockObject.lines.forEach(\n    (lineText, lineNumber) => {\n      lineNumber > 0 && codeBlockElement.appendChild(document.createElement('BR'));\n      let lineTextNode = document.createTextNode(lineText);\n      codeBlockElement.appendChild(lineTextNode);\n    }\n  );\n\n  return [preElement];\n}\n\nfunction renderQuoteBlock(blockObject, renderContext) {\n  let blockQuoteElement = document.createElement('BLOCKQUOTE');\n\n  blockObject.tokensByLine.forEach(\n    (tokensOfLine, lineNumber) => {\n      lineNumber > 0 && blockQuoteElement.appendChild(\n        document.createElement('br')\n      );\n\n      tokensOfLine.forEach(\n        (token) => {\n          let tokenElement = renderTokenElement(token, renderContext);\n          blockQuoteElement.appendChild(tokenElement);\n        }\n      );\n    }\n  );\n\n  return [blockQuoteElement];\n}\n\nfunction renderListBlock(blockObject, renderContext) {\n  return renderListNodes(blockObject.topLevelNodes);\n\n  function renderListNodes(listNodeObjects) {\n    let listElement = blockObject.topLevelNodes[0].ordered ?\n      document.createElement('OL') :\n      document.createElement('UL');\n\n    listElement.setAttribute('type', listNodeObjects[0].ordinal);\n\n    listNodeObjects.forEach((listNodeObject) => {\n      let listItemElement = document.createElement('LI');\n\n      let tokenElementsOfLine = listNodeObject.tokensOfLine.forEach(\n        (token) => {\n          let tokenElement = renderTokenElement(token, renderContext);\n          listItemElement.appendChild(tokenElement);\n        }\n      );\n\n      if (listNodeObject.children.length > 0) {\n        let childList = renderListNodes(listNodeObject.children);\n        listItemElement.appendChild(childList);\n      }\n\n      listElement.appendChild(listItemElement);\n    });\n    return listElement;\n  }\n}\n\nfunction renderTableBlock(blockObject, renderContext) {\n  let tableElement = document.createElement('TABLE');\n  blockObject.tokensByCellByRow.forEach(\n    (tokensByCellOfRow, rowIndex) => {\n      let tableRowElement = document.createElement('TR');\n      tokensByCellOfRow.forEach(\n        (tokensOfCell) => {\n          let tableCellElement = document.createElement('TD');\n\n          tokensOfCell.forEach(\n            (token) => {\n              let tokenElement = renderTokenElement(token, renderContext);\n              tableCellElement.appendChild(tokenElement);\n            }\n          );\n\n          tableRowElement.appendChild(tableCellElement);\n        }\n      )\n      tableElement.appendChild(tableRowElement);\n    }\n  );\n  return [tableElement];\n}\n\nfunction renderHtmlBlock(blockObject, renderContext) {\n  let html = blockObject.tokensByLine.map((tokensOfLine, lineNumber) => {\n    return tokensOfLine.map((token) => token.html)\n  }).join('');\n\n  let htmlContainer = document.createElement('DIV');\n  htmlContainer.innerHTML = html;\n\n  return [htmlContainer];\n}\n\nfunction renderFootnoteBlock(blockObject, renderContext) {\n  let horizonalRule = document.createElement('HR');\n  horizonalRule.classList.add('footnote-rule');\n\n  let footnoteSpans = Array.prototype.concat.apply([], blockObject.footnoteObjects.map(\n    (footnoteObject, index) => {\n      let footnoteSpan = document.createElement('SPAN');\n      footnoteSpan.classList.add('footnote-span');\n      let textNode = document.createTextNode(footnoteObject.superscript + '. ');\n      footnoteSpan.appendChild(textNode);\n      footnoteObject.tokens.forEach((token) => {\n        let tokenElement = renderTokenElement(token, renderContext);\n        footnoteSpan.appendChild(tokenElement);\n      });\n      let result = [];\n      index > 0 && result.push(document.createElement('BR'));\n      result.push(footnoteSpan);\n      return result;\n    }\n  ));\n\n  return [horizonalRule].concat(footnoteSpans);\n}\n\nexport default BlockRenderers;\n","import displayPath from 'display/display_path';\nimport fetchAndRenderPath from 'render/fetch_and_render_path';\nimport BlockRenderers from 'render/block_renderers';\nimport eagerLoad from 'requests/eager_load';\nimport Path from 'models/path'\nimport Paragraph from 'models/paragraph';\n\nfunction renderDomTree(renderContext) {\n  let {\n    pathToDisplay,\n    subtopicName,\n    paragraphsBySubtopic\n  } = renderContext;\n\n  let sectionElement = createSectionElement(renderContext);\n\n  renderContext.displayBlockingPromises = [];\n  renderContext.localLinkSubtreeCallback = localLinkSubtreeCallback(sectionElement, renderContext);\n  renderContext.globalLinkSubtreeCallback = globalLinkSubtreeCallback(sectionElement, renderContext);\n\n  let blocksOfParagraph = paragraphsBySubtopic[subtopicName];\n  if (!blocksOfParagraph) throw `Paragraph with subtopic not found: ${subtopicName}`;\n  let blockElements = renderElementsForBlocks(blocksOfParagraph, renderContext);\n\n  blockElements.forEach((blockElement) => {\n    let paragraph = new Paragraph(sectionElement);\n    paragraph.paragraphElement.appendChild(blockElement);\n  });\n\n  return Promise.all(renderContext.displayBlockingPromises).then((_) => sectionElement);\n}\n\nfunction localLinkSubtreeCallback(sectionElement, renderContext) {\n  return (token) => {\n    let promisedSubtree = renderDomTree(\n      Object.assign({}, renderContext, {\n        subtopicName: token.targetSubtopic,\n        placeHolderElement: null\n      })\n    );\n\n    promisedSubtree.then((subtree) => {\n      sectionElement.appendChild(subtree);\n    });\n\n    renderContext.displayBlockingPromises.push(promisedSubtree);\n  }\n}\n\nfunction globalLinkSubtreeCallback(sectionElement, renderContext) {\n  let {\n    pathToDisplay,\n    pathDepth,\n    subtopicName,\n    displayBlockingPromises\n  } = renderContext;\n\n  return (token, linkElement) => {\n    eagerLoad(token.targetTopic);\n\n    if (globalLinkIsOpen(linkElement, pathToDisplay, subtopicName)) {\n      let newPath = pathToDisplay.withoutFirstSegment;\n      let whenTopicTreeAppended = fetchAndRenderPath(newPath, sectionElement);\n      displayBlockingPromises.push(whenTopicTreeAppended)\n    }\n  }\n}\n\nfunction createSectionElement(renderContext) {\n  let {\n    topicName, subtopicName, displayTopicName, pathDepth\n  } = renderContext;\n\n  let sectionElement = document.createElement('section');\n  sectionElement.classList.add('canopy-section');\n  let paragraphElement = document.createElement('p');\n  paragraphElement.classList.add('canopy-paragraph');\n  sectionElement.appendChild(paragraphElement);\n  sectionElement.style.display = 'none';\n  sectionElement.dataset.topicName = topicName;\n  sectionElement.dataset.displayTopicName = displayTopicName;\n  sectionElement.dataset.subtopicName = subtopicName;\n  sectionElement.dataset.pathDepth = pathDepth;\n\n  if (topicName === subtopicName) {\n    pathDepth > 0 && sectionElement.prepend(document.createElement('hr'));\n    sectionElement.classList.add('canopy-topic-section');\n  }\n\n  return sectionElement;\n}\n\nfunction renderElementsForBlocks(blocksOfParagraph, renderContext) {\n  let elementArray = [];\n\n  blocksOfParagraph.forEach(\n    (blockObject) => {\n      let renderer = BlockRenderers[blockObject.type];\n      let blockElements = renderer(\n        blockObject,\n        renderContext\n      )\n      elementArray = elementArray.concat(blockElements);\n    }\n  );\n\n  return elementArray;\n}\n\nfunction globalLinkIsOpen(linkElement, path, currentlyRenderingSubtopicName) {\n  let subtopicOfPathContainingOpenGlobalReference = path.firstSubtopic;\n  let openGlobalLinkExists = path.secondTopic;\n\n  let openGlobalLinkTargetTopic = path.secondTopic;\n  let openGlobalLinkTargetSubtopic = openGlobalLinkTargetTopic;\n  let thisGlobalLinkIsPointingToTheRightThingToBeOpen =\n    linkElement.dataset.targetTopic === openGlobalLinkTargetTopic &&\n    linkElement.dataset.targetSubtopic === openGlobalLinkTargetSubtopic;\n\n  let thisGlobalLinkIsInCorrectSubtopicToBeOpen = currentlyRenderingSubtopicName ===\n    subtopicOfPathContainingOpenGlobalReference;\n\n  return openGlobalLinkExists &&\n    thisGlobalLinkIsPointingToTheRightThingToBeOpen &&\n    thisGlobalLinkIsInCorrectSubtopicToBeOpen;\n}\n\nexport default renderDomTree;\n","import { projectPathPrefix } from 'helpers/getters';\nimport { slugFor } from 'helpers/identifiers';\nimport REQUEST_CACHE from 'requests/request_cache';\nimport TopicName from 'requests/topic_name';\n\nfunction eagerLoad(topicNameString) {\n  if (REQUEST_CACHE[topicNameString]) return;\n\n  let topicName = new TopicName(topicNameString);\n  let dataPath = projectPathPrefix + '/_data/' + topicName.fileName + '.json';\n\n  return fetch(dataPath).\n    then(res => {\n      return res.json().then((json) => {\n        REQUEST_CACHE[topicName] = json;\n        return json;\n      });\n    });\n}\n\nexport default eagerLoad;\n","import renderDomTree from 'render/render_dom_tree';\nimport requestJson from 'requests/request_json';\nimport Paragraph from 'models/paragraph';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport { canopyContainer } from 'helpers/getters';\n\nconst fetchAndRenderPath = (pathToDisplay, parentElement) => {\n  if (pathToDisplay.length === 0) {\n    return Promise.resolve(null);\n  }\n\n  let preexistingElement = Path.elementAtRelativePath(pathToDisplay.firstSegment, parentElement);\n  if (preexistingElement) {\n    if (!Path.connectingLinkValid(parentElement, pathToDisplay)) return Promise.resolve();\n    return fetchAndRenderPath(pathToDisplay.withoutFirstSegment, preexistingElement);\n  }\n\n  let uponResponsePromise = requestJson(pathToDisplay.firstTopic);\n\n  let uponRender = uponResponsePromise.then(({ paragraphsBySubtopic, displayTopicName }) => {\n    return renderDomTree(\n      {\n        topicName: pathToDisplay.firstTopic,\n        subtopicName: pathToDisplay.firstTopic,\n        pathToDisplay,\n        displayTopicName,\n        paragraphsBySubtopic,\n        pathDepth: Number(parentElement.dataset.pathDepth) + 1 || 0\n      },\n    );\n  });\n\n  return uponRender.then((domTree) => parentElement.appendChild(domTree));\n}\n\nfunction createPlaceholderElement(topicName, subtopicName, pathDepth) {\n  let sectionElement = document.createElement('section');\n  sectionElement.dataset.topicName = topicName;\n  sectionElement.dataset.subtopicName = subtopicName;\n  sectionElement.dataset.pathDepth = pathDepth;\n  return sectionElement;\n}\n\nexport default fetchAndRenderPath;\n","import { slugFor } from 'helpers/identifiers';\nimport { canopyContainer, defaultTopic, projectPathPrefix } from 'helpers/getters';\nimport updateView from 'display/update_view';\nimport REQUEST_CACHE from 'requests/request_cache';\nimport Path from 'models/path';\nimport TopicName from 'requests/topic_name';\n\nconst requestJson = (topicNameString) => {\n  if (REQUEST_CACHE[topicName]) return Promise.resolve(REQUEST_CACHE[topicName]);\n\n  let topicName = new TopicName(topicNameString);\n  let dataPath = projectPathPrefix + '/_data/' + topicName.fileName + '.json';\n\n  return fetch(dataPath).\n    then(res => {\n      return res.json().then((json) => {\n        REQUEST_CACHE[topicName] = json;\n        return json;\n      });\n    }).catch((e) => {\n      if (canopyContainer.childNodes.length === 0 && topicName !== defaultTopic) {\n        updateView(Path.default)\n      }\n      return Promise.reject(\"Unrecognized path: \" + topicName);\n    });\n}\n\nexport default requestJson;\n","import fetchAndRenderPath from 'render/fetch_and_render_path';\nimport displayPath from 'display/display_path';\nimport Link from 'models/link';\nimport Path from 'models/path';\nimport { defaultTopic, canopyContainer } from 'helpers/getters';\n\nconst updateView = (pathToDisplay, linkToSelect, displayOptions) => {\n  validatePathAndLink(pathToDisplay, linkToSelect);\n\n  let newTreeAppended = fetchAndRenderPath(pathToDisplay, canopyContainer);\n\n  return newTreeAppended.then(() => {\n    displayPath(\n      pathToDisplay,\n      linkToSelect,\n      displayOptions\n    );\n  }).catch(handleError(pathToDisplay, displayOptions));\n}\n\nfunction validatePathAndLink(pathToDisplay, linkToSelect) {\n  if (!(pathToDisplay instanceof Path)) throw 'Invalid path argument';\n  if (linkToSelect && !(linkToSelect instanceof Link)) throw 'Invalid link selection argument';\n}\n\nfunction handleError(pathToDisplay, displayOptions) {\n  return (e) => {\n    if (e === 'Link selector callback provided no link') {\n      displayPath(pathToDisplay, displayOptions);\n    } else {\n      console.error(e);\n    }\n  }\n}\n\nexport default updateView;\n","import { canopyContainer } from 'helpers/getters';\n\nimport updateView from 'display/update_view';\nimport { deselectAllLinks } from 'display/helpers';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\n\nfunction moveUpward() {\n  let link = Link.selection;\n\n  if (link.enclosingParagraph.equals(Paragraph.pageRoot)) {\n    return updateView(link.enclosingParagraph.path); // deselect link\n  }\n\n  return updateView(\n    link.parentLink.pathToDisplay,\n    link.parentLink\n  );\n}\n\nfunction topicParentLink() {\n  let link = Link.selection;\n  let newLink = link.enclosingParagraph.topicParagraph.parentLink\n\n  return updateView(\n    newLink.pathToDisplay,\n    newLink\n  );\n}\n\nfunction moveDownward() {\n  let { path, link } = downwardPathAndLink();\n  return updateView(path, link)\n}\n\nfunction downwardPathAndLink() {\n  let path = Path.current;\n  let oldLink = Link.selection;\n  let newLink;\n\n  if (oldLink.isParent) {\n\n    if (oldLink.isImport) {\n      return {\n        path: oldLink.pathToDisplay,\n        link: oldLink.targetParagraph.parentLink\n      }\n    }\n\n    let newLink = oldLink.targetParagraph.firstLink || oldLink.targetParagraph.parentLink;\n\n    return {\n      path: newLink.pathToDisplay,\n      link: newLink\n    };\n  } else {\n    return oldLink;\n  }\n}\n\nfunction moveLeftward() {\n  let link = Link.selection.previousSibling || Link.selection.lastSibling;\n  return updateView(\n    link.pathToDisplay,\n    link,\n  );\n}\n\nfunction moveRightward() {\n  let link = Link.selection.nextSibling || Link.selection.firstSibling;\n\n  return updateView(\n    link.pathToDisplay,\n    link,\n  );\n}\n\nfunction moveDownOrRedirect(newTab, altKey) {\n  let path, link;\n\n  if (Link.selection.isLocal && !altKey) { // no zoom\n    let { path, link } = downwardPathAndLink();\n    if (newTab) {\n      return window.open(location.origin + path.string, '_blank');\n    } else {\n      return updateView(path, link);\n    }\n  }\n\n  if (Link.selection.isLocal && altKey) { // zoom\n    let { path, link } = downwardPathAndLink();\n    if (newTab) {\n      return window.open(location.origin + path.lastSegment.string, '_blank');\n    } else {\n      return updateView(path.lastSegment, link.atNewPath(path.lastSegment));\n    }\n  }\n\n  if (Link.selection.isGlobalOrImport) { // redirect\n    let path = Link.selection.targetPath.lastSegment;\n\n    if (newTab) {\n      return window.open(location.origin + path.string, '_blank');\n    } else {\n      return updateView(\n        path,\n        Link.selectALink(path)\n      )\n    }\n  }\n\n  if (Link.selection.type === 'url') {\n    if (newTab) {\n      return window.open(Link.selection.element.href, '_blank');\n    } else {\n      window.location = Link.selection.element.href;\n    }\n  }\n}\n\nfunction depthFirstSearchForward() {\n  let link = Link.selection;\n\n  // Open a parent link\n  if (link.isLocal && link.hasChildren) {\n    let nextLink = link.firstChildLink || link.nextSibling || link;\n    return updateView(\n      nextLink.pathToDisplay,\n      nextLink\n    );\n  }\n\n  if (link.isGlobalOrImport) {\n    let linkToSelect = link.nextSibling || link.parentLink?.nextSibling || link.enclosingParagraph.firstLink;\n    return updateView(\n      linkToSelect.enclosingParagraph.path,\n      linkToSelect\n    );\n  }\n\n  // Move to the next sibling including parent link with no children\n  if (link.nextSibling && !link.nextSibling.equals(link)) {\n    return updateView(\n      link.nextSibling.enclosingParagraph.path,\n      link.nextSibling,\n    );\n  }\n\n  // Move to next parent sibling, grandparent sibling, etc.\n  if (link.lastSibling.equals(link)) {\n    let linkToSelect = (function parentSibling (link) {\n      if (!link.parentLink) {\n        return link.enclosingParagraph.firstLink; // cycle\n      } else if (link.parentLink.nextSibling) {\n        return link.parentLink.nextSibling;\n      } else {\n        return parentSibling(link.parentLink)\n      }\n    })(link);\n\n    return updateView(\n      linkToSelect.pathToDisplay,\n      linkToSelect\n    );\n  }\n}\n\nfunction depthFirstSearchBackward() {\n  let link = Link.selection;\n\n  // Open a parent link\n  if (link.isLocal && link.hasChildren) {\n    let nextLink = link.lastChildLink || link.previousSibling || link;\n    return updateView(\n      nextLink.pathToDisplay,\n      nextLink\n    );\n  }\n\n  if (link.isGlobalOrImport) {\n    let linkToSelect = link.previousSibling || link.parentLink?.previousSibling || link.enclosingParagraph.lastLink;\n    return updateView(\n      linkToSelect.enclosingParagraph.path,\n      linkToSelect\n    );\n  }\n\n  // Move to the next sibling including parent link with no children\n  if (link.previousSibling && !link.previousSibling.equals(link)) {\n    return updateView(\n      link.previousSibling.enclosingParagraph.path,\n      link.previousSibling,\n    );\n  }\n\n  // Move to next parent sibling, grandparent sibling, etc.\n  if (link.firstSibling.equals(link)) {\n    let linkToSelect = (function parentSibling (link) {\n      if (!link.parentLink) {\n        return link.enclosingParagraph.lastLink; // cycle\n      } else if (link.parentLink.previousSibling) {\n        return link.parentLink.previousSibling;\n      } else {\n        return parentSibling(link.parentLink)\n      }\n    })(link);\n\n    return updateView(\n      linkToSelect.pathToDisplay,\n      linkToSelect\n    );\n  }\n\n  // Cycle\n  if (link.topicParagraph.firstLink) {\n    return updateView(\n      Path.current,\n      link.lastSibling,\n    );\n  }\n}\n\nfunction zoomOnLocalPath() {\n  let currentLink = Link.selection;\n  let newPath = currentLink.localPathWhenSelected;\n\n  let newLink = currentLink.atNewPath(newPath);\n\n  return updateView(\n    newPath,\n    newLink,\n  );\n}\n\nfunction removeSelection() {\n  return updateView(Path.current.rootTopicPath);\n}\n\nexport {\n  moveUpward,\n  topicParentLink,\n  moveDownward,\n  moveLeftward,\n  moveRightward,\n  moveDownOrRedirect,\n  depthFirstSearchForward,\n  depthFirstSearchBackward,\n  zoomOnLocalPath,\n  removeSelection\n};\n","import {\n  currentSection,\n  selectedLink,\n  metadataForLink,\n} from 'helpers/getters';\n\nimport {\n  moveUpward,\n  topicParentLink,\n  moveDownward,\n  moveLeftward,\n  moveRightward,\n  moveDownOrRedirect,\n  depthFirstSearchForward,\n  depthFirstSearchBackward,\n  zoomOnLocalPath,\n  removeSelection\n} from 'keys/key_handlers';\nimport updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nconst registerKeyListeners = () => {\n  window.addEventListener('keydown', function(e) {\n    let modifiers =\n      (e.metaKey ? 'command-' : '') +\n      (e.altKey ? 'alt-' : '') +\n      (e.ctrlKey ? 'ctrl-' : '') +\n      (e.shiftKey ? 'shift-' : '');\n\n    let keyName = keyNames[e.keyCode];\n    let shortcutName = modifiers + keyName;\n\n    if (keyName === 'tab') {\n      e.preventDefault();\n    }\n\n    if (Link.selection) {\n      (shortcutRelationships[shortcutName]||function(){})()\n    } else if (shortcutRelationships[shortcutName]) {\n      updateView(\n        Path.current,\n        Link.selectALink()\n      );\n    }\n  });\n}\n\nconst shortcutRelationships = {\n  'left': moveLeftward,\n  'up': moveUpward,\n  'down': moveDownward,\n  'right': moveRightward,\n  'shift-up': topicParentLink,\n\n  'h': moveLeftward,\n  'j': moveDownward,\n  'k': moveUpward,\n  'l': moveRightward,\n\n  'escape': removeSelection,\n  'z': zoomOnLocalPath,\n\n  'return': moveDownOrRedirect,\n  'command-return': moveDownOrRedirect.bind(null, true),\n  'alt-return': moveDownOrRedirect.bind(null, false, true),\n  'command-alt-return': moveDownOrRedirect.bind(null, true, true),\n\n  'tab': depthFirstSearchForward,\n  'shift-tab': depthFirstSearchBackward\n}\n\nconst keyNames = {\n  37: 'left',\n  39: 'right',\n  38: 'up',\n  40: 'down',\n\n  71: 'g',\n  72: 'h',\n  75: 'k',\n  74: 'j',\n  76: 'l',\n  186: ';',\n  90: 'z',\n\n  13: 'return',\n  9: 'tab',\n  27: 'escape',\n\n  192: '`',\n\n  49: '1',\n  50: '2',\n  51: '3',\n  52: '4',\n  53: '5',\n\n}\n\nexport default registerKeyListeners;\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nfunction registerPopStateListener() {\n  window.addEventListener('popstate', (e) => {\n    Link.persistInHistory(Link.selection);\n    Link.persistInSession(Link.selection);\n\n    let linkSelection = Link.selectionPresentInEvent(e) ? new Link(e.state) : null;\n\n    updateView(\n      Path.current,\n      linkSelection || Link.sessionSelection,\n      {\n        pathAlreadySet: true\n      }\n    );\n  });\n}\n\nexport default registerPopStateListener;\n","import css from 'style/canopy.scss';\nimport updateView from 'display/update_view';\nimport registerKeyListeners from 'keys/register_key_listeners';\nimport registerPopStateListener from 'history/register_pop_state_listener';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nregisterKeyListeners();\nregisterPopStateListener();\n\nupdateView(\n  Path.initial,\n  Link.priorSelection\n);\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","nc","Paragraph","sectionElement","tagName","classList","contains","transferDataset","Path","paragraph","link","Link","ancestorElement","otherParagraph","display","topicName","dataset","subtopicName","pathDepth","paragraphElement","Array","from","childNodes","find","pathArray","currentElement","canopyContainer","currentTopic","unshift","linkObjects","linkElements","querySelectorAll","links","callback","filter","targetTopic","targetSubtopic","linkBySelector","parentParagraph","linkByTarget","linksBySelector","pageRoot","topicParagraph","displayTopicName","parentElement","isTopic","add","argument","metadataObject","selectorCallback","linkElement","pathString","path","string","text","relativeLinkNumber","object","linkToSelect","persistInHistory","persistInSession","state","containsLinkSelectionMetadata","sessionData","sessionStorage","getItem","parse","history","historySelection","sessionSelection","selectedLink","linkData","metadata","setItem","location","pathname","hash","replaceState","title","href","firstLink","parentLink","otherLink","pathToDisplay","elementFromMetadata","HTMLAnchorElement","_targetTopic","_targetSubtopic","_enclosingTopic","enclosingTopic","_enclosingSubtopic","enclosingSubtopic","_typeValue","type","enclosingSectionElement","isParent","enclosingParagraph","isGlobalOrImport","Number","newPath","matcher","slice","lastSegment","matches","storedRelativeLinkNumber","indexOf","collectMetadata","addSegment","isLocal","replaceTerminalSubtopic","equals","siblings","targetParagraph","lastLink","includes","isOpen","isGlobal","isImport","hasLinks","getElementById","defaultTopic","projectPathPrefix","hashUrls","className","slugFor","replace","isArray","validatePathArray","arrayToString","String","stringToArray","array","forEach","tuple","current","empty","topic","subtopic","slashSeparatedUnits","split","fixOrphanSubtopics","slashSeparatedUnit","match","segment","pathSegmentString","newItem","firstTopic","console","error","suppliedPath","suppliedRootElement","rootElement","clone","currentNode","firstSubtopic","withoutFirstSegment","subpath","newPathDepth","oldPath","documentTitle","historyApiFunction","b","c","pushState","fullPathString","otherPath","newSubtopic","withoutLastSegment","elementAtRelativePath","styleParent","buffer","escaped","styleStack","stylesByText","elements","openMatch","closeMatch","closeStyle","pretext","styleCharacter","textNode","pop","displayPathTo","isPageRoot","parentLinks","open","ancestorImportReferences","displayOptions","contradicts","updateView","getElementsByTagName","pathAlreadySet","pathForUrl","existingHeader","headerDomElement","styleElements","renderStyledText","prepend","setHeader","select","noScrolling","scrollTo","scrollHeight","log","displayPath","tryPathPrefix","onGlobalLinkClick","preventDefault","altKey","isSelected","metaKey","origin","removeStyleCharacters","newString","TopicName","mixedCase","slug","caps","toUpperCase","fileName","capsFile","appendElementsToParent","collection","parent","token","renderContext","spanElement","renderTextToken","localLinkSubtreeCallback","addEventListener","pathToLink","targetPath","atNewPath","createLocalLinkElement","renderLocalLink","globalLinkSubtreeCallback","createGlobalLinkElement","renderGlobalLink","createImportLinkElement","renderImportLink","linkSpan","url","innerHTML","externalLinkIconSvg","renderLinkLiteral","divElement","imageElement","resourceUrl","anchorElement","anchorUrl","captionElement","captionDiv","altText","renderImage","html","renderHtml","superscriptElement","renderFootnoteSymbol","blockObject","lineSpans","tokensByLine","tokensOfLine","lineNumber","lineSpan","tokenElement","renderTokenElement","preElement","codeBlockElement","lines","lineText","lineTextNode","blockQuoteElement","renderListNodes","listNodeObjects","listElement","topLevelNodes","ordered","ordinal","listNodeObject","listItemElement","children","childList","tableElement","tokensByCellByRow","tokensByCellOfRow","rowIndex","tableRowElement","tokensOfCell","tableCellElement","htmlContainer","horizonalRule","footnoteSpans","footnoteObjects","footnoteObject","footnoteSpan","superscript","tokens","renderDomTree","paragraphsBySubtopic","createSectionElement","displayBlockingPromises","promisedSubtree","assign","placeHolderElement","then","subtree","topicNameString","REQUEST_CACHE","dataPath","fetch","res","json","eagerLoad","currentlyRenderingSubtopicName","subtopicOfPathContainingOpenGlobalReference","openGlobalLinkExists","secondTopic","openGlobalLinkTargetTopic","openGlobalLinkTargetSubtopic","thisGlobalLinkIsPointingToTheRightThingToBeOpen","globalLinkIsOpen","whenTopicTreeAppended","fetchAndRenderPath","blocksOfParagraph","blockElements","elementArray","renderer","BlockRenderers","renderElementsForBlocks","blockElement","Promise","all","_","resolve","preexistingElement","firstSegment","reject","requestJson","domTree","validatePathAndLink","handleError","moveUpward","moveDownward","downwardPathAndLink","oldLink","newLink","moveLeftward","moveRightward","moveDownOrRedirect","newTab","shortcutRelationships","currentLink","localPathWhenSelected","bind","hasChildren","nextLink","firstChildLink","nextSibling","lastSibling","parentSibling","lastChildLink","previousSibling","firstSibling","keyNames","modifiers","ctrlKey","shiftKey","keyName","keyCode","shortcutName","linkSelection"],"sourceRoot":""}