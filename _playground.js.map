{"version":3,"file":"playground.js","mappings":";CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAgB,OAAID,IAEpBD,EAAa,OAAIC,GAClB,CATD,CASGK,MAAM,+BCTT,IAAIC,EAAiBC,EAAQ,MACzBC,EAAQD,EAAQ,MAChBE,EAAQF,EAAQ,KAChBG,EAAYH,EAAQ,MAuCxBL,EAAOD,QArCP,SAAyBU,EAAUC,EAAcC,EAAeC,GAC9D,IAAIC,EAAqBH,EAAaD,GAAUK,OAAOC,MAAM,QACzDC,EAAgB,IAAIT,EAAMM,EAAmB,IAC7CI,EAAuB,CAAC,EAC5BN,EAAcF,SAAWA,EAEzBI,EAAmBK,SAAQ,SAASC,GAClC,IAAIC,EAAY,IAAIb,EAAMY,EAAiBL,QAC3C,GAAKM,EAAUC,IAAf,CAEAV,EAAcW,oBAAoBhB,EAAK,IAAKU,EAAcK,KAAMf,EAAK,IAAKc,EAAUC,MACpFV,EAAcY,iCACTH,EAAUI,uBAAuBb,EAAcc,yBAAyBL,EAAUC,IAAIK,OAASN,EAAUO,eAC1GP,EAAUI,uBAAuBb,EAAciB,uCAEnD,IAAIC,EAAoBzB,EAAegB,EAAUU,KAAMnB,GAEvDM,EAAqBN,EAAcoB,gBAAgBC,WAAaH,CATlC,CAUhC,IAEAlB,EAAcsB,mCACdtB,EAAcuB,oCACdvB,EAAcwB,+BAA8B,SAAAC,GAAcnB,EAAqBmB,EAASJ,WAAa,EAAI,IAEzG,IAAIK,EAAa,CACfC,iBAAkBtB,EAAcK,IAChCkB,YAAa/B,EAAU,CAAEsB,KAAMd,EAAcK,IAAKV,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,MACpGxB,qBAAAA,GAGF,OAAOyB,KAAKC,UACVN,EACA,KACAzB,EAAQgC,OAAS,EAAI,EAEzB,kBCxCA,IAAIC,EAAkBxC,EAAQ,KACxByC,EAAqBzC,EAAQ,MAA7ByC,iBACFC,EAAgB1C,EAAQ,MACxBC,EAAQD,EAAQ,MAmCpBL,EAAOD,QAjCP,SAAiCW,EAAcsC,EAAeC,GAAgC,IAAZrC,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAC,CAAC,EACrFE,EAA4B,QAC5BC,EAA2BD,EAA4B,SACvDzC,EAAgB,IAAIoC,EAAc,CAAErC,aAAAA,EAAcsC,cAAAA,EAAeC,mBAAAA,EAAoBrC,QAAAA,IACrF0C,EAAsB,GACtBC,EAAe,CAAC,EAyBpB,OAvBAD,EAAoBE,KAAKH,GAEzBI,OAAOC,KAAKhD,GAAcQ,SAAQ,SAAST,GACzC,GAAKqC,EAAiBpC,EAAaD,OAC/BuC,GAAkBA,EAAcvC,IAApC,CAEA,IAAIkD,EAAOd,EAAgBpC,EAAUC,EAAcC,EAAeC,GAC9DgD,EAAQ,IAAItD,EAAMwC,EAAiBpC,EAAaD,KAAY,GAC5DoD,EAAkB,GAAHC,OAAMT,EAAwB,KAAAS,OAAIF,EAAMG,SAAQ,SAInE,GAFAR,EAAaM,GAAmBF,EAE5B/C,EAAQoD,SAAU,CACpB,IAAIC,EAAc,IAAI3D,EAAMwC,EAAiBpC,EAAaD,KAC1D6C,EAAoBE,KAAKJ,EAA4B,IAAMa,EAAYF,SACzE,CAXqD,CAYvD,IAEApD,EAAcuD,8BACdvD,EAAcwD,2BACVvD,EAAQwD,SAASzD,EAAc0D,mBAC/BzD,EAAQwD,SAASzD,EAAc2D,kBAE5B,CAAEhB,oBAAAA,EAAqBC,aAAAA,EAChC,m9BCpCA,IAAAgB,EAmBIlE,EAAQ,MAlBVmE,EAAmBD,EAAnBC,oBACAC,EAAoBF,EAApBE,qBACAC,EAAsBH,EAAtBG,uBACAC,EAAiBJ,EAAjBI,kBACAC,EAAUL,EAAVK,WACAC,EAAmBN,EAAnBM,oBACAC,EAASP,EAATO,UACAC,EAAcR,EAAdQ,eACAC,EAAeT,EAAfS,gBACAC,EAAYV,EAAZU,aACAC,EAAUX,EAAVW,WACAC,EAASZ,EAATY,UACAC,EAAkBb,EAAlBa,mBACAC,EAAYd,EAAZc,aACAC,EAASf,EAATe,UACAC,EAAsBhB,EAAtBgB,uBACAC,EAAcjB,EAAdiB,eACAC,EAAYlB,EAAZkB,aAGIC,EAAW,CAoSjB,SAA8BC,GAAa,IACrCC,EADiCD,EAANE,OACZD,MAAM,SACzB,GAAIA,EACF,MAAO,CAAC,KAAMA,EAAM,GAAGlE,OAE3B,EAdA,SAAgCoE,GAA4B,IAAzBD,EAAMC,EAAND,OAAQlF,EAAamF,EAAbnF,cACrCiF,EAAQC,EAAOD,MAAM,eACzB,GAAIA,EAGF,OAFAjF,EAAcoF,QAAUH,EAAM,GAEvB,CAAC,KAAMA,EAAM,GAAGlE,OAE3B,EAnQA,SAA8BsE,GAA0B,IAAvBH,EAAMG,EAANH,OAAQI,EAAWD,EAAXC,YACnCL,EAAQC,EAAOD,MAAM,8BAEzB,GAAIA,GAASK,EAAa,CACxB,IAAInE,EAAO8D,EAAM,GAGjB,MAF8B,OAA1B9D,EAAKA,EAAKJ,OAAS,KAAaI,EAAOA,EAAKoE,MAAM,GAAI,IAEnD,CACL,IAAInB,EAAejD,GACnB8D,EAAM,GAAGlE,OAEb,CACF,EAEA,SAA+ByE,GAA0B,MAAvBN,EAAMM,EAANN,OAAQI,EAAWE,EAAXF,YACpCL,EAAQC,EAAOD,MAAM,+BAEzB,GAAIA,GAASK,EAAa,CACxB,IAAInE,KAAW8D,EAAM,GAAGQ,SAAS,yWAAmBC,KAAI,SAAAC,GAAC,OAAIA,EAAE,EAAE,IAAEC,KAAK,MAGxE,MAAO,CACL,IAAIxB,EAAejD,GACnB8D,EAAM,GAAGlE,OAEb,CACF,EAEA,SAA0B8E,GAAyC,IAAtCX,EAAMW,EAANX,OAAQlF,EAAa6F,EAAb7F,cAAesF,EAAWO,EAAXP,YAC9CL,EACFC,EAAOD,MAAM,oCACVC,EAAOD,MAAM,mCAElB,GAAIA,GAASK,EAAa,CACxB,IAAInE,EAAO2E,MAAMC,KACfd,EAAM,GACHQ,SAAS,0CACXC,KAAI,SAAAC,GAAC,OAAIA,aAAC,EAADA,EAAI,KAAM,EAAE,IACrBC,KAAK,MAEsB,OAA1BzE,EAAKA,EAAKJ,OAAS,KAAaI,EAAOA,EAAKoE,MAAM,GAAI,IAC1D,IAAIS,EAAyB,MAAbf,EAAM,GAAa,MAAQ,MAE3C,MAAO,CACL,IAAIZ,EAAgBlD,EAAM6E,EAAWhG,GACrCiF,EAAM,GAAGlE,OAEb,CACF,EAEA,SAAuBkF,GAAyC,IAAtCf,EAAMe,EAANf,OAAQlF,EAAaiG,EAAbjG,cAAesF,EAAWW,EAAXX,YAC3CL,EAAQC,EAAOD,MAAM,mEAEzB,GAAIA,GAASK,EACX,MAAO,CACL,IAAIhB,EAAaW,EAAM,GAAIjF,GAC3BiF,EAAM,GAAGlE,OAGf,EAEA,SAAqBmF,GAAyC,IAAtChB,EAAMgB,EAANhB,OAAQlF,EAAakG,EAAblG,cAAesF,EAAWY,EAAXZ,YACzCL,EAAQC,EAAOD,MAAM,oCACzB,IAAKA,EAAO,OAAO,KACnB,IAAIkB,EAAalB,EAAM,GACnBkB,EAAWC,SAAS,QAAOD,EAAaA,EAAWZ,MAAM,GAAI,IAEjE,IAAIc,EAAQF,EAAW/F,MAAM,OAAOsF,KAAI,SAAAY,GAAC,OAAIC,EAAaD,EAAE,IAC5D,OAAKD,EAAMG,OAAM,SAAAF,GAAC,OAAIA,EAAEvF,SAAWsF,EAAM,GAAGtF,MAAM,IAE9CkE,GAASK,EACJ,CACL,IAAIf,EAAW4B,EAAYnG,GAC3BmG,EAAWpF,aAHf,EAF4D,IAQ9D,EAEA,SAAyB0F,GAAyC,IAAtCvB,EAAMuB,EAANvB,OAAQlF,EAAayG,EAAbzG,cAAesF,EAAWmB,EAAXnB,YACjD,GAAKJ,EAAOD,MAAM,kBAAlB,CACA,IAAIA,EAAQC,EAAOD,MAAM,0DACzB,OAAKA,EAEDA,GAASK,EACJ,CACL,IAAId,EAAUS,EAAM,GAAIjF,GACxBiF,EAAM,GAAGlE,aAHb,EAFmB,IAFwB,CAU7C,EAEA,SAAoB2F,GAAyC,IAAtCxB,EAAMwB,EAANxB,OAAQlF,EAAa0G,EAAb1G,cAAesF,EAAWoB,EAAXpB,YACxCqB,EAAYzB,EAAOD,MAAM,mCACzB2B,EAAS,KAuCb,OArCAD,EAAUpG,SAAQ,SAACsG,EAAGC,GACpB,IAAIC,EAAUJ,EAAUpB,MAAM,EAAGoB,EAAU5F,OAAS+F,GAAOlB,KAAK,IAE5DX,EAAQ8B,EAAQ9B,MAAM,uCAC1B,GAAIA,EAAO,CACT,IAAA+B,EAAAC,EAAqChC,EAAK,GAAlCiC,GAAFF,EAAA,GAAgBA,EAAA,IAClBG,GAD6BH,EAAA,GAG7BI,GAAoBD,GAed,IAf4BrB,MAAMC,KAAKd,EAAM,GAAGQ,SAAS,4BAA6BF,MAAM,GAAG8B,QAAO,SAACC,EAAOrC,GACtH,IAAAsC,EAAAN,EAAiChC,EAAK,GAA9BuC,GAAFD,EAAA,GAAcA,EAAA,IAAEE,EAAOF,EAAA,GAE7B,OAAc,IAAVD,EAAoBI,KAEpBD,EAAQE,gBAAkBT,EAAeS,gBACvCH,EACFF,IAEAA,KAIGA,EAET,GAAG,GAGH,GAAIH,GAAaC,EAAkB,CACjC,IAAIQ,EAAyBtC,GAA0C,OAA3BJ,EAAO6B,EAAQhG,QAAoB,EAAc,EAE7F6F,EAASA,GAAU,CACjB,IAAIzC,EAAUc,EAAM,GAAIjF,GACxBiF,EAAM,GAAGlE,OAAS6G,EAEtB,CACF,CACF,IAEOhB,CACT,EAEA,SAA0BiB,GAA4B,IAAzB3C,EAAM2C,EAAN3C,OAAQlF,EAAa6H,EAAb7H,cAC/BiF,EAAQC,EAAOD,MAAM,gBAEzB,GAAIA,EACF,MAAO,CACL,IAAId,EAAUc,EAAM,GAAIjF,GACxBiF,EAAM,GAAGlE,OAGf,EAEA,SAA6B+G,GAAyC,IAAtC5C,EAAM4C,EAAN5C,OAAQlF,EAAa8H,EAAb9H,cAAesF,EAAWwC,EAAXxC,YACjDL,EAAQC,EAAOD,MAAM,iCAEzB,GAAIA,GAASK,EACX,MAAO,CACL,IAAIb,EAAmBQ,EAAM,GAAIjF,GACjCiF,EAAM,GAAGlE,OAGf,EAEA,SAA8BgH,GAAmC,IAAhC7C,EAAM6C,EAAN7C,OAAQlF,EAAa+H,EAAb/H,cAAe8G,EAAKiB,EAALjB,MACtD,IAAI9G,EAAcgI,SACbC,EAAUC,mBAAmBhD,GAAlC,CACA,IAAMiD,EAAkCnI,EAAlCmI,aAAc/G,EAAoBpB,EAApBoB,gBAEhBgH,EAAYH,EAAS,IAAKA,EAAUC,mBAAmBhD,GAASlF,GAEpE,GAAKoI,EAAUC,OACVD,EAAUE,cACVF,EAAUG,WAAf,CAEA,IAAIC,EAAoB7I,EAAK,IAAKyI,EAAUG,YAC5C,GAAKC,GACDA,EAAkBC,OAASN,EAAaM,MACxCD,EAAkBC,OAASrH,EAAgBqH,KAA/C,CAEA,GAAIzI,EAAc0I,wBAAwBF,GAAoB,CACxDxI,EAAc2I,6BAA6BH,IAC7CxI,EAAc4I,yCAAyCJ,GAGzD,IAAIK,EAAsB,IAAIhF,EAC5BsE,EAAa9G,UACbrB,EAAc8I,oBAAoBX,EAAcK,GAAmBnH,UACnE8G,EAAa9G,UACbD,EAAgBC,UAChB+G,EAAUW,YACV/I,GAKF,OAFAA,EAAcgJ,uBAAuBR,EAAmB1B,EAAOsB,EAAUa,SAAU/D,EAAQ2D,GAEpF,CAACA,EAAqBT,EAAUc,SAASnI,OAClD,CACE,OAAO,IApBkD,CAL1B,CAPgB,CAkCnD,EAEA,SAA+BoI,GAA4B,IAAzBjE,EAAMiE,EAANjE,OAAQlF,EAAamJ,EAAbnJ,cACxC,IAAIA,EAAcgI,SACbC,EAAUC,mBAAmBhD,GAAlC,CACA,IAAMiD,EAAkCnI,EAAlCmI,aAAc/G,EAAoBpB,EAApBoB,gBAEhBgH,EAAYH,EAAS,IAAKA,EAAUC,mBAAmBhD,GAASlF,GACpE,GAAKoI,EAAUC,MAAf,CACA,IAAIe,EAAahB,EAAUgB,WAI3B,OAFApJ,EAAcqJ,wBAAwBD,EAAYhB,EAAWA,EAAUc,UAEhE,CACL,IAAIpF,EACFsF,EACAjB,EAAa9G,UACbD,EAAgBC,UAChB+G,EAAUW,YACV/I,GACCoI,EAAUc,SAASnI,OAZI,CAJqB,CAkBnD,EAEA,SAAiCuI,GAA4B,IAAzBpE,EAAMoE,EAANpE,OAAQlF,EAAasJ,EAAbtJ,cACtCiF,EAAQC,EAAOD,MAAM,0CAEzB,GAAIA,EAAO,CACT,IAAImD,EAAYH,EAAS,IAAK,KAAOhD,EAAM,GAAGM,MAAM,GAAevF,GAEnE,MAAO,CAAC,IAAI+D,EACVqE,EAAUW,YACV/I,GAEFiF,EAAM,GAAGlE,OACX,CACF,EAEA,SAAiCwI,GAA4B,IAAzBrE,EAAMqE,EAANrE,OAAQlF,EAAauJ,EAAbvJ,cACtCiF,EAAQC,EAAOD,MAAM,0CACnBkD,EAAkCnI,EAAlCmI,aAAc/G,EAAoBpB,EAApBoB,gBAEpB,GAAI6D,EAAO,CACT,IAAImD,EAAYH,EAAS,IAAK,KAAOhD,EAAM,GAAGM,MAAM,GAAevF,GAInE,OAFAA,EAAcwJ,0BAA0BpB,GAEjC,CAAC,IAAIvE,EACVsE,EAAa9G,UACb+G,EAAUqB,cAAcpI,UACxB8G,EAAa9G,UACbD,EAAgBC,UAChB+G,EAAUW,YACV/I,GAEFiF,EAAM,GAAGlE,OACX,CACF,EAkBA,SAA8B2I,GAA0B,IAAvBxE,EAAMwE,EAANxE,OAAQI,EAAWoE,EAAXpE,YAEnCL,EAAQC,EAAOD,MAAM,mBACzB,GAAIA,IAAUK,EACZ,MAAO,CACL,IAAIpB,EAAoBe,EAAM,IAC9BA,EAAM,GAAGlE,OAGf,EA0CA,SAAuB4I,GAA+C,IAA5CzE,EAAMyE,EAANzE,OAAQlF,EAAa2J,EAAb3J,cAAe4J,EAAiBD,EAAjBC,kBAC3CC,OAAgDrH,IAAtBoH,IAAoCA,EAAkB3E,MAAM,eACtFA,EAAQC,EAAOD,MAAM,gCACrB6E,OAAsCtH,KAAfyC,aAAK,EAALA,EAAQ,OAAsBA,SAAAA,EAAQ,GAAGA,MAAM,gBACtE8E,EAAiB9E,aAAK,EAALA,EAAQ,GAAGA,MAAM,MAMtC,GAJkBA,IACd4E,GAA2BC,IAC1BC,GAGH,MAAO,CACL,IAAIrF,EACFO,EAAM,GACNjF,GAEFiF,EAAM,GAAGlE,QAASkE,aAAK,EAALA,EAAQ,GAAGlE,QAGnC,EAEA,SAAoBiJ,GAA+C,IAA5C9E,EAAM8E,EAAN9E,OAAQlF,EAAagK,EAAbhK,cAAe4J,EAAiBI,EAAjBJ,kBACxCC,OAAgDrH,IAAtBoH,IAAoCA,EAAkB3E,MAAM,eACtFA,EAAQC,EAAOD,MAAM,kCACrB6E,OAAsCtH,KAAfyC,aAAK,EAALA,EAAQ,OAAsBA,SAAAA,EAAQ,GAAGA,MAAM,gBACtE8E,EAAiB9E,aAAK,EAALA,EAAQ,GAAGA,MAAM,MAMtC,GAJkBA,IACd4E,GAA2BC,IAC1BC,GAGH,MAAO,CACL,IAAIpF,EACFM,EAAM,GACNjF,GAEFiF,EAAM,GAAGlE,QAASkE,aAAK,EAALA,EAAQ,GAAGlE,QAGnC,EAEA,SAA2BkJ,GAAkD,IAA/C/E,EAAM+E,EAAN/E,OAAQlF,EAAaiK,EAAbjK,cAAkB4J,GAAFK,EAADpD,EAAoBoD,EAAjBL,mBAClDM,OAA+C1H,IAAtBoH,IAAoCA,EAAkB3E,MAAM,eACrFA,EAAQC,EAAOD,MAAM,kCAEzB,GAAIA,GAASiF,EACX,MAAO,CACL,IAAItF,EACFK,EAAM,GACNjF,GAEFiF,EAAM,GAAGlE,OAGf,EAEA,SAAyBoJ,GAA+C,IAA5CjF,EAAMiF,EAANjF,OAAQlF,EAAamK,EAAbnK,cAAe4J,EAAiBO,EAAjBP,kBAC7CC,OAAgDrH,IAAtBoH,IAAoCA,EAAkB3E,MAAM,eACtFA,EAAQC,EAAOD,MAAM,gCACrB6E,OAAsCtH,KAAfyC,aAAK,EAALA,EAAQ,OAAsBA,SAAAA,EAAQ,GAAGA,MAAM,gBACtE8E,EAAiB9E,aAAK,EAALA,EAAQ,GAAGA,MAAM,MAOtC,GALkBA,IACd4E,GAA2BC,IAC1BC,GAIH,MAAO,CACL,IAAIlF,EACFI,EAAM,GACNjF,GAEFiF,EAAM,GAAGlE,QAASkE,aAAK,EAALA,EAAQ,GAAGlE,QAGnC,EAhGA,SAAqBqJ,GAA4B,IAAzBlF,EAAMkF,EAANlF,OAAQlF,EAAaoK,EAAbpK,cAC1BiF,EAAQC,EAAOD,MAAM,kHAEzB,GAAIA,EACF,MAAO,CACL,IAAIhB,EACF,CACEoG,IAAKpF,EAAM,GACXqF,YACArF,EAAM,GACNsF,MAAOtF,EAAM,GACbuF,QAASvF,EAAM,GACfjF,cAAAA,IAEDiF,EAAM,GAAGlE,OAGlB,EAtCA,SAAyB0J,GAA4B,IAAzBvF,EAAMuF,EAANvF,OAAQlF,EAAayK,EAAbzK,cAC9BiF,EAAQC,EAAOD,MAAM,2EACzB,GAAIA,EAAO,CACT,IAAAyF,EAAAzD,EAAqBhC,EAAK,GAAlB9D,GAAFuJ,EAAA,GAAMA,EAAA,IAAEC,EAAGD,EAAA,GACjB,MAAO,CACL,IAAI1G,EAAkB2G,EAAKxJ,EAAMnB,GACjCiF,EAAM,GAAGlE,OAEb,CACF,EAEA,SAAmB6J,GAAa,IAC1B3F,EADsB2F,EAAN1F,OACDD,MAAM,wCACzB,GAAIA,EACF,MAAO,CACL,IAAIjB,EAAkBiB,EAAM,IAC5BA,EAAM,GAAGlE,OAGf,EAoGA,SAAuB8J,GAA4B,IAAzB3F,EAAM2F,EAAN3F,OAAQlF,EAAa6K,EAAb7K,cAC5BiF,EAAQC,EAAOD,MAAM,uCACzB,GAAIA,EACF,MAAO,CACL,IAAIH,EACFG,EAAM,GACNA,EAAM,GACNjF,GAEFiF,EAAM,GAAGlE,OAGf,GA9ZIpB,EAAQD,EAAQ,MACd6G,EAAiB7G,EAAQ,MAAzB6G,aACF0B,EAAYvI,EAAQ,MA8ZxBL,EAAOD,QAAU2F,kBChdjB,IAAIlF,EAAYH,EAAQ,MAaxBL,EAAOD,QAXP,SAAwB+B,EAAMnB,GAQ5B,OANAA,EAAcH,UAAYA,EAC1BG,EAAc8K,cAAgB3J,EAC9BnB,EAAc+K,oBAAsB,GAE3BlL,EAAU,CAAEsB,KAAAA,EAAMnB,cAAAA,EAAegL,WAAW,GAGvD,g9BCXA,IAAIjG,EAAWrF,EAAQ,MACjBuL,EAAcvL,EAAQ,MAAtBuL,UAoDN5L,EAAOD,QAlDP,SAAkBiG,GAA0B,IAAvBlE,EAAIkE,EAAJlE,KAAMnB,EAAaqF,EAAbrF,cACrBkL,EAAS,GACblL,EAAcmL,YAAchK,EAC5BnB,EAAcoL,cAAgBF,EAC9BlL,EAAcoF,OAAS,GAIvB,IAFA,IAAIiG,EAAalK,EAAKf,MAAM,IAEnBkL,EAAI,EAAGA,EAAID,EAAWtK,OAAQuK,IAAK,CAI1C,IAHA,IAAIpG,EAASmG,EAAW9F,MAAM+F,GAAG1F,KAAK,IAClCgB,OAAM,EAED2E,EAAI,EAAGA,EAAIxG,EAAShE,OAAQwK,IAAK,CACxC,IAAIC,OAA8BhJ,IAAhBrB,EAAKmK,EAAI,KAAqBtL,EAAc8B,YAC1DwD,EACe,OAAhBnE,EAAKmK,EAAI,IACTE,EAKH,GAFA5E,EAAS7B,EAASwG,GAAG,CAAErG,OAAAA,EAAQlF,cAAAA,EAAe8G,MAAOwE,EAAG1B,kBAAmBzI,EAAKmK,EAAI,GAAIhG,YAAAA,EAAakG,YAAAA,IAEzF,CACV,IAA4BC,EAAAxE,EAANL,EAAM,GAAvB8E,EAAKD,EAAA,GAAE1K,EAAM0K,EAAA,GAClB,GAAI7E,EAAO,GAAI,KAAA+E,EACT3L,EAAcoF,QAAQ8F,EAAOrI,KAAK,IAAIoI,EAAUjL,EAAcoF,SAClEpF,EAAcoF,OAAS,GACvB8F,EAAOrI,KAAK6I,GAEZ,IAAIE,EAAc1G,EAAOK,MAAM,EAAGxE,GAClCf,EAAciB,sCAA6D,QAAxB0K,EAAAC,EAAY3G,MAAM,cAAM,IAAA0G,OAAA,EAAxBA,EAA0B5K,SAAU,GACvFf,EAAcc,yBAAyB8K,EAAYxL,MAAM,MAAMmF,OAAO,GAAG,GAAGxE,QAAU,EACxF,CAEAuK,GAAKvK,EAAS,EACd,KACF,CACF,CAEI6F,IAEJ5G,EAAcoF,QAAUiG,EAAWC,GACnCtL,EAAcc,2BACQ,OAAlBuK,EAAWC,IAAatL,EAAciB,uCAC5C,CAIA,OAFIjB,EAAcoF,QAAQ8F,EAAOrI,KAAK,IAAIoI,EAAUjL,EAAcoF,SAE3D8F,CACT,mvCCnDA,IAAIvL,EAAQD,EAAQ,MAChBmM,EAASnM,EAAQ,MACjBE,EAAQF,EAAQ,KACdoM,EAAmBpM,EAAQ,MAA3BoM,eACFC,EAAQrM,EAAQ,MAEd0C,EAAa,WACjB,SAAAA,EAAAiD,GAA+E,IAAjEtF,EAAYsF,EAAZtF,aAAcuC,EAAkB+C,EAAlB/C,mBAAoB0J,EAAkB3G,EAAlB2G,mBAAoB/L,EAAOoF,EAAPpF,qGAAOgM,CAAA,KAAA7J,GACrE4J,EACFlJ,OAAOoJ,OAAOC,KAAMH,EAAoB/L,IAExCkM,KAAKC,oBAAsB,CAAC,EAC5BD,KAAKE,eAAiB,CAAC,EACvBF,KAAKG,gBAAkB,CAAC,EACxBH,KAAKI,yBAA2B,GAChCJ,KAAKK,yBAA2B,GAChCL,KAAKM,2BAA6B,CAAC,EACnCN,KAAKO,uBAAyB,GAC9BP,KAAKQ,6BAA+B,GACpCR,KAAKS,aAAe,IAAIjN,EAAM2C,GAC9B6J,KAAKU,iBAAmB,CAAC,EACzBV,KAAKW,eAAiB,CAAC,EACvBX,KAAKhE,aAAe,KACpBgE,KAAK/K,gBAAkB,KACvB+K,KAAKY,gBAAkB,GACvBZ,KAAKa,2BAA6B,CAAC,EACnCb,KAAKc,2BAA6B,CAAC,EAEnCd,KAAKe,WAAa,EAClBf,KAAKgB,gBAAkB,EACvBhB,KAAKiB,eAAiB,EAEtBjB,KAAKkB,qBAAqBtN,GAE1BoM,KAAKrK,aAAc,EAEnBgB,OAAOoJ,OAAOC,KAAMlM,GAExB,SAkXC,SAlXAmC,IAAA,EAAA1B,IAAA,QAAA4M,MAED,WACE,OAAO,IAAIlL,EAAc,CAAE4J,mBAAoBG,KAAMlM,QAD1CsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,GAEjB,GAGA,CAAA7B,IAAA,uBAAA4M,MACA,SAAqBvN,GACnB,IAAMsM,EAAgFF,KAAhFE,eAAgBS,EAAgEX,KAAhEW,eAAgBV,EAAgDD,KAAhDC,oBAAqBM,EAA2BP,KAA3BO,uBA2D3D,OAzDA5J,OAAOC,KAAKhD,GAAcQ,SAAQ,SAAST,GACzC,IACII,EADeH,EAAaD,GACMM,MAAM,QACxCmN,EAAiB,IAAI3N,EAAMM,EAAmB,IAClD,GAAKqN,EAAe7M,IAApB,CACA,IAAIyH,EAAe,IAAIxI,EAAM4N,EAAe7M,KACxCwM,EAAa,EAEjB,GAAIb,EAAemB,eAAerF,EAAaM,MAC7C,MAAM,IAAIgF,MAAM1B,EAAM2B,IAAI7B,EAAM8B,IAAAA,EAAAC,EAAA,oIAAsDzF,EAAa9G,UAClFyL,EAAe3E,EAAaM,MACxB3I,KAMvB,GAHEgN,EAAe3E,EAAaM,MAAQ3I,EAGlCqI,EAAa0F,QAAQ1N,SAAWgI,EAAa0F,QAC/C,MAAM,IAAIJ,MAAM1B,EAAM2B,IAAI,sBAAAvK,OAAsBgF,EAAa0F,QAAO,uCAAwC/N,IAG9GuM,EAAelE,EAAaM,MAAQ,CAAC,EAErCvI,EAAmBK,SAAQ,SAASuK,GACT,OAArBA,EAAc,KAChBoC,IACApC,EAAgBA,EAAcvF,MAAM,IAGtC,IAAI9E,EAAY,IAAIb,EAAMkL,GAC1B,GAAIrK,EAAUC,IAAK,CACjB,IAAIU,EAAkB,IAAIzB,EAAMc,EAAUC,KAc1C,GAZI2L,EAAelE,EAAaM,MAAM+E,eAAepM,EAAgBqH,OACnEiE,EAAuB7J,KACrB,CACEsF,EACA/G,EACAtB,EACAsM,EAAoBjE,EAAaM,MAAMrH,EAAgBqH,MACvDyE,IAKF9L,EAAgByM,QAAQ1N,SAAWiB,EAAgByM,QACrD,MAAM,IAAIJ,MAAM1B,EAAM2B,IAAI,yBAADvK,OAA0B/B,EAAgByM,QAAO,gBAAA1K,OAAegF,EAAa0F,QAAO,yCAAA1K,OAAwCrD,EAAQ,KAAAqD,OAAI+J,KAEnKb,EAAelE,EAAaM,MAAMrH,EAAgBqH,MAAQrH,EAC1DgL,EAAoBjE,EAAaM,MAAQ2D,EAAoBjE,EAAaM,OAAS,CAAC,EACpF2D,EAAoBjE,EAAaM,MAAMrH,EAAgBqH,MAAQyE,CACjE,CAEAA,GAAcpC,EAAc1K,MAAM,MAAMW,OAAS,CACnD,GAlD+B,CAmDjC,IAEOsL,CACT,GAAC,CAAA3L,IAAA,iCAAA4M,MAED,WACEnB,KAAKe,WAAaf,KAAKC,oBAAoBD,KAAKhE,aAAaM,MAAM0D,KAAK/K,gBAAgBqH,MACxF0D,KAAKgB,gBAAkB,CACzB,GAAC,CAAAzM,IAAA,sBAAA4M,MAED,SAAoBrK,EAAOxB,GACzB0K,KAAKhE,aAAelF,EACpBkJ,KAAK/K,gBAAkBK,EACvB0K,KAAKG,gBAAgBH,KAAKhE,aAAaM,MAAQ0D,KAAKG,gBAAgBH,KAAKhE,aAAaM,OAAS,CAAC,EAChG0D,KAAKW,eAAe7J,EAAMwF,MAAQ0D,KAAKrM,QACzC,GAAC,CAAAY,IAAA,mBAAAoN,IAED,WACE,OAAO3B,KAAKhE,aAAa9G,YAAc8K,KAAK/K,gBAAgBC,SAC9D,GAAC,CAAAX,IAAA,cAAAoN,IAUD,WACE,OAAO3B,KAAKhL,IACd,EAAC4M,IAVD,SAAgB5M,GACdgL,KAAKhL,KAAOA,CACd,GAAC,CAAAT,IAAA,gBAAAoN,IAUD,WACE,OAAO3B,KAAKjB,MACd,EAAC6C,IAVD,SAAkB7C,GAChBiB,KAAKjB,OAASA,CAChB,GAAC,CAAAxK,IAAA,uBAAA4M,MAUD,WACEnB,KAAKgB,gBAAkB,EAAIhB,KAAKiB,cAClC,GAAC,CAAA1M,IAAA,2BAAA4M,MAED,SAAyBU,GACvB,OAAY,IAARA,IACAA,EACF7B,KAAKgB,iBAAmBa,EAExB7B,KAAKgB,mBAJehB,IAOxB,GAAC,CAAAzL,IAAA,uCAAA4M,MAED,SAAqCU,GACnC,OAAY,IAARA,IACJ7B,KAAKgB,gBAAkB,EAAIhB,KAAKiB,eAC5BY,EACF7B,KAAKe,YAAcc,EAEnB7B,KAAKe,cALef,IAQxB,GAAC,CAAAzL,IAAA,wBAAAoN,IAED,WACE,MAAO,GAAP3K,OAAUgJ,KAAKW,eAAeX,KAAKhE,aAAaM,MAAK,KAAAtF,OAAIgJ,KAAKe,WAAU,KAAA/J,OAAIgJ,KAAKgB,gBACnF,GAAC,CAAAzM,IAAA,WAAAoN,IAMD,WACE,OAAO3B,KAAK8B,cACd,EAACF,IAND,SAAajO,GACXqM,KAAK8B,eAAiBnO,CACxB,GAAC,CAAAY,IAAA,mBAAA4M,MAMD,SAAiBY,GAAY,IAAAC,EAC3B,OAA2C,QAA3CA,EAAOhC,KAAKE,eAAe6B,EAAWzF,aAAK,IAAA0F,OAAA,EAApCA,EAAuCD,EAAWzF,KAC3D,GAAC,CAAA/H,IAAA,sBAAA4M,MAED,SAAoBnF,EAAciG,GAAe,IAAAC,EAC/C,IAAKD,EAAe,MAAM,IAAIX,MAAM,0BACpC,OAA6C,QAA7CY,EAAOlC,KAAKE,eAAelE,EAAaM,aAAK,IAAA4F,OAAA,EAAtCA,EAAyCD,EAAc3F,KAChE,GAAC,CAAA/H,IAAA,0BAAA4M,MAED,SAAwBgB,GACtB,OAAOnC,KAAKE,eAAeF,KAAKhE,aAAaM,MAAM+E,eAAec,EAAe7F,KACnF,GAAC,CAAA/H,IAAA,mBAAA4M,MAED,SAAiBrK,EAAOxB,GAAU,IAAA8M,EAChC,OAAsC,QAAtCA,EAAOpC,KAAKE,eAAepJ,EAAMwF,aAAK,IAAA8F,OAAA,EAA/BA,EAAiCf,eAAe/L,EAASgH,KAClE,GAAC,CAAA/H,IAAA,cAAA4M,MAED,SAAYrK,GACV,OAAOkJ,KAAKE,eAAemB,eAAevK,EAAMwF,KAClD,GAAC,CAAA/H,IAAA,aAAA4M,MAED,SAAWkB,GAAM,IAAAC,EAAA,KACf,OAAOD,EAAKE,MAAMrH,QAAO,SAACN,GACxB,QAAKA,MAED0H,EAAKpC,eAAemB,eAAezG,EAAQ,GAAG0B,QAASgG,EAAKpC,eAAetF,EAAQ,GAAG0B,MAAM+E,eAAezG,EAAQ,GAAG0B,MAK5H,GACF,GAAC,CAAA/H,IAAA,+BAAA4M,MAED,SAA6BgB,GAC3B,OAAOnC,KAAKG,gBAAgBH,KAAKhE,aAAaM,MAAM6F,EAAe7F,KACrE,GAAC,CAAA/H,IAAA,4BAAA4M,MAED,SAA0BgB,GACxB,OAAOnC,KAAKM,2BAA2B6B,EAAe7F,KACxD,GAAC,CAAA/H,IAAA,2CAAA4M,MAED,SAAyCgB,GACvCnC,KAAKI,yBAAyB1J,KAAK,CACjCsJ,KAAKG,gBAAgBH,KAAKhE,aAAaM,MAAM6F,EAAe7F,MAC5D0D,KAAK/K,gBACL+K,KAAKhE,aACLmG,GAEJ,GAAC,CAAA5N,IAAA,yBAAA4M,MAED,SAAuBgB,EAAgBxH,EAAO6H,EAAUC,EAAclD,GACpES,KAAKG,gBAAgBH,KAAKhE,aAAaM,MAAM6F,EAAe7F,MAAQ0D,KAAK/K,gBAEzE+K,KAAKM,2BAA2B6B,EAAe7F,MAAQ,CACrDiD,MAAAA,EACAZ,cAAeqB,KAAKrB,cACpBhE,MAAAA,EACA+H,eAAgB1C,KAAKhE,aACrB2G,kBAAmB3C,KAAK/K,gBACxBuN,SAAAA,EACAC,aAAAA,EACA9O,SAAUqM,KAAKrM,SACfoN,WAAYf,KAAKe,WACjBC,gBAAiBhB,KAAKgB,gBAE1B,GAAC,CAAAzM,IAAA,4BAAA4M,MAED,SAA0BlF,GACxB+D,KAAKc,2BAA2Bd,KAAKhE,aAAaM,MAAQ0D,KAAKc,2BAA2Bd,KAAKhE,aAAaM,OAAS,GACrH0D,KAAKc,2BAA2Bd,KAAKhE,aAAaM,MAAM5F,KAAKuF,EAAUqB,cACzE,GAAC,CAAA/I,IAAA,gCAAA4M,MAED,SAA8ByB,GACxB5C,KAAKc,2BAA2Bd,KAAKhE,aAAaM,OACpD0D,KAAKc,2BAA2Bd,KAAKhE,aAAaM,MAAMlI,SAAQ,SAAAyO,GAC9DD,EAASC,EACX,GAEJ,GAAC,CAAAtO,IAAA,gBAAA4M,MAED,SAAc7L,GACZ,OAAO0K,KAAKG,gBAAgBH,KAAKhE,aAAaM,MAAMhH,EAASgH,KAC/D,GAAC,CAAA/H,IAAA,sCAAA4M,MAED,SAAoC2B,GAClC9C,KAAKQ,6BAA6B9J,KAAK,CACrCgM,eAAgB1C,KAAKhE,aACrB2G,kBAAmB3C,KAAK/K,gBACxB6N,YAAAA,GAEJ,GAAC,CAAAvO,IAAA,oCAAA4M,MAED,WAAoC,IAAA4B,EAAA,KAClC/C,KAAKQ,6BAA6BpM,SAAQ,SAAA4O,GACxC,GAAID,EAAKE,cAAcD,EAAYL,kBAAmBK,EAAYN,eAAgB,CAAC,GAAG,GACpF,MAAM,IAAIpB,MAAM1B,EAAM2B,IAAIyB,EAAYF,aAE1C,GACF,GAAC,CAAAvO,IAAA,+BAAAoN,IAED,WACE,MAAO,GAAP3K,OAAUgJ,KAAKW,eAAeX,KAAKhE,aAAaM,MAAK,KAAAtF,OAAIgJ,KAAKe,WAAU,KAAA/J,OAAIgJ,KAAKgB,gBACnF,GAAC,CAAAzM,IAAA,8BAAA4M,MAED,WAA8B,IAAA+B,EAAA,KAC5BlD,KAAKO,uBAAuBnM,SAAQ,SAAAiF,GAA2D,IAAA8J,EAAAzJ,EAAAoB,EAAAzB,EAAA,GAAzDvC,EAAK4C,EAAA,GAAEpE,EAAQoE,EAAA,GAAE/F,EAAQ+F,EAAA,GAAE0J,EAAW1J,EAAA,GAAE2J,EAAW3J,EAAA,GACvF,GAAoC,QAApCyJ,EAAID,EAAK/C,gBAAgBrJ,EAAMwF,aAAK,IAAA6G,GAAhCA,EAAkC9B,eAAe/L,EAASgH,MAC5D,MAAM,IAAIgF,MAAM1B,EAAM2B,IAAI,oBAAAvK,OAAoB1B,EAASJ,UAAS,0CAAA8B,OAAyCF,EAAM5B,UAAS,4BAAA8B,OACjGrD,EAAQ,KAAAqD,OAAIoM,EAAW,MAAI,sBAAApM,OAC1BrD,EAAQ,KAAAqD,OAAIqM,IAExC,GACF,GAAC,CAAA9O,IAAA,0BAAA4M,MAED,SAAwBlE,EAAYhB,EAAWqH,GAC7CtD,KAAKU,iBAAiBV,KAAKhE,aAAaM,MAAQ0D,KAAKU,iBAAiBV,KAAKhE,aAAaM,OAAS,CAAC,EAClG0D,KAAKU,iBAAiBV,KAAKhE,aAAaM,MAAML,EAAUsH,WAAWjH,OAAQ,EAC3E0D,KAAKU,iBAAiBzE,EAAUsH,WAAWjH,MAAQ0D,KAAKU,iBAAiBzE,EAAUsH,WAAWjH,OAAS,CAAC,EAExG0D,KAAKa,2BAA2Bb,KAAKhE,aAAaM,MAChD0D,KAAKa,2BAA2Bb,KAAKhE,aAAaM,OAAS,CAAC,EAC9D0D,KAAKa,2BAA2Bb,KAAKhE,aAAaM,MAAM0D,KAAK/K,gBAAgBqH,MAC3E0D,KAAKa,2BAA2Bb,KAAKhE,aAAaM,MAAM0D,KAAK/K,gBAAgBqH,OAAS,CAAC,EACzF0D,KAAKa,2BAA2Bb,KAAKhE,aAAaM,MAAM0D,KAAK/K,gBAAgBqH,MAAML,EAAUsH,WAAWjH,OAAQ,EAEhH0D,KAAKY,gBAAgBlK,KAAK,CAACuG,EAAYhB,EAAW+D,KAAKwD,6BAA8BF,EAAiBtD,KAAKhE,aAAcgE,KAAK/K,iBAChI,GAAC,CAAAV,IAAA,mBAAA4M,MAED,WAAmB,IAAAsC,EAAA,KACjBzD,KAAK0D,gBAAkB,CAAC,EACxB1D,KAAK2D,uBAAuB3D,KAAKS,aAAanE,MAC9C3F,OAAOC,KAAKoJ,KAAKE,gBAAgB9L,SAAQ,SAAAwP,GACvC,IAAI9M,EAAQ2M,EAAKvD,eAAe0D,GAAiBA,GAC5CH,EAAKC,gBAAgB5M,EAAMwF,OAC9BuH,QAAQC,IAAIlE,EAAMmE,QAChB,qCAAA/M,OACUF,EAAM5B,UAAS,6CAAA8B,OAA4CyM,EAAKhD,aAAavL,UAAS,OAAK,GAAA8B,OAClGyM,EAAK9C,eAAe7J,EAAMwF,MAAK,OAGxC,GACF,GAAC,CAAA/H,IAAA,yBAAA4M,MAED,SAAuB6C,GAAsB,IAAAC,EAAA,KACtCjE,KAAK0D,gBAAgBM,KACxBhE,KAAK0D,gBAAgBM,IAAwB,EAC7CrN,OAAOC,KAAKoJ,KAAKU,iBAAiBsD,IAAyB,CAAC,GAAG5P,SAAQ,SAAA8P,GAAqB,OAAID,EAAKN,uBAAuBO,EAAsB,IAEtJ,GAAC,CAAA3P,IAAA,kBAAA4M,MAED,WAAkB,IAAAgD,EAAA,KAChBxN,OAAOC,KAAKoJ,KAAKG,iBAAiB/L,SAAQ,SAAAwP,GACxC,IAAI9M,EAAQqN,EAAKjE,eAAe0D,GAAiBA,GACjDjN,OAAOC,KAAKuN,EAAKjE,eAAe0D,IAAkBxP,SAAQ,SAAAgQ,GACxD,IAAI9O,EAAW6O,EAAKjE,eAAe0D,GAAiBQ,GAC/CD,EAAKlB,cAAc3N,EAAUwB,IAChC+M,QAAQC,IAAIlE,EAAMmE,QAAQ,uCAAA/M,OACX1B,EAASJ,UAAS,uCAAA8B,OAAsCF,EAAM5B,UAAS,OAAK,GAAA8B,OACtFmN,EAAKxD,eAAe7J,EAAMwF,MAAK,KAAAtF,OAAImN,EAAKlE,oBAAoBnJ,EAAMwF,MAAMhH,EAASgH,MAAK,OAG/F,GACF,GACF,GAAC,CAAA/H,IAAA,mCAAA4M,MAED,WAAmC,IAAAkD,EAAA,KACjCrE,KAAKI,yBAAyBhM,SAAQ,SAAA0F,GAAyE,IAAAC,EAAAe,EAAAhB,EAAA,GAAvEwK,EAAkBvK,EAAA,GAAEwK,EAAkBxK,EAAA,GAAEjD,EAAKiD,EAAA,GAAEyK,EAAkBzK,EAAA,GACvG,GAAIsK,EAAKpB,cAAcqB,EAAoBxN,IAAUuN,EAAKpB,cAAcsB,EAAoBzN,IAAUwN,IAAuBC,EAC3H,MAAM,IAAIjD,MAAM1B,EAAM2B,IAAI7B,EAAM+E,IAAAA,EAAAhD,EAAA,wbAA+C3K,EAAM5B,UAA2BsP,EAAmBtP,UAEhGyK,EAAe7I,EAAOwN,GACnDD,EAAK1D,eAAe7J,EAAMwF,MAAS+H,EAAKpE,oBAAoBnJ,EAAMwF,MAAMgI,EAAmBhI,MAE9DqD,EAAe7I,EAAOyN,GACnDF,EAAK1D,eAAe7J,EAAMwF,MAAS+H,EAAKpE,oBAAoBnJ,EAAMwF,MAAMiI,EAAmBjI,MAK7DkI,EAAmBtP,YAG3D,GACF,GAAC,CAAAX,IAAA,2BAAA4M,MAED,WAA2B,IAAAuD,EAAA,KACzB1E,KAAKY,gBAAgBxM,SAAQ,SAAAkG,GAA0G,MAAAC,EAAAO,EAAAR,EAAA,GAAxG2C,EAAU1C,EAAA,GAAE0B,EAAS1B,EAAA,GAAEoK,EAAuBpK,EAAA,GAAE+I,EAAe/I,EAAA,GAAEmI,EAAcnI,EAAA,GAAEoI,EAAiBpI,EAAA,GAC3HmK,EAAKzB,cAAcN,EAAmBD,OACpCzF,EAAW3D,SAAS,yWAAmBC,KAAI,SAAAT,GAAK,OAAIA,EAAM,EAAE,IAAES,KAAI,SAAAqL,GACpE,IAA0EC,EAAA/J,EAApCtH,EAAMsR,gBAAgBF,GAAc,GAArE5I,EAAY6I,EAAA,GAAE5P,EAAe4P,EAAA,GAElC,IAAKH,EAAKK,YAAY/I,GAAe,CACnC,IAAIgJ,EAAqBhJ,EAAa9G,UAAU4D,MAAM,UAAY,uEAAyE,GAC3I,MAAM,IAAIwI,MAAM1B,EAAM2B,IAAI,qBAAAvK,OAAqBsM,EAAe,mBAAAtM,OAAkB0L,EAAexN,UAAS,MAAA8B,OAAK2L,EAAkBzN,UAAS,8CAAA8B,OAA6CgF,EAAa9G,UAAS,QAAA8B,OAAO2N,GAA4BK,GAChP,CAEA,GAAI/P,IAAoByP,EAAKO,iBAAiBjJ,EAAc/G,GAC1D,MAAM,IAAIqM,MAAM1B,EAAM2B,IAAI,oBAADvK,OAAqBgF,EAAa9G,UAAS,MAAA8B,OAAK/B,EAAgBC,UAAS,+BAAA8B,OAA8BsM,EAAe,oBAAAtM,OAAmB0L,EAAexN,UAAS,MAAA8B,OAAK2L,EAAkBzN,UAAS,uBAAA8B,OAAsB2N,KAGlP,IAAKD,EAAKQ,QAAUR,EAAKzB,cAAchO,GAAmB+G,EAAcA,GACtE,MAAM,IAAIsF,MAAM1B,EAAM2B,IAAI,oBAADvK,OAAqBgF,EAAa9G,UAAS,MAAA8B,OAAKiF,EAAUkJ,cAAcjQ,UAAS,+BAAA8B,OAA8BsM,EAAe,oBAAAtM,OAAmB0L,EAAexN,UAAS,MAAA8B,OAAK2L,EAAkBzN,UAAS,kDAAA8B,OAAiD2N,KAGrR,OAAOC,CACT,IAAG1J,QAAO,SAACkK,EAAsBC,GAAsB,IAAAC,EAAAC,EAC+EC,EAAA1K,EAA3FsK,EAAqBtM,MAAM,iCAAiCS,KAAI,SAAAC,GAAC,OAAIA,GAAKhG,EAAMiS,QAAQjM,EAAE,IAAC,GAA5HwC,GAAFwJ,EAAA,GAAcA,EAAA,IAAEvQ,EAAeuQ,EAAA,GACyEE,EAAA5K,EAAxFuK,EAAkBvM,MAAM,iCAAiCS,KAAI,SAAAC,GAAC,OAAIA,GAAKhG,EAAMiS,QAAQjM,EAAE,IAAC,GAArGmM,GAAFD,EAAA,GAAWA,EAAA,IAElB,KAAKhB,EAAKQ,OAA4D,QAAnDI,EAACZ,EAAK7D,2BAA2B7E,EAAaM,aAAK,IAAAgJ,GAAwC,QAAxCC,EAAlDD,GAAsDrQ,GAAiB+G,GAAcM,aAAK,IAAAiJ,GAA1FA,EAA6FI,EAAUrJ,OACzH,MAAM,IAAIgF,MAAM1B,EAAM2B,IAAI,4BAAAvK,OAA4BsM,EAAe,uCAAAtM,OAChEgF,EAAa9G,UAAS,MAAA8B,QAAM/B,GAAiB+G,GAAc9G,UAAS,0BAAA8B,OAAyB2O,EAAUzQ,UAAS,OAAK,GAAA8B,OACtH2N,KAGN,OAAOU,CACT,GAEJ,GACF,GAAC,CAAA9Q,IAAA,gBAAA4M,MAED,SAAc7L,EAAUwB,GAA8B,IAAvB8O,EAAgBxP,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACjD,OAAId,EAASgH,OAASxF,EAAMwF,MACa,OAArC0D,KAAKG,gBAAgBrJ,EAAMwF,SAC3B0D,KAAKG,gBAAgBrJ,EAAMwF,QAAU0D,KAAKG,gBAAgBrJ,EAAMwF,MAAMhH,EAASgH,UAC9E0D,KAAKG,gBAAgBkB,eAAevK,EAAMwF,SAC1C0D,KAAKG,gBAAgBrJ,EAAMwF,MAAM+E,eAAe/L,EAASgH,QAC1DsJ,EAAiBtQ,EAASgH,QAC9BsJ,EAAiBtQ,EAASgH,OAAQ,EAC3B0D,KAAKiD,cAAcjD,KAAKG,gBAAgBrJ,EAAMwF,MAAMhH,EAASgH,MAAOxF,EAAO8O,GACpF,2EAAC3P,CAAA,CAlZgB,GAqZnB/C,EAAOD,QAAUgD,o+CC3ZjB,IAAIzC,EAAQD,EAAQ,MAChBqM,EAAQrM,EAAQ,MAEduI,EAAS,WACb,SAAAA,EAAY/C,EAAQlF,GASlB,+FATiCiM,CAAA,KAAAhE,GACjCkE,KAAKjD,SAAWhE,EAChBiH,KAAK0C,eAAiB7O,EAAcmI,aACpCgE,KAAK2C,kBAAoB9O,EAAcoB,gBACvC+K,KAAKnM,cAAgBA,EACrBmM,KAAKpD,YAAc,GACnBoD,KAAK5D,WAAa,GAClB4D,KAAK6F,qBAAuB,GAC5B7F,KAAK8F,oBAAsB,IACtB9F,KAAKlD,SAAU,MAAM,IAAIwE,MAAM,yBAADtK,OAA0B+B,IAC7DiH,KAAK+F,uBACP,WAmQC,SAnQAjK,IA2PA,EAAAvH,IAAA,qBAAA4M,MApFD,SAA0BpI,GACxB,IAAMD,EAAQC,EAAOD,MAAM,sBAC3B,OAAOA,EAAQA,EAAM,GAAK,IAC5B,GAAC,CAAAvE,IAAA,oBAAA4M,MAED,SAAyBpI,GACvB,IAAMD,EAAQC,EAAOD,MAAM,yBAC3B,OAAOA,EAAQA,EAAM,GAAK,IAC5B,GAAC,CAAAvE,IAAA,wBAAA4M,MAED,SAA6BpI,GAC3B,OAAOA,EAAOD,MAAM,WAAW,IAAMkH,KAAK5D,UAC5C,GAAC,CAAA7H,IAAA,qBAAA4M,MA0ED,SAA0BpI,GAAQ,IAAAiN,EAChC,OAAiD,QAA1CA,EAAAjN,EAAOD,MAAM,qCAA6B,IAAAkN,OAAA,EAA1CA,EAA6C,KAAM,EAC5D,GAAC,CAAAzR,IAAA,MAAA4M,MAED,SAAWpI,EAAQlF,GACjB,OAAO,IAAIiI,EAAU/C,EAAQlF,EAC/B,OAnQC,EAAAU,IAAA,QAAAoN,IAED,WACE,QAAS3B,KAAKjD,SAASjE,MAAM,gDAC/B,GAAC,CAAAvE,IAAA,WAAAoN,IAED,WACE,OAAO3B,KAAKjD,SAASjE,MAAM,uBAAmB,EAChD,GAAC,CAAAvE,IAAA,QAAAoN,IAED,WACE,MAAyB,KAAlB3B,KAAKlD,QACd,GAAC,CAAAvI,IAAA,iBAAAoN,IAED,WACE,QAAS3B,KAAKlD,SAAShE,MAAM,cAC/B,GAAC,CAAAvE,IAAA,UAAAoN,IAED,WACE,QAAS3B,KAAKlD,SAAShE,MAAM,oBAC/B,GAAC,CAAAvE,IAAA,wBAAA4M,MAED,WACOnB,KAAK9D,OACR8D,KAAKnM,cAAcoS,oCACjBrG,EAAM2B,IAAI,6BAA+BvB,KAAKjD,SAAW,KAAH/F,OAAQgJ,KAAKnM,cAAcqS,yBAIjFlG,KAAKmG,eACPnG,KAAKoG,2BACIpG,KAAKqG,QACdrG,KAAKsG,qBAELtG,KAAKuG,cAGPvG,KAAKwG,gBACP,GAAC,CAAAjS,IAAA,iBAAA4M,MAED,WACEnB,KAAK5D,WAAa4D,KAAK5D,WACpBqK,QAAQ,MAAO,KACfA,QAAQ,uBAAwB,IACrC,GAAC,CAAAlS,IAAA,2BAAA4M,MAED,WAA2B,IAAAmB,EAAA,KAER3I,MAAMC,KAAKoG,KAAKlD,SAASxD,SAD5B,6DAGLlF,SAAQ,SAAA8E,GAAiE,IAAAG,EAAAyB,EAAA5B,EAAA,GAA5DwN,GAAFrN,EAAA,GAAeA,EAAA,IAAEsN,EAAatN,EAAA,GAAEuN,EAAavN,EAAA,GAAEwN,EAASxN,EAAA,GACtEwN,GACFvE,EAAK1F,aAAeiK,EACpBvE,EAAKlG,YAAcyK,IAEnBvE,EAAKwE,eAAeJ,EAAeE,GAEN,IAAzBF,EAAc9R,OAChB0N,EAAKyE,kBAAkBJ,GACW,IAAzBD,EAAc9R,QACvB0N,EAAK0E,kBAAkBL,GAG7B,IAEA3G,KAAKpD,YAAcoD,KAAKiH,uBAAyBjH,KAAK6F,qBACnD7F,KAAKkH,sBAAwBlH,KAAKpD,YAAcoD,KAAKmH,sBAAsBnH,KAAKpD,aAEnFoD,KAAK5D,WAAa4D,KAAKkH,sBAAwBlH,KAAK8F,oBAAsB9F,KAAK5D,UACjF,GAAC,CAAA7H,IAAA,iBAAA4M,MAED,SAAeiG,EAASC,GACtB,GAAID,EAAQxS,SAAWyS,EAAQzS,OAC7B,MAAM,IAAI0M,MAAM,yCAADtK,OAA0CgJ,KAAKjD,UAElE,GAAC,CAAAxI,IAAA,oBAAA4M,MAED,SAAkBrE,GAChB,IAAMhE,EAAQgE,EAAShE,MAAM,2CAEzBA,GACFkH,KAAK5D,YAActD,EAAM,GACzBkH,KAAKpD,aAAe9D,EAAM,GAC1BkH,KAAK8F,qBAAuBhN,EAAM,GAClCkH,KAAK6F,sBAAwB/M,EAAM,KAEnCkH,KAAKiH,wBAAyB,EAC9BjH,KAAK6F,sBAAwB/I,EAC7BkD,KAAK5D,YAAcU,EAEvB,GAAC,CAAAvI,IAAA,oBAAA4M,MAED,SAAkBrE,GAChBkD,KAAKkH,uBAAwB,EAC7BlH,KAAK8F,qBAAuBhJ,EAC5BkD,KAAKpD,aAAeE,CACtB,GAAC,CAAAvI,IAAA,qBAAA4M,MAGD,WACE,GAAInB,KAAKlD,SAASxD,SAAS,wBAAwB1E,OAAS,EAAG,KAAM,iCAANoC,OAAuCgJ,KAAKjD,UAC3G,IAAArD,EAAA4N,EAAiCtH,KAAKlD,SAAShE,MAAM,0CAA3CyO,GAAF7N,EAAA,GAAQA,EAAA,IAAEgI,EAAOhI,EAAA,GACzBsG,KAAK5D,WAAamL,EAClBvH,KAAKpD,YAAc8E,CACrB,GAAC,CAAAnN,IAAA,oBAAAoN,IAED,WACE,OAAI3B,KAAKwH,6BAAqC1L,EAAU2L,mBAAmBzH,KAAKlD,UAC5EkD,KAAK0H,eACL1H,KAAK2H,eACL3H,KAAK4H,WAFsB,KAIxB5H,KAAKmH,sBAAsBnH,KAAKlD,SACzC,GAAC,CAAAvI,IAAA,wBAAA4M,MAED,SAAsBpI,GACpB,IAAMD,EAAQC,EAAOD,MAAM,oDAC3B,OAAIA,EACKA,EAAM,GAENC,CAEX,GAAC,CAAAxE,IAAA,cAAA4M,MAED,WACEnB,KAAK5D,WAAa4D,KAAKlD,SACvBkD,KAAKpD,YAAcoD,KAAK6H,mBACnB7H,KAAKpD,cAAgBoD,KAAK0H,eAAiB1H,KAAK2H,eAAiB3H,KAAK4H,cAAa5H,KAAKpD,YAAc,OAC7G,GAAC,CAAArI,IAAA,SAAAoN,IAED,WACE,QAAS3B,KAAK5D,WAAWtD,MAAM,uBACjC,GAAC,CAAAvE,IAAA,eAAAoN,IAED,WACE,OAAQ3B,KAAK8H,MACf,GAAC,CAAAvT,IAAA,gBAAAoN,IAED,WACE,OAAK3B,KAAK7D,aACH3I,EAAK,IAAKwM,KAAK5D,YADS,IAEjC,GAAC,CAAA7H,IAAA,iBAAAoN,IAED,WACE,QAAS3B,KAAK5D,WAAWtD,MAAM,4BACjC,GAAC,CAAAvE,IAAA,wBAAAoN,IAED,WACE,QAAS3B,KAAK5D,WAAWtD,MAAM,aACjC,GAAC,CAAAvE,IAAA,gBAAAoN,IAED,WACE,QAA8B,MAApB3B,KAAK5D,WACjB,GAAC,CAAA7H,IAAA,gBAAAoN,IAED,WACE,QAA8B,MAApB3B,KAAK5D,WACjB,GAAC,CAAA7H,IAAA,aAAAoN,IAED,WACE,QAA8B,MAApB3B,KAAK5D,WACjB,GAAC,CAAA7H,IAAA,+BAAAoN,IAED,WACE,QAAS3B,KAAK5D,WAAWtD,MAAM,4BACjC,GAAC,CAAAvE,IAAA,aAAAoN,IAgBD,WACE,OAAOnO,EAAMiS,QAAQ3J,EAAUiM,sBAAsB/H,KAAK/C,YAC5D,GAAC,CAAA1I,IAAA,gBAAAoN,IAED,WAAoB,IAAAqG,EACdC,EAAoF,QAAtED,EAAGhI,KAAK/C,WAAWnE,MAAM,qDAA6C,IAAAkP,OAAA,EAAnEA,EAAsE,GAE3F,OADAC,EAAiBA,GAAkBjI,KAAKuD,WAAWrO,WAC3B1B,EAAMiS,QAAQwC,GAAmB,IAC3D,GAAC,CAAA1T,IAAA,iBAAAoN,IAED,WACE,OAAO3B,KAAK7D,cAAgB6D,KAAKnM,cAAc0I,wBAAwByD,KAAK1C,cAC9E,GAAC,CAAA/I,IAAA,wBAAAoN,IAED,WACE,OAAO3B,KAAK7D,eACN6D,KAAKnM,cAAc0I,wBAAwByD,KAAK1C,gBACjD0C,KAAKnM,cAAckR,YAAY/E,KAAK1C,cAC3C,GAAC,CAAA/I,IAAA,aAAAoN,IAED,WAAiB,IAAAoB,EAAA,KACf,OAAOuE,EAAItH,KAAKkI,kBAAkB5O,SAAS,wDAAwDC,KAAI,SAAAT,GAAK,OAAIA,EAAM,EAAE,IAAES,KAAI,SAAAqL,GAC5H,IAA0IuD,EAAArN,EAAlH8J,EAAc9L,MAAM,gDAAgDM,MAAM,GAAGG,KAAI,SAAAC,GAAC,OAAIA,GAAKhG,EAAM4U,cAAc5O,EAAE,IAAC,GAArI1C,EAAKqR,EAAA,GAAE7S,EAAQ6S,EAAA,GACpB,OAAQpF,EAAKlP,cAAcwU,iBAAiBvR,IAAQA,GAAO0H,KACxDlJ,EAAY,KAAQyN,EAAKlP,cAAc8I,oBAAoB7F,EAAOxB,IAAWA,GAAUkJ,IAAQ,GACpG,IAAG/E,KAAK,IACV,GAAC,CAAAlF,IAAA,oBAAAoN,IAED,WACE,GAAI3B,KAAK0H,cAAe,CACtB,IAAIY,EAA0BtI,KAAK0C,eAAexN,UAAUuR,QAAQ,aAAc,SAClF,MAAO,GAAPzP,OAAUsR,EAAuB,KAAAtR,OAAIsR,EACvC,CAEA,GAAItI,KAAK2H,cAAe,CACtB,IAAIW,EAA0BtI,KAAK0C,eAAexN,UAAUuR,QAAQ,aAAc,SAClF,GAAIzG,KAAKnM,cAAc0U,iBAAkB,OAAOD,EAChD,IAAIE,EAAiBxI,KAAKnM,cAAc4U,cAAczI,KAAKnM,cAAcoB,iBACzE,IAAKuT,EAAgB,MAAM,IAAIlH,MAAM,6EACrC,MAAO,GAAPtK,OAAUsR,EAAuB,KAAAtR,OAAIwR,EAAetT,UACtD,CAEA,OAAI8K,KAAK4H,WACH5H,KAAKnM,cAAc0U,iBACdvI,KAAK0C,eAAexN,UAEpB,GAAP8B,OAAUgJ,KAAK0C,eAAexN,UAAS,KAAA8B,OAAIgJ,KAAK2C,kBAAkBzN,WAIlE8K,KAAK0I,eACA,GAAP1R,OAAUgJ,KAAKnM,cAAcmI,aAAa9G,UAAS,KAAA8B,OAAIgJ,KAAK5D,YAG1D4D,KAAK2I,sBACA3I,KAAK5D,YAGV4D,KAAKwH,6BAGLxH,KAAK4I,gBAIL5I,KAAK6I,sBAHA,GAAP7R,OAAUgJ,KAAK0C,eAAexN,UAAS,KAAA8B,OAAI8E,EAAUgN,kBAAkB9I,KAAK5D,aAOvE4D,KAAK5D,WACd,oFAQCN,CAAA,CA/QY,GAkRf5I,EAAOD,QAAU6I,kBCrRjB,IAAIrI,EAAQF,EAAQ,KACduL,EAAcvL,EAAQ,MAAtBuL,UAwBN,SAASiK,EAAgBC,UAChBA,EAAKC,kBACLD,EAAKE,YACZF,EAAKG,SAAS/U,QAAQ2U,EACxB,CAwBA7V,EAAOD,QAAU,CACfmW,sBAnDF,SAA+BC,GAC7B,IAAK,IAAIlK,EAAI,EAAGA,EAAIkK,EAAWzU,OAAQuK,IAAK,KAAAmK,EACf,SAAvBD,EAAWlK,GAAGoK,MAA6C,UAAX,QAAfD,EAAAD,EAAWlK,EAAE,UAAE,IAAAmK,OAAA,EAAfA,EAAiBC,QACpDF,EAAWG,OAAOrK,EAAG,EAAG,IAAIL,EAAUuK,EAAWlK,GAAGnK,KAAOqU,EAAWlK,EAAE,GAAGnK,MAAM,IACjFmK,EAAI,EAER,CACA,OAAOkK,CACT,EA4CErT,iBA1CF,SAA0B+C,GACxB,IAAIhF,EAAqBgF,EAAO/E,OAAOC,MAAM,SAC7C,OAAQ,IAAIR,EAAMM,EAAmB,IAAKQ,GAC5C,EAwCEkV,uBAtCF,SAAgC1K,GAC9BA,EAAO2K,QAAO,SAAAnK,GAAK,MAAmB,SAAfA,EAAMgK,IAAe,IAAEnV,SAAQ,SAAAmL,UAC7CA,EAAMoK,SACbpK,EAAMqK,cAAcxV,SAAQ,SAAA4U,GAAI,OAAID,EAAgBC,EAAK,GAC3D,GACF,EAkCED,gBAAAA,EACAc,gBA3BF,SAAyB9K,GACvBA,EAAO+K,MAAK,SAACC,EAAEC,GACb,MAAe,UAAXD,EAAER,KAA8B,UAAXS,EAAET,MACjB,EACY,UAAXQ,EAAER,KAA8B,UAAXS,EAAET,KACzB,EAEA,CAEX,GACF,EAkBEU,oBAhBF,SAA6BtW,GAC3B,OAAOA,EAASmF,MAAM,sBACxB,EAeEoR,uBAbF,SAAgCvW,GAC9B,IAAIwW,EAAQxW,EAASM,MAAM,KAC3B,OAAOkW,EAAMA,EAAMvV,OAAS,EAC9B,6HClDA,IAAA6C,EAA4ClE,EAAQ,MAA9C6G,EAAY3C,EAAZ2C,aAAcgQ,EAAmB3S,EAAnB2S,oBAChBxK,EAAQrM,EAAQ,MAEpB,SAASG,EAAUI,GACjB,OAAOP,EAAQ,KAARA,CAAwBO,EACjC,CA2DA,SAASuW,EAAoBC,GAC3B,OAAOA,EAAI7D,QAAQ,YAAY,SAAA3N,GAAK,MAAI,SAASyR,OAAOzR,EAAMlE,OAAO,GACvE,CA0UA1B,EAAOD,QAAU,CACfyE,oBAjYF,SACE8S,EACArI,EACAO,EACAC,EACA3N,EACAnB,GAEAmM,KAAKhL,KAAOA,EACZgL,KAAKuJ,KAAO,QACZvJ,KAAKjB,OAASrL,EAAU,CAAEsB,KAAMqV,EAAoBrV,GAAOnB,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,MAC7GqK,KAAKmC,eAAiBA,EACtBnC,KAAKwK,YAAcA,EACnBxK,KAAK0C,eAAiBA,EACtB1C,KAAK2C,kBAAoBA,EACzB9O,EAAc+K,oBAAoBlI,KAAKsJ,KACzC,EAkXErI,qBAhXF,SACEsF,EACAyF,EACAC,EACA3N,EACAnB,GAEAmM,KAAKhL,KAAOA,EACZgL,KAAKuJ,KAAO,SACZvJ,KAAKjB,OAASrL,EAAU,CAAEsB,KAAMqV,EAAoBrV,GAAOnB,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,MAC7GqK,KAAK/C,WAAaA,EAClB+C,KAAK0C,eAAiBA,EACtB1C,KAAK2C,kBAAoBA,EACzB9O,EAAc+K,oBAAoBlI,KAAKsJ,KACzC,EAmWEpI,uBAjWF,SACE5C,EACAnB,GAEAmM,KAAKhL,KAAOA,EACZgL,KAAKuJ,KAAO,qBACZvJ,KAAKjB,OAASrL,EAAU,CAAEsB,KAAMqV,EAAoBrV,GAAOnB,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,KAC/G,EA2VE8U,uBAzVF,SACEzV,EACAnB,GAEAmM,KAAKhL,KAAOA,EACZgL,KAAKuJ,KAAO,qBACZvJ,KAAKjB,OAASrL,EAAU,CAAEsB,KAAMqV,EAAoBrV,GAAOnB,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,KAC/G,EAmVEmJ,UA1YF,SAAmB9J,GACjBgL,KAAKhL,KAAOA,EACZgL,KAAKuJ,KAAO,MACd,EAwYE1R,kBA9UF,SAA2B2G,EAAKxJ,EAAMnB,GACpCmM,KAAKuJ,KAAO,WACZvJ,KAAKxB,KAAOA,GAAOxJ,GAAMyR,QAAQ,aAAa,SAAA3N,GAAK,MAAc,SAAVA,EAAmB,KAAOA,EAAM,EAAE,IACzFkH,KAAKhL,KAAOA,GAAQwJ,EAIlBwB,KAAKjB,OAHF/J,EAGWtB,EAAU,CAAEsB,KAAMA,GAAQwJ,EAAK3K,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,MAFjF,CAAC,CAAE4T,KAAM,OAAQvU,KAAMwJ,GAIzC,EAsUE1G,WApUF,SAAmBoB,GAAiE,IAA9DgF,EAAGhF,EAAHgF,IAAKC,EAAWjF,EAAXiF,YAAaC,EAAKlF,EAALkF,MAAOC,EAAOnF,EAAPmF,QAASqM,EAASxR,EAATwR,UAAW7W,EAAaqF,EAAbrF,cACjEmM,KAAKuJ,KAAO,QACZ,IAAMoB,EAAsB9W,EAAtB8W,kBACFxM,EAAYyM,WAAW,MAAQD,IACjCxM,EAAc,IAAHnH,OAAO2T,GAAiB3T,OAAGmH,IAExC6B,KAAK7B,YAAcA,EACnB6B,KAAK5B,OAASA,GAAO,IAAInK,MAAM,QAAQsF,KAAI,SAAAsR,GAAC,OAAIA,EAAEpE,QAAQ,MAAO,GAAG,IAAEhN,KAAK,KAAO,KAClFuG,KAAKjB,OAASrL,EAAU,CACtBsB,KAAMqJ,GAAW,GACjBxK,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,MACpDqK,KAAK8K,QAAU5M,GAAO,KACtB8B,KAAK3B,QAAUA,EACf2B,KAAK0K,UAAYA,GAAa,IAChC,EAuTE3S,oBArTF,SAA6BgT,GAC3B/K,KAAKuJ,KAAO,kBACZvJ,KAAKhL,KAAO+V,CACd,EAmTE/S,UAjTF,SAAmBgT,EAAMnX,GAAe,IAAAyO,EAAA,KACtCtC,KAAKuJ,KAAO,eACZvJ,KAAKiL,gBAAkB,GAKvBjL,KAAKgL,KAAOA,EAAKvE,QAFH,kFAEkB,SAAC3N,EAAOoS,EAAexE,EAAeyE,EAASvE,EAAewE,GAC5F,IAIOC,EAFP,MAFoC,OAAlBH,GAEAxE,GAAkBE,GAGlCtE,EAAK2I,gBAAgBvU,KACnBhD,EAAU,CACRsB,KAAMmW,EACNtX,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,IAC/Cb,sCAA8F,QAAzDuW,EAAAL,EAAK5R,MAAM,EAAGgS,EAASF,EAActW,QAAQkE,MAAM,cAAM,IAAAuS,OAAA,EAAzDA,EAA2DzW,SAAU,GAC1GD,yBAAyBqW,EAAK5R,MAAM,EAAGgS,EAASF,EAActW,QAAQX,MAAM,MAAMmF,OAAO,GAAG,GAAGxE,OAAS8R,EAAc9R,WAItH,GAAPoC,OAAUkU,EAAa,gEAAAlU,OAA+DsL,EAAK2I,gBAAgBrW,OAAS,EAAC,aAX9GkE,CAaX,GACF,EAyREb,eAvRF,SAAwBjD,GACtBgL,KAAKuJ,KAAO,aACZvJ,KAAKhL,KAAOA,EAAKf,MAAM,QAAQsF,KAAI,SAAAsR,GAAC,OAAIA,EAAEpE,QAAQ,KAAM,GAAG,IAAEhN,KAAK,KACpE,EAqREvB,gBAnRF,SAAyBlD,EAAM6E,EAAWhG,GACxCmM,KAAKuJ,KAAO,cAEZvJ,KAAKjB,OAASrL,EAAU,CACtBsB,KAAAA,EACAnB,cAAeA,EAAc6B,MAAM,CACjCC,aAAa,EACbsL,eAAgB,IACftM,yBAAyB,KAG9BqL,KAAKnG,UAAYA,CACnB,EAwQE1B,aAtQF,SAAsBnD,EAAMnB,GAAe,IAAAkP,EAAA,KAmEzC,SAASgG,EAAgBC,UAChBA,EAAKC,kBACLD,EAAKE,YACZF,EAAKG,SAAS/U,QAAQ2U,EACxB,CAtEA/I,KAAK4J,cAAgB,GACrB5J,KAAKuJ,KAAO,UAEZvU,EAAKf,MAAM,MAAMyV,OAAO4B,SAASlX,SAAQ,SAACmX,EAAMC,GAC9C,IAAIC,EAAoBF,EAAKzS,MAAM,UAAU,GACzC4S,EAAmBH,EAAKzS,MAAM,yBAC9B6S,EAAqBJ,EAAKzS,MAAM,yBAChCA,EAAQ4S,GAAoBC,EAE5BC,EAAU9S,EAAM,GAChB+S,EAAwB/S,EAAM,GAE9BgT,EAAepY,EAAU,CAC3BsB,KAFiB8D,EAAM,GAGvBjF,cAAeA,EAAc6B,MAAM,CACjCC,aAAa,IACZb,qCAAqC0W,GAAW7W,yBAAyB8W,EAAkB7W,OAASgX,EAAQhX,OAASiX,EAAsBjX,UAG5ImX,EAAU,CACZ7C,YAAauC,EAAkB7W,OAC/BgX,QAASA,EACTI,UAAWN,EACXI,aAAcA,EACd3C,SAAU,GACVF,WAAY,MAGd,GAAKlG,EAAK4G,SAEH,GAAIoC,EAAQ7C,YAAcnG,EAAK4G,SAAST,YAC7C6C,EAAQ9C,WAAalG,EAAK4G,SAC1B5G,EAAK4G,SAASR,SAASzS,KAAKqV,QACvB,GAAIA,EAAQ7C,cAAgBnG,EAAK4G,SAAST,YACnB,IAAxB6C,EAAQ7C,YACVnG,EAAK6G,cAAclT,KAAKqV,IAExBA,EAAQ9C,WAAalG,EAAK4G,SAASV,WACnClG,EAAK4G,SAASV,WAAWE,SAASzS,KAAKqV,QAEpC,CAEL,IADA,IAAI9C,EAAalG,EAAK4G,SACfV,GAAc8C,EAAQ7C,aAAeD,EAAWC,aACrDD,EAAaA,EAAWA,WAErBA,GAIH8C,EAAQ9C,WAAaA,EACrBA,EAAWE,SAASzS,KAAKqV,KAJzBhJ,EAAK6G,cAAclT,KAAKqV,GACxBA,EAAQ9C,WAAa,KAKzB,MAvBElG,EAAK6G,cAAclT,KAAKqV,GAyB1BhJ,EAAK4G,SAAWoC,CAClB,IAEuB,CAAC/L,MAGf0J,QAAO,SAAAnK,GAAK,MAAmB,YAAfA,EAAMgK,IAAkB,IAAEnV,SAAQ,SAAAmL,UAChDA,EAAMoK,SACbpK,EAAMqK,cAAcxV,SAAQ,SAAA4U,GAAI,OAAID,EAAgBC,EAAK,GAC3D,GAQJ,EA+LE5Q,WA7LF,SAAoBpD,EAAMnB,GAAe,IAAAqP,EAAA,KACvClD,KAAKuJ,KAAO,QACZvJ,KAAKiM,KAAO,GACZ,IAAMC,EAAkB,CAAE,EAAK,CAACC,EAAG,EAAGC,EAAG,GAAI,IAAK,CAACD,EAAG,EAAGC,EAAG,GAAI,IAAK,CAACD,GAAI,EAAGC,EAAG,GAAI,IAAK,CAACD,EAAG,EAAGC,GAAI,IAChGC,EAAiB,GAErBrX,EAAKf,MAAM,MACRyV,OAAO4B,SACPlX,SAAQ,SAACmX,EAAMxK,GACd,IAAIwK,EAAKzS,MAAM,oBAAf,CAEA,IAAIwT,EAAclS,EAAamR,GAAMhS,KACnC,SAACgT,EAAYC,EAAWC,GAAe,IAAAC,EACrC,GAAIH,EAAWzT,MAAM,oBAAqB,MAAO,CAAEiG,OAAQ,GAAI4N,MAAOT,EAAgBK,EAAWzT,MAAM,UAAU,KAEjH,GAAIyT,EAAWzT,MAAM,eAAgB,MAAO,CAAEiG,OAAQ,GAAI6N,QAAQ,GAElE,IAAIC,EAA0B,CAAC,KAC5B7V,OACCyV,EAAWrT,MAAM,EAAGoT,GAAW/S,KAAK,KACpC+S,EAAY,EAAI,IAAM,IACtB/S,KAAK,IAET,MAAO,CACLsF,OAAQrL,EAAU,CAChBsB,KAAMuX,EAAWvY,OACjBH,cAAeA,EAAc6B,MAAM,CACjCC,aAAa,IAEZb,qCAAqCiM,GACrCpM,yBAAyBkY,EAAwBjY,QAAiC,QAA3B8X,EAAGH,EAAWzT,MAAM,eAAO,IAAA4T,OAAA,EAAxBA,EAA2B,GAAG9X,WAGjG,IAEFsO,EAAK+I,KAAKvV,KAAK4V,EA1B2B,CA2B5C,IAEgC,QAA9BlC,EAAoBpV,KAAiBgL,KAAK8M,IAAM,OAEpD9M,KAAKiM,KAAK7X,SAAQ,SAACkY,EAAaF,EAAGH,GACjCK,EAAYlY,SAAQ,SAAC2Y,EAAYZ,EAAGa,GAClC,GAAID,EAAWJ,MAAO,CACpB,IAAIM,EAAaF,EAAWJ,MAAMR,EAAIa,EAAUf,EAC5CiB,EAAKH,EAAWJ,MAChBG,EAAMI,EAAGf,EAAI,IAAM,IACnBgB,EAAYJ,EAAWJ,MAAMR,EAAI,UAAY,UAC7CiB,EAAQC,KAAKC,IAAI,CAACJ,EAAGf,EAAGe,EAAGd,IAAM,EAAIa,EAAWrY,QAAU,EAC1D2Y,EAAY,CAACpB,EAAGA,EAAIe,EAAGf,EAAGC,EAAGA,EAAIc,EAAGd,GACxC,GAAKmB,EAAUpB,EAAI,GAAKoB,EAAUpB,EAAIiB,GAASA,EAAQ,GAAY,MAAPN,GACvDS,EAAUnB,EAAI,GAAKmB,EAAUnB,EAAIgB,GAASA,EAAQ,GAAY,MAAPN,EAC1D,MAAM,IAAIxL,MAAM1B,EAAM2B,IAAI,wCAADvK,OAAyChC,KAGpE,KAAMuY,EAAUT,KAASM,GAAO,CAC9B,IAAKnB,EAAKsB,EAAUnB,GAAGmB,EAAUpB,GAAGQ,MAAO,CACzCV,EAAKsB,EAAUnB,GAAGmB,EAAUpB,GAAGgB,IAAcK,OAAOvB,EAAKsB,EAAUnB,GAAGmB,EAAUpB,GAAGgB,KAAe,GAAK,EACvG,KACF,CACE,GAAIlB,EAAKsB,EAAUnB,GAAGmB,EAAUpB,GAAGQ,MAAMR,IAAMe,EAAGf,GAAKF,EAAKsB,EAAUnB,GAAGmB,EAAUpB,GAAGQ,MAAMP,IAAMc,EAAGd,EACnG,MAAM,IAAI9K,MAAM1B,EAAM2B,IAAI,wCAADvK,OAAyChC,KAEpEuY,EAAUT,IAAQI,EAAGJ,EAEzB,CACAT,EAAe3V,KAAKqW,EACtB,CACF,GACF,IAEAV,EAAejY,SAAQ,SAAA2Y,GAAU,OAAIA,EAAWJ,QAAUI,EAAWJ,OAAQ,EAAK,GACpF,EAuHEtU,UArHF,SAAmBrD,EAAMnB,GAAe,IAAA4P,EAAA,KACtCzD,KAAKuJ,KAAO,OAEZ,MAAIY,iDAAYnV,EAAKsE,SAAS,onBAExBmU,EAAkBtD,EAAM9P,OAAM,SAAAqT,GAAI,MAAgB,MAAZA,EAAK,EAAU,IACrDC,EAAiBxD,EAAM9P,OAAM,SAAAqT,GAAI,MAAgB,MAAZA,EAAK,EAAU,IACpDE,EAAiBzD,EAAM0D,MAAK,SAAAH,GAAI,MAAgB,MAAZA,EAAK,EAAU,KAAKvD,EAAM0D,MAAK,SAAAH,GAAI,MAAgB,MAAZA,EAAK,EAAU,IAEhG1N,KAAK8N,UAAYL,EAAkB,QAAWE,EAAiB,OAAUC,EAAiB,QAAU,KAEpGzD,EAAQA,EAAM5Q,KAAI,SAAAmU,GAChB,OAAIA,EAAK,GACA,CAAEK,MAAM,EAAMnC,QAAS8B,EAAK,GAAI1Y,KAAM0Y,EAAK,IACzCA,EAAK,GACP,CAAEK,MAAM,EAAO/Y,KAAM0Y,EAAK,GAAII,UAAuB,MAAZJ,EAAK,GAAa,QAAU,QAErE,CAAEK,MAAM,EAAO/Y,KAAM0Y,EAAK,GAErC,IAEA1N,KAAKgO,OAAOhZ,EAAK4V,WAAW,MAAsC,QAA9BR,EAAoBpV,IAExDgL,KAAKmK,MAAQA,EAAM5Q,KAAI,SAACmU,EAAM3M,GAC5B,MAAO,CACLgN,KAAML,EAAKK,KACXnB,OAAQc,EAAK1Y,KAAKiZ,SAAS,OAC3BrC,QAAS8B,EAAK9B,QACdkC,UAA8B,UAAnBrK,EAAKqK,UAAwBJ,EAAKI,eAAYzX,EACzD0I,OAAQrL,EAAU,CAChBsB,KAAM0Y,EAAK1Y,KAAKhB,OAChBH,cAAeA,EAAc6B,MAAM,CACjCC,aAAa,IAEZb,qCAAqCiM,EAAa,GAClDpM,yBAAyB,KAGlC,GACF,EA+EE2D,mBA7EF,SAA4BtD,EAAMnB,GAAe,IAAAoQ,EAAA,KAC/CjE,KAAKuJ,KAAO,iBACZvJ,KAAK9F,MAAQ,GAECP,MAAMC,KAAK5E,EAAKsE,SAAS,qCAE/BlF,SAAQ,SAAA0E,GACd,IAAIiS,EAAcjS,EAAM,GAEpBoV,EAAiBxa,EAAU,CAC7BsB,KAFS8D,EAAM,GAGfjF,cAAeA,EAAc6B,MAAM,CACjCC,aAAa,IAAQhB,yBAAyB,IAAKoW,EAAc,KAGrE9G,EAAK/J,MAAMxD,KAAK,CACdqU,YAAAA,EACAhM,OAAQmP,GAEZ,GACF,EA0DE3V,aAxDF,SAAsBvD,EAAMnB,GAC1BmM,KAAKuJ,KAAO,UACZvJ,KAAKjB,OAASrL,EAAU,CACtBsB,KAAAA,EACAnB,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,IAAQhB,yBAAyB,IAEvF,EAmDE6D,UAjDF,SAAmBxD,EAAMnB,GACvBmM,KAAKuJ,KAAO,OACZvJ,KAAKjB,OAASrL,EAAU,CACtBsB,KAAAA,EACAnB,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,IAAQhB,yBAAyB,IAEvF,EA4CE8D,uBA1CF,SAAgCzD,GAC9BgL,KAAKuJ,KAAO,cACZvJ,KAAKhL,KAAOA,EAAKf,MAAM,QAAQsF,KAAI,SAAAsR,GAAC,OAAIA,EAAEpE,QAAQ,KAAM,GAAG,IAAEhN,KAAK,KACpE,EAwCEd,aA9BF,SAAsB3D,EAAMmZ,EAActa,GACxCmM,KAAKuJ,KAAO,WACZvJ,KAAKjB,OAASrL,EAAU,CACtBsB,KAAAA,EACAnB,cAAeA,EAAc6B,MAAM,CACjCC,aAAa,EACbkG,SAAS,IACRlH,yBAAyBwZ,EAAavZ,SAE7C,EAsBE8D,eAvCF,SAAwB1D,EAAMnB,GAC5BmM,KAAKuJ,KAAO,aACZvJ,KAAKjB,OAASrL,EAAU,CACtBsB,KAAAA,EACAnB,cAAeA,EAAc6B,MAAM,CAAEC,aAAa,IAAQhB,yBAAyB,IAEvF,yLC/XA,IAAIyZ,EAAU7a,EAAQ,KAClBE,EAAQF,EAAQ,KAChBC,EAAQD,EAAQ,MAChBqM,EAAQrM,EAAQ,MAEd8a,EAAc,WAClB,SAAAA,EAAYC,gGAAgBxO,CAAA,KAAAuO,GAC1BrO,KAAKsO,eAAiBA,CACxB,SAqEC,SArEAD,KAAA,EAAA9Z,IAAA,gBAAA4M,MAED,WACE,OAAOnB,KAAKsO,eAAera,MAAM,uBAC9BsF,KAAI,SAAAsR,GAAC,OAAIA,EAAE7W,MAAM,IAAE0V,OAAO4B,SAAS/R,KAAI,SAACgV,GAAkB,IAAAC,EACrDC,EAA4D,QAAzCD,EAAGD,EAAczV,MAAM,0BAAkB,IAAA0V,OAAA,EAAtCA,EAAyC,GACnE,IAAKC,EAAqB,MAAM,IAAInN,MAAM,+BAAiCiN,GAE3E,MAAO,CACLE,oBAAAA,EACAC,kBAAmB,UAAYlb,EAAMmb,2BAA2BF,GAChEG,iBAAkBH,EAAoBxa,MAAM,KAAKmF,OAAO,GAAG,GAC3DyV,MAAON,EACJta,MAAM,MAAMmF,MAAM,GAAGK,KAAK,MAAMzF,OAChCC,MAAM,wBACNyV,OAAO4B,SACP/R,KAAI,SAAAR,GACH,IAAI+V,EAAc/V,EAAOD,MAAM,sBAAkB,GAC7CiW,EAAQ,IAAItb,EAAMqb,GACtB,MAAO,CACLE,WAAUjW,EAAOD,MAAM,WACvBmW,iBAAgBlW,EAAO6R,WAAW,OAClCrW,IAAKwa,EAAMxa,IACXS,KAAM8Z,EAEV,IAEN,GACJ,GAAC,CAAAva,IAAA,kBAAA4M,MAED,WACE,IACI+N,EACAC,EAFAC,EAAqB,CAAC,EAqC1B,OAjCApP,KAAKqP,gBAAgBjb,SAAQ,SAAAkb,GAC3B,GAAkC,YAA9BA,EAAQZ,kBACV,MAAM,IAAIpN,MAAM1B,EAAM2B,IAAI,6BAADvK,OAA8BsY,EAAQb,oBAAmB,QAGpFa,EAAQT,MAAMza,SAAQ,SAACmb,GACrB,GAAIA,EAAKP,UAAYO,EAAKhb,IAAK,CAC7B,IAAIib,EAAgB,GAAHxY,OAAMsY,EAAQZ,kBAAiB,KAAA1X,OAAIxD,EAAK,IAAK+b,EAAKhb,KAAK0C,SAAQ,SAEhF,GAAImY,EAAmB/N,eAAemO,GACpC,MAAM,IAAIlO,MAAM1B,EAAM6P,MAAM7P,EAAM8P,MAAM,iBAAD1Y,OAAkBuY,EAAKhb,IAAG,uCAGnE6a,EAAmBI,GAAiBD,EAAKva,KAAKyR,QAAQ,SAAU,QAAQzS,OAAS,KAE7Eub,EAAKN,iBACHC,EACFrL,QAAQ8L,MAAM/P,EAAM2B,IAAI,wCAADvK,OAAyCuY,EAAKhb,IAAG,WAAAyC,OAAUmY,EAAe,cAAAnY,OAAamY,EAAe,QAE7HD,EAAmBM,EACnBL,EAAkBI,EAAKhb,KAG7B,KAAO,CACL,IAAIqb,EAAwBL,EAAKva,KAAK8D,MAAM,uDAAuD,IAAMwW,EAAQV,iBAC7G3X,EAAWzD,EAAK,IAAKoc,GAAuB3Y,SAC5C4Y,EAAWP,EAAQQ,gBAAkB,GAWnD,SAA0BC,EAAQC,EAAQC,GACxC,GAAIA,EAAK5O,eAAe0O,EAASC,GAAS,CAExC,IADA,IAAI7Q,EAAI,EACD8Q,EAAK5O,eAAe,GAADrK,OAAI+Y,EAAM,KAAA/Y,OAAIkZ,OAAO/Q,GAAGgR,SAAS,EAAG,MAAInZ,OAAGgZ,KAAa7Q,IAClF,MAAO,IAAPnI,OAAWkZ,OAAO/Q,GAAGgR,SAAS,EAAG,KACnC,CACE,MAAO,EAEX,CAnBwDC,CAAiB,GAADpZ,OAAIsY,EAAQZ,kBAAiB,KAAA1X,OAAIC,GAAQ,QAAamY,GAChHiB,EAAe,GAAHrZ,OAAMsY,EAAQZ,kBAAiB,KAAA1X,OAAIxD,EAAK,IAAKoc,GAAuB3Y,UAAQD,OAAG6Y,EAAQ,SACvGT,EAAmBiB,GAAgBd,EAAKva,KAAKyR,QAAQ,SAAU,QAAQzS,OAAS,IAClF,CACF,GACF,IAEO,CAAEsc,WAAY,IAAIlC,EAAQgB,GAAqBF,iBAAAA,EAAkBC,gBAAAA,EAC1E,0EAACd,CAAA,CAxEiB,GAqFpBnb,EAAOD,QAAUob,uLCzFjB,IAAIkC,EAAchd,EAAQ,MACtBC,EAAQD,EAAQ,MAChBE,EAAQF,EAAQ,KAEd6a,EAAO,WACX,SAAAA,EAAYgB,GAAoB,IAAA9M,EAAA,kGAAAxC,CAAA,KAAAsO,GAC9BpO,KAAKwQ,YAAc,CAAC,EACpBxQ,KAAKyQ,kBAAoB,CAAC,EAC1BzQ,KAAKoP,mBAAqBA,EAE1BzY,OAAOC,KAAKwY,GAAoBhb,SAAQ,SAAAT,GACtC,IAAI+c,EAAgBH,EAAYI,QAAQhd,GAEpC4b,EAAO,CACTlN,KAAM1O,EACNsD,SAAUtD,EAASM,MAAM,KAAKmF,OAAO,GAAG,GACxCwX,yBAA0Bjd,EAASM,MAAM,KAAKmF,OAAO,GAAG,GAAGN,MAAM,kBAAkB,GACnFgE,SAAUsS,EAAmBzb,GAC7BY,IAAM,IAAId,EAAM2b,EAAmBzb,IAAYY,IAC/Cmc,cAAeA,EAAcjK,QAAQ,OAAQ,QAC7CmI,iBAAkBiC,EAA2Bld,IAM/C,GAHA2O,EAAKkO,YAAY7c,GAAY4b,EAGzBjN,EAAKmO,kBAAkBpP,eAAeqP,GACxCpO,EAAKmO,kBAAkBC,GAAe7B,MAAMnY,KAAK6Y,OAC5C,CACL,IAAIuB,EAAcC,EAAoBL,GAEtCpO,EAAKmO,kBAAkBC,GAAiB,CACtCrO,KAAMqO,EACN7B,MAAO,CAACU,GACRuB,YAAAA,EAEJ,CAIA,IADAJ,EAAgBH,EAAYI,QAAQD,GAC7BA,EAAczC,SAAS,YAAcyC,EAAczW,SAAS,WAC5DqI,EAAKmO,kBAAkBpP,eAAeqP,KACzCpO,EAAKmO,kBAAkBC,GAAiB,CACtCrO,KAAMqO,EACN7B,MAAO,GACPiC,YAAaC,EAAoBL,KAGrCA,EAAgBH,EAAYI,QAAQD,EAExC,GACF,SAmCC,SAnCAtC,KAAA,EAAA7Z,IAAA,cAAAoN,IAED,WAAmB,IAAAoB,EAAA,KACjB,OAAOpM,OAAOC,KAAKoJ,KAAKyQ,mBACrBlX,KAAI,SAAA8I,GAAI,OAAIU,EAAK0N,kBAAkBpO,EAAK,GAC7C,GAAC,CAAA9N,IAAA,iBAAAoN,IAED,WAAqB,IAAAuB,EAAA,KACnB,OAAOvM,OAAOC,KAAKoJ,KAAKyQ,mBACrBlX,KAAI,SAAA8I,GAAI,OAAIa,EAAKuN,kBAAkBpO,GAAMA,IAAI,GAClD,GAAC,CAAA9N,IAAA,QAAAoN,IAED,WAAY,IAAA8B,EAAA,KACV,OAAO9M,OAAOC,KAAKoJ,KAAKwQ,aACtBjX,KAAI,SAAA8I,GAAI,OAAIoB,EAAK+M,YAAYnO,EAAK,GACtC,GAAC,CAAA9N,IAAA,kBAAA4M,MAED,SAAgBxN,GACd,OAAOqM,KAAKwQ,YAAY7c,GAAUmJ,QACpC,GAAC,CAAAvI,IAAA,UAAA4M,MAED,SAAQxN,GACN,QAASqM,KAAKwQ,YAAY7c,EAC5B,GAAC,CAAAY,IAAA,eAAA4M,MAED,SAAauP,GACX,OAAO1Q,KAAKyQ,kBAAkBC,EAChC,GAAC,CAAAnc,IAAA,eAAA4M,MAED,SAAauP,GACX,QAAS1Q,KAAKyQ,kBAAkBC,EAClC,GAAC,CAAAnc,IAAA,OAAAoN,IAED,WACE,OAAO/L,KAAKC,UAAUc,OAAOC,KAAKoJ,KAAKoP,oBACzC,0EAAChB,CAAA,CAlFU,GAqFb,SAASyC,EAA2Bld,GAClC,IAAIwW,EAAQxW,EAASM,MAAM,KAC3B,OAAOT,EAAMwd,aAAa7G,EAAMA,EAAMvV,OAAS,IAAIM,SACrD,CAEA,SAAS6b,EAAoBL,GAC3B,OAAKA,EAAc5X,MAAM,gBAElB4X,EACJ5X,MAAM,gBAAgB,GACtB7E,MAAM,KACNsF,KAAI,SAAAqB,GAAO,OAAKpH,EAAMwd,aAAapW,GAAS1F,SAAS,IACrDuE,KAAK,KANyC,qBAOnD,CAEAvG,EAAOD,QAAUmb,qLCzGX3a,EAAK,WACT,SAAAA,EAAYwd,gGAAanR,CAAA,KAAArM,GASvB,IAAIqF,EAAQmY,EAAYnY,MAAM,iEAE9B,IAAKA,EACH,MAAO,CACLvE,IAAK,KACLS,KAAMic,GAKV,IAAI1c,EAAMuE,EAAM,IAAMA,EAAM,IAAM,IAC9B9D,EAAOic,EAAY7X,MAAMN,EAAM,GAAGlE,QAEtCoL,KAAKzL,IAAMA,EACXyL,KAAKhL,KAAOA,EACZgL,KAAKnL,cAA6B,MAAbiE,EAAM,GAAa,EAAI,EAC5CkH,KAAKtL,sBAAqC,OAAboE,EAAM,EACrC,SAIC,SAJArF,IAAA,EAAAc,IAAA,MAAA4M,MAED,SAAW8P,GACT,OAAO,IAAIxd,EAAMwd,EACnB,IAJC,uFAIAxd,CAAA,CA/BQ,GAkCXP,EAAOD,QAAUQ,WC3BjB,IAAIyd,EAAQ,CAAC,EAebhe,EAAOD,QAbP,SAASke,EAAsBpY,GAC7B,GAAImY,EAAM7P,eAAetI,GAAS,OAAOmY,EAAMnY,GAC/C,IAAIqY,EAAYrY,EAAO0N,QAAQ,4CAA6C,UAE5E,IADA2K,EAAYA,EAAU3K,QAAQ,0DAA2D,aACvE1N,EAAQ,CACxB,IAAIsY,EAAkBF,EAAsBC,GAE5C,OADAF,EAAMnY,GAAUsY,EACTF,EAAsBE,EAC/B,CACE,OAAOtY,CAEX,kBCpBA,IAAIvF,EAAQD,EAAQ,MAiFpBL,EAAOD,QAAU,CAAE0M,eA/EnB,SAAwB7I,EAAOxB,GAC7B,OAAIwB,EAAM5B,YAAcI,EAASJ,UACxB,IAAP8B,OAAWF,EAAM5B,UAAS,KAEnB,IAAP8B,OAAW1B,EAASJ,UAAS,MAAA8B,OAAKF,EAAM5B,UAAS,KAErD,EAyEmCkF,aAvEnC,SAAsBrB,GAOpB,IANA,IAAIuY,GAAiB,EACjBC,GAAkB,EAClBC,GAAW,EACXC,GAAS,EACThX,EAAS,CAAC,IAEL0E,EAAI,EAAGA,EAAIpG,EAAOnE,OAAQuK,IACf,MAAdpG,EAAOoG,IAAeqS,GAAaC,GAGrChX,EAAOA,EAAO7F,OAAS,IAAMmE,EAAOoG,GACyBsS,EAA3C,OAAd1Y,EAAOoG,KAAgBsS,EACT,MAAd1Y,EAAOoG,IAAemS,IAAgBA,GAAiB,GACzC,MAAdvY,EAAOoG,IAAcmS,IAAiBE,GAAW,EAAMF,GAAiB,GAC1D,MAAdvY,EAAOoG,IAAcqS,IAAaD,IAAiBA,GAAkB,GACvD,MAAdxY,EAAOoG,IAAcqS,GAAYD,IAAiBC,GAAW,IAPjE/W,EAAO/D,KAAK,IAYhB,OAAO+D,EAAOrB,MAAM,GAAI,EAC1B,EAiDiDsY,SA/CjD,SAAkBpH,EAAKqH,GAErB,OADiBrH,EAAIrW,MAAM,MACTsF,KAAI,SAAAjF,GAIpB,IAHA,IAAIsd,EAAQtd,EAAUL,MAAM,KACxBiG,EAAQ,GACRqR,EAAO,GACFpM,EAAI,EAAGA,EAAIyS,EAAMhd,OAAQuK,IAE5BoM,EAAK3W,OAAS,EAAagd,EAAMzS,GAAGvK,QAAU+c,EAChDpG,IAASA,EAAO,IAAK,IAAMqG,EAAMzS,IAGjCjF,EAAMxD,KAAK6U,GACXA,EAAO,KAAOqG,EAAMzS,IAKxB,OADAjF,EAAMxD,KAAK6U,GACJrR,EAAMT,KAAK,KACpB,IAAGA,KAAK,MAAMzF,MAChB,EA2B2DoW,oBAzB3D,SAA6BpV,GAM3B,OAHoB,IAAI6c,OAAO,IAAD7a,OADb,YAC0B,OAGxB8a,KAAK9c,GAAQ,MAAQ,KAC1C,EAkBgF+c,0BAhBhF,SAAmCC,EAAYC,GAC7C,IAAIzH,EAAarI,EASjB,OARI8P,GACFzH,EAAc,IAAIhX,EAAMwe,GACxB7P,EAAiB,IAAI3O,EAAMye,KAE3BzH,EAAc,KACdrI,EAAiB,IAAI3O,EAAMwe,IAGtB,CACLxH,YAAAA,EACArI,eAAAA,EAEJ,iTC/EA,IAAIgP,EAAwB5d,EAAQ,KACpCA,EAAQ,MACR,IAAM2d,EAAQ,CAAC,EAET1d,EAAK,WAGT,SAAAA,EAAYuF,GACV,+FADkB+G,CAAA,KAAAtM,IACbuF,EAAQ,MAAM,IAAIuI,MAAM,wCAC7B,GAAI4P,EAAM7P,eAAetI,IAAWmY,EAAM7P,eAAetI,GAAQ2I,QAAS,OAAOwP,EAAMnY,GAEvFiH,KAAK0B,QAAU3I,EAEfiH,KAAK9K,UAAYic,EAAsBpY,GACpC0N,QAAQ,QAAQ,SAAC3N,GAAK,MAAkB,OAAbA,EAAM,GAAc,KAAOA,EAAM,EAAE,IAEjEkH,KAAKkS,aAAeC,IAAIV,OAAOzR,KAAK9K,WAEpC8K,KAAKxB,IAAMwB,KAAK9K,UAAUuR,QACxB,IAAIoL,OAAO,KAAOlb,OAAOC,KAAKpD,EAAM4e,oBAAoB3Y,KAAK,OAAQ,MACrE,SAAAX,GAAK,OAAItF,EAAM4e,mBAAmBtZ,EAAM,IAK1CkH,KAAK/I,SAAW+I,KAAK9K,UAAUuR,QAC7B,IAAIoL,OAAO,KAAOlb,OAAOC,KAAKpD,EAAM6e,yBAAyB5Y,KAAK,OAAQ,MAC1E,SAAAX,GAAK,OAAItF,EAAM6e,wBAAwBvZ,EAAM,IAG/CkH,KAAK1D,KAAO0D,KAAK9K,UACdod,cACA7L,QAAQ,MAAO,IACfA,QAAQ,YAAa,IACrBA,QAAQ,kCAAkC,SAACjN,EAAG+Y,GAAE,OAAKA,EAAK/Y,EAAI,EAAE,IAChEiN,QAAQ,MAAO,IACfA,QAAQ,MAAO,IACfA,QAAQ,MAAO,KACfA,QAAQ,sBAAuB,KAC/BzS,OAEHgM,KAAKwS,gBAAkBC,mBAAmBzS,KAAK/I,UAE/Cia,EAAMnY,GAAUiH,IAClB,SAkGC,SAlGAxM,IAAA,EAAAe,IAAA,gBAAA4M,MAyCD,SAAqBpI,GAEnB,IAAIjC,EAAQ,IAAItD,EADhBuF,EAASA,EAAO0N,QAAQ,cAAe,SAGvC,OADA3P,EAAM4K,QAAU,KACT5K,CACT,GAAC,CAAAvC,IAAA,gBAAA4M,MAED,SAAqBpI,GACnB,IAAIjC,EAAQ,IAAItD,EAAMuF,GAEtB,OADAjC,EAAM4K,QAAU,KACT5K,CACT,GAAC,CAAAvC,IAAA,UAAA4M,MAED,SAAepI,GACb,IAAI2Z,EAAkB3Z,EAAO0N,QAC3B,IAAIoL,OAAO,KAAOlb,OAAOC,KAAKpD,EAAMmf,wBAAwBlZ,KAAK,OAAQ,MACzE,SAAAX,GAAK,OAAItF,EAAMmf,uBAAuB7Z,EAAM,IAG1C8Z,EADgBC,mBAAmBH,GACLjM,QAAQ,QAAQ,SAAC3N,GAAK,MAAkB,OAAbA,EAAM,GAAc,KAAOA,EAAM,EAAE,IAChG,OAAOtF,EAAMsf,cAAcF,EAC7B,GAAC,CAAAre,IAAA,eAAA4M,MAED,SAAoBpI,GAClB,IAAI2Z,EAAkB3Z,EAAO0N,QAC3B,IAAIoL,OAAO,KAAOlb,OAAOC,KAAKpD,EAAMmf,wBAAwBlZ,KAAK,OAAQ,MACzE,SAAAX,GAAK,OAAItF,EAAMmf,uBAAuB7Z,EAAM,IAG1C8Z,EADgBC,mBAAmBH,GACLjM,QAAQ,QAAQ,SAAC3N,GAAK,MAAkB,OAAbA,EAAM,GAAc,KAAOA,EAAM,EAAE,IAChG,OAAOtF,EAAMsf,cAAcF,EAC7B,GAAC,CAAAre,IAAA,6BAAA4M,MAED,SAAkCpI,GAChC,OAAOA,EAAO0N,QACZ,IAAIoL,OAAO,KAAOlb,OAAOC,KAAKpD,EAAMuf,wBAAwBtZ,KAAK,OAAQ,MACzE,SAAAX,GAAK,OAAItF,EAAMuf,uBAAuBja,EAAM,GAEhD,GAAC,CAAAvE,IAAA,6BAAA4M,MAED,SAAkCpI,GAChC,IAAI2Z,EAAkB3Z,EAAO0N,QAC3B,IAAIoL,OAAO,KAAOlb,OAAOC,KAAKpD,EAAMmf,wBAAwBlZ,KAAK,OAAQ,MACzE,SAAAX,GAAK,OAAItF,EAAMmf,uBAAuB7Z,EAAM,IAI9C,OAFoB+Z,mBAAmBH,GACLjM,QAAQ,QAAQ,SAAC3N,GAAK,MAAkB,OAAbA,EAAM,GAAc,KAAOA,EAAM,EAAE,GAElG,GAAC,CAAAvE,IAAA,kBAAA4M,MAED,SAAuByD,GACrB,IAAI9L,EAAQ8L,EAAc9L,MAAM,yCAChC,MAAO,CAACA,EAAM,IAAMtF,EAAMiS,QAAQ3M,EAAM,IAAKA,EAAM,IAAMtF,EAAMiS,QAAQ3M,EAAM,KAAO,KACtF,GAAC,CAAAvE,IAAA,MAAA4M,MAED,SAAWpI,GACT,OAAO,IAAIvF,EAAMuF,EACnB,IAlGC,uFAkGAvF,CAAA,CA1IQ,GA0IRwf,EA1IGxf,EAAK,qBA0CmB,CAC1B,IAAK,MACL,IAAK,OACL,IAAK,MACL,IAAK,IACL,EAAK,OACL,KAAM,WACPwf,EAjDGxf,EAAK,0BAmDwB,CAC/B,IAAK,MACL,IAAK,MACL,IAAM,MACN,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,IACL,EAAK,OACL,KAAM,WACPwf,EAlEGxf,EAAK,yBAoEuB,CAC9B,IAAK,MACL,IAAK,IACL,EAAK,OACL,KAAM,WACPwf,EAzEGxf,EAAK,yBA2EuB,CAC9B,SAAU,OACV,OAAQ,IACR,EAAK,MA+DTN,EAAOD,QAAUO,8JCtIbM,EAAU,CAAC,EAEfA,EAAQmf,kBAAoB,IAC5Bnf,EAAQof,cAAgB,IAElBpf,EAAQqf,OAAS,SAAc,KAAM,QAE3Crf,EAAQsf,OAAS,IACjBtf,EAAQuf,mBAAqB,IAEhB,IAAI,IAASvf,GAKJ,KAAW,IAAQwf,QAAS,IAAQA,iDCrB1D,SAASC,IACP,IAAIC,EAAOC,EAAAA,EAAKlG,UACZmG,EAAUD,EAAAA,EAAKE,yBAAyBH,EAAKI,mBAAmBC,eAAeC,kBACjFN,EAAKI,mBAAmBC,eAAeE,WAEzC,OAAOL,aAAO,EAAPA,EAASM,WAAYP,EAAAA,EAAKQ,UACnC,CAEA,SAASC,IAAe,IAAAC,EAClBX,EAAOC,EAAAA,EAAKlG,UACZwG,EAAaP,GAAQA,EAAKO,YAAcN,EAAAA,EAAKE,yBAAwC,QAAhBQ,EAACX,EAAKO,kBAAU,IAAAI,OAAA,EAAfA,EAAiBP,qBAAuBJ,EAAKO,WACnHK,GAA4BL,EAEhC,GAAIK,IAA6BZ,EAAKa,UAAW,CAC/C,IAAIC,EAAiBb,EAAAA,EAAKlG,UAAUqG,mBAAmBU,eACvD,OAAOC,EAAAA,EAAAA,IAAwBD,EAAgB,CAACE,YAAa,IAAMC,eAAgB,GAAKC,QAAS,EAAG7a,UAAW,KAAM8a,SAAU,UACjI,CAEA,OAAIP,GAA4BZ,EAAKa,WAC5BO,EAAAA,EAAAA,GAAWpB,EAAKI,mBAAmBvR,MAGxC0R,IAAeA,EAAWM,WACrBE,EAAAA,EAAAA,IAAwBR,EAAWc,QAAS,CAACL,YAAa,GAAKC,eAAgB,GAAKC,QAAS,GAAI7a,UAAW,KAAM8a,SAAU,WAChIG,MAAK,WACJ,GAAIf,EAAWgB,UACb,OAAOhB,EAAWC,OAAO,CAAEgB,UAAU,GAEzC,IAGAjB,GAAcA,EAAWM,UACpBb,EAAKO,WAAWC,cADzB,CAGF,CAEA,SAASiB,EAAkB/b,GAA+B,IAA5Bgc,EAAMhc,EAANgc,OAAQC,EAAMjc,EAANic,OAAQC,EAAQlc,EAARkc,SACxCC,GAAc5B,EAAAA,EAAKlG,UAAU+H,eAAiB7B,EAAAA,EAAKlG,UAAU8H,WAEjE,GAAIA,GAAcA,EAAWE,iBAAmBF,EAAWG,mBAAqB,KAAQ/B,EAAAA,EAAKlG,UAAUkI,gBACrG,OAAOlB,EAAAA,EAAAA,IAAwBc,EAAWR,QAAS,CAACL,YAAa,IAAMC,eAAgB,GAAKC,QAAS,GAAI7a,UAAW,OAAQ8a,SAAU,SAAUe,KAAM,WAGxJ,GAAIL,GAAcA,EAAWM,kBAAoBlC,EAAAA,EAAKlG,UAAUkI,gBAC9D,OAAOlB,EAAAA,EAAAA,IAAwBc,EAAWR,QAAS,CAACL,YAAa,IAAMC,eAAgB,GAAKC,QAAS,GAAI7a,UAAW,KAAM8a,SAAU,SAAUe,KAAM,WAGtJ,GAAIjC,EAAAA,EAAKlG,UAAUqI,WAAanC,EAAAA,EAAKlG,UAAUsI,cAAgBpC,EAAAA,EAAKlG,UAAUuI,QAAUrC,EAAAA,EAAKlG,UAAUkI,gBAAiB,CACtH,IAAInB,EAAiBb,EAAAA,EAAKlG,UAAUwI,gBAAgBzB,eACpD,OAAOC,EAAAA,EAAAA,IAAwBD,EAAgB,CAACE,YAAa,GAAKC,eAAgB,GAAKC,QAAS,GAAI7a,UAAW,OAAQ8a,SAAU,SAAUe,KAAM,UACnJ,CAEA,OAAIL,IAAcA,EAAWhB,WAAcgB,EAAWW,YAAed,GAAWzB,EAAAA,EAAKlG,UAAUkI,gBAIxFhC,EAAAA,EAAKlG,UAAU0I,QAAQ,CAAEf,OAAAA,EAAQgB,SAAUf,EAAQgB,aAAcf,EAAUgB,aAAa,IAHtFf,EAAWrB,OAAO,CAAEkB,OAAAA,EAAQgB,SAAUf,EAAQgB,aAAcf,GAIvE,CAEA,SAASiB,IACP,OAAK5C,EAAAA,EAAKlG,UAAU+I,QACb7C,EAAAA,EAAKlG,UAAU0I,QAAQ,CAAEE,cAAc,IADVlB,GAEtC,utDC7DA,SAASsB,EAAgB1c,GAAW,IAAA2c,EAC5BC,EAAmC,QAAjBD,EAAG/C,EAAAA,EAAKlG,iBAAS,IAAAiJ,OAAA,EAAdA,EAAgB3B,QAE3C,GAAkB,OAAdhb,EAAoB,CACtB,IAAK4c,EAAoB,OACzB,IAAIC,EAAiB/c,MAAMC,KAAK+c,SAASC,iBAAiB,4BAA4BlN,QAAO,SAAA8J,GAAI,OAA0B,OAAtBA,EAAKqD,YAAqB,IAC3HC,EAA6BC,EAA2BN,EAAoB,MAC5EO,EAA4BD,EAA2BN,EAAoB,QAG3EQ,EAFiBC,EAAmBR,GAGrChN,QAAO,SAAAyN,GAAI,OAAIC,EAASD,EAAMH,KACzBK,EAAwBF,EAAMH,IAC/BG,EAAKtC,UAAY4B,CAAkB,IAE1C,GAAuC,IAAnCQ,EAAwBriB,OAC1B,OAAIoiB,EAA0BM,KAAO,IAC5B/C,EAAAA,EAAAA,IAAwBkC,EAAoB,CAACjC,YAAa,IAAMC,eAAgB,GAAKC,QAAS,GAAI7a,UAAW,KAAM8a,SAAU,WAE7H4C,EAAAA,EAAKxkB,KAAK2O,UAAUoT,MAAK,kBAAM0C,EAAAA,EAAAA,IAAoB,CAACF,IAAK,GAAG,IA4CvEG,EAxCuBR,EACpB/b,QAAO,SAACwc,EAAkBC,GAAY,IAAAC,EACjCC,EAAWH,EAAiBlE,KAC5BE,EAAUiE,EAAQnE,KAGtB,OAAIE,EAAQoE,UAAUD,IAAaA,EAASE,eAAetE,EAAAA,EAAKlG,UAAUqG,oBAA4B8D,EAClGG,EAASC,UAAUpE,IAAYD,EAAAA,EAAI,IAAKkE,EAAQ9C,SAASkD,eAA6B,QAAfH,EAACnE,EAAAA,EAAKlG,iBAAS,IAAAqK,OAAA,EAAdA,EAAgBhE,oBAA4B+D,GAEpHK,EAAQN,EAAkBC,IAC3BN,EAAwBK,EAAkBC,IAC1CN,EAAwBK,EAAkBV,IAEzCgB,EAAQL,EAASD,IAClBL,EAAwBK,EAAkBC,IAC1CN,EAAwBM,EAASX,GAEhCiB,EAAqBnB,EAA4BY,GAA0BA,EAC3EO,EAAqBnB,EAA4Ba,GAAiBA,EAClEM,EAAqBP,EAAkBZ,KAAgCmB,EAAqBN,EAASb,GAAoCY,EACzIO,EAAqBN,EAASb,KAAgCmB,EAAqBP,EAAkBZ,GAAoCa,EAEzIO,EAA0BR,EAAkBZ,KAAgCoB,EAA0BP,EAASb,GAAoCY,EACnJQ,EAA0BP,EAASb,KAAgCoB,EAA0BR,EAAkBZ,GAAoCa,EAEnJD,EAAiB7C,QAAQsD,QAAQ,wBAA0B1E,EAAAA,EAAKlG,UAAUwG,WAAWH,mBAAmBwE,iBACtGF,EAA0BR,EAAkBZ,IAA+BoB,EAA0BP,EAASb,GACzGuB,EAAyBvB,EAA4BY,EAAkBC,GAEvEW,EAAuBZ,EAAkBC,EAASb,GAGvDoB,EAA0BR,EAAkBV,IAA8BkB,EAA0BP,EAASX,GACxGqB,EAAyBrB,EAA2BU,EAAkBC,GAEtEW,EAAuBZ,EAAkBC,EAASX,GApBUW,EAJSD,CA2BlF,IAE+B,CAAE7d,UAAW,MAEhD,MAAO,GAAkB,SAAdA,EAAsB,CAC/B,IAAK4c,EAAoB,OAAOc,EAAAA,EAAKgB,SAASnC,YAAY,CAAEvc,UAAW,SAEvE,IAAI6c,EAAiB/c,MAAMC,KAAK+c,SAASC,iBAAiB,4BAA4BlN,QAAO,SAAA8J,GAAI,OAA0B,OAAtBA,EAAKqD,eAyQ3FhC,EAzQ8HrB,EA2QtH,UADnBgF,EAAQC,OAAOC,iBAAiB7D,IACzBnT,SAA2C,WAArB8W,EAAMG,YAA6C,MAAlBH,EAAMI,SAAqC,OAAlBJ,EAAMI,SAFrG,IAAmB/D,EACX2D,CA1Q8I,IAC9I1B,EAA6BC,EAA2BN,EAAoB,MAC5EO,EAA4BD,EAA2BN,EAAoB,QAG3EQ,EAFiBC,EAAmBR,GAGrChN,QAAO,SAAAyN,GAAI,OAAIa,EAAQb,EAAML,KACxBO,EAAwBF,EAAML,KAyOV+B,EAxOE1B,EAyO1B2B,EAAiBC,EAAAA,EAAoBC,cAIxCH,EAAWvB,KAAO,GAAKuB,EAAWvB,KAAOwB,GACzCD,EAAWI,QAAU,GAAKJ,EAAWI,QAAUH,MA7OvCrF,EAAAA,EAAKlG,UAAUoI,kBAAoBlC,EAAAA,EAAKlG,UAAUuK,UAAUX,EAAK3D,QACnE2D,EAAKtC,UAAY4B,EAsO5B,IAAgCoC,EACxBC,CAvOsC,IAE1C,GAAuC,IAAnC7B,EAAwBriB,OAAc,CACxC,IAAI0f,EAAiB4E,EAAAA,EAAUC,QAAQ7E,eACvC,OAAOC,EAAAA,EAAAA,IAAwBD,EAAgB,CAACE,YAAa,IAAMC,eAAgB,GAAKC,QAAS,GAAI7a,UAAW,OAAQ8a,SAAU,SAAUe,KAAM,UACpJ,CA6CA+B,EA3CuBR,EACpB/b,QAAO,SAACke,EAAkBzB,GAAY,IAAA0B,EAAAC,EACjCzB,EAAWuB,EAAiB5F,KAC5BE,EAAUiE,EAAQnE,KAGtB,OAAIE,EAAQ6F,iBAAmB1B,EAASC,UAAUpE,GAAiBiE,EAC/DE,EAAS0B,iBAAmB7F,EAAQoE,UAAUD,GAAkBuB,GAUhEhC,EAASgC,EAAkBzB,IAC5BN,EAAwB+B,EAAkBzB,IAC1CN,EAAwB+B,EAAkBtC,IAEzCM,EAASO,EAASyB,IACnB/B,EAAwB+B,EAAkBzB,IAC1CN,EAAwBM,EAASb,GAEhCmB,EAAqBjB,EAA2BoC,GAA0BA,EAC1EnB,EAAqBjB,EAA2BW,GAAiBA,EACjEM,EAAqBmB,EAAkBpC,KAA+BiB,EAAqBN,EAASX,GAAmCoC,EACvInB,EAAqBN,EAASX,KAA+BiB,EAAqBmB,EAAkBpC,GAAmCW,EAEvIyB,EAAiBvE,QAAQsD,QAAQ,yBAAwC,QAAnBkB,EAAK5F,EAAAA,EAAKlG,iBAAS,IAAA8L,GAAiB,QAAjBC,EAAdD,EAAgBtD,uBAAe,IAAAuD,OAAjB,EAAdA,EAAiClB,kBAC1FF,EAA0BkB,EAAkBpC,KAA+BkB,EAA0BP,EAASX,GAAmCoC,EACjJlB,EAA0BP,EAASX,KAA+BkB,EAA0BkB,EAAkBpC,GAAmCW,EACjJuB,EAAAA,EAAUC,QAAQK,MAAM,GAAG3E,UAAYuE,EAAiBvE,QAAgBuE,EACxEF,EAAAA,EAAUC,QAAQK,MAAM,GAAG3E,UAAY8C,EAAQ9C,QAAgB8C,EAC5DU,EAAyBvB,EAA4BsC,EAAkBzB,GAE1EO,EAA0BkB,EAAkBtC,KAAgCoB,EAA0BP,EAASb,GAAoCsC,EACnJlB,EAA0BP,EAASb,KAAgCoB,EAA0BkB,EAAkBtC,GAAoCa,EAChJU,EAAyBrB,EAA2BoC,EAAkBzB,GAhBPA,EAJSyB,CAsBnF,IAE+B,CAAEvf,UAAW,QAEhD,MAAO,GAAkB,SAAdA,EAAsB,CAC/B,IAAI6c,EAAiBjD,EAAAA,EAAKlG,UAAUsH,QAAQsD,QAAQ,sBAAsBvB,iBAAiB,2BACvF6C,EAAuB1C,EAA2BN,EAAoB,SACtEiD,EAAiBxC,EAAmBR,GAEpCO,EAA0ByC,EAAehQ,QAAO,SAAAmP,GAAU,OAAIA,EAAWc,MAAQF,EAAqBE,KAAK,IAI/G,IAFA1C,GADAA,EAA0BA,EAAwBvN,QAAO,SAAAmP,GAAU,OAAIxB,EAAwBwB,EAAYY,EAAqB,KAC9E/P,QAAO,SAAAmP,GAAU,OAAIA,EAAWhE,UAAY4B,CAAkB,KAEpF7hB,OAAS,EAAG,CACtC,IAAIglB,EAAoB3C,EACrB/b,QAAO,SAAC0e,EAAmBjC,GAC1B,OAAIiC,EAAkBX,SAAWQ,EAAqBR,QAAUtB,EAAQsB,SAAWQ,EAAqBR,OAAeW,EACnHjC,EAAQsB,SAAWQ,EAAqBR,QAAUW,EAAkBX,SAAWQ,EAAqBR,OAAetB,EACnHiC,EAAkBD,MAAQhC,EAAQgC,MAAcC,EAChDA,EAAkBD,MAAQhC,EAAQgC,MAAchC,EAChDiC,EAAkBD,QAAUhC,EAAQgC,MACLE,EAAsBJ,EAAsBG,EAAmB,UAChEC,EAAsBJ,EAAsB9B,EAAS,UACrBA,EAAUiC,OAH5E,CAKF,IAEF,GAAIA,EACF,OAAOnC,EAAemC,EAE1B,CAGA,IAAIE,EA2WiD,QAAhDC,EA3WkEtD,GA2WV,KAAO,OA1WhEuD,EAuXR,SAA4CC,EAAaH,GACvD,MAAgC,OAA5BA,EACiF,QAA5EC,EAA+BG,EAA2BD,IAA0B,QAAU,OAChE,SAA5BH,EACsE,QAAxEC,EAA+BI,EAAuBF,IAA0B,OAAS,aAD3F,CAGT,CA7XoCG,CAAmC3D,EAAoBqD,GACnFO,EAA2D,OAA5BP,EAAmC1C,EAAWY,EAC7EsC,EAA0D,OAA5BR,EAAmC9B,EAAUZ,EAC3EmD,EAA8D,UAA9BP,EAAwCQ,EAAgBC,EAM5F,IAFAxD,GADAA,GADAA,EAA0ByC,EAAehQ,QAAO,SAAAmP,GAAU,OAAIwB,EAA6BxB,EAAYY,EAAqB,KAC1E/P,QAAO,SAAAmP,GAAU,OAAKxB,EAAwBwB,EAAYY,EAAqB,KAC/E/P,QAAO,SAAAmP,GAAU,OAAIA,EAAWhE,UAAY4B,CAAkB,KAEpF7hB,OAAS,EAAG,CACtC,IAAI8lB,EAAsBzD,EACvB/b,QAAO,SAACwf,EAAqB/C,GAC5B,OAAI2C,EAA4BI,EAAqB/C,KAAaN,EAAwBqD,EAAqB/C,GAAiB+C,EAC5HJ,EAA4B3C,EAAS+C,KAAyBrD,EAAwBqD,EAAqB/C,GAAiBA,EACzH4C,EAA8BG,EAAqB/C,EAC5D,IAEF,GAAI+C,EACF,OAAOjD,EAAeiD,EAE1B,CAGA,IAAIC,EA2ViD,QAAhDZ,EA3V8EtD,GA2VtB,OAAS,KA1VlEmE,EAAmCC,EAA0CpE,EAAoBkE,GACjGG,EAAyD,OAAnCH,EAA0CvD,EAAWY,EAC3E+C,EAA4E,UAArCH,EAA+CJ,EAAgBC,EAEtGO,EAAsBtB,EACvBxe,QAAO,SAAC8f,EAAqBrD,GAC5B,OAAImD,EAAoBE,EAAqBrD,KAAcN,EAAwB2D,EAAqBrD,GAAiBqD,EACrHF,EAAoBnD,EAASqD,KAA0B3D,EAAwB2D,EAAqBrD,GAAiBA,EAClHoD,EAAqCC,EAAqBrD,EACnE,IAEF,GAAIqD,EACF,OAAOvD,EAAeuD,EAG1B,MAAO,GAAkB,UAAdnhB,EAAuB,CAChC,IAAI6c,EAAiBjD,EAAAA,EAAKlG,UAAUsH,QAAQsD,QAAQ,sBAAsBvB,iBAAiB,2BACvF6C,EAAuB1C,EAA2BN,EAAoB,QACtEiD,EAAiBxC,EAAmBR,GAEpCO,EAA0ByC,EAAehQ,QAAO,SAAAmP,GAAU,OAAIA,EAAWoC,KAAOxB,EAAqBwB,IAAI,IAI7G,IAFAhE,GADAA,EAA0BA,EAAwBvN,QAAO,SAAAmP,GAAU,OAAIxB,EAAwBwB,EAAYY,EAAqB,KAC9E/P,QAAO,SAAAmP,GAAU,OAAIA,EAAWhE,UAAY4B,CAAkB,KAEpF7hB,OAAS,EAAG,CACtC,IAAIsmB,GAAoBjE,EACrB/b,QAAO,SAACggB,EAAmBvD,GAC1B,OAAIuD,EAAkBjC,SAAWQ,EAAqBR,QAAUtB,EAAQsB,SAAWQ,EAAqBR,OAAeiC,EACnHvD,EAAQsB,SAAWQ,EAAqBR,QAAUiC,EAAkBjC,SAAWQ,EAAqBR,OAAetB,EACnHuD,EAAkBD,KAAOtD,EAAQsD,KAAaC,EAC9CA,EAAkBD,KAAOtD,EAAQsD,KAAatD,EAC9CuD,EAAkBD,OAAStD,EAAQsD,MAyErBE,EAxEsBxD,GAwE7ByD,EAxEUF,GAyEhB5D,IAAM6D,EAAM7D,IAAM8D,EAAQD,QA1E/B,EAyEV,IAAqBC,EAAOD,CAtEpB,IAEF,GAAID,GACF,OAAOzD,EAAeyD,GAE1B,CAGA,IAAIpB,GAmSR,SAAmDG,GACjD,MAAuD,QAAhDF,EAA+BE,GAAyB,OAAS,IAC1E,CArSkCoB,CAA0C5E,GACpE4D,GAA2D,OAA5BP,GAAmC1C,EAAWY,EAC7EsC,GAA0D,OAA5BR,GAAmC9B,EAAUZ,EAC3EmD,GAAqE,UAArCK,GAA+CJ,EAAgBC,EAMnG,IAFAxD,GADAA,GADAA,EAA0ByC,EAAehQ,QAAO,SAAAmP,GAAU,OAAIwB,GAA6BxB,EAAYY,EAAqB,KAC1E/P,QAAO,SAAAmP,GAAU,OAAKxB,EAAwBwB,EAAYY,EAAqB,KAC/E/P,QAAO,SAAAmP,GAAU,OAAIA,EAAWhE,UAAY4B,CAAkB,KAEpF7hB,OAAS,EAAG,CACtC,IAAI0mB,GAAuBrE,EACxB/b,QAAO,SAACogB,EAAsB3D,GAC7B,OAAI2C,GAA4BgB,EAAsB3D,KAAaN,EAAwBiE,EAAsB3D,GAAiB2D,EAC9HhB,GAA4B3C,EAAS2D,KAA0BjE,EAAwBM,EAAS2D,GAA8B3D,EAC3H4C,GAA8Be,EAAsB3D,EAC7D,IAEF,GAAI2D,GACF,OAAO7D,EAAe6D,GAE1B,CAGA,IAAIX,GAoRR,SAAwDV,GACtD,MAAuD,QAAhDF,EAA+BE,GAAyB,KAAO,MACxE,CAtRyCsB,CAA+C9E,GAChFmE,GAAmCC,EAA0CpE,EAAoBkE,IACjGa,GAAsE,OAAnCb,GAA0C,MAAQ,SACrFG,GAAyD,OAAnCH,GAA0CvD,EAAWY,EAC3EyD,GAA4E,UAArCb,GAA+CJ,EAAgBC,EAEtGiB,GAAkBhC,EACnBxe,QAAO,SAACwgB,EAAiB/D,GACxB,OAAImD,GAAoBY,EAAiB/D,GAAiB+D,EACtDZ,GAAoBnD,EAAS+D,GAAyB/D,EACtD+D,EAAgBF,MAAsC7D,EAAQ6D,IACzDC,GAAqCC,EAAiB/D,QAD/D,CAGF,IAEF,GAAI+D,GACF,OAAOjE,EAAeiE,GAE1B,CACF,CAEA,SAAStE,EAASgE,EAAOD,GACvB,OAAIC,EAAMnC,OAASkC,EAAMlC,MAE3B,CAEA,SAASjB,EAAQoD,EAAOD,GACtB,OAAIC,EAAM9D,IAAM6D,EAAM7D,GAExB,CAEA,SAASkD,EAAcY,EAAOD,GAC5B,OAAOC,EAAMzB,MAAQwB,EAAMxB,MAAQyB,EAAQD,CAC7C,CAEA,SAASV,EAAaW,EAAOD,GAC3B,OAAOC,EAAMH,KAAOE,EAAMF,KAAOG,EAAQD,CAC3C,CAMA,SAASlD,EAAqBmD,EAAOD,GACnC,OAAIC,EAAMH,KAAOE,EAAMF,MAAQG,EAAMzB,MAAQwB,EAAMxB,KAErD,CAEA,SAASzB,EAA0BkD,EAAOD,GACxC,OAAQC,EAAMH,KAAOE,EAAMxB,OAASwB,EAAMF,KAAOG,EAAMzB,KACzD,CAEA,SAAStC,EAAwB+D,EAAOD,GACtC,OACGC,EAAM9D,IAAM6D,EAAMlC,QAAUmC,EAAMnC,OAASkC,EAAM7D,KACjD6D,EAAM7D,IAAM8D,EAAMnC,QAAUkC,EAAMlC,OAASmC,EAAM9D,GAEtD,CAYA,SAASgB,EAAuB8C,EAAOD,EAAOQ,GAC5C,IAAMC,GAAiBR,EAAMH,KAAOG,EAAMzB,OAAS,EAC7CkC,GAAiBV,EAAMF,KAAOE,EAAMxB,OAAS,EAC7CmC,GAAkBH,EAAWV,KAAOU,EAAWhC,OAAS,EAK9D,OAHwBtM,KAAK0O,IAAIH,EAAgBE,GACzBzO,KAAK0O,IAAIF,EAAgBC,GAGxCV,EAEAD,CAEX,CAOA,SAAS1D,EAAeN,EAAMrjB,GAG5B,OAAIqjB,EAAKG,IAAMyB,EAAAA,EAAoBzB,IAAMmB,OAAOuD,cAFF,IAGrCzH,EAAAA,EAAAA,IAAwB4C,EAAKtC,QAAS,CAACL,YAAa,GAAKC,eAAgB,GAAKC,QAAS,GAAI7a,UAAW,OAAQ8a,SAAU,WACtHwC,EAAK8B,OAASF,EAAAA,EAAoBzB,KAJC,IAKrC/C,EAAAA,EAAAA,IAAwB4C,EAAKtC,QAAS,CAACL,YAAa,GAAKC,eAAgB,GAAKC,QAAS,GAAI7a,UAAW,KAAM8a,SAAU,WAEhH,IAAIlB,EAAAA,EAAK0D,EAAKtC,SACfb,OAAOlgB,EAEvB,CAEA,SAASukB,EAAyB4D,EAAcC,EAAgBC,GAC9D,SAASC,EAA2BhB,EAAOD,GACzC,OAAO9N,KAAKC,IAAI,EAAGD,KAAKgP,IAAIjB,EAAMzB,MAAOwB,EAAMxB,OAAStM,KAAKC,IAAI8N,EAAMH,KAAME,EAAMF,MACrF,CAKA,OAHiBmB,EAA2BH,EAAcC,GACzCE,EAA2BH,EAAcE,GAGjDD,EAEAC,CAEX,CAEA,SAAStC,EAAsBuB,EAAOD,EAAOzF,GAI3C,OAHqB,iBAAV0F,IAAoBA,EAAKpI,EAAA,GAAM0C,EAAO0F,IAC5B,iBAAVD,IAAoBA,EAAKnI,EAAA,GAAM0C,EAAOyF,IAEzCzF,GACN,IAAK,OACH,OAAOrI,KAAK0O,IAAIX,EAAMH,KAAOE,EAAMF,MACrC,IAAK,QACH,OAAO5N,KAAK0O,IAAIX,EAAMzB,MAAQwB,EAAMxB,OACtC,IAAK,MACH,OAAOtM,KAAK0O,IAAIX,EAAM9D,IAAM6D,EAAM7D,KACpC,IAAK,SACH,OAAOjK,KAAK0O,IAAIX,EAAMnC,OAASkC,EAAMlC,QACvC,IAAK,SACH,OAAO5L,KAAK0O,KAAMX,EAAMH,KAAOG,EAAMzB,OAAO,GAAOwB,EAAMF,KAAOE,EAAMxB,OAAO,GAC/E,QAEE,OAAO,KAEb,CAEA,SAASzC,EAAmBoF,GAC1B,IAEkCC,EAF5B9hB,EAAS,GAAG+hB,EAAAC,EAEIH,GAAY,IAAlC,IAAAE,EAAA3R,MAAA0R,EAAAC,EAAAE,KAAAC,MAAoC,KAAzB9H,EAAO0H,EAAApb,MACZyb,EAAiB/H,EACjBA,EAAQsD,QAAQ,kCAClByE,EAAiB/H,EAAQsD,QAAQ,iCAGnC,IAAM0E,EAAWljB,MAAMC,KAAKgjB,EAAeE,kBACvCC,EAAUC,EAAA,CAAKnI,QAAAA,EAASrB,KAAMC,EAAAA,EAAI,IAAKoB,GAAU7f,KAAM6f,EAAQoI,WAAcrnB,KAAKsnB,MAAMtnB,KAAKC,UAAU+mB,EAAeO,2BAE1H,GAAItI,EAAQsD,QAAQ,gCAClB1d,EAAO/D,KAAKqmB,QAEZ,IAAK,IAAI5d,EAAI,EAAGA,EAAI0d,EAASjoB,OAAQuK,IAAK,CACxC,IAAMgY,EAAO0F,EAAS1d,GACtB1E,EAAO/D,KAAK,CACVyV,EAAGgL,EAAKhL,EACRC,EAAG+K,EAAK/K,EACRuF,MAAOwF,EAAKxF,MACZyL,OAAQjG,EAAKiG,OACb9F,IAAKH,EAAKG,IACVqC,MAAOxC,EAAKwC,MACZV,OAAQ9B,EAAK8B,OACbgC,KAAM9D,EAAK8D,KACXpG,QAASA,EACT7f,KAAM6f,EAAQoI,UACdzJ,KAAMC,EAAAA,EAAI,IAAKoB,IAEnB,CAEJ,CAAC,OAAAwI,GAAAb,EAAAc,EAAAD,EAAA,SAAAb,EAAAe,GAAA,CAED,OAAO9iB,CACT,CAEA,SAASsc,EAA2BlC,EAAShb,GAC3C,IAAIkjB,EAAannB,KAAKsnB,MAAMtnB,KAAKC,UAAUgf,EAAQsI,0BAC/CK,EAqDN,SAA+BC,GAC7B,IAAMC,EAAmB,GAGzBD,EAAW3T,MAAK,SAACsR,EAAOD,GAAK,OAAKC,EAAM9D,IAAM6D,EAAM7D,GAAG,IAIvD,IAFA,IAAIqG,EAAcF,EAAW,GAEpBte,EAAI,EAAGA,EAAIse,EAAW7oB,OAAQuK,IAAK,CAC1C,IAAMye,EAAWH,EAAWte,GAGxBwe,EAAYrG,MAAQsG,EAAStG,KAE/BqG,EAAY1C,KAAO5N,KAAKgP,IAAIsB,EAAY1C,KAAM2C,EAAS3C,MACvD0C,EAAYhE,MAAQtM,KAAKC,IAAIqQ,EAAYhE,MAAOiE,EAASjE,SAGzD+D,EAAiBhnB,KAAKinB,GAGtBA,EAAcC,EAElB,CAKA,OAFAF,EAAiBhnB,KAAKinB,GAEfD,CACT,CAlFsBG,CA+BtB,SAA2BhJ,GACzB,IAAMiJ,EAAiB,GAkBvB,OAhBA,SAASC,EAAS/U,GAChB,GAAIA,EAAKgV,WAAaC,KAAKC,UAAW,CACpC,IAAMC,EAAQxH,SAASyH,cACvBD,EAAME,mBAAmBrV,GAEzB,IADA,IAAMsV,EAAQH,EAAMrB,iBACX3d,EAAI,EAAGA,EAAImf,EAAM1pB,OAAQuK,IAChC2e,EAAepnB,KAAK4nB,EAAMnf,GAE9B,MAAO,GAAI6J,EAAKgV,WAAaC,KAAKM,aAAc,KACPC,EADOC,EAAAhC,EACtBzT,EAAK0V,YAAU,IAAvC,IAAAD,EAAA5T,MAAA2T,EAAAC,EAAA/B,KAAAC,MACEoB,EADkBS,EAAArd,MAEnB,OAAAkc,GAAAoB,EAAAnB,EAAAD,EAAA,SAAAoB,EAAAlB,GAAA,CACH,CACF,CAEAQ,CAASlJ,GACFiJ,EAAevkB,KAAI,SAAA4d,GAAI,OAAIvhB,KAAKsnB,MAAMtnB,KAAKC,UAAUshB,GAAM,GACpE,CAnD4CwH,CAAkB9J,IAE5D,GAA6B,IAAzB2I,EAAc5oB,QAAkCigB,EAyB/BsD,QAAQ,gCAzBiC,OAAA6E,EAAA,CAASnI,QAAAA,GAAYkI,GACnF,GAA6B,IAAzBS,EAAc5oB,OAAc,OAAO,KAEvC,OAAOiF,GACL,IAAK,OACH,OAAAmjB,EAAA,CAASnI,QAAAA,EAASrB,KAAMC,EAAAA,EAAI,IAAKoB,IAAa2I,EAActiB,QAAO,SAAC0jB,EAAcjB,GAChF,OAAOA,EAAYhE,MAAQiF,EAAajF,MAAQiF,EAAejB,CACjE,KACF,IAAK,QACH,OAAAX,EAAA,CAASnI,QAAAA,EAASrB,KAAMC,EAAAA,EAAI,IAAKoB,IAAa2I,EAActiB,QAAO,SAAC2jB,EAAelB,GACjF,OAAOA,EAAY1C,KAAO4D,EAAc5D,KAAQ4D,EAAgBlB,CAClE,KACF,IAAK,KACH,OAAAX,EAAA,CAASnI,QAAAA,EAASrB,KAAMC,EAAAA,EAAI,IAAKoB,IAAa2I,EAActiB,QAAO,SAAC4jB,EAAenB,GACjF,OAAOA,EAAY1E,OAAS6F,EAAc7F,OAAS0E,EAAcmB,CACnE,KACF,IAAK,OACH,OAAA9B,EAAA,CAASnI,QAAAA,EAASrB,KAAMC,EAAAA,EAAI,IAAKoB,IAAa2I,EAActiB,QAAO,SAAC6jB,EAAYpB,GAC9E,OAAOA,EAAYrG,IAAMyH,EAAWzH,IAAMqG,EAAcoB,CAC1D,KACF,QACE,MAAM,IAAIzd,MAAM,8BAMtB,CAyFA,SAASuZ,EAA0CZ,EAAaH,GAC9D,MAAgC,OAA5BA,EACiF,QAA5EC,EAA+BG,EAA2BD,IAA0B,OAAS,QAC/D,SAA5BH,EACsE,QAAxEC,EAA+BI,EAAuBF,IAA0B,QAAU,YAD5F,CAGT,CAEA,SAASE,EAAuBF,GAC9B,IAAI7B,EAAmB6B,EAAY9B,QAAQ,sBACvC6G,EAAWrlB,MAAMC,KAAKwe,EAAiBxB,iBAAiB,4BACxDqI,EAAmBD,EAASE,QAAQzL,EAAAA,EAAKlG,UAAUsH,SAEvD,OAAIoK,EAAmBD,EAASpqB,OAAS,EAChCoqB,EAASC,EAAmB,GAE5BxL,EAAAA,EAAKlG,UAAUsH,OAE1B,CAEA,SAASqF,EAA2BD,GAClC,IAAI7B,EAAmB6B,EAAY9B,QAAQ,sBACvC6G,EAAWrlB,MAAMC,KAAKwe,EAAiBxB,iBAAiB,4BACxDqI,EAAmBD,EAASE,QAAQzL,EAAAA,EAAKlG,WAE7C,OAAI0R,EAAmB,EACdD,EAASC,EAAmB,GAE5BxL,EAAAA,EAAKlG,UAAUsH,OAE1B,CAEA,SAASkF,EAA+BlF,GACtC,MAAuB,QAAhBA,EAAQ/H,IAAgB,OAUJ9X,EAP7B,SAA4B6f,GAC1B,KAAMA,EAAQ5L,aAAewK,EAAAA,EAAKlG,UAAUsH,QAAQsD,QAAQ,uBAC1DtD,EAAUA,EAAQ5L,WAEpB,OAAO4L,CACT,CAR6DsK,CAAmBtK,GAASoI,UAenE,IAAIpL,OAAO,MAAD7a,OAFb,iCAE4B,OAAAA,OAH5B,YAG0C,MAGxC8a,KAAK9c,GAAQ,MAAQ,OAR1C,IAA6BA,CAT7B,CCzjBA,IA8BMoqB,EAAwB,CAC5B,KAAQ7I,EAAgB8I,KAAK,KAAM,QACnC,GAAM9I,EAAgB8I,KAAK,KAAM,MACjC,KAAQ9I,EAAgB8I,KAAK,KAAM,QACnC,aAAchJ,EACd,WAAYA,EACZ,MAASE,EAAgB8I,KAAK,KAAM,SAEpC,EAAK9I,EAAgB8I,KAAK,KAAM,QAChC,EAAK9I,EAAgB8I,KAAK,KAAM,MAChC,EAAK9I,EAAgB8I,KAAK,KAAM,QAChC,UAAWhJ,EACX,QAASA,EACT,EAAKE,EAAgB8I,KAAK,KAAM,SAEhC,EAAKnL,EACL,EAAKA,EACL,cAAeA,EAEf,EAAKe,EACL,EAAKA,EAEL,OFqBF,WACE,OAAOL,EAAAA,EAAAA,GAAW2C,EAAAA,EAAK4B,QAAQmG,eAAgB,KAAM,CAAEC,YAAa,WACtE,EEtBE,EFYF,WAA2B,IAAA/I,EACrBgJ,EAAqB/L,EAAAA,EAAKlG,UAAUiS,mBAExC,OAAqB,QAArBhJ,EAAO/C,EAAAA,EAAKlG,iBAAS,IAAAiJ,OAAA,EAAdA,EAAgBiJ,WAAWC,YAAYhe,QAAQ,CAAEie,YAAY,IAAQ7K,MAAK,WAC/ErB,EAAAA,EAAK7Z,MAAK,eAAAge,EAAA,OAAoB,QAApBA,EAAMnE,EAAAA,EAAKlG,iBAAS,IAAAqK,OAAA,EAAdA,EAAgB6H,WAAWC,YAAY5L,gBAAgB8L,QAAQJ,EAAmB,IAAExL,OAAO,CAAEuL,YAAa,WAC5H,GACF,EEjBE,EFuBF,WACE,OAAO9G,OAAOoH,KAAKpH,OAAOqH,SAASC,KAAM,SAC3C,EExBE,WAAYxM,EACZ,UAAWA,EAEX,EFJF,WACEyM,UAAUC,UAAUC,UAAUrN,mBAAmB4F,OAAOqH,UAC1D,EEIE,MAAS,kBAAM7K,EAAmB,CAAC,EAAE,EACrC,aAAc,kBAAMA,EAAmB,CAAEC,QAAQ,GAAO,EACxD,aAAc,kBAAMD,EAAmB,CAAEC,QAAQ,GAAO,EACxD,YAAa,kBAAMD,EAAmB,CAAEC,QAAQ,EAAOC,QAAQ,GAAO,EACtE,iBAAkB,kBAAMF,EAAmB,CAAEC,QAAQ,EAAMC,QAAQ,GAAO,EAC1E,iBAAkB,kBAAMF,EAAmB,CAAEC,QAAQ,EAAMC,QAAQ,GAAO,EAE1E,cAAe,kBAAMF,EAAmB,CAAC,EAAE,EAC3C,mBAAoB,kBAAMA,EAAmB,CAAEC,QAAQ,EAAME,UAAU,GAAO,EAC9E,mBAAoB,kBAAMH,EAAmB,CAAEC,QAAQ,EAAME,UAAU,GAAO,EAC9E,kBAAmB,kBAAMH,EAAmB,CAAEC,QAAQ,EAAOC,QAAQ,EAAMC,UAAU,GAAO,EAC5F,uBAAwB,kBAAMH,EAAmB,CAAEC,QAAQ,EAAMC,QAAQ,EAAMC,UAAU,GAAO,EAChG,uBAAwB,kBAAMH,EAAmB,CAAEC,QAAQ,EAAMC,QAAQ,EAAMC,UAAU,GAAO,GAG5F+K,EAAiC,CACrC,IACA,IACA,KACA,QAGIC,EAAW,CACf,GAAI,OACJ,GAAI,QACJ,GAAI,KACJ,GAAI,OAEJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,IAAK,IACL,GAAI,IACJ,GAAI,IACJ,GAAI,IAEJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,IAEJ,GAAI,QACJ,EAAG,MACH,GAAI,SACJ,GAAI,QAEJ,IAAK,IAEL,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,KAjHJ3H,OAAO4H,iBAAiB,WAAW,SAAS/C,GAC1C,KAoHIgD,EAAgB3J,SAAS2J,kBACmB,aAA1BA,EAAchlB,SAAqD,UAA1BglB,EAAchlB,SAAuB,CAAC,OAAQ,WAAY,QAAS,SAAU,SAAU,MAAO,OAAO2S,SAASqS,EAAc/W,KAAK/N,gBArHhM,CAEA,IAAI+kB,GACDjD,EAAEkD,QAAU,QAAU,KACtBlD,EAAEmD,QAAU,QAAU,KACtBnD,EAAEnI,OAAS,OAAS,KACpBmI,EAAElI,SAAW,SAAW,IAEvBsL,EAAUN,EAAS9C,EAAEqD,SACrBC,EAAeL,EAAYG,EAO/B,GANI,CAAC,MAAO,OAAQ,KAAM,OAAQ,SAASzS,SAASyS,MAC3CpD,EAAEkD,SAAWlD,EAAEmD,UAAY,CAAC,OAAQ,SAASxS,SAASyS,IAC3DpD,EAAEuD,kBAIU,WAAZH,IAAyBjN,EAAAA,EAAKlG,UAChC,OFwCGqH,EAAAA,EAAAA,GACL2C,EAAAA,EAAAA,QACA,MEvCI9D,EAAAA,EAAKlG,WAAa4S,EAA+BlS,SAAS2S,IAC3DxB,EAAsBwB,IAAe,WAAW,KACxCxB,EAAsBwB,IAC/BrJ,EAAAA,EAAKgB,SAASnC,aAvBsB,CAmH1C,IACQkK,CA3FN,ICrCI,sBAAuBQ,UACzBA,QAAQC,kBAAoB,UAG9BD,QAAQE,aAAaF,QAAQG,MAAOtK,SAASvY,MAAOqa,OAAOqH,SAASC,MAEpEtH,OAAO4H,iBAAiB,YAAY,SAAC/C,GAAM,IAAA4D,EAAAC,EAGrC5B,EAFA6B,EAAgB9D,SAAQ,QAAP4D,EAAD5D,EAAG2D,aAAK,IAAAC,GAARA,EAAUE,cAAgB,IAAI3N,EAAAA,EAAK6J,SAAQ,QAAP6D,EAAD7D,EAAG2D,aAAK,IAAAE,OAAP,EAADA,EAAUC,eAAiB,KAIhF7B,EADEhI,EAAAA,EAAK4B,QAAQmG,eAAe+B,OAAO9J,EAAAA,EAAK/Y,IAAI8gB,gBAChC,SAEA,WAGhB1K,EAAAA,EAAAA,GACE2C,EAAAA,EAAK/Y,IACL4iB,GAAiB7J,EAAAA,EAAK/Y,IAAIuV,WAC1B,CAAEwL,YAAAA,EAAa+B,cAAc,EAAMC,UAAU,EAAMC,mBAAmB,GAE1E,KCnBF5M,EAAAA,EAAAA,GACE2C,EAAAA,EAAKkK,QACLhO,EAAAA,EAAKiO,gBAAkBjO,EAAAA,EAAK7Z,MAAK,kBAAM2d,EAAAA,EAAKkK,QAAQ1N,UAAU,IAC9D,CAAEwL,YAAa,UAAWoC,aAAa,EAAMH,mBAAmB,sGCwClE,QAtCA,SAAqBI,EAAeC,GAA4B,IAAd/tB,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC3D,IAAK8iB,EAAAA,EAAU4I,OAAOF,GAAgB,OAAOG,EAAAA,EAAAA,IAAcH,EAAe9tB,GAC1EA,EAAQkuB,kBAAoBluB,EAAQmuB,oBAAsB1K,EAAAA,EAAK4B,QAAQ+I,cAAcN,IAErFO,EAAAA,EAAAA,IAAmBP,EAAeC,EAAc/tB,GAASghB,MAAK,WAG5D,GAFAoE,EAAAA,EAAU4I,OAAOF,GAAeQ,YAChCC,EAAAA,EAAAA,IAAST,GACLC,IAAiBA,UAAAA,EAAchN,SAA0C,OAA/BgN,SAAAA,EAAcS,iBAAwB1N,EAAAA,EAAAA,GAAWgN,EAAe,KAAM9tB,GACpHyjB,EAAAA,EAAKgL,SAAQV,aAAY,EAAZA,EAAcW,UAAWZ,EAAe9tB,GACrD2f,EAAAA,EAAKgP,qBAAqBZ,GAAgBD,EAAc7N,YACxDN,EAAAA,EAAKiP,qBAAqBb,GAAgBD,EAAc7N,YACxD,IAAI4O,GAASC,EAAAA,EAAAA,IAAUhB,EAActC,eAAexoB,MAAOhD,GAC3D6iB,SAASvY,MAAQwjB,EAAciB,UAE/B,IAAIC,EAUc,SAACxuB,EAAWR,GAGhC,IAFA,IAAIgvB,EAAoB,GAEjBxuB,GAAW,KAAAyuB,EACQ,YAAxBjvB,EAAQyrB,YAA4BjrB,EAAU0uB,gBAAkB1uB,EAAUoN,UAC1EohB,EAAkBpsB,KAAKpC,GACnBA,EAAUyf,aAAgC,QAApBgP,EAAAzuB,EAAUyf,kBAAU,IAAAgP,GAApBA,EAAsBlD,QAChDpM,EAAAA,EAAKwP,8BAA8B3uB,EAAUyf,YAC7Czf,EAAYA,EAAUwf,eACxB,CAEA,OAAOgP,CACT,CAtB4BI,CAActB,EAActtB,UAAWR,GAI/D,OAHA8tB,EAActtB,UAAU6uB,oBACxBC,YAAW,kBAAM3P,EAAAA,EAAK4P,QAAQ3Z,QAAO,SAAA8J,GAAI,OAAIA,EAAK8P,QAAQ,IAAElvB,SAAQ,SAAAof,GAAI,OAAI4P,YAAW,kBAAM5P,EAAKyC,QAAQ,CAAE0J,YAAY,GAAO,GAAC,GAAC,KAE1H4D,EAAAA,EAAAA,IAAkB3B,EAAeC,EAAc/tB,GAASghB,MAAK,WAClEgO,EAAkB1uB,SAAQ,SAAAE,GAAS,OAAIA,EAAUoN,SAAS,KAAKihB,EAAOa,MACxE,GACF,GACF,8gBC1BA,SAASZ,EAAU9rB,EAAO2sB,GACxB,IAAIC,EAAmB/M,SAASgN,cAAc,uBAAD3sB,OAAwBF,EAAMob,aAAY,OAMvF,OALAwR,EAAiBlL,MAAM9W,QAAU,QACjCgiB,EAAiBlL,MAAMI,QAAU,KACE,YAA/B6K,EAAelE,cACjBmE,EAAiBlL,MAAMI,QAAU,QAE5B,CAAE4K,KAAM,WAAQE,EAAiBlL,MAAMI,QAAU,MAAO,EACjE,CAkCA,SAASmJ,EAAc1f,EAAMohB,GAE3B,GADA5f,QAAQ8L,MAAM,qCAAsCtN,EAAKtJ,QACrDsJ,EAAKzN,OAAS,EAEhB,OADAiP,QAAQC,IAAI,UAAWzB,EAAKuhB,mBAAmB7qB,SACxC+X,EAAAA,EAAAA,GAAYzO,EAAKuhB,mBAAoB,KAAM,CAACrE,YAAa,UAAWsE,qBAAqB,IAC3F,GAAIJ,EAAeK,gBAIxB,MAAM,IAAIxiB,MAAM,gDAFhB,OADAuC,QAAQ8L,MAAM,iEAAmE4H,EAAAA,EAAAA,UAC1E3C,EAAAA,EAAAA,GAAW2C,EAAAA,EAAAA,QAAc,KAAM,CAAEuM,iBAAiB,EAAMvE,YAAa,UAAWsE,qBAAqB,GAIhH,CAEA,IAAMxB,EAAW,SAACT,GAlBhBjoB,MAAMC,KAAK+c,SAASC,iBAAiB,gBAAgBxiB,SAAQ,SAAAuuB,GAC3DA,EAAOnK,MAAM9W,QAAU,MACzB,IAdA/H,MAAMC,KAAK+c,SAASoN,qBAAqB,MAAM3vB,SAAQ,SAAC6lB,GACtDA,EAAY+J,UAAUC,OAAO,mBAC/B,IAjBF,SAAgCrC,IAG9B,SAASsC,EAA0BC,EAAevC,GAChDjoB,MAAMC,KAAKuqB,EAAczF,YACtBhV,QAAO,SAAAmL,GAAO,MAAwB,YAApBA,EAAQvZ,OAAqB,IAC/ClH,SAAQ,SAAAygB,GACP,IAAIuP,EAAmBlL,EAAAA,EAAS,IAAKrE,GAChCuP,EAAiB/hB,KAAKgiB,KAAKzC,IAAgBwC,EAAiBE,gBACjEJ,EAA0BrP,EAAS+M,EACrC,GACJ,CAVAsC,CAA0BK,EAAAA,GAAiB3C,EAW7C,CAoCE4C,CAAuB5C,GA3BvBjoB,MAAMC,KAAK+c,SAASC,iBAAiB,6BAA6BxiB,SAAQ,SAACkgB,GACzEA,EAAe0P,UAAUC,OAAO,0BAClC,GA2BF,EAEA,SAAS1P,EAAwBM,EAAS/gB,GACxC,KAAM+gB,aAAmB4P,SAAU,MAAM,IAAInjB,MAAM,2DACnD,IAKIojB,EALElQ,EAAoE1gB,EAApE0gB,YAAaC,EAAuD3gB,EAAvD2gB,eAAgBC,EAAuC5gB,EAAvC4gB,QAAS7a,EAA8B/F,EAA9B+F,UAAW8a,EAAmB7gB,EAAnB6gB,SAAUe,EAAS5hB,EAAT4hB,KAE7DiP,EAAc9P,EAAQsI,wBACtByH,EAAwC7L,EAAAA,EAAoBC,cAAgBxE,EAI9EkQ,EADW,WAAThP,EAC4BiP,EAAY1L,OAASF,EAAAA,EAAoBzB,IAAMyB,EAAAA,EAAoB8L,cAC/E,WAATnP,EACsBiP,EAAYrN,IAAMyB,EAAAA,EAAoBzB,IAAMyB,EAAAA,EAAoB8L,cAAkBF,EAAYvH,OAAS,EAExGuH,EAAYrN,IAAMyB,EAAAA,EAAoBzB,IAAMyB,EAAAA,EAAoB8L,cAIxE,MAApBhQ,EAAQvZ,SAA6B,WAAToa,GAA8B,WAATA,IAEpB,WAATA,EAAoB,EAAI,KAAOiP,EAAY1L,OAAS0L,EAAYrN,KADtE,GACuFsN,IAErGpQ,EAAc,IACdoQ,EAAwC7L,EAAAA,EAAoBC,cAAgBxE,EAC5EkQ,EAA8BC,EAAYrN,IAAMyB,EAAAA,EAAoB8L,eAIxE,IAAIC,EAAeJ,EAA8BE,EAG7C7L,EAAAA,EAAoBgM,aAAehM,EAAAA,EAAoBC,cAAgB8L,GAAcjhB,QAAQ8L,MAAM,iEACvGmV,EAAezX,KAAKC,IAAI,EAAGD,KAAKgP,IAAIyI,EAAc/L,EAAAA,EAAoBgM,aAAehM,EAAAA,EAAoBC,gBAGzG,IACIgM,EADEC,EAAoBxQ,EAAiBsE,EAAAA,EAAoBC,cAAgBvE,EAAiByQ,IAG9FF,EADEF,EAAe/L,EAAAA,EAAoB8L,cACrBxX,KAAKgP,IAAIyI,EAAc/L,EAAAA,EAAoB8L,cAAgBI,GAE3D5X,KAAKC,IAAIwX,EAAc/L,EAAAA,EAAoB8L,cAAgBI,GAG7E,IAAIE,EAAeL,EAAe/L,EAAAA,EAAoB8L,eAAkB,EAGxE,GAAInQ,EAAS,CACX,IAAM0Q,EAAO/X,KAAK0O,IAAIhD,EAAAA,EAAoB8L,cAAgBG,GACtDK,EAAoC,MAApBxQ,EAAQvZ,UAAoBqpB,EAAYrN,IAAM,GAAKqN,EAAY1L,OAASF,EAAAA,EAAoBC,eAChHmM,GAAgBzQ,GAAYA,GAAY0Q,EAAO1Q,GAAa2Q,CAC9D,CAWA,MARkB,OAAdxrB,IACFsrB,EAAeA,GAAgBH,EAAgBjM,EAAAA,EAAoB8L,eAGnD,SAAdhrB,IACFsrB,EAAeA,GAAgBH,EAAgBjM,EAAAA,EAAoB8L,eAGjEM,EACK3N,iWAAmBwF,CAAC,CAAE1F,IAAK0N,EAAerQ,SAAAA,GAAa7gB,IAEvDwxB,QAAQC,SAAQ,EAE3B,CAEA,IAAIC,EAAmB,KACvB,SAASC,IACP,OAAOD,CACT,CAEA,IAAIE,EAAuB,KAE3B,SAASlO,EAAoB1jB,GAE3B,OADA4xB,EAAuB5xB,EACf0xB,EAAmB,IAAIF,SAAQ,SAASC,GAC9CxM,EAAAA,EAAoB4M,SAASD,GAC7B,IAAIE,EAAQ7M,EAAAA,EAAoB8L,cAC5BgB,EAAkB,KAClBC,EAAS,EA0Bb1C,YAxBoB,SAAd2C,IACJ,IAAMC,EAAWjN,EAAAA,EAAoB8L,cAUrC,GATIe,IAAUI,GAAaH,IAAiBA,EAAkBI,KAAKC,OAC/DN,IAAUI,IAAUH,EAAkB,MACtCD,IAAUI,GAAYF,EAAS,GACjC/M,EAAAA,EAAoB4M,SAASD,GAG/BE,EAAQI,EACRF,IAEID,GAAoBI,KAAKC,MAAQL,EAAkB,IAErD,OADAL,EAAmB,KACZD,GAAQ,GAGblY,KAAK0O,IAAIiK,EAAWlyB,EAAQwjB,KAAO,IACrCkO,EAAmB,KACnBD,GAAQ,IAERnC,WAAW2C,EAAa,GAE5B,GAEwB,GAC1B,GACF,CAEA,IAAMI,EAAoB,IACpBC,EAAyB,IACzBC,EAA6B,IAC7BC,EAAwB,GAE9B,SAASnE,EAAmBoE,EAAS1E,GAA4B,IAAArL,EAAd1iB,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC5D,IAAKmhB,EAAAA,EAAKgB,SAAU,OAAO+M,QAAQC,UACnC,IAAKgB,EAAQjyB,UAAW,OAAOgxB,QAAQC,UACvC,IAAKgB,EAAQC,eAAejP,EAAAA,EAAKgB,UAAW,OAAO+M,QAAQC,UAC3D,GAAIzxB,EAAQkhB,UAAYlhB,EAAQ2yB,sBAAwB3yB,EAAQ6tB,aAAuC,YAAxB7tB,EAAQyrB,YAA2B,OAAO+F,QAAQC,UACjI,GAAIhO,EAAAA,EAAK4B,QAAQkL,KAAKkC,GAAU,OAAOjB,QAAQC,UAC/C,GAAIhO,EAAAA,EAAKgB,SAASmO,YAAYH,GAASxR,UAAW,OAAOuQ,QAAQC,UAEjE,IAgEMpO,EAGAwP,EACAC,EApEFC,EAA6B,QAAdrQ,EAAA/C,EAAAA,EAAKlG,iBAAS,IAAAiJ,GAAdA,EAAgBsQ,yBAA2BrT,EAAAA,EAAKlG,UAAUwZ,cAAgBxP,EAAAA,EAAKgB,SAC9F7D,EAAU5gB,EAAQkzB,UAAY,KAAO,GAGrCC,GAAiB1P,EAAAA,EAAKgB,SAAS2J,cAAcqE,IAAYM,EAAaH,YAAYH,IAAUtM,aAC7FnmB,EAAQ0tB,qBAAsBK,SAAAA,EAAcqF,aAAcX,EAAQnO,mBAClEyJ,aAAY,EAAZA,EAAchN,UAAW0R,EAAQnO,iBAEhC5D,EAAwC,MAA1ByS,EAAc3rB,QAC7BmY,EAAAA,EAAI,IAAKwT,GAAeE,MAAQb,EAAwBH,EACxDjN,EAAAA,EAAS,IAAK+N,EAAche,YAAYke,MAAQd,EAA6BD,EAEhF,GAoDMjP,EApDe8P,EAoDA9J,wBAGfwJ,EAAmD,GAApC5N,EAAAA,EAAoBC,cACnC4N,EAAsD,GAApC7N,EAAAA,EAAoBC,cAMrC7B,EAAKG,KAAOqP,GAAgBxP,EAAK8B,QAAU2N,EA7DhD,OAAOtB,QAAQC,UAGjB,IAAI6B,EAAiB,IAAI9B,SAAQ,SAAAC,GAAO,OAAInC,WAAWmC,EAAS,IAAI,IAEpE,OAAQhR,EAAwB0S,EAAe,CAACzS,YAAAA,EAAaC,eAAgByQ,IAAUxQ,QAAAA,EAASC,SAAU,SAAUe,KAAM,QACvHZ,MAAK,SAACuS,GAAQ,OAAKA,GAAYD,CAAc,GAClD,CAEA,SAAS7D,EAAkB3B,EAAeC,GAA0B,IAAZ/tB,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAC,CAAC,EAC/D,GAAItC,EAAQkhB,SAAU,OAAOsQ,QAAQC,UACrC,IAAI5Q,EAAW7gB,EAAQyrB,aAAe,SAChC1lB,EAAc/F,EAAd+F,UAGN,GAFA0qB,EAAAA,GAAgB+C,QAAQC,wBAA0B5S,EAE9CiN,EAAcP,OAAO9J,EAAAA,EAAK+H,kBAAoBuC,EAAc,OAAOtN,EACrE2E,EAAAA,EAAUnmB,KAAKqlB,iBAAkB,CAAC5D,YAAa,GAAKC,eAAgByQ,IAAUvQ,SAAAA,EAAUe,KAAM,QAGhG,GAAImM,SAAAA,EAAcqF,WAAY,OAAO3S,EACnCsN,EAAahN,QAAS,CAACL,YAAa2R,EAAmBjB,SAAAA,IAAUxQ,QAAAA,EAASC,SAAAA,EAAUe,KAAM,MAAO7b,UAAAA,IAGnG,IAcMotB,EAAezS,EAdjBgT,EAAkB1zB,EAAQkuB,iBAAoB,IAAIsD,SAAQ,SAAAC,GAAO,OAAInC,WAAWmC,EAAS,IAAI,IAAKD,QAAQC,UAC1G9Q,EAAiByQ,IACjBxQ,EAAU,GAEd,OAAKmN,GAAiB/tB,EAAQ0tB,oBAAsBK,EAAaqF,WACxDM,EAAgB1S,MAAK,kBAAMP,EAAwBqN,EAAcxJ,iBAAkB,CACxF5D,YAAaoN,EAActtB,UAAU6yB,MAAQd,EAA6BD,EAC1E3R,eAAAA,EACAC,QAAAA,EACAC,SAAAA,EACAe,KAAM,MACN7b,UAAAA,GACA,KAGEgoB,EAAawC,KAAKzC,EAActtB,YAAcutB,EAAajO,mBAAmB6T,MAChFR,EAAgBpF,EAAajO,mBAAmBwE,iBAChD5D,EAAc4R,IAEda,EAAgBpF,EAAahN,QAC7BL,EAAc2R,GAGTqB,EAAgB1S,MAAK,kBAAMP,EAAwB0S,EAAe,CAACzS,YAAAA,EAAaC,eAAAA,EAAgBC,QAAAA,EAASC,SAAAA,EAAU9a,UAAAA,GAAW,IAEzI,qGCzPI6tB,EAAW,KA0Bf,QAxBmB,SAAb9S,EAAcgN,EAAeC,GAA+B,IAAA8F,EAAjB7zB,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACzC,QAAjBuxB,EAAI/F,SAAa,IAAA+F,GAAbA,EAAeC,QAAOhG,EAAgBrK,EAAAA,EAAAA,SAE1C,IAAIsQ,GAAkBH,IAAa5zB,SAAAA,EAAS6rB,aAAciC,GAAkB8F,KAC1EI,EAAAA,EAAAA,GAAmBlG,EAAeA,EAAe0D,QAAQC,QAAQhB,EAAAA,KAAiB,OAAO,SAAAjH,GAAC,OAAIzZ,QAAQ8L,MAAM2N,EAAE,IAWhH,OATAgI,QAAQyC,KAAK,CACXF,EACC,IAAIvC,SAAQ,SAAAC,GAAO,OAAInC,WAAWmC,EAAS,IAAI,MAC/CzQ,MAAK,SAACkT,IACFA,GAAWnG,GAAgB3I,EAAAA,EAAU+O,gBAAkBn0B,EAAQ6rB,cAClEkC,aAAY,EAAZA,EAAcqG,aAAcrG,EAAasB,qBAAuBvO,EAAWiN,EAAakF,cAAelF,EAAc,CAAEsG,SAAS,IAEpI,IAEON,EAAe/S,MAAK,WACpBhhB,SAAAA,EAAS6rB,aAAciC,EAAcP,OAAOqG,KAAW5W,EAAAA,EAAAA,GAC1D8Q,EACAC,EACA/tB,EAEJ,IAAE,OAAO,SAAAwpB,GAAC,OAAIzZ,QAAQ8L,MAAM2N,EAAE,GAChC,qFC3BA,IAAIiH,EAAkB5N,SAASyR,eAAe,WAC9C,IAAK7D,EAAiB,MAAM,IAAIjjB,MAAM,iDAEtCijB,EAAgB+C,QAAQe,uBAExB,IAAI5nB,EAAe,WAAH,OAAS8jB,GAAmBA,EAAgB+C,QAAQ7mB,YAAY,EAE5E6nB,EAAmB,WAAH,IAAAC,EAAA,OAAShE,IAAuE,QAAxDgE,EAAI5R,SAASyR,eAAe,oCAA4B,IAAAG,OAAA,EAApDA,EAAsDC,YAAW,EAE7G7d,EAAoB4Z,GAAmBA,EAAgB+C,QAAQ3c,kBAE/D8d,EAAWlE,GAAmBA,EAAgB+C,QAAQmB,2OCoE1D,QA/EyB,oBAAA1P,iGAAAjZ,CAAA,KAAAiZ,EAAA,SAqEtB,SArEsBA,IAAA,EAAAxkB,IAAA,aAAAoN,IACvB,WACE,OAsEyBkT,EAtEG0P,EAAAA,GAAgBJ,cAwExCuE,EAAqC,YADrCC,EAAYlQ,OAAOC,iBAAiB7D,GAAS8T,YACkB,SAAdA,EACjDC,EAAmB/T,EAAQkQ,aAAelQ,EAAQgU,eACjDH,GAAwBE,GAJjC,IAA6B/T,EACrB8T,EACAD,EACAE,CAxEN,GAAC,CAAAr0B,IAAA,UAAAoN,IAED,WACE,OAAI3B,KAAK8oB,WAAmBnS,SAASoS,KAChC/oB,KAAK8oB,gBAAV,EAA6BvE,EAAAA,GAAgBJ,aAC/C,GAAC,CAAA5vB,IAAA,gBAAAoN,IAED,WACE,OAAI3B,KAAK8oB,WAAmBrQ,OAAOuD,YAC9Bhc,KAAK8oB,gBAAV,EAA6B9oB,KAAK6U,QAAQgU,YAC5C,GAAC,CAAAt0B,IAAA,cAAAoN,IAED,WACE,KAAM,uCACR,GAAC,CAAApN,IAAA,eAAAoN,IAED,WACE,OAAI3B,KAAK8oB,WAAmBnS,SAASqS,gBAAgBjE,aAChD/kB,KAAK8oB,gBAAV,EAA6B9oB,KAAK6U,QAAQkQ,YAC5C,GAAC,CAAAxwB,IAAA,gBAAAoN,IAED,WACE,OAAI3B,KAAK8oB,WAAmBrQ,OAAOwQ,QAC9BjpB,KAAK8oB,gBAAV,EAA6B9oB,KAAK6U,QAAQqU,SAC5C,GAAC,CAAA30B,IAAA,MAAAoN,IAED,WACE,OAAI3B,KAAK8oB,WAAmB,EACrBvE,EAAAA,GAAgBJ,cAAchH,wBAAwB7F,GAC/D,GAAC,CAAA/iB,IAAA,mBAAA4M,MAED,SAAwBoI,EAAM4f,GAC5B,OAAInpB,KAAK8oB,WAAmBrQ,OAAO4H,iBAAiB9W,EAAM4f,GACrDnpB,KAAK8oB,gBAAV,EAA6B9oB,KAAK6U,QAAQwL,iBAAiB9W,EAAM4f,EACnE,GAAC,CAAA50B,IAAA,WAAA4M,MAED,SAAgBrN,GACd,OAAIkM,KAAK8oB,WAAmBrQ,OAAOkN,SAAS7xB,GACvCkM,KAAK8oB,gBAAV,EAA6B9oB,KAAK6U,QAAQ8Q,SAAS7xB,EACrD,GAAC,CAAAS,IAAA,WAAAoN,IAED,WACE,MAA2C,GAApCoX,EAAoBC,aAC7B,GAAC,CAAAzkB,IAAA,SAAAoN,IAED,WACE,MAA2C,GAApCoX,EAAoBC,cAAsBD,EAAoB8L,aACvE,GAAC,CAAAtwB,IAAA,iBAAAoN,IAED,WAA4B,IAAAW,EAAA,KAC1B,OAAO3I,MAAMC,KAAK+c,SAASC,iBAAiB,MACzClN,QAAO,SAAA0f,GAEN,GAAuB,IAAnBA,EAAGC,aAAyC,IAApBD,EAAGE,aAAoB,OAAO,EAC1D,GAAIF,EAAGjR,QAAQ,iBAAkB,OAAO,EAExC,IAAMhB,EAAOiS,EAAGjM,wBAEhB,OAAOhG,EAAK8B,OAAS,GAAK9B,EAAK8B,QAAU3W,EAAK0W,aAChD,IACC9d,QAAO,SAACquB,EAASH,GAChB,OAAIG,SAAAA,EAASvF,UAAUwF,SAAS,wBAAgCD,EAC5DH,SAAAA,EAAIpF,UAAUwF,SAAS,0BAEnBD,GAAWH,EAAGjM,wBAAwBlE,OAASsQ,EAAQpM,wBAAwBlE,OAF5BmQ,EAE0CG,CACvG,GAAG,OAAShF,EAAAA,EAChB,IArEuB,uFAqEtBxL,CAAA,CArEsB,2xCCizBzB,QA7yBU,WACR,SAAAtF,EAAYgW,GAQV,+FARoB3pB,CAAA,KAAA2T,GAQM,OAAtBgW,aAAQ,EAARA,EAAUnuB,SACZ0E,KAAK6U,QAAU4U,MACV,IAAIA,aAAoBhW,EAC7B,MAAM,IAAInS,MAAM,qCACX,GAAwB,WAApBooB,EAAOD,GAChBzpB,KAAK2pB,eAAiBF,MACjB,IAAwB,mBAAbA,EAGhB,MAAM,IAAInoB,MAAM,wCAFhBtB,KAAK4pB,iBAAmBH,CAG1B,EACF,WAsxBC,SAtxBAhW,IAAA,EAAAlf,IAAA,SAAA4M,MAED,SAAO0oB,GACL,KAAMA,aAAqBpW,GAAO,MAAM,IAAInS,MAAM,iCAClD,OAAOtB,KAAK6U,UAAYgV,EAAUhV,OACpC,GAAC,CAAAtgB,IAAA,UAAA4M,MAED,SAAQ0oB,GACN,IAAKA,EAAW,MAAM,IAAIvoB,MAAM,yCAEhC,OAAOtB,KAAKwK,cAAgBqf,EAAUrf,aACpCxK,KAAKmC,iBAAmB0nB,EAAU1nB,gBAClCnC,KAAKwf,qBAAuBqK,EAAUrK,kBAC1C,GAAC,CAAAjrB,IAAA,cAAA4M,MAED,SAAY2oB,GACV,KAAMA,aAAqBvS,EAAAA,GAAO,MAAM,IAAIjW,MAAM,6CAClD,OAAOtB,KAAK+pB,WAAWhxB,SAAW+wB,EAAU/wB,MAC9C,GAAC,CAAAxE,IAAA,UAAAoN,IAED,WACE,GAAI3B,KAAKia,YACP,OAAOja,KAAKia,YACP,GAAIja,KAAK2pB,eAEd,OADA3pB,KAAKia,YAAcxG,EAAKuW,oBAAoBhqB,KAAKiqB,UAC5CjqB,KAAKia,YACHja,KAAKia,YADkB,KAEzB,GAAIja,KAAK4pB,iBAAkB,CAChC,IAAIpW,EAAOxT,KAAK4pB,mBAEhB,OADA5pB,KAAK6U,QAAUrB,aAAI,EAAJA,EAAMqB,QACd7U,KAAKia,WACd,CACF,EAACrY,IAMD,SAAY6nB,GACNA,aAAoBS,kBACtBlqB,KAAKia,YAAcwP,EACVA,aAAoBhW,IAC7BzT,KAAKia,YAAcwP,EAAS5U,SAE9B7U,KAAKmqB,iBACP,GAAC,CAAA51B,IAAA,aAAAoN,IAXD,WACE,IAAM3B,KAAK6U,OAAQ,CAAE,MAAAuV,GAAQ,OAAO,IAAM,CAC5C,GAAC,CAAA71B,IAAA,MAAAoN,IAWD,WACE,OAAK3B,KAAK6U,QACN7U,KAAK6U,QAAQsD,QAAQ,gCAChBnY,KAAK6U,QAAQsD,QAAQ,gCAAgCgF,wBAAwB7F,IAG/EtX,KAAK6U,QAAQsI,wBAAwB7F,IALlB,IAM5B,GAAC,CAAA/iB,IAAA,SAAAoN,IAED,WACE,OAAK3B,KAAK6U,QACN7U,KAAK6U,QAAQsD,QAAQ,gCAChBnY,KAAK6U,QAAQsD,QAAQ,gCAAgCgF,wBAAwBlE,OAG/EjZ,KAAK6U,QAAQsI,wBAAwBlE,OALlB,IAM5B,GAAC,CAAA1kB,IAAA,YAAAoN,IAED,WAAgB,IAAA0oB,EACd,OAAKrqB,KAAK6U,QACS,QAAnBwV,EAAOrqB,KAAK6U,eAAO,IAAAwV,OAAA,EAAZA,EAAcpN,UADK,IAE5B,GAAC,CAAA1oB,IAAA,QAAAoN,IAED,WAEE,OADkB3B,KAAK6U,QAAQyU,aAAevQ,EAAAA,EAAoBC,cAC7C,EACvB,GAAC,CAAAzkB,IAAA,qBAAAoN,IAED,WACE,IAAK3B,KAAK6U,QAAS,OAAO,KAE1B,IAAMsC,EAAOnX,KAAK6U,QAAQsI,wBACpBrE,EAAiBC,EAAAA,EAAoBC,cACrCsR,EAAanT,EAAKG,IAExB,OAAIgT,EAAa,GAAW,EACxBA,EAAaxR,EAAuBoM,IAGdoF,EAAaxR,CAGzC,GAAC,CAAAvkB,IAAA,kBAAA4M,MAED,WAEOnB,KAAKia,cACVja,KAAKuqB,mBAAqBvqB,KAAKia,YAAYqN,QAAQkD,kBACnDxqB,KAAKyqB,gBAAkBzqB,KAAKia,YAAYqN,QAAQ5kB,eAChD1C,KAAK0qB,mBAAqB1qB,KAAKia,YAAYqN,QAAQ3kB,kBACnD3C,KAAK2qB,WAAa3qB,KAAKia,YAAYqN,QAAQ/d,KAC3CvJ,KAAK4qB,MAAQ5qB,KAAKia,YAAYqN,QAAQtyB,KAEtCgL,KAAKia,YAAYsQ,mBAAqBvqB,KAAKia,YAAYqN,QAAQkD,kBAC/DxqB,KAAKia,YAAYwQ,gBAAkBzqB,KAAKia,YAAYqN,QAAQ5kB,eAC5D1C,KAAKia,YAAYyQ,mBAAqB1qB,KAAKia,YAAYqN,QAAQ3kB,kBAC/D3C,KAAKia,YAAY0Q,WAAa3qB,KAAKia,YAAYqN,QAAQ/d,KACvDvJ,KAAKia,YAAY2Q,MAAQ5qB,KAAKia,YAAYqN,QAAQtyB,KACpD,GAAC,CAAAT,IAAA,OAAAoN,IAED,WAAW,IAAAkpB,EAAAC,EAAAC,EACT,OAAuB,QAAhBF,EAAA7qB,KAAKia,mBAAW,IAAA4Q,GAAS,QAATC,EAAhBD,EAAkBvD,eAAO,IAAAwD,OAAT,EAAhBA,EAA2B91B,QAA2B,QAAvB+1B,EAAI/qB,KAAK2pB,sBAAc,IAAAoB,OAAA,EAAnBA,EAAqB/1B,KACjE,GAAC,CAAAT,IAAA,cAAAoN,IAED,WACE,OAAO3B,KAAKgrB,YAAYC,SAC1B,GAAC,CAAA12B,IAAA,iBAAAoN,IACD,WACE,OAAK3B,KAAK6U,QACN7U,KAAKkrB,QAAgB13B,IAAAA,cAAoBwM,KAAK6U,QAAQyS,QAAQnlB,gBAC3DnC,KAAKgrB,YAAYG,aAFE33B,IAAAA,cAAoBwM,KAAK2pB,eAAeyB,qBAGpE,GAAC,CAAA72B,IAAA,aAAAoN,IAED,WACE,OAAO3B,KAAKgrB,YAAYznB,UAC1B,GAAC,CAAAhP,IAAA,gBAAAoN,IACD,WACE,OAAK3B,KAAK6U,QACN7U,KAAKkrB,QAAgB13B,IAAAA,cAAoBwM,KAAK6U,QAAQyS,QAAQnlB,gBAC3DnC,KAAKgrB,YAAY7lB,cAFE3R,IAAAA,cAAoBwM,KAAK2pB,eAAeyB,qBAGpE,GAAC,CAAA72B,IAAA,iBAAAoN,IAED,WACE,OAAOnO,IAAAA,cAAoBwM,KAAK6U,QAAQyS,QAAQ5kB,eAClD,GAAC,CAAAnO,IAAA,0BAAAoN,IAED,WACE,OAAO3B,KAAK4T,mBAAmBC,cACjC,GAAC,CAAAtf,IAAA,oBAAAoN,IAED,WACE,OAAOnO,IAAAA,cAAoBwM,KAAK6U,QAAQyS,QAAQ3kB,kBAClD,GAAC,CAAApO,IAAA,YAAAoN,IAED,WACE,MAAM,IAAIL,MAAM,8DAClB,GAAC,CAAA/M,IAAA,eAAAoN,IAED,WACE,MAAM,IAAIL,MAAM,uEAClB,GAAC,CAAA/M,IAAA,OAAAoN,IAED,WACE,OAAO3B,KAAK6U,QAAQyS,QAAQ/d,IAC9B,GAAC,CAAAhV,IAAA,0BAAAoN,IAED,WAA8B,IAAA0pB,EAC5B,OAAmB,QAAnBA,EAAOrrB,KAAK6U,eAAO,IAAAwW,OAAA,EAAZA,EAAcpiB,WAAWkP,QAAQ,kBAC1C,GAAC,CAAA5jB,IAAA,iBAAAoN,IAED,WACE,MAAM,IAAIL,MAAM,mDAClB,GAAC,CAAA/M,IAAA,4BAAAoN,IAED,WAAgC,IAAA2pB,EAC9B,OAAmB,QAAnBA,EAAOtrB,KAAK6U,eAAO,IAAAyW,OAAA,EAAZA,EAAcriB,WAAWkP,QAAQ,oBAC1C,GAAC,CAAA5jB,IAAA,yBAAAoN,IAED,WACE,MAAM,IAAIL,MAAM,qDAClB,GAAC,CAAA/M,IAAA,qBAAAoN,IAED,WACE,OAAK3B,KAAKurB,wBACH,IAAIrS,EAAAA,EAAUlZ,KAAKurB,yBADgB,IAE5C,GAAC,CAAAh3B,IAAA,gBAAAoN,IAED,WACE,OAAK3B,KAAK2pB,gBAAmB3pB,KAAKurB,wBAC9BvrB,KAAK2pB,eAAuB,IAAIpS,EAAAA,EAAKvX,KAAK2pB,eAAe6B,qBACtDxrB,KAAK4T,mBAAmBvR,KAFmC,IAGpE,GAAC,CAAA9N,IAAA,kBAAAoN,IAED,WACE,OAAK3B,KAAK4V,SAELsD,EAAAA,EAAU4I,OAAO9hB,KAAKyf,YAMpBvG,EAAAA,EAAU4I,OAAO9hB,KAAKyf,aALvBzf,KAAK8V,OACTjS,QAAQC,IAAI,uDAAD9M,OAAwDgJ,KAAKgrB,YAAYznB,WAAWrO,UAAS,MAAA8B,OAAKgJ,KAAKgrB,YAAY7lB,cAAcjQ,UAAS,MAD9H,MAHE,IAS7B,GAAC,CAAAX,IAAA,YAAAoN,IAED,WACE,OAAO3B,KAAKyrB,eAAeppB,IAC7B,GAAC,CAAA9N,IAAA,iBAAAoN,IAED,WACE,OAAI3B,KAAKkrB,QAAgBlrB,KAAK+V,gBAC1B/V,KAAKsjB,SAAiBtjB,KAAK+mB,cAAc2E,OAAO1rB,KAAKgrB,YAAY1L,gBAAgBhrB,UAC9E,IACT,GAAC,CAAAC,IAAA,UAAAoN,IAED,WAAc,IAAAW,EAAA,KACZ,OAAO,SAACkR,GAAI,OAAKA,EAAKmY,QAAQrpB,EAAK,CACrC,GAAC,CAAA/N,IAAA,qBAAAoN,IAED,WACE,OAAI3B,KAAK4rB,2BACT5rB,KAAK4rB,yBAA2B5rB,KAC9B4T,mBACA4F,MACAjgB,KAAI,SAAA+jB,GAAC,OAAIA,EAAEzI,OAAO,IAClBqK,QAAQlf,KAAK6U,UAL2B7U,KAAK4rB,wBAQjD,GAAC,CAAAr3B,IAAA,WAAAoN,IAED,WACE,GAAI3B,KAAK2pB,eACP,OAAI3pB,YAAAA,KAAMia,YAAoBxG,EAAKoY,gBAAgB7rB,KAAKia,aACjDja,KAAK2pB,eACP,GAAG3pB,KAAKia,YAAa,CAC1B,IAAIgQ,EAAWxW,EAAKoY,gBAAgB7rB,KAAKia,aAEzC,OADAja,KAAK2pB,eAAiBM,EACfA,CACT,CAAO,GAAIjqB,KAAK4pB,iBAEd,OADA5pB,KAAK6U,QAAU7U,KAAK4pB,mBACb5pB,KAAKiqB,SAEZ,MAAM,IAAI3oB,MAAM,yEAEpB,GAAC,CAAA/M,IAAA,OAAAoN,IAED,WACE,KAAM,6DACR,GAAC,CAAApN,IAAA,aAAAoN,IAED,WACE,KAAM,mEACR,GAAC,CAAApN,IAAA,cAAAoN,IAED,WAAkB,IAAAmqB,EAChB,OAAI9rB,KAAKkrB,QAAgB3T,EAAAA,EAAKwU,WAAW/rB,KAAK0C,eAAgB1C,KAAKmC,gBAC/DnC,KAAKsjB,SAAiB/L,EAAAA,EAAI,MAAkB,QAAZuU,EAAA9rB,KAAK6U,eAAO,IAAAiX,OAAA,EAAZA,EAAcxE,UAAStnB,KAAK2pB,gBAAgBa,mBACzE,IACT,GAAC,CAAAj2B,IAAA,cAAAoN,IAuCD,WACE,IAAI6X,EAAQxZ,KAAK4T,mBAAmB4F,MACpC,GAAKxZ,KAAKqhB,OAAO7H,EAAMA,EAAM5kB,OAAS,IAKpC,OAAO,KAJP,IAAIo3B,EAAexS,EAAMjgB,KAAI,SAACia,GAAI,OAAKA,EAAKqB,OAAO,IAEnD,OAAO2E,EADkBwS,EAAa9M,QAAQlf,KAAK6U,SACjB,EAItC,GAAC,CAAAtgB,IAAA,kBAAAoN,IAED,WACE,IAAI6X,EAAQxZ,KAAK4T,mBAAmB4F,MACpC,GAAKxZ,KAAKqhB,OAAO7H,EAAM,IAKrB,OAAO,KAJP,IAAIwS,EAAexS,EAAMjgB,KAAI,SAACia,GAAI,OAAKA,EAAKqB,OAAO,IAEnD,OAAO2E,EADkBwS,EAAa9M,QAAQlf,KAAK6U,SACjB,EAItC,GAAC,CAAAtgB,IAAA,WAAAoN,IAED,WACE,OAAO3B,KAAK4T,mBAAmB4F,KACjC,GAAC,CAAAjlB,IAAA,eAAAoN,IAED,WACE,OAAO3B,KAAKisB,SAAS,EACvB,GAAC,CAAA13B,IAAA,cAAAoN,IAED,WACE,OAAO3B,KAAKisB,SAASjsB,KAAKisB,SAASr3B,OAAS,EAC9C,GAAC,CAAAL,IAAA,iBAAAoN,IAED,WACE,OAAO3B,KAAK+V,gBAAgBmW,SAC9B,GAAC,CAAA33B,IAAA,gBAAAoN,IAED,WACE,OAAO3B,KAAK+V,gBAAgBoW,QAC9B,GAAC,CAAA53B,IAAA,YAAA4M,MAED,SAAUqS,GACR,OAAOxT,KAAK4T,oBAAsB5T,KAAK4T,mBAAmByN,OAAO7N,aAAI,EAAJA,EAAMI,mBACzE,GAAC,CAAArf,IAAA,aAAAoN,IAED,WAAiB,IAAAyqB,EACf,OAA8B,QAA9BA,EAAOpsB,KAAK4T,0BAAkB,IAAAwY,OAAA,EAAvBA,EAAyBrY,UAClC,GAAC,CAAAxf,IAAA,iBAAA4M,MAED,SAAe7M,GAAW,IAAAyuB,EACxB,OAAOzuB,SAAqB,QAAZyuB,EAATzuB,EAAWyf,kBAAU,IAAAgP,OAAZ,EAATA,EAAuB1B,OAAOrhB,KACvC,GAAC,CAAAzL,IAAA,kBAAAoN,IAED,WAAsB,IAAA0qB,EACpB,OAAsB,QAAtBA,EAAOrsB,KAAK+T,kBAAU,IAAAsY,OAAA,EAAfA,EAAiBtY,UAC1B,GAAC,CAAAxf,IAAA,iBAAAoN,IAED,WACE,OAAK3B,KAAK6U,QACH,IAAIqE,EAAAA,EAAUlZ,KAAK6U,QAAQ5L,WAAWkP,QAAQ,0BAD3B,IAE5B,GAAC,CAAA5jB,IAAA,WAAAoN,IAED,WAAe,IAAA2qB,EACb,OAAmB,QAAnBA,EAAOtsB,KAAK6U,eAAO,IAAAyX,OAAA,EAAZA,EAActI,UAAU/V,SAAS,uBAC1C,GAAC,CAAA1Z,IAAA,OAAA4M,MAED,WAAO,IAAAorB,EACO,QAAZA,EAAAvsB,KAAK6U,eAAO,IAAA0X,GAAZA,EAAcvI,UAAUwI,IAAI,mBAC9B,GAAC,CAAAj4B,IAAA,SAAAoN,IAED,WAAa,IAAA8qB,EACX,OAAmB,QAAnBA,EAAOzsB,KAAK6U,eAAO,IAAA4X,OAAA,EAAZA,EAAczI,UAAUwF,SAAS,mBAC1C,GAAC,CAAAj1B,IAAA,WAAAoN,IAED,WACE,OAAQ3B,KAAK0sB,MACf,GAAC,CAAAn4B,IAAA,gBAAAoN,IAED,WACE,OAAQ3B,KAAK0sB,QAAU1sB,KAAK8V,KAC9B,GAAC,CAAAvhB,IAAA,aAAAoN,IAED,WAAiB,IAAAgrB,EACf,OAAmB,QAAnBA,EAAO3sB,KAAK6U,eAAO,IAAA8X,OAAA,EAAZA,EAAc3I,UAAUwF,SAAS,uBAC1C,GAAC,CAAAj1B,IAAA,kBAAAoN,IAED,WACE,MAAqB,WAAd3B,KAAKuJ,OAAsBvJ,KAAKgrB,YAAYp2B,OAAS,GAAKoL,KAAK4sB,WAAW13B,YAAc8K,KAAK6sB,cAAc33B,UACpH,GAAC,CAAAX,IAAA,wBAAAoN,IAED,WACE,OAAO3B,KAAKgrB,YAAY8B,cAAc9sB,KAAK0C,iBACtC1C,KAAKgrB,YAAYC,UAAU/1B,YAAc8K,KAAK0C,eAAexN,WAC7D8K,KAAKgrB,YAAYG,aAAaj2B,YAAc8K,KAAK2C,kBAAkBzN,SAC1E,GAAC,CAAAX,IAAA,8BAAAoN,IAED,WAKE,IALgC,IAAAoB,EAAA,KAE5BgqB,EADe/sB,KAAKyf,WAAWuN,UAAUzzB,KAAI,SAAAL,GAAA,QAAAG,KAAA,8CAAAH,oxBAAEpC,EAAKuC,EAAA,GAAG,OAAAA,EAAA,GAAMvC,EAAM5B,YAAc6N,EAAKL,eAAexN,SAAS,IAC1E+3B,aAAY,GAChDC,EAAwBltB,KAAK+mB,cAAcnyB,OAAS,EAExB,IAA1Bs4B,GAA+BltB,KAAKyf,WAAWuN,UAAUE,EAAwB,GAAG,GAAGh4B,YAAc8K,KAAKyf,WAAWuN,UAAUD,EAAuB,GAAG,GAAG73B,WAChK63B,IACAG,IAGF,OACSltB,KAAKyf,WAAWrmB,MAAM,EAAG2zB,EAAuB,EAI3D,GAAC,CAAAx4B,IAAA,kBAAAoN,IAED,WACE,OAAO3B,KAAK4T,mBAAmBvR,KAAKqd,YAAY2B,OAAOrhB,KAAKgrB,YAC9D,GAAC,CAAAz2B,IAAA,oBAAAoN,IAED,WACE,OAAO3B,KAAK+mB,cAAc9sB,SAAS+F,KAAKgrB,YAC1C,GAAC,CAAAz2B,IAAA,yBAAAoN,IAED,WACE,OAAO3B,KAAK+mB,cAAcoG,6BAA6BntB,KAAKgrB,YAAYznB,YACrEmoB,OAAOnU,EAAAA,EAAK6V,SAASptB,KAAKgrB,YAAYznB,aACtC8pB,oBAAoBrtB,KAAK+mB,eAAe,GAAGhT,UAChD,GAAC,CAAAxf,IAAA,iBAAAoN,IAED,WACE,OAAO3B,KAAKsjB,WAAatjB,KAAKyV,eAChC,GAAC,CAAAlhB,IAAA,2BAAAoN,IAED,WACE,OAAO3B,KAAKyV,mBAAqBzV,KAAK8V,OAAS9V,KAAKstB,wBACtD,GAAC,CAAA/4B,IAAA,0BAAAoN,IAED,WACE,OAAO3B,KAAKutB,oBAAsBvtB,KAAK0sB,MACzC,GAAC,CAAAn4B,IAAA,UAAAoN,IAED,WAAc,IAAA6rB,EACZ,QAAqB,QAAbA,EAACxtB,KAAK6U,eAAO,IAAA2Y,IAAZA,EAAcrV,QAAQ,YACjC,GAAC,CAAA5jB,IAAA,aAAAoN,IAED,WACE,MAAqB,aAAd3B,KAAKuJ,IACd,GAAC,CAAAhV,IAAA,WAAAoN,IAED,WACE,MAAqB,WAAd3B,KAAKuJ,IACd,GAAC,CAAAhV,IAAA,UAAAoN,IAED,WACE,MAAqB,UAAd3B,KAAKuJ,IACd,GAAC,CAAAhV,IAAA,UAAAoN,IAED,WACE,OAAO3B,KAAKutB,kBACd,GAAC,CAAAh5B,IAAA,cAAAoN,IAED,WACE,OAAO3B,KAAKyf,WAAWvkB,SAASuyB,SAASztB,KAAK+mB,gBAC5C/mB,KAAK0tB,iBACT,GAAC,CAAAn5B,IAAA,iBAAAoN,IAED,WACE,OAAO3B,KAAK8V,QAAU9V,KAAKyf,WAAWvkB,SAASuyB,SAASztB,KAAK+mB,cAC/D,GAAC,CAAAxyB,IAAA,WAAAoN,IAED,WACE,OAAO3B,KAAKsjB,UAAYtjB,KAAKkrB,OAC/B,GAAC,CAAA32B,IAAA,cAAA4M,MAED,SAAY0oB,GACV,OAAO7pB,KAAK4T,mBAAmByN,OAAOwI,EAAUjW,mBAClD,GAAC,CAAArf,IAAA,OAAA4M,MAED,SAAK7M,GACH,KAAMA,aAAqB4kB,EAAAA,GAAY,KAAM,wBAAuBwQ,EAAUp1B,GAC9E,OAAOA,EAAUklB,MAAMjgB,KAAI,SAAAia,GAAI,OAAIA,EAAKqB,OAAO,IAAE5G,SAASjO,KAAK6U,QACjE,GAAC,CAAAtgB,IAAA,cAAAoN,IAED,WAAkB,IAAAgsB,EAChB,OAA0B,QAA1BA,EAAO3tB,KAAKyrB,sBAAc,IAAAkC,OAAA,EAAnBA,EAAqBC,QAC9B,GAAC,CAAAr5B,IAAA,aAAAoN,IAED,WAAiB,IAAAksB,EACf,OAA0B,QAA1BA,EAAO7tB,KAAKyrB,sBAAc,IAAAoC,OAAA,EAAnBA,EAAqBrU,MAAM9P,QAAO,SAAA8J,GAAI,IAAAsa,EAAA,QAAiB,QAAbA,EAACta,EAAKqB,eAAO,IAAAiZ,GAAZA,EAAc3V,QAAQ,yBAAwB,IAAE,EACpG,GAAC,CAAA5jB,IAAA,eAAA4M,MAED,SAAa0oB,GAAW,IAAAkE,EACtB,QAA6B,QAArBA,EAAClE,EAAUxU,kBAAU,IAAA0Y,IAApBA,EAAsB1M,OAAOrhB,MACxC,GAAC,CAAAzL,IAAA,aAAAoN,IAED,WAAiB,IAAAqsB,EAAAC,EACf,MAA4D,MAAlC,QAAnBD,EAAAhuB,KAAKyrB,sBAAc,IAAAuC,GAAkB,QAAlBC,EAAnBD,EAAqB5V,wBAAgB,IAAA6V,OAAlB,EAAnBA,EAAuChR,UAChD,GAAC,CAAA1oB,IAAA,wBAAAoN,IAED,WAA4B,IAAAusB,EAC1B,OAA0B,QAA1BA,EAAOluB,KAAKyrB,sBAAc,IAAAyC,OAAA,EAAnBA,EAAqB9V,gBAC9B,GAAC,CAAA7jB,IAAA,cAAAoN,IAED,WACE,IAAK3B,KAAK6U,QAAS,OAAO,KAC1B,IAAMsC,EAAOnX,KAAK6U,QAAQsI,wBACpBrE,EAAiBC,EAAAA,EAAoBC,cAC3C,OAAO7B,EAAKG,IAAM,GAAKH,EAAK8B,OAASH,CACvC,GAAC,CAAAvkB,IAAA,YAAAoN,IAED,WACE,QAAK3B,KAAK6U,SACH7U,KAAKsX,KAAO,GAAKtX,KAAKiZ,QAAUF,EAAAA,EAAoBC,aAC7D,GAAC,CAAAzkB,IAAA,kBAAAoN,IAED,WACE,OAAO3B,KAAKsX,IAAMyB,EAAAA,EAAoBzB,GACxC,GAAC,CAAA/iB,IAAA,kBAAAoN,IAED,WACE,OAAO3B,KAAKiZ,OAASF,EAAAA,EAAoBC,aAC3C,GAAC,CAAAzkB,IAAA,eAAA4M,MAED,SAAa0oB,GACX,OAAO7pB,KAAKsX,IAAMuS,EAAUvS,GAC9B,GAAC,CAAA/iB,IAAA,YAAAoN,IAED,WACE,IAAMwsB,EAA+C,IAApCpV,EAAAA,EAAoBC,cAC/BoV,EAAkD,GAApCrV,EAAAA,EAAoBC,cAGlCqV,EAAcruB,KAAKiZ,OAASkV,EAC5BG,EAAiBtuB,KAAKsX,IAAM8W,EAElC,OAAOC,GAAeC,CACxB,GAAC,CAAA/5B,IAAA,QAAAoN,IAED,WACE,OAAO3B,KAAKutB,kBACd,GAAC,CAAAh5B,IAAA,aAAAoN,IAED,WACE,OAAO3B,KAAKgrB,YAAY3J,OAAOrhB,KAAK4T,mBAAmB2a,UACzD,GAAC,CAAAh6B,IAAA,qBAAAoN,IAED,WACE,QAAK3B,KAAKsjB,UACH/L,EAAAA,EAAKgW,mBAAmBvtB,KAAK+mB,cAAe/mB,KAAKgrB,YAC1D,GAAC,CAAAz2B,IAAA,aAAAoN,IAED,WAKE,OAAI3B,KAAKsjB,SACAtjB,KAAK4T,mBAAmBvR,KAAKqpB,OAAO1rB,KAAKgrB,aAG9ChrB,KAAKkrB,QACAlrB,KAAK4T,mBAAmBvR,KAAKmsB,wBAAwBxuB,KAAKmC,gBAG5DnC,KAAK4T,mBAAmBvR,IACjC,GAAC,CAAA9N,IAAA,cAAAoN,IAED,WACE,OAAI3B,KAAK2pB,iBAAmBzQ,EAAAA,EAAU+O,cAC7B,IAAI1Q,EAAAA,EAAKvX,KAAK2pB,eAAe8E,mBAGlCzuB,KAAK0uB,YAIL1uB,KAAKsjB,UAAYtjB,KAAKutB,mBAHjBvtB,KAAK+mB,cAOV/mB,KAAKsjB,UAILtjB,KAAKkrB,QAHAlrB,KAAKyf,gBAGd,CAGF,GAAC,CAAAlrB,IAAA,UAAAoN,IAED,WACE,OAAI3B,KAAK8V,OAAS9V,KAAK2uB,cAAgB3uB,KAAKyV,gBAAwBzV,KAAK+mB,cACrE/mB,KAAKkrB,SAAWlrB,KAAK4uB,gBAAkB5uB,KAAKstB,wBAAgCttB,KAAKyf,gBAArF,CACF,GAAC,CAAAlrB,IAAA,SAAA4M,MAED,WAAqB,IAAdrN,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAChB,GAAItC,EAAQA,QAAS,KAAM,2CAC3B,OAAIA,SAAAA,EAASohB,QAAUlV,KAAK4V,UAAY9hB,EAAQoiB,SAAiBuC,OAAOoH,KAAKC,SAAS+O,OAAS7uB,KAAKgrB,YAAY8D,qBAAsB,UAClIh7B,SAAAA,EAASohB,QAAUlV,KAAK4V,SAAiB6C,OAAOoH,KAAKC,SAAS+O,OAAS7uB,KAAK+uB,YAAYD,qBAAsB,UAE9Gh7B,EAAQqiB,cAAgBnW,KAAKsW,SAAgB1B,EAAAA,EAAAA,GAAW5U,KAAKyf,WAAYzf,KAAMlM,GAC/EA,EAAQ0tB,mBAA0B5M,EAAAA,EAAAA,GAAW5U,KAAK+uB,YAAa,KAAMj7B,IAElE8gB,EAAAA,EAAAA,GAAW5U,KAAK+uB,YAAa/uB,KAAMlM,EAC5C,GAAC,CAAAS,IAAA,UAAA4M,MAED,WAAsB,IAAA6tB,EAAAC,EAAA/rB,EAAA,KAAdpP,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAKjB,OAJAtC,EAAOkpB,EAAA,CAAKsE,cAAc,GAASxtB,IAEtB6rB,YAAYlM,EAAKwP,8BAA8BjjB,MAExDA,KAAK0uB,WACAjW,OAAOoH,KAAK7f,KAAK6U,QAAQkL,KAAM,UAG7B,QAAPiP,EAAAl7B,SAAO,IAAAk7B,GAAPA,EAAS9Z,QAAUlV,KAAK4V,UAAY9hB,EAAQoiB,SAAiBuC,OAAOoH,KAAKC,SAAS+O,OAAS7uB,KAAKgrB,YAAY8D,qBAAsB,UAC3H,QAAPG,EAAAn7B,SAAO,IAAAm7B,GAAPA,EAAS/Z,QAAUlV,KAAK4V,SAAiB6C,OAAOoH,KAAKC,SAAS+O,OAAS7uB,KAAK+uB,YAAYD,qBAAsB,UAE9Gh7B,EAAQoiB,SACHlW,KAAKgrB,YAAYtpB,QAAOsb,EAAC,CAAEuC,YAAa,WAAczrB,IAG3DkM,KAAKkvB,kBAAoBlvB,KAAK0sB,OAC5B1sB,KAAK+mB,cAAcrH,YAAYyP,QAAgBnvB,KAAK+mB,cAAcnD,mBAAmBliB,QAAQ5N,GAC1FkM,KAAK+mB,cAAchT,WAAWC,OAAO,CAAE2L,WAAY7rB,EAAQ6rB,aAGhE3f,KAAK0tB,oBAAsB1tB,KAAK0sB,OAC9B1sB,KAAKgrB,YAAYmE,SAAgBva,EAAAA,EAAAA,GAAW5U,KAAK+mB,cAAe/mB,KAAK+mB,cAAchT,WAAUiJ,EAAAA,EAAA,GAAOlpB,GAAO,IAAE0tB,mBAAmB,MAC7H5M,EAAAA,EAAAA,GACL2C,EAAAA,EAAKgB,SACLvY,KAAKovB,uBACL,CAAEzP,WAAY7rB,EAAQ6rB,aAItB3f,KAAKqvB,wBAA0BrvB,KAAK0sB,OAC/B1sB,KAAKyf,WAAW/d,QAAOsb,EAAAA,EAAC,CAAC,EAAGlpB,GAAO,IAAE6rB,YAAY,EAAMxJ,cAAc,KAAQrB,MAAK,WACvF,OAAOF,EAAAA,EAAAA,GACL1R,EAAKuc,WACLvc,EAAKosB,4BAA4Bvb,WACjC,CAAE4L,WAAY7rB,EAAQ6rB,YAE1B,IAGE3f,KAAKsjB,UAAYtjB,KAAKutB,qBAAuBz5B,EAAQqiB,cACnDriB,EAAQy7B,kBAAkB9b,EAAK8b,iBAAiBvvB,MAC7CA,KAAKyf,WAAWvkB,SAASwG,QAAQ,CACtCie,WAAY7rB,EAAQ6rB,cAInB3f,KAAKyV,kBAAoBzV,KAAK8V,OAAW9V,KAAK8V,OAAShiB,EAAQqiB,cAC9DriB,EAAQy7B,kBAAkB9b,EAAK8b,iBAAiBvvB,MAC7CA,KAAKyf,WAAW/d,QAAOsb,EAAC,CAAEhI,UAAU,GAASlhB,IAAWghB,MAC7D,kBAAM5R,EAAKuc,WAAW1L,WAAWC,OAAMgJ,EAAAA,EAAC,CAAC,EAAIlpB,GAAO,IAAEwtB,cAAc,EAAME,mBAAmB,IAAQ,MAIjG1tB,EAAQsiB,aAAepW,KAAKqV,YAAcrV,MAAMgU,OAAOlgB,EACjE,GAAC,CAAAS,IAAA,oBAAA4M,MAQD,WACEsS,EAAKiP,qBAAqB1iB,KAC5B,GAAC,CAAAzL,IAAA,SAAAoN,IAED,WACE,IAAK3B,KAAK6U,QAAS,OAAO,KAC1B,IAAM2D,EAAQC,OAAOC,iBAAiB1Y,KAAK6U,SAE3C,OACE7U,KAAK6U,QAAQwU,YAAc,GAC3BrpB,KAAK6U,QAAQyU,aAAe,GACV,SAAlB9Q,EAAM9W,SACe,WAArB8W,EAAMG,UAEV,GAAC,CAAApkB,IAAA,gBAAA4M,MAiCD,WAAgB,IAAAquB,EAAAC,EACVC,EAA4B95B,KAAKsnB,MAAMyS,eAAeC,QAAQ,8BAAgC,MAC9F5vB,KAAK+mB,sBAAsB2I,EAA0B1vB,KAAK+mB,eAC9D4I,eAAeE,QAAQ,4BAA6Bj6B,KAAKC,UAAU65B,IACxD,QAAXF,EAAI1O,eAAO,IAAA0O,GAAO,QAAPC,EAAPD,EAASvO,aAAK,IAAAwO,GAAdA,EAAgBrO,gBAAeN,QAAQG,MAAMG,cAAgB,KACnE,GAAC,CAAA7sB,IAAA,kBAAAoN,IAiED,WAAsB,IAAAmuB,EACpB,OAA6D,QAA7DA,EAAOrc,EAAKE,yBAAyB3T,KAAK4T,2BAAmB,IAAAkc,OAAA,EAAtDA,EAAwDzO,OAAOrhB,KACxE,MAAC,EAAAzL,IAAA,kBAAA4M,MA3gBD,SAAuB8Y,GACrB,IAAIzG,EAAO,IAAIC,EAAKwG,GAEpB,MAAO,CACLuR,oBAAqBhY,EAAKuT,cAAchuB,OACxC/D,KAAMilB,EAAYqN,QAAQtyB,KAC1BwqB,mBAAoBhM,EAAKgM,mBACzBiP,kBAAmBjb,EAAKub,YAAYh2B,OACpCg3B,UAAW9V,EAAYqN,QAAQyI,UAC/BC,kBAAmB/V,EAAYqN,QAAQ9c,YACvC4gB,qBAAsBnR,EAAYqN,QAAQnlB,eAC1CqoB,kBAAmBvQ,EAAYqN,QAAQkD,kBAE3C,GAAC,CAAAj2B,IAAA,sBAAA4M,MAED,SAA2B8uB,GACzB,IACIrc,EADgB,IAAI2D,EAAAA,EAAK0Y,EAAOzE,qBACGl3B,UACvC,IAAKsf,EAAsB,OAAO/P,QAAQ8L,MAAM,kDAAmDsgB,GAEnG,IAAIC,EAAetc,EAAmBuc,gBACpC,SAAC3c,GAAI,OACHA,EAAKoC,UACLpC,EAAKub,YAAYh2B,SAAWk3B,EAAOxB,mBACnCjb,EAAKgM,qBAAuByQ,EAAOzQ,oBACnChM,EAAKxe,OAASi7B,EAAOj7B,IAAI,IAIzBwe,EAAO0c,GAAgBtc,EAAmBuc,gBAC5C,SAAC3c,GAAI,IAAA4c,EAAAC,EAAA,OAAM7c,EAAKoC,UAAYpC,EAAKub,YAAYh2B,SAAWk3B,EAAOxB,mBAC5Djb,EAAKkb,aAA0B,QAAZ0B,EAAA5c,EAAKqB,eAAO,IAAAub,GAAS,QAATC,EAAZD,EAAc9I,eAAO,IAAA+I,OAAT,EAAZA,EAAuBN,aAAcE,EAAOF,SAAU,IAG9E,OAAOvc,aAAI,EAAJA,EAAMqB,UAAW,IAC1B,GAAC,CAAAtgB,IAAA,uBAAA4M,MA2WD,WACExH,MAAMC,KAAK+c,SAASoN,qBAAqB,MAAM3vB,SAAQ,SAAC6lB,GACtDA,EAAY+J,UAAUC,OAAO,uBAC/B,GACF,GAAC,CAAA1vB,IAAA,WAAA4M,MAkBD,SAAgBuS,GACdD,EAAKiP,qBAAqBhP,GAAW,KACvC,GAAC,CAAAnf,IAAA,uBAAA4M,MAED,SAA4B0gB,GAAc,IAAAyO,EACxC32B,MAAMC,KAAK+c,SAASC,iBAAiB,2BAA2BxiB,SAAQ,SAAAof,GAAI,OAAIA,EAAKwQ,UAAUC,OAAO,uBAAuB,IACzHpC,IAAkC,QAApByO,EAAAzO,EAAahN,eAAO,IAAAyb,GAApBA,EAAsBtM,UAAUwI,IAAI,wBACxD,GAAC,CAAAj4B,IAAA,uBAAA4M,MAED,SAA4B0gB,GAC1BpO,EAAK8c,8BAA8B1O,GACnCpO,EAAKwP,8BAA8BpB,EACrC,GAAC,CAAAttB,IAAA,0BAAA4M,MAED,SAA+Bmc,GAAG,IAAA4D,EAChC,OAAO5D,EAAE2D,QAAgB,QAAXC,EAAI5D,EAAE2D,aAAK,IAAAC,OAAA,EAAPA,EAASE,cAC7B,GAAC,CAAA7sB,IAAA,mBAAAoN,IAED,WACE,GAAI4V,EAAAA,EAAK/Y,IAAIopB,MAAO,OAAO,KAE3B,IACI4I,EAD4B56B,KAAKsnB,MAAMyS,eAAeC,QAAQ,8BAAgC,MACzDrY,EAAAA,EAAK/Y,IAAIzF,QAElD,OAAIy3B,GAAyB,OAAbA,EACP,IAAI/c,EAAK+c,GAET,IAEX,GAAC,CAAAj8B,IAAA,mBAAAoN,IASD,WAA8B,IAAA8uB,EAAAC,EAC5B,OAAInZ,EAAAA,EAAK/Y,IAAIopB,MAAc,KAEhB,QAAX6I,EAAI3P,eAAO,IAAA2P,GAAO,QAAPC,EAAPD,EAASxP,aAAK,IAAAyP,GAAdA,EAAgBtP,cACX,IAAI3N,EAAKqN,QAAQG,MAAMG,eAEvB,IAEX,GAAC,CAAA7sB,IAAA,iBAAAoN,IAED,WACE,OAAO3B,KAAK2wB,gBACd,GAAC,CAAAp8B,IAAA,YAAAoN,IAED,WACE,IAAIivB,EAAeja,SAASgN,cAAc,0BAC1C,OAAIiN,EACK,IAAInd,EAAKmd,GAET,IAEX,GAAC,CAAAr8B,IAAA,gCAAA4M,MAED,SAAqCqS,GAGnCsN,QAAQE,aACNxN,GAAQ,CAAE4N,cAAe5N,EAAKyW,WAAc,KAC5CtT,SAASvY,MACTqa,OAAOqH,SAASC,KAEpB,GAAC,CAAAxrB,IAAA,mBAAA4M,MAED,SAAwBqS,GACjBA,GAELsN,QAAQ+P,UACN,CAAEzP,cAAe5N,EAAKyW,UACtBtT,SAASvY,MACTqa,OAAOqH,SAAS+O,OAASrb,EAAKub,YAAYD,qBAE9C,GAAC,CAAAv6B,IAAA,UAAA4M,MAED,WACE,MAAM,IAAIG,MAAM,kDAClB,GAAC,CAAA/M,IAAA,gCAAA4M,MAED,SAAqCqS,GACnC,GAAIA,EAAM,CACR,IAAIkc,EAA4B95B,KAAKsnB,MAAMyS,eAAeC,QAAQ,8BAAgC,MAClGF,EAA0Blc,EAAKI,mBAAmBvR,MAAQmR,EAAKyW,SAC/D0F,eAAeE,QAAQ,4BAA6Bj6B,KAAKC,UAAU65B,GAErE,CACF,GAAC,CAAAn7B,IAAA,2BAAA4M,MAED,SAAgC7M,GAC9B,IAAIo7B,EAA4B95B,KAAKsnB,MAAMyS,eAAeC,QAAQ,8BAAgC,MAClG,GAAIF,EAA0Bp7B,EAAU+N,MACtC,OAAO,IAAIoR,EAAKic,EAA0Bp7B,EAAU+N,MAExD,GAAC,CAAA9N,IAAA,UAAAoN,IAMD,WACE,OAAOhI,MAAMC,KAAK+c,SAASC,iBAAiB,4BACzCrd,KAAI,SAAAsb,GAAO,OAAIpB,EAAI,IAAKoB,EAAQ,IAChCnL,QAAO,SAAA8J,GAAI,OAAIA,EAAKa,SAAS,GAClC,GAAC,CAAA9f,IAAA,SAAAoN,IAED,WACE,OAAOhI,MAAMC,KAAK+c,SAASC,iBAAiB,4BACzCrd,KAAI,SAAAsb,GAAO,OAAIpB,EAAI,IAAKoB,EAAQ,IAChCnL,QAAO,SAAA8J,GAAI,OAAIA,EAAKsd,MAAM,GAC/B,GAAC,CAAAv8B,IAAA,MAAA4M,MAED,SAAW4vB,GACT,OAAO,IAAI/wB,KAAK+wB,EAClB,GAAC,CAAAx8B,IAAA,OAAA4M,MAED,SAAY4vB,GACV,OAAO,IAAI/wB,KAAK+wB,EAClB,qFAACtd,CAAA,CA1yBO,oRCFiC,UAErCyF,EAAS,WAUb,SAAAA,EAAY5E,GACV,+FAD0BxU,CAAA,KAAAoZ,IACrB5E,GAA6C,YAA3BA,EAAehZ,QAAwB,MAAM,IAAIgG,MAAM,oDAC9E,IAAKgT,EAAe0P,UAAUwF,SAAS,kBAAmB,MAAM,IAAIloB,MAAM,mDAC1EtB,KAAKsU,eAAiBA,EAEtBtU,KAAKmqB,kBAEL,IAAI6G,EAAoB9X,EAAU4I,OAAO9hB,KAAKsU,eAAegT,QAAQrqB,YACrE,GAAI+zB,EAAmB,OAAOA,CAChC,WAmXC,SAnXA9X,IAwUA,EAAA3kB,IAAA,OAAA4M,MAtUD,SAAYmT,GACV,OAAO,IAAItU,KAAKsU,EAClB,GAAC,CAAA/f,IAAA,YAAAoN,IA+PD,WACE,OAAOuX,EAAUC,OACnB,GAAC,CAAA5kB,IAAA,UAAAoN,IAED,WACE,IAAI2S,EAAiBqC,SAASgN,cAAc,4BAC5C,OAAIrP,EACK,IAAI4E,EAAU5E,GAEd,IAEX,GAAC,CAAA/f,IAAA,OAAAoN,IAUD,WAEE,OADW4V,EAAAA,EAAK4B,QAAQmG,eACZhrB,SACd,GAAC,CAAAC,IAAA,iBAAA4M,MAED,SAAsBqS,GACpB,KAAMA,aAAgBC,EAAAA,GAAO,MAAM,IAAInS,MAAM,uCAE7C,OAAO,IAAI4X,EADU1F,EAAKqB,QAAQ5L,WAAWkP,QAAQ,mBAEvD,GAAC,CAAA5jB,IAAA,UAAAoN,IAED,WAIE,IAHA,IAAIU,EAAOkV,EAAAA,EAAKgB,SACZ0Y,EAAa,GAEV5uB,GACL4uB,EAAWv6B,KAAK2L,EAAK/N,WACrB+N,EAAOA,EAAK6uB,WAGd,OAAOD,CACT,GAAC,CAAA18B,IAAA,MAAA4M,MAED,SAAWgwB,GACT,OAAOjY,EAAUmK,QAAQnoB,QAAO,SAACk2B,EAAehN,GAC9C,OAAIgN,EAAc9Z,IAAM6Z,GAAYC,EAAcnY,OAASkY,EAAiBC,EACxEhN,EAAiB9M,IAAM6Z,GAAY/M,EAAiBnL,OAASkY,EAAiB/M,EAC3E/W,KAAK0O,IAAIqV,EAAc9Z,IAAM6Z,GAAY9jB,KAAK0O,IAAIqI,EAAiB9M,IAAM6Z,GAAYC,EAAgBhN,CAC9G,GACF,GAEA,CAAA7vB,IAAA,SAAA4M,MAEA,SAAclE,GACZ,OAAKA,GACDA,aAAsBsa,EAAAA,IAAMta,EAAaA,EAAWA,YACjD+C,KAAKqxB,iBAAiBp0B,IAFL,IAG1B,GAAC,CAAA1I,IAAA,eAAA4M,MAaD,SAAoBmT,GAClB,IAAIhgB,EAAY4kB,EAAU4I,OAAOxN,EAAegT,QAAQrqB,aAAeic,EAAS,IAAK5E,GACrF4E,EAAUmY,iBAAiB/c,EAAegT,QAAQrqB,YAAc3I,CAClE,GAAC,CAAAC,IAAA,gBAAA4M,MAED,SAAqBmwB,EAAcnN,GACjCjL,EAAUqY,aAAaD,GACFpY,EAAU4I,OAAOwP,EAAahK,QAAQrqB,YAC5CgM,WAAakb,CAC9B,GAAC,CAAA5vB,IAAA,oBAAA4M,MAED,SAAyBmT,GACvB3a,MAAMC,KAAK0a,EAAesC,iBAAiB,oBACxCxiB,SAAQ,SAAAkgB,GACP4E,EAAUqY,aAAajd,GACvB4E,EAAUsY,cAAcld,EAAgBA,EAAerL,WACzD,GACJ,GAAC,CAAA1U,IAAA,kBAAA4M,MAED,SAAuBmT,GACrB3a,MAAMC,KAAK0a,EAAesC,iBAAiB,oBACxCxiB,SAAQ,SAAAkgB,GACPA,EAAerL,WAAWwoB,YAAYnd,EACxC,GACJ,GAAC,CAAA/f,IAAA,MAAAoN,IAED,WACE,OAAOhI,MAAMC,KAAK+c,SAASC,iBAAiB,oBAAoBrd,KAAI,SAAA+a,GAAc,OAAI4E,EAAS,IAAK5E,EAAe,GACrH,GAAC,CAAA/f,IAAA,UAAAoN,IAED,WACE,OAAOuX,EAAUwY,IAAwC,GAApC3Y,EAAAA,EAAoBC,cAAsBD,EAAAA,EAAoB8L,cACrF,GAAC,CAAAtwB,IAAA,gBAAAoN,IAED,WACE,QAASgV,SAASgN,cAAc,mBAClC,GAAC,CAAApvB,IAAA,MAAA4M,MAED,SAAW0T,GACT,OAAIqE,EAAU4I,OAAOjN,EAAQyS,QAAQrqB,YAAoBic,EAAU4I,OAAOjN,EAAQyS,QAAQrqB,YACnF,IAAIic,EAAUrE,EACvB,OAnXC,EAAAtgB,IAAA,SAAA4M,MAMD,SAAOwwB,GACL,QAAKA,GACE3xB,KAAKsU,iBAAmBqd,EAAerd,cAChD,GAAC,CAAA/f,IAAA,gBAAA4M,MAED,WACEnB,KAAKsU,eAAekE,MAAM9W,QAAU,QACpC1B,KAAKsU,eAAekE,MAAMI,QAAU,IACtC,GAAC,CAAArkB,IAAA,UAAA4M,MAED,WAAU,IAAAmB,EAAA,KACRtC,KAAKsU,eAAekE,MAAM9W,QAAU,QACpC1B,KAAKsU,eAAekE,MAAMI,QAAU,OAGpC5Y,KAAKoY,iBAAiBI,MAAMoZ,YAAc,QAC1CC,uBAAsB,WACpBvvB,EAAK8V,iBAAiBI,MAAMoZ,YAAc,WAC5C,GACF,GAAC,CAAAr9B,IAAA,UAAAoN,IAED,WACE,MAAM,IAAIL,MAAM,mDAClB,GAAC,CAAA/M,IAAA,kBAAA4M,MAED,WACEnB,KAAK8xB,WAAa9xB,KAAKsU,eAAegT,QAAQyK,UAC9C/xB,KAAKgyB,cAAgBhyB,KAAKsU,eAAegT,QAAQ2K,aACjDjyB,KAAKkyB,YAAclyB,KAAKsU,eAAegT,QAAQrqB,WAC/C+C,KAAKmyB,UAAY3kB,OAAOxN,KAAKsU,eAAegT,QAAQ6K,UACtD,GAAC,CAAA59B,IAAA,YAAAoN,IAED,WACE,MAAgE,SAAzD8W,OAAOC,iBAAiB1Y,KAAKsU,gBAAgB5S,OACtD,GAAC,CAAAnN,IAAA,YAAAoN,IAED,WACE,IAAK3B,KAAK6U,QAAS,OAAO,KAC1B,IAAMsC,EAAOnX,KAAK6U,QAAQsI,wBAGpBrE,EAAiBC,EAAAA,EAAoBC,cAErCmV,EAA4B,GAAjBrV,EACXsV,EAA+B,GAAjBtV,EAEdsZ,EAAajb,EAAKG,IAAM6W,EACxBkE,EAAgBlb,EAAKG,IAAM8W,EAEjC,OAAOgE,GAAcC,CACvB,GAAC,CAAA99B,IAAA,QAAAoN,IAED,WACE,OAAOnO,IAAAA,cAAoBwM,KAAKsU,eAAegT,QAAQyK,UACzD,GAAC,CAAAx9B,IAAA,WAAAoN,IAED,WACE,OAAOnO,IAAAA,cAAoBwM,KAAKsU,eAAegT,QAAQ2K,aACzD,GAAC,CAAA19B,IAAA,YAAAoN,IAED,WACE,MAAM,IAAIL,MAAM,iCAClB,GAAC,CAAA/M,IAAA,eAAAoN,IAED,WACE,MAAM,IAAIL,MAAM,oCAClB,GAAC,CAAA/M,IAAA,mBAAAoN,IAED,WACE,IAAIyW,EAAmBze,MAAMC,KAAKoG,KAAKsU,eAAeoK,YACpD4T,MAAK,SAACzd,GAAO,MAAyB,MAApBA,EAAQvZ,OAAe,IAE3C,IAAK8c,EAAkB,MAAM,IAAI9W,MAAM,sCACvC,OAAO8W,CACT,GAAC,CAAA7jB,IAAA,OAAAoN,IAED,WACE,OAAO,IAAI4V,EAAAA,EAAKvX,KAAKsU,eAAegT,QAAQrqB,WAC9C,GAAC,CAAA1I,IAAA,cAAAoN,IAED,WACE,OAAO4V,EAAAA,EAAKwU,WAAW/rB,KAAKlJ,MAAOkJ,KAAK1K,SAC1C,GAAC,CAAAf,IAAA,YAAAoN,IAED,WACE,OAAO3B,KAAKqC,KAAKqd,YAAYJ,cAC/B,GAAC,CAAA/qB,IAAA,WAAAoN,IAED,WACE,OAAO3B,KAAKqC,KAAKjJ,MAAM4G,KAAKmyB,UAC9B,GAAC,CAAA59B,IAAA,QAAAoN,IAED,WACE,GAAI3B,KAAKuyB,YAAa,OAAOvyB,KAAKuyB,YAClC,IAAIvG,EAAehsB,KAAKoY,iBAAiBxB,iBAAiB,4BAE1D,OADA5W,KAAKuyB,YAAc54B,MAAMC,KAAKoyB,GAAczyB,KAAI,SAACsb,GAAO,OAAK,IAAIpB,EAAAA,EAAKoB,EAAQ,IACvE7U,KAAKuyB,WACd,GAAC,CAAAh+B,IAAA,eAAAoN,IAED,WACE,OAAOhI,MAAMC,KAAKoG,KAAKoY,iBAAiBxB,iBAAiB,2BAC3D,GAAC,CAAAriB,IAAA,YAAAoN,IAED,WACE,OAAO3B,KAAKwZ,MAAM,IAAM,IAC1B,GAAC,CAAAjlB,IAAA,UAAA4M,MAED,SAAQub,GACN,OAAO1c,KAAKwZ,MAAMkD,IAAM,IAC1B,GAAC,CAAAnoB,IAAA,WAAAoN,IAED,WACE,OAAO3B,KAAKwZ,MAAMxZ,KAAKwZ,MAAM5kB,OAAS,IAAM,IAC9C,GAAC,CAAAL,IAAA,eAAAoN,IAED,WACE,OAAO8R,EAAAA,EAAKE,yBAAyB3T,KACvC,GAAC,CAAAzL,IAAA,SAAAoN,IAED,WACE,OAAO3B,KAAKsU,eAAerL,aAAesb,EAAAA,EAC5C,GAAC,CAAAhwB,IAAA,WAAAoN,IAED,WACE,OAAO3B,KAAKwZ,MAAM5kB,OAAS,CAC7B,GAAC,CAAAL,IAAA,iBAAA4M,MAED,SAAeyB,GACb,OAAO5C,KAAKwZ,MAAM8Y,KAAK1vB,EACzB,GAAC,CAAArO,IAAA,kBAAA4M,MAED,SAAgByB,GACd,OAAO5C,KAAKwZ,MAAM9P,OAAO9G,EAC3B,GAAC,CAAArO,IAAA,cAAA4M,MAED,SAAYY,EAAYE,GACtB,OAAOjC,KAAKmwB,gBACV,SAAC3c,GAAI,OACFA,EAAK8P,UAAY9P,EAAKoZ,WAAWtwB,QAASyF,aAAU,EAAVA,EAAYzF,OACtDkX,EAAK0X,SAAW1X,EAAKrR,eAAe7F,QAAS2F,aAAa,EAAbA,EAAe3F,KAAK,GAExE,GAAC,CAAA/H,IAAA,aAAAoN,IAED,WAAiB,IAAA6U,EAAAoB,EAAA4a,EAAAzvB,EAAA,KACf,GAAI/C,KAAKiJ,aAAesb,EAAAA,GAAmB,OAAO,KAElD,GAAIvkB,KAAK8T,gBAAgBkY,aAAa/d,SAAuB,QAAfuI,EAAC/C,EAAAA,EAAKlG,iBAAS,IAAAiJ,OAAA,EAAdA,EAAgB3B,UAA0B,QAAlB+C,EAAInE,EAAAA,EAAKlG,iBAAS,IAAAqK,GAAgB,QAAhB4a,EAAd5a,EAAgB6T,sBAAc,IAAA+G,GAA9BA,EAAgCnR,OAAOrhB,MAChH,OAAOyT,EAAAA,EAAKlG,UAId,IAAKvN,KAAKmvB,QACR,OAAOnvB,KAAK8T,gBAAgB0F,MAAM8Y,MAAK,SAAA9e,GAAI,OAAIA,EAAK0X,SAAW1X,EAAKrR,eAAe7F,OAASyG,EAAKzN,SAASgH,IAAI,IAIhH,IAAIm2B,EAAwBhf,EAAAA,EAAKE,yBAAyB3T,KAAK8T,iBAC/D,OAAI9T,KAAK0yB,YAAY99B,OAAS,GAAK69B,GAAyBzyB,KAAK0yB,YAAYJ,MAAK,SAAAn4B,GAAC,OAAIA,EAAEknB,OAAOoR,EAAsB,IAC7GA,EAIgBzyB,KAAK8T,iBAAmB9T,KAAK8T,gBAAgB0F,MAAM8Y,MAC1E,SAAA9e,GAAI,OAAIA,EAAK8P,UACiB,IAA5B9P,EAAKwX,YAAYp2B,QACjB4e,EAAKoZ,WAAWtwB,OAASyG,EAAKjM,MAAMwF,MACpCkX,EAAKqZ,cAAcvwB,OAASyG,EAAKjM,MAAMwF,IAAI,KAKxC0D,KAAK8T,iBAAmB9T,KAAK8T,gBAAgB0F,MAAM8Y,MACxD,SAAA9e,GAAI,OAAIA,EAAK8P,UAAY9P,EAAKoZ,WAAWtwB,OAASyG,EAAKjM,MAAMwF,IAAI,GAErE,GAAC,CAAA/H,IAAA,cAAAoN,IAED,WAAkB,IAAAuB,EAAA,KAChB,OAAIlD,KAAKsU,eAAerL,aAAesb,EAAAA,GAA0B,KAE1DvkB,KAAK8T,gBAAgB6e,iBAC1B,SAACnf,GAAI,OACFA,EAAK8P,UAAY9P,EAAKoZ,WAAWtwB,OAAS4G,EAAKpM,MAAMwF,MACrDkX,EAAK0X,SAAW1X,EAAKrR,eAAe7F,OAAS4G,EAAK5N,SAASgH,IAAK,GAEvE,GAAC,CAAA/H,IAAA,mBAAAoN,IAED,WACE,OAAO3B,KAAKsU,eAAegT,QAAQ9xB,gBACrC,GAAC,CAAAjB,IAAA,kBAAAoN,IAED,WACE,GAAI3B,KAAKiJ,YAA0C,YAA5BjJ,KAAKiJ,WAAW3N,QAAuB,OAAO4d,EAAS,IAAKlZ,KAAKiJ,YAExF,GAAIjJ,KAAKsU,eAAgB,KAAAse,EAAAC,EACnB1O,EAAmC,QAAtByO,EAAG5yB,KAAKsU,sBAAc,IAAAse,GAAY,QAAZC,EAAnBD,EAAqB3pB,kBAAU,IAAA4pB,OAAZ,EAAnBA,EAAiC1a,QAAQ,mBAC7D,OAAOgM,EAAgB,IAAIjL,EAAUiL,GAAiB,IACxD,CACE,OAAO,IAEX,GAAC,CAAA5vB,IAAA,iBAAAoN,IAED,WACE,GAAI3B,KAAKmvB,QACP,OAAOnvB,KAEP,IAAI6T,EAAiB7T,KAAKsU,eAAerL,WAAWkP,QAAQ,yBAC5D,IAAKtE,EAAgB,MAAM,IAAIvS,MAAM,2BACrC,OAAO,IAAI4X,EAAUrF,EAEzB,GAAC,CAAAtf,IAAA,UAAAoN,IAED,WACE,OAAO3B,KAAKlJ,MAAM5B,YAAc8K,KAAK1K,SAASJ,SAChD,GAAC,CAAAX,IAAA,UAAAoN,IAED,WACE,QAAS3B,KAAKsU,eAAe6D,QAAQ,cACvC,GAAC,CAAA5jB,IAAA,QAAAoN,IAED,WAEE,OADuB3B,KAAKoY,iBAAiBkR,aAAevQ,EAAAA,EAAoBC,cACtD,GAC5B,GAAC,CAAAzkB,IAAA,OAAAoN,IAED,WAEE,OADuB3B,KAAKoY,iBAAiBkR,aAAevQ,EAAAA,EAAoBC,cACtD,EAC5B,GAAC,CAAAzkB,IAAA,MAAAoN,IAED,WACE,OAAO3B,KAAKoY,iBAAiB+E,wBAAwB7F,GACvD,GAAC,CAAA/iB,IAAA,SAAAoN,IAED,WACE,OAAO3B,KAAKoY,iBAAiB+E,wBAAwBlE,MACvD,GAAC,CAAA1kB,IAAA,qBAAAoN,IAED,WACE,IAAK3B,KAAKoY,iBAAkB,OAAO,KAEnC,IAAMjB,EAAOnX,KAAK6U,QAAQsI,wBACpBrE,EAAiBC,EAAAA,EAAoBC,cACrCsR,EAAanT,EAAKG,IAExB,OAAIgT,EAAa,GAAW,EACxBA,EAAaxR,EAAuBoM,IAGdoF,EAAaxR,EAAkB,GAG3D,GAAC,CAAAvkB,IAAA,oBAAA4M,MAeD,WACEnB,KAAKsU,eAAe0P,UAAUwI,IAAI,0BACpC,GAAC,CAAAj4B,IAAA,iBAAA4M,MAED,WACEnB,KAAKsU,eAAe0P,UAAUwI,IAAI,yBACpC,GAAC,CAAAj4B,IAAA,gBAAA4M,MAyCD,WACEnB,KAAKsU,eAAerL,WAAWwoB,YAAYzxB,KAAKsU,eAClD,GAAC,CAAA/f,IAAA,WAAA4M,MAED,WACE,IAAKnB,KAAKiJ,WAAY,MAAM,IAAI3H,MAAM,6CAGtC,GAFAtB,KAAKiJ,WAAW6pB,YAAY9yB,KAAKsU,gBAC7BtU,KAAK8T,iBAAiB9T,KAAK8T,gBAAgBsO,WAC3CpiB,KAAKqC,KAAK8sB,QAAS,OAAO5K,EAAAA,GAAgBuO,YAAY9yB,KAAKsU,eACjE,oFA2CC4E,CAAA,CAtYY,KA2Ua,CAAC,KA3Ud,wBAATA,yFAyYN,ukDC3Y6C,UAEvC3B,EAAI,WACR,SAAAA,EAAYkS,gGAAU3pB,CAAA,KAAAyX,GACfkS,EAEM9vB,MAAMo5B,QAAQtJ,IACC,IAApBA,EAAS70B,OACXoL,KAAKgtB,UAAY,IAEjBhtB,KAAKgtB,UAAYvD,EAASrwB,QAC1Bme,EAAKyb,kBAAkBhzB,KAAKuC,QAE9BvC,KAAK/C,WAAasa,EAAK0b,cAAcjzB,KAAKuC,SACb,iBAAbknB,GAAyBA,aAAoBvZ,UAC7DlQ,KAAKgtB,UAAYzV,EAAK2b,cAAczJ,GACpCzpB,KAAK/C,WAAasa,EAAK0b,cAAcjzB,KAAKuC,QAX1CvC,KAAKgtB,UAAY,EAarB,WA8mBC,SA9mBAzV,IAAA,EAAAhjB,IAAA,SAAAoN,IAED,WACE,OAAK3B,KAAKgtB,UAAU,GAGXhtB,KAAKgtB,UAAUp4B,OAFf,CAIX,GAAC,CAAAL,IAAA,SAAA4M,MAyDD,SAAO2oB,GACL,QAAKA,GACE9pB,KAAKjH,SAAW+wB,EAAU/wB,MACnC,GAAC,CAAAxE,IAAA,OAAA4M,MAED,SAAK2oB,GAAW,IAAAqJ,EACd,QAAKrJ,MACD9pB,KAAKqhB,OAAOyI,KACZA,EAAUqF,UACVnvB,KAAKozB,iBAAiBtJ,IACnB9pB,KAAKqkB,KAAKyF,SAAoB,QAAXqJ,EAATrJ,EAAWx1B,iBAAS,IAAA6+B,OAAX,EAATA,EAAsBrf,gBAAgBzR,MACzD,GAAC,CAAA9N,IAAA,mBAAA4M,MAED,SAAiB2oB,GACf,OAAO9pB,KAAKqzB,iBAAiBxlB,MAAK,SAAA/W,GAAK,OAAKgzB,EAAUuJ,iBAAiBplB,SAASnX,EAAM,GACxF,GAAC,CAAAvC,IAAA,WAAA4M,MAED,SAAS2oB,GACP,OAAOA,EAAUzF,KAAKrkB,KACxB,GAAC,CAAAzL,IAAA,gBAAA4M,MAED,SAAcrK,GACZ,OAAOkJ,KAAKgtB,UAAUsF,MAAK,SAAAp5B,GAAuB,IAAAG,EAAAyB,EAAA5B,EAAA,GAArB8C,EAAY3C,EAAA,GACvC,OAD0CA,EAAA,GACnCvC,EAAM5B,YAAc8G,EAAa9G,SAC1C,GACF,GAAC,CAAAX,IAAA,QAAAoN,IAED,WACE,OAAO3B,KAAKgtB,SACd,GAAC,CAAAz4B,IAAA,SAAAoN,IAED,WACE,OAAO3B,KAAK/C,UACd,GAAC,CAAA1I,IAAA,QAAAoN,IAED,WACE,OAAQ3B,KAAKuC,MAAM,EACrB,GAAC,CAAAhO,IAAA,QAAA4M,MAED,WAAQ,IAAAmyB,EACN,OAAO,IAAItzB,KAAKuzB,aAAYD,EAAAtzB,KAAKgtB,UAAU5zB,OAAMo6B,KAAIC,MAAAH,EAAA,CAACtzB,KAAKgtB,WAASh2B,OAAA2C,MAAA+5B,UAAAt6B,MAAAo6B,KAAKp9B,aAC3E,GAAC,CAAA7B,IAAA,8BAAA4M,MAED,SAA4BrK,GAC1B,OAAO,IAAIkJ,KAAKuzB,YAAYvzB,KAAKgtB,UAAU5zB,MAAM,EAAG4G,KAAKgtB,UAAU2G,eAAc,SAAAj6B,GAAG,OAAHoB,EAAApB,EAAA,GAAG,GAAQxE,YAAc4B,EAAM5B,SAAS,IAAI,GAC/H,GAAC,CAAAX,IAAA,+BAAA4M,MAED,SAA6BrK,GAC3B,OAAO,IAAIkJ,KAAKuzB,YAAYvzB,KAAKgtB,UAAU5zB,MAAM,EAAG4G,KAAKgtB,UAAU2G,eAAc,SAAA55B,GAAG,OAAHe,EAAAf,EAAA,GAAG,GAAQ7E,YAAc4B,EAAM5B,SAAS,KAC3H,GAAC,CAAAX,IAAA,WAAAoN,IAED,WACE,OAAO3B,KAAKgtB,SACd,GAAC,CAAAz4B,IAAA,aAAAoN,IAED,WACE,OAAI3B,KAAK4nB,MAAc,KAChB5nB,KAAKgtB,UAAU,GAAG,EAC3B,GAAC,CAAAz4B,IAAA,iBAAAoN,IAED,WACE,OAAO3B,KAAKuzB,YAAYxH,WAAW/rB,KAAKgtB,UAAU,GAAG,GAAIhtB,KAAKgtB,UAAU,GAAG,GAC7E,GAAC,CAAAz4B,IAAA,YAAAoN,IAED,WACE,OAAO3B,KAAK0f,YAAY5oB,KAC1B,GAAC,CAAAvC,IAAA,QAAAoN,IAED,WAAY,IAAAiyB,EACV,OAAgC,QAAhCA,EAAO5zB,KAAK0f,YAAYnd,MAAM,UAAE,IAAAqxB,OAAA,EAAzBA,EAA4B,EACrC,GAAC,CAAAr/B,IAAA,gBAAAoN,IAED,WACE,OAAI3B,KAAK4nB,MAAc,KAChB5nB,KAAKgtB,UAAU,GAAG,EAC3B,GAAC,CAAAz4B,IAAA,eAAAoN,IAED,WACE,OAAO3B,KAAK0f,YAAYva,aAC1B,GAAC,CAAA5Q,IAAA,cAAAoN,IAED,WACE,OAAO3B,KAAKgtB,UAAU,IAAMhtB,KAAKgtB,UAAU,GAAG,EAChD,GAAC,CAAAz4B,IAAA,iBAAAoN,IAED,WACE,OAAO3B,KAAKgtB,UAAU,IAAMhtB,KAAKgtB,UAAU,GAAG,EAChD,GAAC,CAAAz4B,IAAA,eAAAoN,IAED,WACE,OAAO,IAAI3B,KAAKuzB,YAAYvzB,KAAKgtB,UAAU5zB,MAAM,EAAG,GACtD,GAAC,CAAA7E,IAAA,cAAAoN,IAED,WACE,OAAO,IAAI3B,KAAKuzB,YAAYvzB,KAAKgtB,UAAU5zB,OAAO,GACpD,GAAC,CAAA7E,IAAA,sBAAAoN,IAED,WACE,OAAO,IAAI3B,KAAKuzB,YAAYvzB,KAAKgtB,UAAU5zB,MAAM,GACnD,GAAC,CAAA7E,IAAA,qBAAAoN,IAED,WACE,OAAO,IAAI3B,KAAKuzB,YAAYvzB,KAAKgtB,UAAU5zB,MAAM,GAAI,GACvD,GAAC,CAAA7E,IAAA,sBAAAoN,IAED,WACE,OAAO,IAAI3B,KAAKuzB,YAAYvzB,KAAKgtB,UAAU5zB,MAAM,GAAI,IAAIsyB,OAAOnU,EAAK6V,SAASptB,KAAKirB,WACrF,GAAC,CAAA12B,IAAA,WAAA4M,MAED,SAAS2oB,GAEP,IAAM+J,EAAa7zB,KAAKgtB,UAAUp4B,OAC5Bk/B,EAAchK,EAAUkD,UAAUp4B,OAGxC,GAAIk/B,EAAcD,EAChB,OAAO,EAIT,IAAK,IAAI10B,EAAI,EAAGA,GAAK20B,EAAa30B,IAAK,CACrC,IAAA40B,EAAAj5B,EAAkCkF,KAAKgtB,UAAU6G,EAAa10B,GAAE,GAAzD60B,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAC9BG,EAAAp5B,EAAoCgvB,EAAUkD,UAAU8G,EAAc30B,GAAE,GAAjEg1B,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAEhC,GACEF,EAAU9+B,YAAci/B,EAAWj/B,WACnC++B,EAAa/+B,YAAck/B,EAAcl/B,UAEzC,OAAO,CAEX,CAEA,OAAO,CACT,GAAC,CAAAX,IAAA,UAAAoN,IAED,WACE,OAAiC,IAA1B3B,KAAKgtB,UAAUp4B,QAAgBoL,KAAKgtB,UAAU,GAAG,GAAG93B,YAAc8K,KAAKgtB,UAAU,GAAG,GAAG93B,SAChG,GAAC,CAAAX,IAAA,aAAAoN,IAED,WAAiB,IAAA0yB,EAAAC,EACf,OAAqB,QAArBD,EAAOr0B,KAAK1L,iBAAS,IAAA+/B,GAAiB,QAAjBC,EAAdD,EAAgBvgB,uBAAe,IAAAwgB,OAAjB,EAAdA,EAAiCjyB,IAC1C,GAAC,CAAA9N,IAAA,aAAAoN,IAED,WAAiB,IAAA4yB,EACf,OAAqB,QAArBA,EAAOv0B,KAAK1L,iBAAS,IAAAigC,OAAA,EAAdA,EAAgBxgB,UACzB,GAAC,CAAAxf,IAAA,kBAAA4M,MAED,WACE,OAAOnB,KAAKsf,eAAe+N,oBAAoBrtB,MAAM,GAAG+T,UAC1D,GAAC,CAAAxf,IAAA,WAAAoN,IAED,WAAe,IAAA6yB,EAAAC,EACb,OAAqB,QAAdD,EAAAx0B,KAAK1L,iBAAS,IAAAkgC,OAAA,EAAdA,EAAgBtI,aAA2B,QAAlBuI,EAAIz0B,KAAK1L,iBAAS,IAAAmgC,OAAA,EAAdA,EAAgB1gB,WACtD,GAAC,CAAAxf,IAAA,UAAA4M,MAED,SAAQyB,GACN5C,KAAKuC,MAAMnO,QAAQwO,EACrB,GAAC,CAAArO,IAAA,QAAA4M,MAED,WACE,OAAO,IAAIoW,EAAKvX,KAAKuC,MAAMnJ,QAC7B,GAAC,CAAA7E,IAAA,YAAAoN,IAED,WACE,OAAI3B,KAAKuD,WAAWrO,YAAc8K,KAAKirB,UAAU/1B,UACxC8K,KAAKuD,WAAWrO,UAAY,KAAO8K,KAAKirB,UAAU/1B,UAElD8K,KAAKuD,WAAWrO,SAE3B,GAAC,CAAAX,IAAA,QAAAoN,IAED,WAAY,IAAAW,EAAA,KACNwT,EAAQ,KAaZ,OAXA9V,KAAKuC,MAAMnO,SAAQ,SAACsgC,EAAiBC,GACnCryB,EAAKC,MAAMnO,SAAQ,SAACwgC,EAAgBC,GAC9BH,EAAgB,GAAGx/B,YAAc0/B,EAAe,GAAG1/B,WAAay/B,EAAgBE,IAClF/e,EAAQ,CACNgf,MAAOH,EACPI,IAAKF,GAGX,GACF,IAEO/e,CACT,GAAC,CAAAvhB,IAAA,SAAA4M,MAED,WACE,IAAM2U,EAAQ9V,KAAK8V,MAenB,OAVIA,EAKW,IAAIyB,EAJQ,GAAHvgB,OAAAsQ,EACjBtH,KAAKuC,MAAMnJ,MAAM,EAAG0c,EAAMgf,QAAMxtB,EAChCtH,KAAKuC,MAAMnJ,MAAM0c,EAAMif,QAIf/0B,KAAKtK,OAItB,GAAC,CAAAnB,IAAA,oBAAAoN,IAED,WACE,OAAO3B,KAAK9E,SAASuyB,SAASztB,KAChC,GAAC,CAAAzL,IAAA,uBAAAoN,IAED,WACE,OAAO3B,KAAK8V,QAAU9V,KAAKg1B,iBAC7B,GAAC,CAAAzgC,IAAA,iBAAA4M,MAeD,SAAe2oB,GACb,GAAI9pB,KAAK4nB,OAASkC,EAAUlC,MAAO,OAAO,KAC1C,GAAI5nB,KAAKuD,WAAWrO,YAAc40B,EAAUvmB,WAAWrO,UAAW,OAAO,KAGzE,IAFA,IAAI+/B,EAAgBnL,GAEZmL,EAAc9F,SAAS,CAC7B,GAAInvB,KAAKiO,SAASgnB,GAAgB,OAAOA,EACzC,IAAKA,EAAc/D,WAAY,MAAM,IAAI5vB,MAAM,6BAADtK,OAA8Bi+B,IAC5EA,EAAgBA,EAAc/D,UAChC,CAEA,OAAO+D,CACT,GAAC,CAAA1gC,IAAA,wBAAA4M,MAED,SAAsB2oB,GACpB,OAAO9pB,KAAKwmB,eAAesD,KACrB9pB,KAAKqhB,OAAOyI,KACZ9pB,KAAKytB,SAAS3D,KACdA,EAAU2D,SAASztB,KAC3B,GAAC,CAAAzL,IAAA,WAAA4M,MAED,SAAS2oB,GACP,OAAO9pB,KAAKk1B,WAAWrnB,MAAK,SAAAsnB,GAAE,OAAIrL,EAAUoL,WAAWrnB,MAAK,SAAAunB,GAAE,OAAID,EAAGjgC,YAAckgC,EAAGlgC,SAAS,GAAC,GAClG,GAAC,CAAAX,IAAA,gBAAA4M,MAED,SAAc2oB,GACZ,OAAO9pB,KAAKq1B,sBAAsBvL,EACpC,GAAC,CAAAv1B,IAAA,cAAA4M,MAED,SAAY2oB,GACV,OAAI9pB,KAAKiO,SAAS6b,GAAmBA,EAAUwL,4BAA4Bt1B,MAAM+T,WAC1E/T,KAAKs1B,4BAA4BxL,GAAW/V,UACrD,GAAC,CAAAxf,IAAA,8BAAA4M,MAED,SAA4B2oB,GAC1B,OAAI9pB,KAAKiO,SAAS6b,GAAmB,KACnB9pB,KAAKwmB,eAAesD,GACnBuD,oBAAoBvD,GAAW,EACpD,GAAC,CAAAv1B,IAAA,WAAA4M,MAED,SAAS2oB,GACP,OAAOA,EAAU7b,SAASjO,QACvBA,KAAKqhB,OAAOyI,EACjB,GAAC,CAAAv1B,IAAA,sBAAA4M,MAED,SAAoB2oB,GAIlB,IAHA,IAAIrvB,EAAS,GACT86B,EAAazL,EAAUp0B,QAErB6/B,IAAev1B,KAAKqhB,OAAOkU,IAC/B96B,EAAO+6B,QAAQD,GACfA,EAAaA,EAAWrE,WAK1B,OAFAz2B,EAAO+6B,QAAQx1B,MAERvF,CACT,GAAC,CAAAlG,IAAA,qBAAAoN,IAED,WAGE,IAFA,IAAIlH,EAAS,GACT2pB,EAAmBpkB,KAAK1L,UACrB8vB,GACL3pB,EAAO/D,KAAK0tB,GACZA,EAAmBA,EAAiBtQ,gBAGtC,OAAOrZ,CACT,GAAC,CAAAlG,IAAA,UAAA4M,MAED,SAAQ2oB,GAAW,IAAA2L,EACjB,OAAsB,QAAtBA,EAAOz1B,KAAKkxB,kBAAU,IAAAuE,OAAA,EAAfA,EAAiBpU,OAAOyI,EACjC,GAAC,CAAAv1B,IAAA,WAAA4M,MAED,SAAS2oB,GAAW,IAAA4L,EAClB,OAA2B,QAA3BA,EAAO5L,EAAUoH,kBAAU,IAAAwE,OAAA,EAApBA,EAAsBrU,OAAOrhB,KACtC,GAAC,CAAAzL,IAAA,UAAA4M,MAED,WAAsB,IAAdrN,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACjB,GAAItC,SAAAA,EAASohB,OAAQ,OAAOuD,OAAOoH,KAAKC,SAAS+O,OAAS7uB,KAAKjH,OAAQ,UACvE,GAAIiH,KAAK4nB,MAAO,OAAO/jB,QAAQ8L,MAAM,6BACrC,GAAI7b,EAAQA,QAAS,KAAM,2CAE3B,OAAO8gB,EAAAA,EAAAA,GAAW5U,KAAM,KAAMlM,EAChC,GAAC,CAAAS,IAAA,cAAA4M,MAED,WAA0B,IAAA4B,EAAA,KAAdjP,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACrB,OAAO4J,KAAK0B,QAAQ,CAAEie,YAAY,IAAO7K,MAAK,kBAAO/R,EAAKzO,UAAU43B,WAAanpB,EAAKzO,UAAUyf,YAAYC,OAAOlgB,EAAQ,GAC7H,GAAC,CAAAS,IAAA,aAAA4M,MAED,SAAWrK,EAAOxB,GAChB,OAAI0K,KAAK4nB,MAAc,IAAIrQ,EAAK,CAAC,CAACzgB,EAAOxB,KAClC,IAAIiiB,EAAKvX,KAAKuC,MAAMvL,OAAO,CAAC,CAACF,EAAOxB,KAC7C,GAAC,CAAAf,IAAA,SAAA4M,MAED,SAAO2oB,GACL,OAAO,IAAIvS,EAAKvX,KAAKjH,OAAS,IAAM+wB,EAAU/wB,OAChD,GAAC,CAAAxE,IAAA,0BAAA4M,MAED,SAAwBw0B,GACtB,GAAoB,IAAhB31B,KAAKpL,OAAc,OAAOoL,KAC9B,IAAI0f,EAAc1f,KAAK0f,YACvB,OAAO1f,KAAK4jB,mBAAmBgS,WAAWlW,EAAYnc,WAAYoyB,EACpE,GAAC,CAAAphC,IAAA,yBAAAoN,IAED,WACE,GAAoB,IAAhB3B,KAAKpL,OAAc,OAAOoL,KAC9B,IAAI0f,EAAc1f,KAAK0f,YACvB,OAAO1f,KAAK4jB,mBAAmBgS,WAAWlW,EAAYnc,WAAYmc,EAAYnc,WAChF,GAAC,CAAAhP,IAAA,WAAA4M,MAED,WACE,OAAOnB,KAAKjH,MACd,GAAC,CAAAxE,IAAA,aAAAoN,IAED,WACE,OAAO3B,KAAKuC,MAAMhJ,KAAI,SAAAgB,GAAO,OAAPO,EAAAP,EAAA,GAAO,EAAW,GAC1C,GAAC,CAAAhG,IAAA,mBAAAoN,IAED,WACE,OAAO3B,KAAKuC,MAAMhJ,KAAI,SAAAoC,GAAO,OAAPb,EAAAa,EAAA,GAAO,GAAYzG,SAAS,GACpD,GAAC,CAAAX,IAAA,iBAAAoN,IAED,WACE,OAAO4V,EAAKse,sBAAsB71B,KAAMukB,EAAAA,GAC1C,GAAC,CAAAhwB,IAAA,YAAAoN,IAED,WACE,OAAIuX,EAAAA,EAAU4I,OAAO9hB,MAAckZ,EAAAA,EAAU4I,OAAO9hB,MAChC,IAAhBA,KAAKpL,OAAqB,KAE1BoL,KAAKsU,eACA,IAAI4E,EAAAA,EAAUlZ,KAAKsU,gBAEnB,IAEX,GAAC,CAAA/f,IAAA,mBAAAoN,IAED,WACE,OAAO3B,KAAK1L,UAAU8jB,gBACxB,GAAC,CAAA7jB,IAAA,kBAAAoN,IAED,WACE,OAAO3B,KAAK1L,UAAUwf,eACxB,GAAC,CAAAvf,IAAA,UAAAoN,IAED,WACE,QAAS3B,KAAKuC,MAAM,EACtB,GAAC,CAAAhO,IAAA,uBAAAoN,IAuHD,WACE,IAAImtB,EAAuB,GAM3B,OAJInkB,EAAAA,KAAmBmkB,GAAwB,IAAJ93B,OAAQ2T,EAAAA,KAE/C8d,EAAAA,KAAUqG,GAAwB,MAE/BA,EAAuB9uB,KAAK/C,UACrC,MAAC,EAAA1I,IAAA,gBAAA4M,MA5iBD,SAAqBlE,GACnB,GAA0B,iBAAfA,EAAyB,MAAM,IAAIqE,MAAM,qCACpD,GAAItB,KAAK81B,mBAAmBz0B,eAAepE,GAAa,OAAO+C,KAAK81B,mBAAmB74B,GAEvF,GAAmB,MAAfA,EACF,MAAO,GAGT,IAAI84B,EAAsB94B,EACvBwJ,QAAQ,qCAAqC,SAAA3N,GAC5C,OAAIA,EAAM8R,WAAW,UAAkB,UACnC9R,EAAM8R,WAAW,OAAe,OAC7B,GACT,IACC3W,MAAM,KACNyV,QAAO,SAAC3Q,GAAM,MAAgB,KAAXA,CAAa,IAI/BwJ,GAFJwzB,EAAsBxe,EAAKye,mBAAmB/4B,EAAY84B,IAE1Bx8B,KAAI,SAACqL,GACnC,IAA4DC,EAAA/J,EAApCtH,IAAAA,gBAAsBoR,GAAc,GAAvD9N,EAAK+N,EAAA,GACV,MAAO,CAAC/N,EADY+N,EAAA,IACO/N,EAC7B,IAAG4S,QAAO,SAAA9O,GAAO,OAAIA,EAAQ,EAAE,IAI/B,OAFAoF,KAAK81B,mBAAmB74B,GAAcsF,EAE/BA,CACT,GAAC,CAAAhO,IAAA,gBAAA4M,MAED,SAAqBoB,GACnB,IAAK5I,MAAMo5B,QAAQxwB,GAAQ,MAAM,IAAIjB,MAAM,0BAE3C,GAAI3H,MAAMo5B,QAAQxwB,IAA2B,IAAjBA,EAAM3N,OAChC,MAAO,IAGT,IAAK+E,MAAMo5B,QAAQxwB,EAAM,IACvB,MAAM,IAAIjB,MAAM,4CAalB,MAViB,IAEHiB,EAAMhJ,KAAI,SAAAyD,GAAuB,IAAAG,EAAArC,EAAAkC,EAAA,GAArBlG,EAAKqG,EAAA,GAAE7H,EAAQ6H,EAAA,GACnC84B,EAAoBn/B,EAAM0H,IAI9B,OAHIlJ,GAAYA,EAASkJ,MAAQ1H,EAAM0H,MACrCy3B,GAAqB,IAAM3gC,EAASkJ,KAE/By3B,CACT,IAAGx8B,KAAK,IAGV,GAAC,CAAAlF,IAAA,qBAAA4M,MAyND,SAA0B+vB,EAAYlG,GACpC,GAAIA,EAAY9vB,SAAStG,OAASo2B,EAAYp2B,OAAQ,OAAO,EAE7D,IAAIshC,EAAyBhF,EAAWgE,WAAW37B,KAAI,SAAA48B,GAAC,OAAIA,EAAEjhC,SAAS,IACnEkhC,EAAyBpL,EAAYkK,WAAW37B,KAAI,SAAA48B,GAAC,OAAIA,EAAEjhC,SAAS,IACxE,OAAOghC,EAAuBroB,MAAK,SAACwoB,GAClC,OAAOD,EAAuBvoB,MAAK,SAACmiB,GAClC,OAAOqG,IAAyBrG,CAElC,GACF,GACF,GAAC,CAAAz7B,IAAA,UAAAoN,IAwJD,WACE,IAAI7K,EAAQtD,IAAAA,KAAUiN,EAAAA,EAAAA,OACtB,OAAO,IAAI8W,EAAK,CAAC,CAACzgB,EAAOA,IAC3B,GAAC,CAAAvC,IAAA,OAAAoN,IAED,WACE,OAAO4V,EAAK/Y,IAAI8gB,cAClB,GAAC,CAAA/qB,IAAA,UAAAoN,IAED,WACE,OAAO4V,EAAKgB,UAAYhB,EAAK/Y,GAC/B,GAAC,CAAAjK,IAAA,WAAAoN,IAED,WAAsB,IAAA20B,EACpB,OAA0B,QAA1BA,EAAOpd,EAAAA,EAAU3L,iBAAS,IAAA+oB,OAAA,EAAnBA,EAAqBj0B,IAC9B,GAAC,CAAA9N,IAAA,MAAAoN,IAED,WACE,IAAI1E,EAAawb,OAAOqH,SAASC,KAAK3mB,MAAMqf,OAAOqH,SAAS+O,OAAOj6B,QAQnE,OANI+V,EAAAA,IAAqE,IAAhD1N,EAAWiiB,QAAQ,IAADloB,OAAK2T,EAAAA,OAC9C1N,EAAaA,EAAW7D,MAAMuR,EAAAA,GAAkB/V,OAAS,IAG1B,IAA7BqI,EAAWiiB,QAAQ,QAAajiB,EAAaA,EAAW7D,MAAM,IAE3D,IAAIme,EAAKta,EAClB,GAAC,CAAA1I,IAAA,UAAAoN,IAED,WACE,OAAI4V,EAAK/Y,IAAI+3B,SAAW9iB,EAAAA,EAAKiO,eACpBjO,EAAAA,EAAKiO,eAAeqN,YAClBxX,EAAK/Y,IAAIopB,MACXrQ,EAAI,QAEJA,EAAK/Y,GAEhB,GAAC,CAAAjK,IAAA,sBAAA4M,MAED,SAA2BgjB,EAAeqS,GACxC,IAAKrS,EAAe,MAAM,IAAI7iB,MAAM,2BACpC,KAAMk1B,aAAwBjf,GAAO,MAAM,IAAIjW,MAAM,sCAErD,GAAI6iB,IAAkBI,EAAAA,GAAiB,OAAO,EAE9C,IAAIzQ,EAAkB,IAAIoF,EAAAA,EAAUiL,GACpC,QAAKrQ,EAAgB2iB,YAAYD,EAAajzB,cAC5CM,QAAQ8L,MAAM,mBAAA3Y,OAAmB8c,EAAgBhd,MAAM5B,UAAS,MAAA8B,OAAK8c,EAAgBxe,SAASJ,UAAS,4DAAA8B,OACtDw/B,EAAajzB,WAAWrO,UAAS,OAC3E,EAIX,GAAC,CAAAX,IAAA,wBAAA4M,MAED,SAA6BkB,EAAMq0B,GACjC,KAAMr0B,aAAgBkV,GAAO,MAAM,IAAIjW,MAAM,uCAO7C,IAJA,IAAIq1B,EAFJD,EAAcA,GAAenS,EAAAA,GAGzBqS,EAAUv0B,EACVw0B,EAAmBrpB,OAAOkpB,EAAYpP,QAAQ6K,YAAc,GAEvDhzB,EAAI,EAAGA,EAAIkD,EAAKzN,OAAQuK,IAAK,CAcpC,GAbA03B,GAAsC,IACtCF,EAAcA,EAAYhT,cACxB,YAAc,qBAAA3sB,OACO4/B,EAAQrzB,WAAW2O,aAAY,MAAI,wBAAAlb,OAChC4/B,EAAQrzB,WAAW2O,aAAY,MAAI,qBAAAlb,OACtC6/B,EAAgB,OACpCD,EAAQrzB,WAAWrO,YAAc0hC,EAAQzxB,cAAcjQ,UACxD,yBAAA8B,OACqB4/B,EAAQrzB,WAAW2O,aAAY,MAAI,wBAAAlb,OAChC4/B,EAAQzxB,cAAc+M,aAAY,MAAI,qBAAAlb,OACzC6/B,EAAgB,MAAO,MAG5B,OAAO,KACzBD,EAAUA,EAAQE,mBACpB,CAIA,OAFKH,GAAa9yB,QAAQC,IAAI,2BAA4BzB,EAAMq0B,EAAaC,GAEzEA,IAAgBpS,EAAAA,GAAwB,KAErCoS,CACT,GAAC,CAAApiC,IAAA,UAAA4M,MAED,SAAeolB,GAAuB,IAAdzyB,EAAOsC,UAAAxB,OAAA,QAAAyB,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EACjC,KAAMmwB,aAAmBhP,GAAO,MAAM,IAAIjW,MAAM,+BAChD,IAAIxN,EAAQytB,SAAZ,CAEA,IAAIwV,EAAUxf,EAAK/Y,IACfw4B,EAAgBzQ,EAAQ0E,UAAU/1B,UAElC2uB,EAAsBtM,EAAK/Y,IAAIopB,OAASrB,EAAQlF,OAAO0V,GACvDjjC,EAAQy7B,mBAAkB1L,GAAsB,GAChD/vB,EAAQ+vB,sBAAqBA,GAAsB,GAEvD,IAAIoT,EAAqBpT,EASzB,SAAsB9Z,EAAGC,EAAGktB,GAC1BpW,QAAQE,aAAajX,EAAGC,EAAGktB,EAC7B,EAEA,SAAmBntB,EAAGC,EAAGktB,GACvBpW,QAAQ+P,UAAU9mB,EAAGC,EAAGktB,EAC1B,EAdIC,EAAiB5Q,EAAQuI,qBAE7BmI,EACEnW,QAAQG,MACR+V,EACAG,EAf0B,CAyB9B,GAAC,CAAA5iC,IAAA,qBAAA4M,MAYD,SAA0BlE,EAAY84B,GAIpC,GAA0B,iBAAf94B,EAAyB,MAAM,IAAIqE,MAAM,wCACpD,IAAK3H,MAAMo5B,QAAQgD,GAAsB,MAAM,IAAIz0B,MAAM,wCAEzD,GAAIrE,EAAWnE,MAAM,UACnB,IAAK,IAAIqG,EAAI,EAAGA,EAAI42B,EAAoBnhC,OAAQuK,IAC9C,GAAI42B,EAAoB52B,GAAGrG,MAAM,MAAO,CACtC,GAAKi9B,EAAoB52B,EAAI,GAAGrG,MAAM,KAM/B,CACL,IAAIs+B,EAAUrB,EAAoB52B,GAAG/F,MAAM,GAI3C,OAHe28B,EAAoB38B,MAAM,EAAG+F,GAC1CnI,OAAO,CAACogC,IACRpgC,OAAO++B,EAAoB38B,MAAM+F,EAAI,GAEzC,CAXE,IAAIi4B,EAAUrB,EAAoB52B,EAAI,GAAK42B,EAAoB52B,GAI/D,OAHe42B,EAAoB38B,MAAM,EAAG+F,EAAI,GAC9CnI,OAAO,CAACogC,IACRpgC,OAAO++B,EAAoB38B,MAAM+F,EAAI,GAS3C,CAIJ,OAAO42B,CACT,GAAC,CAAAxhC,IAAA,oBAAA4M,MAED,SAAyBoB,GACvBA,EAAMnO,SAAQ,SAAAijC,GACZ,GAAqB,IAAjBA,EAAMziC,OAAc,MAAM,IAAI0M,MAAM,gCAADtK,OAAiCqgC,IACxE,KAAMA,EAAM,aAAc7jC,KAAY6jC,EAAM,aAAc7jC,KAAQ,MAAM,IAAI8N,MAAM,gCAADtK,OAAiCpB,KAAKC,UAAUwhC,IACnI,GACF,GAAC,CAAA9iC,IAAA,WAAA4M,MAED,SAAgBrK,GACd,OAAO,IAAIkJ,KAAK,CAAC,CAAClJ,EAAOA,IAC3B,GAAC,CAAAvC,IAAA,aAAA4M,MAED,SAAkBrK,EAAOxB,GACvB,KAAMwB,aAAiBtD,KAAS8B,aAAoB9B,KAAQ,MAAM,IAAI8N,MAAM,kCAC5E,OAAO,IAAItB,KAAK,CAAC,CAAClJ,EAAOxB,IAC3B,GAAC,CAAAf,IAAA,MAAA4M,MAED,SAAW4vB,GACT,OAAO,IAAI/wB,KAAK+wB,EAClB,GAAC,CAAAx8B,IAAA,OAAA4M,MAED,SAAY4vB,GACV,OAAO,IAAI/wB,KAAK+wB,EAClB,qFAACxZ,CAAA,CA9nBO,KA0BoB,CAAC,KA1BrB,0BAAJA,yFAioBN,4ECroBI/jB,EAAQD,EAAQ,MAGpB,SAAS+jC,EAAShpB,GAChB,IAAKA,EAAgB,MAAM,IAAIhN,MAAM,6BACrC,IAAIijB,EAAkB5N,SAASgN,cAAc,YAE7C,IACEhqB,MAAMC,KAAK2qB,EAAgBpb,UAAU/U,SAAQ,SAAAmjC,GACrB,YAAlBA,EAAMj8B,SAA2C,OAAlBi8B,EAAMj8B,SACvCipB,EAAgBkN,YAAY8F,EAEhC,IAEA,IAEAC,EADqB,IADAjkC,EAAQ,MACR,CAAmB+a,GACampB,kBAA/CnnB,EAAUknB,EAAVlnB,WAAYnB,EAAeqoB,EAAfroB,gBACd1b,EAAQF,EAAQ,KACpB4b,IAAAA,EAAoBb,EAAera,MAAM,MAAMsF,KAAI,SAAAgS,GAAI,OAAI9X,EAAK,IAAK8X,EAAKzS,MAAM,iBAAiB,IAAIvE,GAAG,IAAE+9B,MAAK,SAAA/9B,GAAG,OAAIA,CAAG,KACzH,IAAIkM,EAAejN,EAAK,IAAK2b,GAE7BoV,EAAgB+C,QAAQ7mB,aAAeA,EAAavL,UACpDqvB,EAAgB+C,QAAQmB,UAAW,EACnClE,EAAgB+C,QAAQ3c,kBAAoB4Z,EAAgB+C,QAAQ3c,mBAAqB,GAEzF,IAEIlU,EAAaihC,EAFankC,EAAQ,KAGlBokC,CAAwBrnB,EAAWlB,mBAAoB,KAAMD,GAEjF,IAAK,IAAI5a,KAFNkC,EAAYihC,EAAZjhC,aAEamhC,EAAAA,EACVA,EAAAA,EAAcv2B,eAAe9M,WACxBqjC,EAAAA,EAAcrjC,GAKzBoC,OAAOC,KAAKH,GAAcrC,SAAQ,SAAAT,GAChC,IAAM6B,EAAqBI,KAAKsnB,MAAMzmB,EAAa9C,IAA7C6B,iBACNoiC,EAAAA,EAAcpkC,EAAK,IAAKgC,GAAkBN,WAAaowB,QAAQC,QAAQ3vB,KAAKsnB,MAAMzmB,EAAa9C,IACjG,IAGA,IAAI4jB,EAAOhkB,EAAAA,KAAAA,EAEPgQ,EADOgU,EAAI,IAAKkB,OAAOqH,SAAS7P,KAAK7W,MAAM,IACzBmK,WAElBA,IAAeq0B,EAAAA,EAAcv2B,eAAekC,EAAWrO,YACzD4rB,QAAQE,aAAa,KAAM,KAAMlB,SAAS+X,SAAW/X,SAASgY,QAGhEvkC,EAAAA,MAAAA,IACAA,EAAAA,MAAAA,EAAoC89B,iBAAmB,CAAC,EAExD99B,EAAQ,MAEJklB,OAAOqH,SAAS7P,KAClBsH,EAAK4B,QAAQzX,UAEb6V,EAAKkK,QAAQ/f,QAAQ,CAAE6d,YAAa,WAExC,CAAE,MAAMjC,GAIN,MAHAwD,QAAQE,aAAa,KAAM,KAAMlB,SAAS+X,SAAW/X,SAASgY,QACpCvkC,EAAAA,MAAAA,EACNoyB,SAAS,CAAErO,IAAK,IAC9BgG,CACR,CACF,kGCnEA,SAASya,EAAYvkB,GACnB,OAAO,SAAC8J,GAEN,GADAA,EAAEuD,oBAoCEtT,EAAYkL,OAAOuf,iBACLzqB,EAAU0qB,WAAa,IAAM1qB,EAAU2qB,YApCzD,CAkCJ,IACQ3qB,EA/BgE4G,EAFhEe,EAASoI,EAAEkD,SAAWlD,EAAEmD,QAE5B,OAAKvL,GAAWoI,EAAEnI,SAAU3B,EAAKwC,YAAexC,EAAK8B,eAIhDJ,GAAWoI,EAAEnI,SAAU3B,EAAKkZ,UAI5BxX,GAAWoI,EAAEnI,QAAW3B,EAAKa,WAI7Ba,GAAWoI,EAAEnI,SAAU3B,EAAK8Z,wBAI1B9Z,EAAKyC,QAAQ,CAClBf,OAAAA,EACAgB,SAAUoH,EAAEnI,OACZgB,aAAcmH,EAAElI,SAChBkM,cAAc,EACdlL,aAAa,EACbmZ,kBAAkB,EAClB/N,mBAAmB,EACnBiF,sBAAsB,EACtBxE,oBAAoB,IAZbzO,EAAKQ,SARLR,EAAKQ,OAAO,CAAEsN,cAAc,KAJb,QAAfnN,EAAAX,EAAKO,kBAAU,IAAAI,OAAA,EAAfA,EAAiBH,OAAO,CAAEsN,cAAc,EAAMmF,sBAAsB,MAAWlP,EAAAA,EAAKxkB,KAAK2O,QAAQ,CAAE4f,cAAc,GAL9F,CA+B9B,CACF,gKCZA,QArBoB,SAACxqB,GACnB,GAAI8gC,EAAAA,EAAc9gC,EAAM5B,WAAY,OAAO0iC,EAAAA,EAAc9gC,EAAM5B,WAE/D,IAAIijC,GAAYxtB,EAAAA,GAAoB,IAAMA,EAAAA,GAAoB,IAAM,UAAY7T,EAAM0b,gBAAkB,QAEpG4lB,EAAUC,MAAMF,GAClBrjB,MAAK,SAAAwjB,GACH,OAAOA,EAAIzhC,OAAOie,MAAK,SAACje,GAEtB,OCXR,SAAuB0hC,GACrB,MAAI1hC,EAAOjB,KAAKC,UAAU0iC,GAC1BhU,EAAAA,GAAgBiU,kBAAoBjU,EAAAA,GAAgBiU,mBAAqB,MAIrE3hC,EAAKyC,SAFK,srBAEYC,KAAI,SAAAC,GAAC,OAAIA,EAAE,IAAMA,EAAE,EAAE,IAAEpF,SAAQ,SAAAoK,GACvD,IAAIi6B,EAAQ,IAAIC,MAChBD,EAAME,IAAMn6B,EACZ+lB,EAAAA,GAAgBiU,kBAAkB9hC,KAAK+hC,EACzC,GACF,CDDQG,CAAc/hC,GACPA,CACT,GACF,IAAE,OAAO,WAEP,OADA+gC,EAAAA,EAAc9gC,EAAM5B,gBAAamB,EAC1BivB,QAAQuT,OAAO,IAAIv3B,MAAM,+BAADtK,OAAgCF,EAAM0b,gBAAe,MACtF,IAIF,OAFAolB,EAAAA,EAAc9gC,EAAM5B,WAAakjC,EAE1BA,CACT,4GEpBA,SAASU,EAAerjC,EAAaD,GACnC,IAAIsB,EAAQ,IAAItD,IAAJ,CAAUgC,GAElBujC,EAAiBpiB,SAASgN,cAAc,uBAAD3sB,OAAwBF,EAAMob,aAAY,OACrF,GAAI6mB,EAAgB,OAAOA,EAE3B,IAAIC,EAAgBriB,SAASsiB,cAAc,MAU3C,OATAD,EAAc1R,QAAQyK,UAAYj7B,EAAM5B,UACxC8jC,EAAcxgB,MAAM9W,QAAU,OAC9Bs3B,EAAchV,UAAUwI,IAAI,iBAE5B/2B,EAAYrB,SAAQ,SAAAmL,GACH25B,EAAoB35B,GAC1BnL,SAAQ,SAAAygB,GAAO,OAAImkB,EAAclG,YAAYje,EAAQ,GAChE,IAEOmkB,CACT,CAmEA,SAASG,EAAUtkB,GACjB,OAAO,SAASjS,GACd,IAAKiS,EAAS,OAAOhR,QAAQ8L,MAAM,8CAE/BgH,SAASoS,KAAKS,SAAS3U,GACzBjS,IAGAwgB,YAAW,kBAAM+V,EAAUtkB,EAAVskB,CAAmBv2B,EAAS,GAAE,EAEnD,CACF,CAEA,SAASw2B,EAAwBvkB,GAE/B,IAAIsC,EAAOtC,EAAQsI,wBACfkc,EAAe,CAAE/hB,IAAKH,EAAKG,IAAK2D,KAAM9D,EAAK8D,KAAMhC,OAAQ9B,EAAK8B,OAAQU,MAAOxC,EAAKwC,OA4BtF,OAzBAhgB,MAAMC,KAAKib,EAAQ1L,UAAU/U,SAAQ,SAAAmjC,GAEnC,IAAI+B,EAAY/B,EAAMpa,wBAGtBkc,EAAa/hB,IAAMjK,KAAKgP,IAAIgd,EAAa/hB,IAAKgiB,EAAUhiB,KACxD+hB,EAAape,KAAO5N,KAAKgP,IAAIgd,EAAape,KAAMqe,EAAUre,MAC1Doe,EAAapgB,OAAS5L,KAAKC,IAAI+rB,EAAapgB,OAAQqgB,EAAUrgB,QAC9DogB,EAAa1f,MAAQtM,KAAKC,IAAI+rB,EAAa1f,MAAO2f,EAAU3f,OAG5D,IAAI4f,EAAoBH,EAAwB7B,GAChD8B,EAAa/hB,IAAMjK,KAAKgP,IAAIgd,EAAa/hB,IAAKiiB,EAAkBjiB,KAChE+hB,EAAape,KAAO5N,KAAKgP,IAAIgd,EAAape,KAAMse,EAAkBte,MAClEoe,EAAapgB,OAAS5L,KAAKC,IAAI+rB,EAAapgB,OAAQsgB,EAAkBtgB,QACtEogB,EAAa1f,MAAQtM,KAAKC,IAAI+rB,EAAa1f,MAAO4f,EAAkB5f,MACtE,IAGA0f,EAAa1nB,MAAQ0nB,EAAa1f,MAAQ0f,EAAape,KACvDoe,EAAajc,OAASic,EAAapgB,OAASogB,EAAa/hB,IAKlD+hB,CACT,6yCC1HA,SAASH,EAAoB35B,EAAOi6B,GAClC,GAAmB,SAAfj6B,EAAMgK,KACR,OA8CJ,SAAyBhK,GACvB,IAAIk6B,EAAQ,GAEZ,IAAKl6B,EAAMvK,KAAKiZ,SAAS,MAAO,CAC9B,IAAIyrB,EAAc/iB,SAASsiB,cAAc,QAGzC,OAFAS,EAAY1V,UAAUwI,IAAI,oBAC1BkN,EAAYzc,UAAY1d,EAAMvK,KACvB,CAAC0kC,EACV,CAkBA,OAhBAn6B,EAAMvK,KAAKf,MAAM,MAAMG,SAAQ,SAACulC,EAAah/B,EAAOi/B,GAClD,GAAID,EAAa,CACf,IAAID,EAAc/iB,SAASsiB,cAAc,QACzCS,EAAY1V,UAAUwI,IAAI,oBAE1BkN,EAAYzc,UAAY0c,EACxBF,EAAM/iC,KAAKgjC,EACb,CAEA,GAAI/+B,IAAUi/B,EAAShlC,OAAS,EAAG,CACjC,IAAIilC,EAAgBljB,SAASsiB,cAAc,QAC3CY,EAAc7V,UAAUwI,IAAI,yBAC5BiN,EAAM/iC,KAAKmjC,EACb,CACF,IAEOJ,CACT,CAzEWK,CAAgBv6B,GAClB,GAAmB,UAAfA,EAAMgK,KAEf,OADAiwB,EAAcO,yBAAyBx6B,GAyH3C,SAAyBA,EAAOi6B,GAC9B,IAAIvf,EAAc+f,EAAez6B,EAAOi6B,GAGxCvf,EAAY+J,UAAUwI,IAAI,qBAC1BvS,EAAYqN,QAAQ/d,KAAO,QAC3B0Q,EAAYqN,QAAQ9c,YAAcjL,EAAMiL,YACxCyP,EAAYzP,YAAcjL,EAAMiL,YAChCyP,EAAYqN,QAAQnlB,eAAiB5C,EAAM4C,eAC3C8X,EAAY9X,eAAiB5C,EAAM4C,eAEnC,IAAIqI,EAAc,IAAIhX,IAAJ,CAAU+L,EAAMiL,aAC9BrI,EAAiB,IAAI3O,IAAJ,CAAU+L,EAAM4C,gBAGrC,OAFA8X,EAAY8F,KAAO,GAAH/oB,OAAM2T,EAAAA,GAAoB,IAAMA,EAAAA,GAAoB,IAAE3T,OAAGyxB,EAAAA,GAAW,KAAO,GAAE,KAAAzxB,OAAIwT,EAAYhM,IAAG,KAAAxH,OAAImL,EAAe3D,KAE5H,CAACyb,EACV,CAxIWggB,CAAgB16B,EAAOi6B,GACzB,GAAmB,WAAfj6B,EAAMgK,KAEf,OADAgO,EAAAA,EAAI,IAAKhY,EAAMtC,YAAYi4B,WAAW37B,KAAI,SAAAzC,GAAK,OAAIojC,EAAYpjC,EAAM,IAwIzE,SAA0ByI,EAAOi6B,GAC/B,IAAIvf,EAAc+f,EAAez6B,EAAOi6B,GAGxCvf,EAAY+J,UAAUwI,IAAI,sBAC1BvS,EAAYqN,QAAQ/d,KAAO,SAC3B0Q,EAAYqN,QAAQkD,kBAAoBjrB,EAAMtC,WAC9Cgd,EAAY5X,KAAO9C,EAAM8C,KACzB4X,EAAY8F,KAAOxI,EAAAA,EAAI,IAAKhY,EAAMtC,YAAY6xB,qBAE9C,IAAItb,EAAO,IAAIC,EAAAA,EAAKwG,GACpB,GAAIuf,EAAcW,gBAAgBC,SAAS5mB,EAAKwX,aAAc,CAC5D,IAAIqP,EAAY1jB,SAASsiB,cAAc,QACvCoB,EAAUrW,UAAUwI,IAAI,iCACxB6N,EAAUpd,UAAY,IACtBhD,EAAY0J,cAAc,kCAAkCmP,YAAYuH,EAC1E,CAqBA,OAlBAlB,EAAU3lB,EAAKqB,QAAfskB,EAAwB,WACtB,GAAK3lB,EAAKqB,UACLrB,EAAKqB,QAAQsD,QAAQ,sBAAsBtU,QAAQ8L,MAAM,wBAAyBsK,GAEnFzG,EAAKsC,OAAO,CACd,IAAIukB,EAAYpgB,EAAY0J,cAAc,kCAC1C0W,EAAUrW,UAAUC,OAAO,iCAEvBzQ,EAAK8mB,aAAergB,EAAY9B,QAAQ,mCAC1CkiB,EAAUrW,UAAUwI,IAAI,0BACxB6N,EAAUpd,UAAY,KACbzJ,EAAK+mB,iBACdF,EAAUrW,UAAUwI,IAAI,6BACxB6N,EAAUpd,UAAY,IAE1B,CACF,IAEO,CAAChD,EACV,CA7KWugB,CAAiBj7B,EAAOi6B,GAC1B,GAAmB,uBAAfj6B,EAAMgK,KACf,OA6KJ,SAA4BhK,EAAOi6B,GAEjC,IAAIvf,EAAc+f,EAAez6B,EAAOi6B,GAiBxC,OAfAvf,EAAY+J,UAAUC,OAAO,0BAG7BhK,EAAYwgB,gBAAgB,QAGxBxgB,EAAYygB,sBACdzgB,EAAY0gB,oBAAoB,QAAS1gB,EAAYygB,4BAC9CzgB,EAAYygB,qBAIrBzgB,EAAY+J,UAAUwI,IAAI,wBAC1BvS,EAAYqN,QAAQ/d,KAAO,WAEpB,CAAC0Q,EACV,CAjMW2gB,CAAmBr7B,EAAOi6B,GAC5B,GAAmB,uBAAfj6B,EAAMgK,KACf,OAiMJ,SAAiChK,EAAOi6B,GACtC,IAAIvf,EAActD,SAASsiB,cAAc,KACzChf,EAAY+J,UAAUwI,IAAI,0BAC1BvS,EAAYqN,QAAQ9c,YAAcjL,EAAMiL,YACxCyP,EAAYzP,YAAcjL,EAAMiL,YAChCyP,EAAYqN,QAAQnlB,eAAiB5C,EAAM4C,eAC3C8X,EAAY9X,eAAiB5C,EAAM4C,eACnC8X,EAAYqN,QAAQ5kB,eAAiBnD,EAAMmD,eAC3CuX,EAAYqN,QAAQ3kB,kBAAoBpD,EAAMoD,kBAC9CsX,EAAYqN,QAAQtyB,KAAOuK,EAAMvK,KAEjCuK,EAAMR,OAAO3K,SAAQ,SAAAymC,GACI3B,EAAoB2B,EAAUrB,GACpCplC,SAAQ,SAAA0mC,GAAe,OAAI7gB,EAAY6Y,YAAYgI,EAAgB,GACtF,IAEA7gB,EAAYoG,iBAAiB,aAAa,SAAC/C,GACzCA,EAAEuD,gBACJ,IAEA,IAAIje,EAAWm1B,EAAY,IAAItkB,EAAAA,EAAKwG,IACpCA,EAAYygB,oBAAsB93B,EAClCqX,EAAYoG,iBACV,QACAzd,GAGFqX,EAAY+J,UAAUwI,IAAI,qBAC1BvS,EAAYqN,QAAQ/d,KAAO,QAE3B,IAAIiB,EAAc,IAAIhX,IAAJ,CAAU+L,EAAMiL,aAC9BrI,EAAiB,IAAI3O,IAAJ,CAAU+L,EAAM4C,gBAErC,OADA8X,EAAY8F,KAAO,GAAH/oB,OAAM2T,EAAAA,GAAoB,IAAMA,EAAAA,GAAoB,IAAE3T,OAAGyxB,EAAAA,GAAW,KAAO,GAAE,KAAAzxB,OAAIwT,EAAYhM,IAAG,KAAAxH,OAAImL,EAAe3D,KAC5H,CAACyb,EACV,CAnOW8gB,CAAwBx7B,EAAOi6B,GACjC,GAAmB,aAAfj6B,EAAMgK,KACf,OAmOJ,SAA4BhK,EAAOi6B,GACjC,IAAIvf,EAActD,SAASsiB,cAAc,KACzChf,EAAY+J,UAAUwI,IAAI,wBAC1BvS,EAAY+J,UAAUwI,IAAI,0BAC1BvS,EAAYqN,QAAQ/d,KAAO,WAC3B0Q,EAAYqN,QAAQtyB,KAAOuK,EAAMvK,KACjCilB,EAAY+gB,aAAa,OAAQz7B,EAAMf,KACvCyb,EAAY+gB,aAAa,SAAU,UACnC/gB,EAAYqN,QAAQyI,UAAYxwB,EAAMf,IAEtC26B,EAAUlf,EAAVkf,EAAuB,WACjBlf,EAAY0J,cAAc,QAAQ1J,EAAY+J,UAAUwI,IAAI,sBAClE,IAEA,IAAIyO,EAAmBtkB,SAASsiB,cAAc,QAC9CgC,EAAiBjX,UAAUwI,IAAI,iCAC/BvS,EAAY6Y,YAAYmI,GAExB17B,EAAMR,OAAO3K,SAAQ,SAAAymC,GACI3B,EAAoB2B,EAAUrB,GACpCplC,SAAQ,SAAA0mC,GAAe,OAAIG,EAAiBnI,YAAYgI,EAAgB,GAC3F,IAEA,IAAIT,EAAY1jB,SAASsiB,cAAc,QAIvC,OAHAoB,EAAUrW,UAAUwI,IAAI,6BACxByO,EAAiBnI,YAAYuH,GAEtB,CAACpgB,EACV,CA/PWihB,CAAmB37B,EAAOi6B,GAC5B,GAAmB,UAAfj6B,EAAMgK,KACf,OA+PJ,SAAqBhK,EAAOi6B,GAE1B,IAAI2B,EAAkBxkB,SAASsiB,cAAc,OAC7CkC,EAAgBnX,UAAUwI,IAAI,0BAG9B,IAAI4O,EAAkBzkB,SAASsiB,cAAc,OAC7CmC,EAAgBpX,UAAUwI,IAAI,gBAE9B,IAAI6O,EAAe1kB,SAASsiB,cAAc,OAU1C,GATAoC,EAAaL,aAAa,MAAOz7B,EAAMpB,aACvCk9B,EAAaL,aAAa,WAAY,SAEtCI,EAAgBtI,YAAYuI,GAExB97B,EAAMnB,OACRi9B,EAAaL,aAAa,QAASz7B,EAAMnB,OAGvCmB,EAAMlB,QAAS,CACjB,IAAIq7B,EAAc/iB,SAASsiB,cAAc,QACzCS,EAAY1V,UAAUwI,IAAI,wBAC1B4O,EAAgBtI,YAAY4G,GAE5Bn6B,EAAMR,OAAO3K,SAAQ,SAAAymC,GACI3B,EAAoB2B,EAAUrB,GACpCplC,SAAQ,SAAA0mC,GAAe,OAAIpB,EAAY5G,YAAYgI,EAAgB,GACtF,GACF,CAUA,OARIv7B,EAAMuL,SACRuwB,EAAaL,aAAa,MAAOz7B,EAAMuL,SAGzCwwB,EAAuBD,EAAc7B,GAErC2B,EAAgBrI,YAAYsI,GAErB,CAACD,EACV,CAtSWI,CAAYh8B,EAAOi6B,GACrB,GAAmB,iBAAfj6B,EAAMgK,KACf,OA+UJ,SAA2BhK,EAAOi6B,GAChC,IAAIgC,EAAa7kB,SAASsiB,cAAc,OACxCuC,EAAWxX,UAAUwI,IAAI,mBAEzB,IAAIiP,EAAW9kB,SAASyH,cAAcsd,yBAAyBn8B,EAAMyL,MAgBrE,OAfAwwB,EAAW1I,YAAY2I,GAEvB9hC,MAAMC,KAAK4hC,EAAW5kB,iBAAiB,2BAA2BxiB,SAAQ,SAACunC,GACvE,IAAIC,EAAmBD,EAAerU,QAAQuU,kBACjCt8B,EAAM0L,gBAAgB2wB,GAC5BxnC,SAAQ,SAAAmL,GACE25B,EAAoB35B,EAAOi6B,GACjCplC,SAAQ,SAAAygB,GAAO,OAAI8mB,EAAe7I,YAAYje,EAAQ,GACjE,GACJ,IAEAvN,EAAIk0B,EAAW5kB,iBAAiB,QAAQxiB,SAAQ,SAACinC,GAC/CC,EAAuBD,EAAc7B,EACvC,IAEO,CAACgC,EACV,CApWWM,CAAkBv8B,EAAOi6B,GAC3B,GAAmB,oBAAfj6B,EAAMgK,KACf,OAoWJ,SAA8BhK,GAC5B,IAAIw8B,EAAqBplB,SAASsiB,cAAc,OAC5C+C,EAAWrlB,SAASslB,eAAe18B,EAAMvK,MAE7C,OADA+mC,EAAmBjJ,YAAYkJ,GACxB,CAACD,EACV,CAzWWG,CAAqB38B,GACvB,GAAmB,eAAfA,EAAMgK,KACf,OAyWJ,SAAyBhK,GACvB,IAAI48B,EAAaxlB,SAASsiB,cAAc,OACpCmD,EAAmBzlB,SAASsiB,cAAc,QAM9C,OALAkD,EAAWrJ,YAAYsJ,GAEvBA,EAAiBnf,UAAY1d,EAAMvK,KACnConC,EAAiBpY,UAAUwI,IAAI,qBAExB,CAAC2P,EACV,CAlXWE,CAAgB98B,GAClB,GAAmB,gBAAfA,EAAMgK,KACf,OAkXJ,SAA0BhK,EAAOi6B,GAC/B,IAAI8C,EAAoB3lB,SAASsiB,cAAc,cAC/CqD,EAAkBtB,aAAa,MAAOz7B,EAAM1F,WAE5C0F,EAAMR,OAAO3K,SAAQ,SAAAymC,GACI3B,EAAoB2B,EAAUrB,GACpCplC,SAAQ,SAAA0mC,GAAe,OAAIwB,EAAkBxJ,YAAYgI,EAAgB,GAC5F,IAGA,IAAIplC,EAAQ4mC,EAAkBC,WAAU,GAItCj1B,EAmBmB5R,EAnBPkhB,iBAAiB,MAAMxiB,SAAQ,SAAA+vB,GACzC7c,EAAI6c,EAAczF,YAAYtqB,SAAQ,SAAC4U,GACrC,GAAIA,EAAKgV,WAAaC,KAAKC,WAAalV,EAAKwf,YAAY5zB,OAAS,EAAG,CACnE,IAGqB2nB,EAHfvnB,EAAOgU,EAAKwf,YACZgU,EAASxzB,EAAKC,WACdwyB,EAAW9kB,SAAS8lB,yBAAyBjgB,+lBAAAC,CAClCznB,GAAI,IAArB,IAAAwnB,EAAA3R,MAAA0R,EAAAC,EAAAE,KAAAC,MAAuB,KAAd+f,EAAIngB,EAAApb,MACLw7B,EAAOhmB,SAASsiB,cAAc,QACpC0D,EAAK3Y,UAAUwI,IAAI,+BACnBmQ,EAAKnU,YAAckU,EACnBjB,EAAS3I,YAAY6J,EACvB,CAAC,OAAAtf,GAAAb,EAAAc,EAAAD,EAAA,SAAAb,EAAAe,GAAA,CAEDif,EAAOI,aAAanB,EAAUzyB,EAChC,CACF,GACF,IAKF,IAAI6zB,GAAqB,IAAIC,WAAYC,gBAAgB,6EAA8E,aAAahU,KAAK1T,WACrJ2nB,EAAuBH,EAAmBlZ,cAAc,KAC5DY,EAAAA,GAAgBuO,YAAY+J,GAC5BG,EAAqBlK,YAAYp9B,GAGjC,IAAIunC,GAAQ,EACRpjC,EAAY,KAgChB,OA9BAyN,EAAI5R,EAAMkhB,iBAAiB,gEAAgExiB,SAAQ,SAACygB,EAASla,EAAOuiC,GAClH,GAAIroB,EAAQmP,UAAUwF,SAAS,yBAC7B3vB,EAAY,SACP,KAAAsjC,EACDxY,EAAc9P,EAAQsI,wBACtBigB,EAAkBF,EAASviC,EAAQ,GACnC0iC,EAAkC,QAAtBF,EAAGD,EAASviC,EAAQ,UAAE,IAAAwiC,OAAA,EAAnBA,EAAqBhgB,wBAEpCmgB,EAA4BF,KAAoBA,aAAe,EAAfA,EAAiBpZ,UAAUwF,SAAS,2BACvD,OAA5B4T,EAAgB9hC,SAAkD,OAA9B8hC,EAAgBngB,WAErDmgB,IAAoBE,IACJ,OAAdzjC,EACFA,EAAY8qB,EAAYhL,MAAQ0jB,EAAa1jB,MAAQ,GAAK,EAE1DsjB,EAAQA,IAAUtY,EAAYhL,MAAQ0jB,EAAa1jB,MAAQ,GAAK,KAAO9f,EAG7E,CACF,IAGAmjC,EAAqBvL,YAAY/7B,GAE7BunC,GACFX,EAAkB1lB,iBAAiB,0BAA0BxiB,SAAQ,SAACuoC,GACpEA,EAAK3Y,UAAUwI,IAAI,qCACrB,IAGK,CAAC8P,EACV,CA7bWiB,CAAiBh+B,EAAOi6B,GAC1B,GAAmB,YAAfj6B,EAAMgK,KACf,OAAOi0B,EAAWj+B,EAAMqK,cAAe4vB,GAClC,GAAmB,UAAfj6B,EAAMgK,KACf,OAwdJ,SAAqBhK,EAAOi6B,GAC1B,IAAIiE,EAAe9mB,SAASsiB,cAAc,SAC1CwE,EAAazC,aAAa,MAAO,QAC7Bz7B,EAAMyO,KAAKyvB,EAAazC,aAAa,MAAO,OAEhDz7B,EAAM0M,KAAK7X,SACT,SAACspC,GACC,IAAIC,EAAkBhnB,SAASsiB,cAAc,MACzC15B,EAAMyO,KAAK2vB,EAAgB3C,aAAa,MAAO,OAEnD0C,EAAItpC,SACF,SAAC2Y,GACC,IAAI6wB,EAAmBjnB,SAASsiB,cAAc,MAC1ClsB,EAAWH,QAAQgxB,EAAiB5Z,UAAUwI,IAAI,UAClDzf,EAAW8wB,SAASD,EAAiB5C,aAAa,UAAWjuB,EAAW8wB,SACxE9wB,EAAW+wB,SAASF,EAAiB5C,aAAa,UAAWjuB,EAAW+wB,SAE5E/wB,EAAWhO,OAAO3K,SAChB,SAACmL,GACqB25B,EAAoB35B,EAAOi6B,GAEjCplC,SAAQ,SAAA2pC,GAEa,IAA7BhxB,EAAWhO,OAAOnK,QADE,SAAlBopC,EAAmB5U,GAAE,MAAoB,MAAfA,EAAG9tB,SAA2C,IAAvB8tB,EAAGjgB,SAASvU,QAAgBopC,EAAgB5U,EAAGjgB,SAAS,GAAI,CAC7E60B,CAAgBD,KACpDH,EAAiB5Z,UAAUwI,IAAI,0BAC/BoR,EAAiB5Z,UAAUwI,IAAI,+BAC/B2M,EAAUyE,EAAVzE,EAA4B,WAC1B,IAAIlf,EAAc8jB,EAAa90B,WAAW0a,cAAc,KACxD1J,EAAY+J,UAAUwI,IAAI,qBAC1BvS,EAAY0gB,oBAAoB,QAAS1gB,EAAYygB,qBACrDkD,EAAiBvd,iBAAiB,QAASpG,EAAYygB,oBACzD,KAGFkD,EAAiB9K,YAAYiL,EAC/B,GACF,IAGGhxB,EAAWJ,OACdgxB,EAAgB7K,YAAY8K,EAEhC,IAEFH,EAAa3K,YAAY6K,EAC3B,IAGF,IAAId,GAAqB,IAAIC,WAAYC,gBAAgB,6EAA8E,aAAahU,KAAK1T,WACrJ2nB,EAAuBH,EAAmBlZ,cAAc,KAC5DY,EAAAA,GAAgBuO,YAAY+J,GAC5BG,EAAqBlK,YAAY2K,GAEjC,IAAIQ,EAAQ,CAACC,QAAS,EAAGC,UAAWjZ,IAAUkZ,SAAU,EAAGC,SAAUnZ,KA2CrE,OAzCA5d,EAAIm2B,EAAa7mB,iBAAiB,OAAOxiB,SAAQ,SAAAwpC,GAC/C,IAAIU,EAAOV,EAAiBW,aAAa,WACrCC,EAAOZ,EAAiBW,aAAa,WAErCE,EAAShmB,OAAOC,iBAAiBklB,GACjCc,EAAcC,SAASF,EAAOC,YAAa,IAC3CE,EAAeD,SAASF,EAAOG,aAAc,IAC7CC,EAAaF,SAASF,EAAOI,WAAY,IACzCC,EAAgBH,SAASF,EAAOK,cAAe,IAK/CC,EAHYnB,EAAiBzgB,wBAAwBxL,MAGnB+sB,EAAcE,EAChDI,EAHapB,EAAiBzgB,wBAAwBC,OAGlByhB,EAAaC,GAEhDR,GAAQS,EAAsBd,EAAMC,SAAQD,EAAMC,OAASa,IAC3DT,GAAQS,EAAsBd,EAAME,YAAWF,EAAME,UAAYY,IACjEP,GAAQQ,EAAuBf,EAAMG,UAASH,EAAMG,QAAUY,IAC9DR,GAAQQ,EAAuBf,EAAMI,WAAUJ,EAAMI,SAAWW,EACvE,IAEA13B,EAAIm2B,EAAa7mB,iBAAiB,OAAOxiB,SAAQ,SAAA6qC,GAC/CA,EAAGzmB,MAAM7G,MAAQssB,EAAMC,OAAS,IAClC,IAEAT,EAAanW,QAAQ4W,OAASD,EAAMC,OACpCT,EAAanW,QAAQ6W,UAAYF,EAAME,UACvCV,EAAanW,QAAQ4X,UAAYjB,EAAMC,OAASD,EAAME,UAEtD72B,EAAIm2B,EAAa7mB,iBAAiB,OAAOxiB,SAAQ,SAAA6qC,GAC/CA,EAAGzmB,MAAM4E,OAAS6gB,EAAMG,QAAU,IACpC,IAEAX,EAAanW,QAAQ8W,QAAUH,EAAMG,QACrCX,EAAanW,QAAQ+W,SAAWJ,EAAMI,SACtCZ,EAAanW,QAAQ6X,WAAalB,EAAMG,QAAUH,EAAMI,SAExD9Z,EAAAA,GAAgBkN,YAAYoL,GAC5BG,EAAqBvL,YAAYgM,GAE1B,CAACA,EACV,CAzjBW2B,CAAY7/B,EAAOi6B,GACrB,GAAmB,SAAfj6B,EAAMgK,KACf,OAyjBJ,SAAoBhK,EAAOi6B,GAAe,IAAA6F,EAAAC,EAAAC,EAAAC,EACpCC,EAAc9oB,SAASsiB,cAAc,OACzCwG,EAAYzb,UAAUwI,IAAI,eAEtBjtB,EAAMyO,MAAKyxB,EAAY3yB,IAAM,OAET,UAApBvN,EAAMuO,WAAuB2xB,EAAYzb,UAAUwI,IAAI,sBACnC,SAApBjtB,EAAMuO,WAAsB2xB,EAAYzb,UAAUwI,IAAI,qBAClC,UAApBjtB,EAAMuO,WAAuB2xB,EAAYzb,UAAUwI,IAAI,sBAE3D,IAoGIkT,EApGAC,EAAc,CAAC,aAAc,eAAgB,aAAc,YAAa,eAAgB,aAAc,YAAa,aACnHC,EAAqB,EAErBC,EAAetgC,EAAM4K,MAAM5Q,KAAI,SAACwT,GAClC,IAAI+yB,EAAkBnpB,SAASsiB,cAAc,OAC7C6G,EAAgB9b,UAAUwI,IAAI,oBAC9B,IAAIyO,EAAmBtkB,SAASsiB,cAAc,OAsB9C,GArBAgC,EAAiBjX,UAAUwI,IAAI,iCAE3Bzf,EAAWH,SAAQkzB,EAAgBtnB,MAAMI,QAAU,KAEnCsgB,EAAoBnsB,EAAWhO,OAAO,GAAIy6B,GAEhDplC,SAAQ,SAAA2pC,GACa,IAA7BhxB,EAAWhO,OAAOnK,QAAyC,MAAzBmpC,EAAaziC,UACjDwkC,EAAgB9b,UAAUwI,IAAI,yBAC9BsT,EAAgB9b,UAAUwI,IAAI,+BAC9BsT,EAAgBzf,iBAAiB,QAAS0d,EAAarD,qBACvDqD,EAAapD,oBAAoB,QAASoD,EAAarD,sBAEzDO,EAAiBnI,YAAYiL,GAC7B+B,EAAgBhN,YAAYmI,IAExBluB,EAAWe,WAAa,CAAC,OAAQ,SAASG,SAAS1O,EAAMuO,aAC3DgyB,EAAgB9b,UAAUwI,IAAI,oBAADx1B,OAAqB+V,EAAWe,WAAavO,EAAMuO,UAAS,YAE7F,IAEIf,EAAWgB,KAAM,CACnB,IAAIgyB,EAAiBppB,SAASsiB,cAAc,QAC5C8G,EAAe/b,UAAUwI,IAAI,uBAC7BuT,EAAeC,UAAYjzB,EAAWnB,QAAU,UAChDqvB,EAAiBgF,QAAQF,GACzBD,EAAgB9b,UAAUwI,IAAI,2BAChC,CAEA,OAAOsT,CACT,IAEIjD,GAAqB,IAAIC,WAAYC,gBAAgB,6EAA8E,aAAahU,KAAK1T,WACrJ2nB,EAAuBH,EAAmBlZ,cAAc,KACxDuc,EAAiBC,IACrB5b,EAAAA,GAAgBuO,YAAY+J,GAC5BG,EAAqBlK,YAAY2M,GACjCA,EAAY3M,YAAYoN,GAExB,IAAK,IAAI/gC,EAAI,EAAGA,EAAI0gC,EAAajrC,OAAQuK,IAAK,CAC5C,IAAI2gC,EAAkBD,EAAa1gC,GAGnC,IAFA+gC,EAAepN,YAAYgN,KAEd,CACPF,IAAuBD,EAAYzgB,QAAQ,cAAgB3f,EAAM4K,MAAMvV,OAAS,IAClFgrC,EAAqBD,EAAYzgB,QAAQ,iBAE3CugB,EAAYzb,UAAUwI,IAAI,UAADx1B,OAAW2oC,EAAYC,KAEhD,IAAIQ,EAAsBhH,EAAwB0G,EAAgBnc,cAAc,mCAE5E0c,EAAYP,EAAgB3nB,QAAQ,qBACpCmoB,EAAkB7nB,OAAOC,iBAAiB2nB,GAC1CE,EAAgBF,EAAUljB,wBAE1BqjB,EAAuBC,WAAWH,EAAgB5B,aAClDgC,EAAwBD,WAAWH,EAAgB1B,cACnD+B,EAAsBF,WAAWH,EAAgBzB,YACjD+B,EAAyBH,WAAWH,EAAgBxB,eAEpD+B,EAAwB,CAC1BvpB,IAAKipB,EAAcjpB,IAAMqpB,EACzB1lB,KAAMslB,EAActlB,KAAOulB,EAC3BvnB,OAAQsnB,EAActnB,OAAS2nB,EAC/BjnB,MAAO4mB,EAAc5mB,MAAQ+mB,GAG3BI,EAA4BV,EAAoBnlB,KAAO4lB,EAAsB5lB,MAAQmlB,EAAoBzmB,MAAQknB,EAAsBlnB,MACvIonB,EAA0BX,EAAoB9oB,IAAMupB,EAAsBvpB,KAAO8oB,EAAoBnnB,OAAS4nB,EAAsB5nB,OAExI,IAAK6nB,IAA8BC,EAAyB,MAE5D,GAAInB,GAAsBD,EAAY/qC,OAAS,EAAG,MAElD6qC,EAAYzb,UAAUC,OAAO,UAADjtB,OAAW2oC,EAAYC,KACnDA,IACAzgC,EAAI,CACN,CACF,CAOA,SAASghC,IACP,IAAIa,EAASrqB,SAASsiB,cAAc,OAIpC,OAHA+H,EAAOhd,UAAUwI,IAAI,mBACjBjtB,EAAMyO,MAAKgzB,EAAOl0B,IAAM,OAC5B2yB,EAAY3M,YAAYkO,GACjBA,CACT,CAXAhE,EAAqB/Y,SACrBic,EAAejc,SACf4Y,EAAmB5Y,SACnBwb,EAAYzb,UAAUwI,IAAI,UAADx1B,OAAW2oC,EAAYC,KAW5CD,EAAYC,GAAoB3xB,SAAS,UAASyxB,EAAU,GAC5DC,EAAYC,GAAoB3xB,SAAS,WAAUyxB,EAAU,GAC7DC,EAAYC,GAAoB3xB,SAAS,aAAYyxB,EAAU,GAC/DC,EAAYC,GAAoB3xB,SAAS,WAAUyxB,EAAU,GAMjE,IAHA,IAAI/B,EAAkBwC,IAGbhhC,EAAI,EAAGA,EAAI0gC,EAAajrC,OAAQuK,IAEvCw+B,EAAgB7K,YAAY+M,EAAa1gC,KAGpCA,EAAI,GAAKugC,GAAY,GAAMvgC,EAAI,IAAO0gC,EAAajrC,SACtD+oC,EAAkBwC,KAItB,GAAIV,EAAY/gB,WAAW9pB,OAAS,EAGlC,IAFA,IAAMqsC,EAAiBpB,EAAajrC,OAAS8qC,EACvCwB,EAAaD,EAAiB,EAAIvB,EAAUuB,EAAiB,EAC1D9hC,EAAI,EAAGA,EAAI+hC,EAAY/hC,IAAK,CACnC,IAAIgiC,EAAiBxqB,SAASsiB,cAAc,OAC5CkI,EAAend,UAAUwI,IAAI,oBAC7B2U,EAAe3oB,MAAMI,QAAU,IAC/B+kB,EAAgB7K,YAAYqO,EAC9B,CAYF,OAPkF,QADlF9B,EAAA/3B,EAAIq2B,EAAgBjf,YACjBhV,QAAO,SAAAmL,GAAO,OAAIA,EAAQmP,UAAUwF,SAAS,iCAAiC,WAAC,IAAA6V,GAAK,QAALC,EADlFD,EACqF,UAAE,IAAAC,GADvFA,EAEItb,UAAUwI,IAAI,gCAGyE,QAD3F+S,EAAAj4B,EAAIq2B,EAAgBjf,YACjBhV,QAAO,SAAAmL,GAAO,OAAIA,EAAQmP,UAAUwF,SAAS,gCAAgC,IAAEpwB,OAAO,UAAE,IAAAmmC,GAAK,QAALC,EAD3FD,EAC8F,UAAE,IAAAC,GADhGA,EAEIxb,UAAUwI,IAAI,8BAEX,CAACiT,EACV,CAhtBW2B,CAAW7hC,EAAOi6B,GACpB,GAAmB,mBAAfj6B,EAAMgK,KACf,OAgtBJ,SAA6B83B,EAAoB7H,GAC/C,IAAI8H,EAAM3qB,SAASsiB,cAAc,OAC7BsI,EAAgB5qB,SAASsiB,cAAc,MAiB3C,OAhBAsI,EAAcvd,UAAUwI,IAAI,wBAC5B8U,EAAIxO,YAAYyO,GAEhBF,EAAmBnnC,MAAM9F,SAAQ,SAAAmX,GAC/B,IAAIi2B,EAAe7qB,SAASsiB,cAAc,QAC1CuI,EAAaxd,UAAUwI,IAAI,wBAC3B,IAAIwP,EAAWrlB,SAASslB,eAAe1wB,EAAKR,YAAc,MAC1Dy2B,EAAa1O,YAAYkJ,GACzBzwB,EAAKxM,OAAO3K,SAAQ,SAACmL,GACnB,IAAKw+B,EAAyDjjC,EAAzCo+B,EAAoB35B,EAAOi6B,GAAc,GAA7C,GACjBgI,EAAa1O,YAAYiL,EAC3B,IAEAuD,EAAIxO,YAAY0O,EAClB,IAEO,CAACF,EACV,CApuBWG,CAAoBliC,EAAOi6B,GAC7B,GAAmB,SAAfj6B,EAAMgK,KACf,OAouBJ,SAAwBhK,EAAOi6B,GAC7B,IAAI3kB,EAAU8B,SAASsiB,cAAc,KAKrC,OAJA15B,EAAMR,OAAO3K,SAAQ,SAAAymC,GACI3B,EAAoB2B,EAAUrB,GACpCplC,SAAQ,SAAA0mC,GAAe,OAAIjmB,EAAQie,YAAYgI,EAAgB,GAClF,IACO,CAACjmB,EACV,CA3uBW6sB,CAAeniC,EAAOi6B,GACxB,GAAmB,eAAfj6B,EAAMgK,KACf,OA0uBJ,SAA6BhK,EAAOi6B,GAClC,IAAI3kB,EAAU8B,SAASsiB,cAAc,KAKrC,OAJA15B,EAAMR,OAAO3K,SAAQ,SAAAymC,GACI3B,EAAoB2B,EAAUrB,GACpCplC,SAAQ,SAAA0mC,GAAe,OAAIjmB,EAAQie,YAAYgI,EAAgB,GAClF,IACO,CAACjmB,EACV,CAjvBW8sB,CAAoBpiC,EAAOi6B,GAC7B,GAAmB,YAAfj6B,EAAMgK,KACf,OAivBJ,SAA0BhK,EAAOi6B,GAC/B,IAAI3kB,EAAU8B,SAASsiB,cAAc,KAKrC,OAJA15B,EAAMR,OAAO3K,SAAQ,SAAAymC,GACI3B,EAAoB2B,EAAUrB,GACpCplC,SAAQ,SAAA0mC,GAAe,OAAIjmB,EAAQie,YAAYgI,EAAgB,GAClF,IACO,CAACjmB,EACV,CAxvBW+sB,CAAiBriC,EAAOi6B,GAC1B,GAAmB,gBAAfj6B,EAAMgK,KACf,OAwvBJ,SAA8BhK,GAC5B,IAAIsV,EAAU8B,SAASsiB,cAAc,QAErC,OADApkB,EAAQoI,UAAY1d,EAAMvK,KACnB,CAAC6f,EACV,CA5vBWgtB,CAAqBtiC,GACvB,GAAmB,aAAfA,EAAMgK,KACf,OA4vBJ,SAAuBhK,EAAOi6B,GAC5B,IAAIsI,EAAuBnrB,SAASsiB,cAAc,QAClD6I,EAAqBC,UAAY,iBAEjC,IAAIC,EAAcrrB,SAASsiB,cAAc,OACzC+I,EAAYxZ,YAAc,IAC1BwZ,EAAYhe,UAAUwI,IAAI,uBAC1BsV,EAAqBhP,YAAYkP,GAGjC,IAAIC,EAAkBtrB,SAASsiB,cAAc,QAU7C,OATAgJ,EAAgBF,UAAY,qBAC5BE,EAAgBn1B,IAAM,OACtBvN,EAAMR,OAAO3K,SAAQ,SAAAymC,GACI3B,EAAoB2B,EAAUrB,GACpCplC,SAAQ,SAAA0mC,GAAe,OAAImH,EAAgBnP,YAAYgI,EAAgB,GAC1F,IAGAgH,EAAqBhP,YAAYmP,GAC1B,CAACH,EACV,CAjxBWI,CAAc3iC,EAAOi6B,GAE5B,KAAM,yBAANxiC,OAA+BuI,EAAMgK,KAEzC,CA+BA,SAASywB,EAAez6B,EAAOi6B,GAC7B,IAAIvf,EAActD,SAASsiB,cAAc,KACzChf,EAAY+J,UAAUwI,IAAI,0BAC1BvS,EAAYqN,QAAQ5kB,eAAiBnD,EAAMmD,eAC3CuX,EAAYqN,QAAQ3kB,kBAAoBpD,EAAMoD,kBAC9CsX,EAAYqN,QAAQtyB,KAAOuK,EAAMvK,KAEjC,IAAIimC,EAAmBtkB,SAASsiB,cAAc,QAC9CgC,EAAiBjX,UAAUwI,IAAI,iCAC/BvS,EAAY6Y,YAAYmI,GAGxB17B,EAAMR,OAAO3K,SAAQ,SAAAymC,GACI3B,EAAoB2B,EAAUrB,GACpCplC,SAAQ,SAAA0mC,GAAe,OAAIG,EAAiBnI,YAAYgI,EAAgB,GAC3F,IAGA7gB,EAAYoG,iBAAiB,aAAa,SAAC/C,GACzCA,EAAEuD,gBACJ,IAEAoa,EAAiBnuB,IAAM,OAGvB,IACIlK,EAAWm1B,EADJ,IAAItkB,EAAAA,EAAKwG,IAoBpB,OAlBAA,EAAYygB,oBAAsB93B,EAClCqX,EAAYoG,iBAAiB,QAASzd,GAEtCu2B,EAAU8B,EAAV9B,EAA4B,WAC1B,IAAAgJ,EDhGJ,SAAiCttB,GAE/B,IAAMutB,EAAgB3pB,OAAOC,iBAAiB7D,GACxCwtB,EAAW5B,WAAW2B,EAAcC,UACpCC,EAAaF,EAAcE,WAEjC,IAAKD,GAAYA,GAAY,EAE3B,OADAx+B,QAAQ0+B,KAAK,iCACN,CAAC,EAAG,GAIb,IAAMC,EAAY3tB,EAAQ2T,YAAYv0B,MAAM,MAGtCwuC,EAAS9rB,SAASsiB,cAAc,UAEhCyJ,EAAUD,EAAOE,WAAW,KAAM,CAAEC,oBAAoB,IAS9D,SAASC,EAAkBra,GACzBka,EAAQI,UAAU,EAAG,EAAGL,EAAO9wB,MAAO8wB,EAAOrlB,QAC7CslB,EAAQK,SAASva,EAAa,EAAc,IAAX6Z,GAMjC,IAJA,IAAMW,EAAYN,EAAQO,aAAa,EAAG,EAAGR,EAAO9wB,MAAO8wB,EAAOrlB,QAAQ8lB,KACtE5rB,EAAM,KACN2B,EAAS,KAEJ7M,EAAI,EAAGA,EAAIq2B,EAAOrlB,OAAQhR,IACjC,IAAK,IAAID,EAAI,EAAGA,EAAIs2B,EAAO9wB,MAAOxF,IAEhC,GADc62B,EAAmC,GAAxB52B,EAAIq2B,EAAO9wB,MAAQxF,GAAS,GACzC,EAAG,CACD,OAARmL,IAAcA,EAAMlL,GACxB6M,EAAS7M,EACT,KACF,CAGJ,MAAO,CAAEkL,IAAAA,EAAK2B,OAAAA,EAChB,CAzBAwpB,EAAO9wB,MAAmB,GAAX0wB,EACfI,EAAOrlB,OAAoB,EAAXilB,EAChBK,EAAQS,KAAO,GAAHnsC,OAAMqrC,EAAQ,OAAArrC,OAAMsrC,GAChCI,EAAQU,aAAe,aAwBvB,IAK4B7mB,EALtB8mB,EAAkBR,EAAkB,MACtCS,EAAgB,EAChBC,EAAgB,EAEpB/mB,65BAAAC,CACmB+lB,GAAS,IAA5B,IAAAhmB,EAAA3R,MAAA0R,EAAAC,EAAAE,KAAAC,MAA8B,KACtB6mB,EAAaX,EADNtmB,EAAApb,OAGPsiC,EAAaJ,EAAgB/rB,IAAMksB,EAAWlsB,IAAM,EAAI+rB,EAAgB/rB,IAAMksB,EAAWlsB,IAAM,EAC/FosB,EAAaF,EAAWvqB,OAASoqB,EAAgBpqB,OAAS,EAAIuqB,EAAWvqB,OAASoqB,EAAgBpqB,OAAS,EAEjHqqB,EAAgBj2B,KAAKC,IAAIg2B,EAAeG,GACxCF,EAAgBl2B,KAAKC,IAAIi2B,EAAeG,EAC1C,CAAC,OAAArmB,GAAAb,EAAAc,EAAAD,EAAA,SAAAb,EAAAe,GAAA,CAED,MAAO,CAAC+lB,EAAeC,EACzB,CCiCmCI,CAAwB1I,GAAiB2I,EAAA9oC,EAAAqnC,EAAA,GAAnEsB,EAAUG,EAAA,GAAEF,EAAUE,EAAA,GACvBH,IAAYxI,EAAiBziB,MAAMqmB,WAAa,GAAH7nC,OAAqB,IAAfysC,EAAmB,EAAKA,EAAa,EAAE,OAC1FC,IAAYzI,EAAiBziB,MAAMsmB,cAAgB,GAAH9nC,OAAqB,IAAf0sC,EAAmB,EAAKA,EAAa,EAAE,OAGjG,IAAMtB,EAAgB3pB,OAAOC,iBAAiBuB,GACxC4pB,EAAapD,WAAW2B,EAAcyB,YAC7B5pB,EAAYkD,wBAAwBC,OAEtCymB,GACX5pB,EAAY+J,UAAUwI,IAAI,wBAE9B,IAEOvS,CACT,CA6LA,SAASqhB,EAAuBD,EAAc7B,GAC5C,IAAIsK,EAAiBzI,EAAa7iB,MAAM4E,OACpC2mB,EAAkB1I,EAAa7iB,MAAMI,QACrCorB,EAAgB3I,EAAa7iB,MAAM7G,MACvC,GAAI0pB,EAAaljB,QAAQ,iBAAkB,IAAI8rB,EAAyB5I,EAAaljB,QAAQ,iBAAiBK,MAAM7G,MAEpH0pB,EAAa7iB,MAAM0rB,YAAY,SAAUnrB,EAAAA,EAAoBC,cAAgB,MAC7EqiB,EAAa7iB,MAAM0rB,YAAY,QAAS,QACxC7I,EAAa7iB,MAAM0rB,YAAY,UAAW,KACtC7I,EAAaljB,QAAQ,kBAAkBkjB,EAAaljB,QAAQ,iBAAiBK,MAAM0rB,YAAY,QAAS,QAE5G9gB,YAAW,WACJiY,EAAa8I,WAAW9I,EAAaljB,QAAQ,kBAAkBkjB,GAAc7iB,MAAM0rB,YAAY,mBAAoB,UAC1H,GAAG,KAEH7I,EAAahb,iBAAiB,QAAQ,aACnCoF,EAAAA,EAAAA,OAAyBH,QAAQC,WAAWzQ,MAAK,WAAM,IAAAsvB,EAClDC,EAAiBtrB,EAAAA,EAAoBsrB,eACrCC,EAA8BD,EAAelnB,wBAAwBlE,OAEzEoiB,EAAa7iB,MAAM0rB,YAAY,SAAUJ,GACzCzI,EAAa7iB,MAAM0rB,YAAY,QAASF,GACxC3I,EAAa7iB,MAAM0rB,YAAY,UAAWH,GACtC1I,EAAaljB,QAAQ,kBAAkBkjB,EAAaljB,QAAQ,iBAAiBK,MAAM0rB,YAAY,QAASD,GAEvE,QAArCG,EAAA/I,EAAaljB,QAAQ,wBAAgB,IAAAisB,GAArCA,EAAuC5rB,MAAM0rB,YAAY,mBAAoB,eAC7E,IACI9e,EAD8Bif,EAAelnB,wBAAwBlE,OAChCqrB,EACrCC,EAAYxrB,EAAAA,EAAoB8L,cAAgBO,EAE9C+U,EAAoBX,EAApBW,gBACF5iB,EAAAA,EAAK4B,QAAQlL,SAASksB,KACxB3iB,EAAAA,EAAAA,IAAoB,CAClBF,IAAKitB,EACL5vB,SAAU,WAGhB,GACF,GACF,CAwHA,SAAS6oB,EAAWgH,EAAiBhL,GACnC,IAAIiL,EAAcD,EAAgB,GAAGx4B,QACnC2K,SAASsiB,cAAc,MACvBtiB,SAASsiB,cAAc,MAuBzB,OArBIuL,EAAgB,GAAGx4B,SACrBy4B,EAAYzJ,aAAa,OAAQwJ,EAAgB,GAAG54B,SAGtD44B,EAAgBpwC,SAAQ,SAACswC,GACvB,IAAIC,EAAkBhuB,SAASsiB,cAAc,MAS7C,GAPAyL,EAAe54B,aAAa1X,SAC1B,SAACmL,GACqB25B,EAAoB35B,EAAOi6B,GACjCplC,SAAQ,SAAA2pC,GAAY,OAAI4G,EAAgB7R,YAAYiL,EAAa,GACjF,IAGE2G,EAAev7B,SAASvU,OAAS,EAAG,CACtC,IAAKgwC,EAAgD9pC,EAAnC0iC,EAAWkH,EAAev7B,UAAS,GAAvC,GACdw7B,EAAgB7R,YAAY8R,EAC9B,CAEAH,EAAY3R,YAAY6R,EAC1B,IACO,CAACF,EACV,CA2UA,UC5vBA,QAvEA,SAASI,EAAc/tC,EAAOxB,EAAUkkC,GACtC,IAAMrlC,EAAyBqlC,EAAzBrlC,qBAEFmgB,EAoCN,SAA8Bxd,EAAOxB,EAAUkkC,GAC7C,IACEhkC,EACEgkC,EADFhkC,iBAAkB28B,EAChBqH,EADgBrH,UAAWh+B,EAC3BqlC,EAD2BrlC,qBAAsBgmC,EACjDX,EADiDW,gBAGjD7lB,EAAiBqC,SAASsiB,cAAc,WAC5C3kB,EAAe0P,UAAUwI,IAAI,kBAC7B,IAAIpU,EAAmBzB,SAASsiB,cAAc,KAC9C7gB,EAAiB4L,UAAUwI,IAAI,oBAC/BlY,EAAewe,YAAY1a,GAC3B9D,EAAekE,MAAM9W,QAAU,OAC/B4S,EAAekE,MAAMI,QAAU,IAC/BtE,EAAegT,QAAQ9xB,iBAAmBA,EAC1C8e,EAAegT,QAAQyK,UAAYj7B,EAAM5B,UACzCof,EAAeyd,UAAYj7B,EAAM5B,UACjCof,EAAegT,QAAQ2K,aAAe38B,EAASJ,UAC/Cof,EAAe2d,aAAe38B,EAASJ,UACvCof,EAAegT,QAAQ6K,UAAYA,EACnC7d,EAAegT,QAAQrqB,WAAak9B,EAAgB3L,wBAAwBl5B,GAAUyD,OAEtF,IAAIgG,EAAS5K,EAAqB2C,EAAM5B,WAExC,GAAI4B,EAAM5B,YAAcI,EAASJ,UAAW,CAC1C,IAAI4vC,EAAKnuB,SAASsiB,cAAc,MAChC6L,EAAG9gB,UAAUwI,IAAI,aACb2F,EAAY,GAAKpzB,EAAOnK,OAAS,GAAG0f,EAAe2rB,QAAQ6E,GAC/DxwB,EAAe0P,UAAUwI,IAAI,uBAC/B,CAEA,OAAOlY,CACT,CAlEuBywB,CAAqBjuC,EAAOxB,EAAUkkC,GACvDllC,EAAY,IAAI4kB,EAAAA,EAAU5E,GAE9BklB,EAAcO,yBAgBhB,SAAkCjjC,EAAOkuC,EAAsBxL,GAC7D,OAAO,SAACj6B,GACN,IAAM0lC,EAA4BzL,EAA5ByL,SAAUC,EAAkB1L,EAAlB0L,cACZvP,EAAcniC,IAAAA,cAAoB+L,EAAM4C,gBAExCgjC,EADuBF,EAAS7rC,MAAM,EAAG6rC,EAASrwC,OAASswC,EAActwC,QACnCghC,WAAW9+B,EAAO6+B,GAExDyP,EAAsBP,EACxB/tC,EACAtD,IAAAA,cAAoB+L,EAAM4C,gBAC1BxL,OAAOoJ,OAAO,CAAEolC,eAAAA,GAAkB3L,IAGpCwL,EAAqBlS,YAAYsS,EACnC,CACF,CA/B2CrL,CAAyBjjC,EAAOwd,EAAgBklB,GAEzF,IAAIzkC,EAAoBZ,EAAqBmB,EAASJ,WACtD,IAAKH,EAAmB,MAAM,IAAIuM,MAAM,sCAADtK,OAAuC1B,EAASJ,YAUvF,OARAskC,EAAcx9B,aAAelF,EAC7B0iC,EAAcvkC,gBAAkBK,EAEhCP,EAAkBX,SAAQ,SAACmL,GACV25B,EAAoB35B,EAAOi6B,GACjCplC,SAAQ,SAAAygB,GAAO,OAAIvgB,EAAU8jB,iBAAiB0a,YAAYje,EAAQ,GAC7E,IAEOP,CACT,g8BClBA,IAAI+wB,EAAe,CAAC,EAChBC,EAAc,CAAC,EAEnB,SAASC,IACPF,EAAe,CAAC,EAChBC,EAAc,CAAC,CACjB,CAEA,IAAMxd,EAAqB,SAArBA,EAAsBmd,EAAUC,EAAeM,GACnD,GAA6B,IAAzBN,EAActwC,OAAc,OAAO0wB,QAAQC,UAE/C,IAAI4U,EAAkB8K,EAAS7rC,MAAM,EAAG6rC,EAASrwC,OAASswC,EAActwC,OAAS,GAC7E6wC,EAAuBtL,EAAgBuL,uBACvCC,EAA4BpuB,EAAAA,EAAKse,sBAAsB4P,EAAsBlhB,EAAAA,IAG7EqhB,GAFmCD,EAA4BrgB,QAAQC,QAAQogB,GAA6B,OAEhDN,EAAaI,EAAqB1sC,SAAWmhC,EAAYgL,EAAc3hC,YACpIuR,MAAK,SAAA5b,GAA6D,IAA1D/E,EAAoB+E,EAApB/E,qBAAsBqB,EAAgB0D,EAAhB1D,iBAAkBC,EAAWyD,EAAXzD,YAG/C,OAFA6vC,EAAYJ,EAAc3hC,WAAWrO,WAAa,CAACO,EAAaD,GAEzDqvC,EACLK,EAAc3hC,WACd2hC,EAAc3hC,WACd,CACE2hC,cAAAA,EACA1vC,iBAAAA,EACArB,qBAAAA,EACA8wC,SAAAA,EACA9K,gBAAAA,EACAhI,UAAW8S,EAASrwC,OAASswC,EAActwC,QAGjD,IAAE,OAAO,SAAA0oB,GAAyB,OAAlBzZ,QAAQ8L,MAAM2N,GAAW,IAAM,IAEjD+nB,EAAaI,EAAqB1sC,QAAU6sC,EAE5C,IAAIC,EAAmBvgB,QAAQwgB,IAAI,CAACN,EAAsBI,IAAwB9wB,MAAK,SAAAzb,GAAqC,IAAAK,EAAAoB,EAAAzB,EAAA,GAAnC8qB,EAAazqB,EAAA,GAAE4a,EAAc5a,EAAA,GACpH,OAAKyqB,GAAkB7P,GACnB2wB,EAAS5jB,OAAO6jB,IAAgB3gB,EAAAA,GAAgB0b,QAAQnH,EAAerF,aAAY6R,EAAYhxB,EAAegT,QAAQyK,aACtH5N,IAAkBI,EAAAA,IAAoBhN,EAAAA,EAAKwuB,oBAAoB5hB,EAAe+gB,IAC7EhsB,EAAAA,EAAU4I,OAAO2jB,KACpBvsB,EAAAA,EAAUsY,cAAcld,EAAgB6P,GACxCjL,EAAAA,EAAU8sB,kBAAkB1xB,GAC5B4E,EAAAA,EAAU+sB,gBAAgB3xB,IAErBgR,QAAQC,SAAQ,IANkFD,QAAQC,SAAQ,IAF3ED,QAAQC,SASxD,IAEI2gB,EAAyBN,EAAsB9wB,MAAK,SAAAR,GACtD,OAAKA,EACD4wB,EAAc//B,cAAcjQ,YAAcof,EAAegT,QAAQyK,UAC5Dzd,EAEAA,EAAeqP,cAAc,+BAAD3sB,OAAgCkuC,EAAc//B,cAAc+M,aAAY,SACxE,QADiFi0B,EAClHjtB,EAAAA,EAAU4I,OAAOqY,UAAgB,IAAAgM,OAAA,EAAjCA,EAAmC7xB,gBALX,KAGrB,IAAA6xB,CAIT,IAEIC,EAAkC9gB,QAAQwgB,IAAI,CAACD,EAAkBK,EAAwBV,IAC1F1wB,MAAK,SAAAhb,GAAA,IAAAC,EAAAe,EAAAhB,EAAA,GAAEusC,EAAgBtsC,EAAA,GAAEusC,EAAevsC,EAAA,UAAMssC,GAAoBC,CAAe,IAEhFC,EAA6Bze,EAAmBmd,EAAUC,EAAcpO,oBAAqBsP,GAEjG,OAAO9gB,QAAQwgB,IAAI,CAACF,EAAuBW,EAA4BV,IACpE/wB,MAAK,SAAAxa,GAAgB,OAAhBQ,EAAAR,EAAA,GAAgB,EAAoB,GAC9C,8DCrEIs9B,EAAgB,CAAC,GAEjBtP,EAAAA,EAAAA,QACFsP,GAAcn3B,EAAAA,EAAAA,OAAkB6kB,QAAQC,QAAQ3vB,KAAKsnB,OAAMoL,EAAAA,EAAAA,SAG7D,wDC00BA,QAl1BkB,krgCCElB,MAAMke,EAAa,CAACC,EAAIr7B,IAAW,IAAIs7B,IAE/B,KADMD,KAAMC,GACKt7B,KAGnBu7B,EAAc,CAACF,EAAIr7B,IAAW,IAAIs7B,KACvC,MAAME,EAAOH,KAAMC,GACnB,MAAO,KAAU,GAAKt7B,OAAYw7B,IAAO,EAGpCC,EAAc,CAACJ,EAAIr7B,IAAW,IAAIs7B,KACvC,MAAMI,EAAML,KAAMC,GAClB,MAAO,KAAU,GAAKt7B,OAAY07B,EAAI,MAAMA,EAAI,MAAMA,EAAI,KAAK,EAG1DC,EAAYrqB,GAAKA,EACjBsqB,EAAU,CAACC,EAAGC,EAAGl9B,IAAM,CAACi9B,EAAGC,EAAGl9B,GAE9Bm9B,EAAkB,CAAClX,EAAQmX,EAAUzlC,KAC1ChL,OAAO0wC,eAAepX,EAAQmX,EAAU,CACvCzlC,IAAK,KACJ,MAAMR,EAAQQ,IAQd,OANAhL,OAAO0wC,eAAepX,EAAQmX,EAAU,CACvCjmC,QACAmmC,YAAY,EACZC,cAAc,IAGRpmC,CAAK,EAEbmmC,YAAY,EACZC,cAAc,GACb,EAIH,IAAIC,EACJ,MAAMC,EAAoB,CAACC,EAAMC,EAAaC,EAAUC,UAClCxxC,IAAjBmxC,IACHA,EAAe,EAAQ,OAGxB,MAAMp8B,EAASy8B,EAAe,GAAK,EAC7BpJ,EAAS,CAAC,EAEhB,IAAK,MAAOqJ,EAAaC,KAAUpxC,OAAOqxC,QAAQR,GAAe,CAChE,MAAMS,EAAuB,WAAhBH,EAA2B,OAASA,EAC7CA,IAAgBH,EACnBlJ,EAAOwJ,GAAQP,EAAKE,EAAUx8B,GACH,iBAAV28B,IACjBtJ,EAAOwJ,GAAQP,EAAKK,EAAMJ,GAAcv8B,GAE1C,CAEA,OAAOqzB,CAAM,EAsGd9nC,OAAO0wC,eAAen0C,EAAQ,UAAW,CACxCo0C,YAAY,EACZ3lC,IArGD,WACC,MAAMumC,EAAQ,IAAIC,IACZ1J,EAAS,CACd2J,SAAU,CACTC,MAAO,CAAC,EAAG,GAEXC,KAAM,CAAC,EAAG,IACVC,IAAK,CAAC,EAAG,IACTC,OAAQ,CAAC,EAAG,IACZC,UAAW,CAAC,EAAG,IACfC,QAAS,CAAC,EAAG,IACb97B,OAAQ,CAAC,EAAG,IACZ+7B,cAAe,CAAC,EAAG,KAEpBC,MAAO,CACNC,MAAO,CAAC,GAAI,IACZtnC,IAAK,CAAC,GAAI,IACVunC,MAAO,CAAC,GAAI,IACZC,OAAQ,CAAC,GAAI,IACbC,KAAM,CAAC,GAAI,IACXjlC,QAAS,CAAC,GAAI,IACdklC,KAAM,CAAC,GAAI,IACXv5B,MAAO,CAAC,GAAI,IAGZw5B,YAAa,CAAC,GAAI,IAClBC,UAAW,CAAC,GAAI,IAChBC,YAAa,CAAC,GAAI,IAClBC,aAAc,CAAC,GAAI,IACnBC,WAAY,CAAC,GAAI,IACjBC,cAAe,CAAC,GAAI,IACpBC,WAAY,CAAC,GAAI,IACjBC,YAAa,CAAC,GAAI,KAEnBC,QAAS,CACRC,QAAS,CAAC,GAAI,IACdl6B,MAAO,CAAC,GAAI,IACZm6B,QAAS,CAAC,GAAI,IACdC,SAAU,CAAC,GAAI,IACfC,OAAQ,CAAC,GAAI,IACbC,UAAW,CAAC,GAAI,IAChBC,OAAQ,CAAC,GAAI,IACbC,QAAS,CAAC,GAAI,IAGdC,cAAe,CAAC,IAAK,IACrBC,YAAa,CAAC,IAAK,IACnBC,cAAe,CAAC,IAAK,IACrBC,eAAgB,CAAC,IAAK,IACtBC,aAAc,CAAC,IAAK,IACpBC,gBAAiB,CAAC,IAAK,IACvBC,aAAc,CAAC,IAAK,IACpBC,cAAe,CAAC,IAAK,MAKvBhM,EAAOmK,MAAM8B,KAAOjM,EAAOmK,MAAMM,YACjCzK,EAAOiL,QAAQiB,OAASlM,EAAOiL,QAAQQ,cACvCzL,EAAOmK,MAAMgC,KAAOnM,EAAOmK,MAAMM,YACjCzK,EAAOiL,QAAQmB,OAASpM,EAAOiL,QAAQQ,cAEvC,IAAK,MAAOY,EAAWC,KAAUp0C,OAAOqxC,QAAQvJ,GAAS,CACxD,IAAK,MAAOuM,EAAWxyB,KAAU7hB,OAAOqxC,QAAQ+C,GAC/CtM,EAAOuM,GAAa,CACnBnrB,KAAM,KAAUrH,EAAM,MACtByyB,MAAO,KAAUzyB,EAAM,OAGxBuyB,EAAMC,GAAavM,EAAOuM,GAE1B9C,EAAMtmC,IAAI4W,EAAM,GAAIA,EAAM,IAG3B7hB,OAAO0wC,eAAe5I,EAAQqM,EAAW,CACxC3pC,MAAO4pC,EACPzD,YAAY,GAEd,CAiBA,OAfA3wC,OAAO0wC,eAAe5I,EAAQ,QAAS,CACtCt9B,MAAO+mC,EACPZ,YAAY,IAGb7I,EAAOmK,MAAMqC,MAAQ,QACrBxM,EAAOiL,QAAQuB,MAAQ,QAEvB9D,EAAgB1I,EAAOmK,MAAO,QAAQ,IAAMnB,EAAkBjB,EAAY,SAAUO,GAAW,KAC/FI,EAAgB1I,EAAOmK,MAAO,WAAW,IAAMnB,EAAkBd,EAAa,UAAWI,GAAW,KACpGI,EAAgB1I,EAAOmK,MAAO,WAAW,IAAMnB,EAAkBZ,EAAa,MAAOG,GAAS,KAC9FG,EAAgB1I,EAAOiL,QAAS,QAAQ,IAAMjC,EAAkBjB,EAAY,SAAUO,GAAW,KACjGI,EAAgB1I,EAAOiL,QAAS,WAAW,IAAMjC,EAAkBd,EAAa,UAAWI,GAAW,KACtGI,EAAgB1I,EAAOiL,QAAS,WAAW,IAAMjC,EAAkBZ,EAAa,MAAOG,GAAS,KAEzFvI,CACR,oBC1JA,MAAMyM,EAAc,EAAQ,KAMtBC,EAAkB,CAAC,EACzB,IAAK,MAAM52C,KAAOoC,OAAOC,KAAKs0C,GAC7BC,EAAgBD,EAAY32C,IAAQA,EAGrC,MAAM62C,EAAU,CACftE,IAAK,CAACuE,SAAU,EAAGC,OAAQ,OAC3BC,IAAK,CAACF,SAAU,EAAGC,OAAQ,OAC3BE,IAAK,CAACH,SAAU,EAAGC,OAAQ,OAC3BG,IAAK,CAACJ,SAAU,EAAGC,OAAQ,OAC3BI,KAAM,CAACL,SAAU,EAAGC,OAAQ,QAC5BK,IAAK,CAACN,SAAU,EAAGC,OAAQ,OAC3BM,IAAK,CAACP,SAAU,EAAGC,OAAQ,OAC3BO,IAAK,CAACR,SAAU,EAAGC,OAAQ,OAC3BQ,IAAK,CAACT,SAAU,EAAGC,OAAQ,CAAC,QAC5BS,QAAS,CAACV,SAAU,EAAGC,OAAQ,CAAC,YAChCU,OAAQ,CAACX,SAAU,EAAGC,OAAQ,CAAC,WAC/BW,QAAS,CAACZ,SAAU,EAAGC,OAAQ,CAAC,YAChCY,IAAK,CAACb,SAAU,EAAGC,OAAQ,CAAC,IAAK,IAAK,MACtCa,MAAO,CAACd,SAAU,EAAGC,OAAQ,CAAC,MAAO,MAAO,QAC5CZ,KAAM,CAACW,SAAU,EAAGC,OAAQ,CAAC,UAG9Bp4C,EAAOD,QAAUm4C,EAGjB,IAAK,MAAMgB,KAASz1C,OAAOC,KAAKw0C,GAAU,CACzC,KAAM,aAAcA,EAAQgB,IAC3B,MAAM,IAAI9qC,MAAM,8BAAgC8qC,GAGjD,KAAM,WAAYhB,EAAQgB,IACzB,MAAM,IAAI9qC,MAAM,oCAAsC8qC,GAGvD,GAAIhB,EAAQgB,GAAOd,OAAO12C,SAAWw2C,EAAQgB,GAAOf,SACnD,MAAM,IAAI/pC,MAAM,sCAAwC8qC,GAGzD,MAAM,SAACf,EAAQ,OAAEC,GAAUF,EAAQgB,UAC5BhB,EAAQgB,GAAOf,gBACfD,EAAQgB,GAAOd,OACtB30C,OAAO0wC,eAAe+D,EAAQgB,GAAQ,WAAY,CAACjrC,MAAOkqC,IAC1D10C,OAAO0wC,eAAe+D,EAAQgB,GAAQ,SAAU,CAACjrC,MAAOmqC,GACzD,CAEAF,EAAQtE,IAAIyE,IAAM,SAAUzE,GAC3B,MAAMG,EAAIH,EAAI,GAAK,IACbI,EAAIJ,EAAI,GAAK,IACb98B,EAAI88B,EAAI,GAAK,IACbzqB,EAAMhP,KAAKgP,IAAI4qB,EAAGC,EAAGl9B,GACrBsD,EAAMD,KAAKC,IAAI25B,EAAGC,EAAGl9B,GACrBqiC,EAAQ/+B,EAAM+O,EACpB,IAAIiwB,EACAzhC,EAEAyC,IAAQ+O,EACXiwB,EAAI,EACMrF,IAAM35B,EAChBg/B,GAAKpF,EAAIl9B,GAAKqiC,EACJnF,IAAM55B,EAChBg/B,EAAI,GAAKtiC,EAAIi9B,GAAKoF,EACRriC,IAAMsD,IAChBg/B,EAAI,GAAKrF,EAAIC,GAAKmF,GAGnBC,EAAIj/B,KAAKgP,IAAQ,GAAJiwB,EAAQ,KAEjBA,EAAI,IACPA,GAAK,KAGN,MAAMnyC,GAAKkiB,EAAM/O,GAAO,EAUxB,OAPCzC,EADGyC,IAAQ+O,EACP,EACMliB,GAAK,GACXkyC,GAAS/+B,EAAM+O,GAEfgwB,GAAS,EAAI/+B,EAAM+O,GAGjB,CAACiwB,EAAO,IAAJzhC,EAAa,IAAJ1Q,EACrB,EAEAixC,EAAQtE,IAAI0E,IAAM,SAAU1E,GAC3B,IAAIyF,EACAC,EACAC,EACAH,EACAzhC,EAEJ,MAAMo8B,EAAIH,EAAI,GAAK,IACbI,EAAIJ,EAAI,GAAK,IACb98B,EAAI88B,EAAI,GAAK,IACb4F,EAAIr/B,KAAKC,IAAI25B,EAAGC,EAAGl9B,GACnBob,EAAOsnB,EAAIr/B,KAAKgP,IAAI4qB,EAAGC,EAAGl9B,GAC1B2iC,EAAQ,SAAUzV,GACvB,OAAQwV,EAAIxV,GAAK,EAAI9R,EAAO,EAC7B,EA0BA,OAxBa,IAATA,GACHknB,EAAI,EACJzhC,EAAI,IAEJA,EAAIua,EAAOsnB,EACXH,EAAOI,EAAM1F,GACbuF,EAAOG,EAAMzF,GACbuF,EAAOE,EAAM3iC,GAETi9B,IAAMyF,EACTJ,EAAIG,EAAOD,EACDtF,IAAMwF,EAChBJ,EAAK,EAAI,EAAKC,EAAOE,EACXziC,IAAM0iC,IAChBJ,EAAK,EAAI,EAAKE,EAAOD,GAGlBD,EAAI,EACPA,GAAK,EACKA,EAAI,IACdA,GAAK,IAIA,CACF,IAAJA,EACI,IAAJzhC,EACI,IAAJ6hC,EAEF,EAEAtB,EAAQtE,IAAI2E,IAAM,SAAU3E,GAC3B,MAAMG,EAAIH,EAAI,GACRI,EAAIJ,EAAI,GACd,IAAI98B,EAAI88B,EAAI,GACZ,MAAMwF,EAAIlB,EAAQtE,IAAIyE,IAAIzE,GAAK,GACzB8F,EAAI,EAAI,IAAMv/B,KAAKgP,IAAI4qB,EAAG55B,KAAKgP,IAAI6qB,EAAGl9B,IAI5C,OAFAA,EAAI,EAAI,EAAI,IAAMqD,KAAKC,IAAI25B,EAAG55B,KAAKC,IAAI45B,EAAGl9B,IAEnC,CAACsiC,EAAO,IAAJM,EAAa,IAAJ5iC,EACrB,EAEAohC,EAAQtE,IAAI4E,KAAO,SAAU5E,GAC5B,MAAMG,EAAIH,EAAI,GAAK,IACbI,EAAIJ,EAAI,GAAK,IACb98B,EAAI88B,EAAI,GAAK,IAEb+F,EAAIx/B,KAAKgP,IAAI,EAAI4qB,EAAG,EAAIC,EAAG,EAAIl9B,GAKrC,MAAO,CAAK,MAJD,EAAIi9B,EAAI4F,IAAM,EAAIA,IAAM,GAId,MAHV,EAAI3F,EAAI2F,IAAM,EAAIA,IAAM,GAGL,MAFnB,EAAI7iC,EAAI6iC,IAAM,EAAIA,IAAM,GAEI,IAAJA,EACpC,EAaAzB,EAAQtE,IAAIiF,QAAU,SAAUjF,GAC/B,MAAMgG,EAAW3B,EAAgBrE,GACjC,GAAIgG,EACH,OAAOA,EAGR,IACIC,EADAC,EAAyB9nB,IAG7B,IAAK,MAAM6mB,KAAWp1C,OAAOC,KAAKs0C,GAAc,CAC/C,MAGM+B,GAxBwB7gC,EAqBhB8+B,EAAYa,KArBC5/B,EAwBU26B,GAnBjC,GAAK16B,EAAE,KAAO,GAChBD,EAAE,GAAKC,EAAE,KAAO,GAChBD,EAAE,GAAKC,EAAE,KAAO,GAoBd6gC,EAAWD,IACdA,EAAyBC,EACzBF,EAAwBhB,EAE1B,CA/BD,IAA6B5/B,EAAGC,EAiC/B,OAAO2gC,CACR,EAEA3B,EAAQW,QAAQjF,IAAM,SAAUiF,GAC/B,OAAOb,EAAYa,EACpB,EAEAX,EAAQtE,IAAI6E,IAAM,SAAU7E,GAC3B,IAAIG,EAAIH,EAAI,GAAK,IACbI,EAAIJ,EAAI,GAAK,IACb98B,EAAI88B,EAAI,GAAK,IAWjB,OARAG,EAAIA,EAAI,SAAaA,EAAI,MAAS,QAAU,IAAQA,EAAI,MACxDC,EAAIA,EAAI,SAAaA,EAAI,MAAS,QAAU,IAAQA,EAAI,MACxDl9B,EAAIA,EAAI,SAAaA,EAAI,MAAS,QAAU,IAAQA,EAAI,MAMjD,CAAK,KAJG,MAAJi9B,EAAmB,MAAJC,EAAmB,MAAJl9B,GAIpB,KAHN,MAAJi9B,EAAmB,MAAJC,EAAmB,MAAJl9B,GAGX,KAFf,MAAJi9B,EAAmB,MAAJC,EAAmB,MAAJl9B,GAG1C,EAEAohC,EAAQtE,IAAI8E,IAAM,SAAU9E,GAC3B,MAAM6E,EAAMP,EAAQtE,IAAI6E,IAAI7E,GAC5B,IAAI36B,EAAIw/B,EAAI,GACRv/B,EAAIu/B,EAAI,GACRuB,EAAIvB,EAAI,GAcZ,OAZAx/B,GAAK,OACLC,GAAK,IACL8gC,GAAK,QAEL/gC,EAAIA,EAAI,QAAYA,IAAM,EAAI,GAAO,MAAQA,EAAM,GAAK,IACxDC,EAAIA,EAAI,QAAYA,IAAM,EAAI,GAAO,MAAQA,EAAM,GAAK,IACxD8gC,EAAIA,EAAI,QAAYA,IAAM,EAAI,GAAO,MAAQA,EAAM,GAAK,IAMjD,CAJI,IAAM9gC,EAAK,GACZ,KAAOD,EAAIC,GACX,KAAOA,EAAI8gC,GAGtB,EAEA9B,EAAQG,IAAIzE,IAAM,SAAUyE,GAC3B,MAAMe,EAAIf,EAAI,GAAK,IACb1gC,EAAI0gC,EAAI,GAAK,IACbpxC,EAAIoxC,EAAI,GAAK,IACnB,IAAInW,EACA+X,EACAC,EAEJ,GAAU,IAANviC,EAEH,OADAuiC,EAAU,IAAJjzC,EACC,CAACizC,EAAKA,EAAKA,GAIlBhY,EADGj7B,EAAI,GACFA,GAAK,EAAI0Q,GAET1Q,EAAI0Q,EAAI1Q,EAAI0Q,EAGlB,MAAMsqB,EAAK,EAAIh7B,EAAIi7B,EAEb0R,EAAM,CAAC,EAAG,EAAG,GACnB,IAAK,IAAI3nC,EAAI,EAAGA,EAAI,EAAGA,IACtBguC,EAAKb,EAAI,EAAI,IAAMntC,EAAI,GACnBguC,EAAK,GACRA,IAGGA,EAAK,GACRA,IAIAC,EADG,EAAID,EAAK,EACNhY,EAAiB,GAAXC,EAAKD,GAAUgY,EACjB,EAAIA,EAAK,EACb/X,EACI,EAAI+X,EAAK,EACbhY,GAAMC,EAAKD,IAAO,EAAI,EAAIgY,GAAM,EAEhChY,EAGP2R,EAAI3nC,GAAW,IAANiuC,EAGV,OAAOtG,CACR,EAEAsE,EAAQG,IAAIC,IAAM,SAAUD,GAC3B,MAAMe,EAAIf,EAAI,GACd,IAAI1gC,EAAI0gC,EAAI,GAAK,IACbpxC,EAAIoxC,EAAI,GAAK,IACb8B,EAAOxiC,EACX,MAAMyiC,EAAOjgC,KAAKC,IAAInT,EAAG,KAQzB,OANAA,GAAK,EACL0Q,GAAM1Q,GAAK,EAAKA,EAAI,EAAIA,EACxBkzC,GAAQC,GAAQ,EAAIA,EAAO,EAAIA,EAIxB,CAAChB,EAAQ,KAFC,IAANnyC,EAAW,EAAIkzC,GAASC,EAAOD,GAAS,EAAIxiC,GAAM1Q,EAAI0Q,KADtD1Q,EAAI0Q,GAAK,EAGK,IAC1B,EAEAugC,EAAQI,IAAI1E,IAAM,SAAU0E,GAC3B,MAAMc,EAAId,EAAI,GAAK,GACb3gC,EAAI2gC,EAAI,GAAK,IACnB,IAAIkB,EAAIlB,EAAI,GAAK,IACjB,MAAM+B,EAAKlgC,KAAKmgC,MAAMlB,GAAK,EAErB/uB,EAAI+uB,EAAIj/B,KAAKmgC,MAAMlB,GACnBmB,EAAI,IAAMf,GAAK,EAAI7hC,GACnB6iC,EAAI,IAAMhB,GAAK,EAAK7hC,EAAI0S,GACxB4Y,EAAI,IAAMuW,GAAK,EAAK7hC,GAAK,EAAI0S,IAGnC,OAFAmvB,GAAK,IAEGa,GACP,KAAK,EACJ,MAAO,CAACb,EAAGvW,EAAGsX,GACf,KAAK,EACJ,MAAO,CAACC,EAAGhB,EAAGe,GACf,KAAK,EACJ,MAAO,CAACA,EAAGf,EAAGvW,GACf,KAAK,EACJ,MAAO,CAACsX,EAAGC,EAAGhB,GACf,KAAK,EACJ,MAAO,CAACvW,EAAGsX,EAAGf,GACf,KAAK,EACJ,MAAO,CAACA,EAAGe,EAAGC,GAEjB,EAEAtC,EAAQI,IAAID,IAAM,SAAUC,GAC3B,MAAMc,EAAId,EAAI,GACR3gC,EAAI2gC,EAAI,GAAK,IACbkB,EAAIlB,EAAI,GAAK,IACbmC,EAAOtgC,KAAKC,IAAIo/B,EAAG,KACzB,IAAIkB,EACAzzC,EAEJA,GAAK,EAAI0Q,GAAK6hC,EACd,MAAMY,GAAQ,EAAIziC,GAAK8iC,EAMvB,OALAC,EAAK/iC,EAAI8iC,EACTC,GAAON,GAAQ,EAAKA,EAAO,EAAIA,EAC/BM,EAAKA,GAAM,EACXzzC,GAAK,EAEE,CAACmyC,EAAQ,IAALsB,EAAc,IAAJzzC,EACtB,EAGAixC,EAAQK,IAAI3E,IAAM,SAAU2E,GAC3B,MAAMa,EAAIb,EAAI,GAAK,IACnB,IAAIoC,EAAKpC,EAAI,GAAK,IACdqC,EAAKrC,EAAI,GAAK,IAClB,MAAMsC,EAAQF,EAAKC,EACnB,IAAIvwB,EAGAwwB,EAAQ,IACXF,GAAME,EACND,GAAMC,GAGP,MAAM5uC,EAAIkO,KAAKmgC,MAAM,EAAIlB,GACnBI,EAAI,EAAIoB,EACdvwB,EAAI,EAAI+uB,EAAIntC,EAEH,EAAJA,IACJoe,EAAI,EAAIA,GAGT,MAAMb,EAAImxB,EAAKtwB,GAAKmvB,EAAImB,GAExB,IAAI5G,EACAC,EACAl9B,EAEJ,OAAQ7K,GACP,QACA,KAAK,EACL,KAAK,EAAG8nC,EAAIyF,EAAIxF,EAAIxqB,EAAI1S,EAAI6jC,EAAI,MAChC,KAAK,EAAG5G,EAAIvqB,EAAIwqB,EAAIwF,EAAI1iC,EAAI6jC,EAAI,MAChC,KAAK,EAAG5G,EAAI4G,EAAI3G,EAAIwF,EAAI1iC,EAAI0S,EAAG,MAC/B,KAAK,EAAGuqB,EAAI4G,EAAI3G,EAAIxqB,EAAI1S,EAAI0iC,EAAG,MAC/B,KAAK,EAAGzF,EAAIvqB,EAAIwqB,EAAI2G,EAAI7jC,EAAI0iC,EAAG,MAC/B,KAAK,EAAGzF,EAAIyF,EAAIxF,EAAI2G,EAAI7jC,EAAI0S,EAI7B,MAAO,CAAK,IAAJuqB,EAAa,IAAJC,EAAa,IAAJl9B,EAC3B,EAEAohC,EAAQM,KAAK5E,IAAM,SAAU4E,GAC5B,MAAMxU,EAAIwU,EAAK,GAAK,IACdlyC,EAAIkyC,EAAK,GAAK,IACdt/B,EAAIs/B,EAAK,GAAK,IACdmB,EAAInB,EAAK,GAAK,IAMpB,MAAO,CAAK,KAJF,EAAIr+B,KAAKgP,IAAI,EAAG6a,GAAK,EAAI2V,GAAKA,IAInB,KAHX,EAAIx/B,KAAKgP,IAAI,EAAG7iB,GAAK,EAAIqzC,GAAKA,IAGV,KAFpB,EAAIx/B,KAAKgP,IAAI,EAAGjQ,GAAK,EAAIygC,GAAKA,IAGzC,EAEAzB,EAAQO,IAAI7E,IAAM,SAAU6E,GAC3B,MAAMx/B,EAAIw/B,EAAI,GAAK,IACbv/B,EAAIu/B,EAAI,GAAK,IACbuB,EAAIvB,EAAI,GAAK,IACnB,IAAI1E,EACAC,EACAl9B,EAuBJ,OArBAi9B,EAAS,OAAJ96B,GAAoB,OAALC,GAAqB,MAAL8gC,EACpChG,GAAU,MAAL/6B,EAAoB,OAAJC,EAAmB,MAAJ8gC,EACpCljC,EAAS,MAAJmC,GAAoB,KAALC,EAAoB,MAAJ8gC,EAGpCjG,EAAIA,EAAI,SACH,MAASA,IAAM,EAAM,KAAS,KAC5B,MAAJA,EAEHC,EAAIA,EAAI,SACH,MAASA,IAAM,EAAM,KAAS,KAC5B,MAAJA,EAEHl9B,EAAIA,EAAI,SACH,MAASA,IAAM,EAAM,KAAS,KAC5B,MAAJA,EAEHi9B,EAAI55B,KAAKgP,IAAIhP,KAAKC,IAAI,EAAG25B,GAAI,GAC7BC,EAAI75B,KAAKgP,IAAIhP,KAAKC,IAAI,EAAG45B,GAAI,GAC7Bl9B,EAAIqD,KAAKgP,IAAIhP,KAAKC,IAAI,EAAGtD,GAAI,GAEtB,CAAK,IAAJi9B,EAAa,IAAJC,EAAa,IAAJl9B,EAC3B,EAEAohC,EAAQO,IAAIC,IAAM,SAAUD,GAC3B,IAAIx/B,EAAIw/B,EAAI,GACRv/B,EAAIu/B,EAAI,GACRuB,EAAIvB,EAAI,GAcZ,OAZAx/B,GAAK,OACLC,GAAK,IACL8gC,GAAK,QAEL/gC,EAAIA,EAAI,QAAYA,IAAM,EAAI,GAAO,MAAQA,EAAM,GAAK,IACxDC,EAAIA,EAAI,QAAYA,IAAM,EAAI,GAAO,MAAQA,EAAM,GAAK,IACxD8gC,EAAIA,EAAI,QAAYA,IAAM,EAAI,GAAO,MAAQA,EAAM,GAAK,IAMjD,CAJI,IAAM9gC,EAAK,GACZ,KAAOD,EAAIC,GACX,KAAOA,EAAI8gC,GAGtB,EAEA9B,EAAQQ,IAAID,IAAM,SAAUC,GAI3B,IAAIz/B,EACAC,EACA8gC,EAEJ9gC,GAPUw/B,EAAI,GAOL,IAAM,IACfz/B,EAPUy/B,EAAI,GAON,IAAMx/B,EACd8gC,EAAI9gC,EAPMw/B,EAAI,GAOF,IAEZ,MAAMoC,EAAK5hC,GAAK,EACV6hC,EAAK9hC,GAAK,EACV+hC,EAAKhB,GAAK,EAShB,OARA9gC,EAAI4hC,EAAK,QAAWA,GAAM5hC,EAAI,GAAK,KAAO,MAC1CD,EAAI8hC,EAAK,QAAWA,GAAM9hC,EAAI,GAAK,KAAO,MAC1C+gC,EAAIgB,EAAK,QAAWA,GAAMhB,EAAI,GAAK,KAAO,MAE1C/gC,GAAK,OACLC,GAAK,IACL8gC,GAAK,QAEE,CAAC/gC,EAAGC,EAAG8gC,EACf,EAEA9B,EAAQQ,IAAIC,IAAM,SAAUD,GAC3B,MAAMzxC,EAAIyxC,EAAI,GACR7hC,EAAI6hC,EAAI,GACR5hC,EAAI4hC,EAAI,GACd,IAAIU,EAWJ,OARAA,EAAS,IADEj/B,KAAK8gC,MAAMnkC,EAAGD,GACV,EAAIsD,KAAK+gC,GAEpB9B,EAAI,IACPA,GAAK,KAKC,CAACnyC,EAFEkT,KAAKghC,KAAKtkC,EAAIA,EAAIC,EAAIA,GAElBsiC,EACf,EAEAlB,EAAQS,IAAID,IAAM,SAAUC,GAC3B,MAAM1xC,EAAI0xC,EAAI,GACR3U,EAAI2U,EAAI,GAGR/G,EAFI+G,EAAI,GAEC,IAAM,EAAIx+B,KAAK+gC,GAI9B,MAAO,CAACj0C,EAHE+8B,EAAI7pB,KAAKihC,IAAIxJ,GACb5N,EAAI7pB,KAAKkhC,IAAIzJ,GAGxB,EAEAsG,EAAQtE,IAAIkF,OAAS,SAAUtF,EAAM8H,EAAa,MACjD,MAAOvH,EAAGC,EAAGl9B,GAAK08B,EAClB,IAAIvlC,EAAuB,OAAfqtC,EAAsBpD,EAAQtE,IAAI0E,IAAI9E,GAAM,GAAK8H,EAI7D,GAFArtC,EAAQkM,KAAKohC,MAAMttC,EAAQ,IAEb,IAAVA,EACH,OAAO,GAGR,IAAIutC,EAAO,IACNrhC,KAAKohC,MAAMzkC,EAAI,MAAQ,EACxBqD,KAAKohC,MAAMvH,EAAI,MAAQ,EACxB75B,KAAKohC,MAAMxH,EAAI,MAMlB,OAJc,IAAV9lC,IACHutC,GAAQ,IAGFA,CACR,EAEAtD,EAAQI,IAAIQ,OAAS,SAAUtF,GAG9B,OAAO0E,EAAQtE,IAAIkF,OAAOZ,EAAQI,IAAI1E,IAAIJ,GAAOA,EAAK,GACvD,EAEA0E,EAAQtE,IAAImF,QAAU,SAAUvF,GAC/B,MAAMO,EAAIP,EAAK,GACTQ,EAAIR,EAAK,GACT18B,EAAI08B,EAAK,GAIf,OAAIO,IAAMC,GAAKA,IAAMl9B,EAChBi9B,EAAI,EACA,GAGJA,EAAI,IACA,IAGD55B,KAAKohC,OAAQxH,EAAI,GAAK,IAAO,IAAM,IAG9B,GACT,GAAK55B,KAAKohC,MAAMxH,EAAI,IAAM,GAC1B,EAAI55B,KAAKohC,MAAMvH,EAAI,IAAM,GAC1B75B,KAAKohC,MAAMzkC,EAAI,IAAM,EAGzB,EAEAohC,EAAQY,OAAOlF,IAAM,SAAUJ,GAC9B,IAAIkC,EAAQlC,EAAO,GAGnB,GAAc,IAAVkC,GAAyB,IAAVA,EAOlB,OANIlC,EAAO,KACVkC,GAAS,KAGVA,EAAQA,EAAQ,KAAO,IAEhB,CAACA,EAAOA,EAAOA,GAGvB,MAAM+F,EAA6B,IAAL,KAAbjI,EAAO,KAKxB,MAAO,EAJa,EAARkC,GAAa+F,EAAQ,KACpB/F,GAAS,EAAK,GAAK+F,EAAQ,KAC3B/F,GAAS,EAAK,GAAK+F,EAAQ,IAGzC,EAEAvD,EAAQa,QAAQnF,IAAM,SAAUJ,GAE/B,GAAIA,GAAQ,IAAK,CAChB,MAAMxP,EAAmB,IAAdwP,EAAO,KAAY,EAC9B,MAAO,CAACxP,EAAGA,EAAGA,EACf,CAIA,IAAI0X,EAKJ,OAPAlI,GAAQ,GAOD,CAJGr5B,KAAKmgC,MAAM9G,EAAO,IAAM,EAAI,IAC5Br5B,KAAKmgC,OAAOoB,EAAMlI,EAAO,IAAM,GAAK,EAAI,IACvCkI,EAAM,EAAK,EAAI,IAG3B,EAEAxD,EAAQtE,IAAIgF,IAAM,SAAUpF,GAC3B,MAIM3tC,KAJkC,IAAtBsU,KAAKohC,MAAM/H,EAAK,MAAe,MACtB,IAAtBr5B,KAAKohC,MAAM/H,EAAK,MAAe,IACV,IAAtBr5B,KAAKohC,MAAM/H,EAAK,MAEGmI,SAAS,IAAIv8B,cACpC,MAAO,SAASw8B,UAAU/1C,EAAOnE,QAAUmE,CAC5C,EAEAqyC,EAAQU,IAAIhF,IAAM,SAAUJ,GAC3B,MAAM5tC,EAAQ4tC,EAAKmI,SAAS,IAAI/1C,MAAM,4BACtC,IAAKA,EACJ,MAAO,CAAC,EAAG,EAAG,GAGf,IAAIi2C,EAAcj2C,EAAM,GAEA,IAApBA,EAAM,GAAGlE,SACZm6C,EAAcA,EAAY96C,MAAM,IAAIsF,KAAImjC,GAChCA,EAAOA,IACZjjC,KAAK,KAGT,MAAMu1C,EAAUrQ,SAASoQ,EAAa,IAKtC,MAAO,CAJIC,GAAW,GAAM,IACjBA,GAAW,EAAK,IACP,IAAVA,EAGX,EAEA5D,EAAQtE,IAAIoF,IAAM,SAAUpF,GAC3B,MAAMG,EAAIH,EAAI,GAAK,IACbI,EAAIJ,EAAI,GAAK,IACb98B,EAAI88B,EAAI,GAAK,IACbx5B,EAAMD,KAAKC,IAAID,KAAKC,IAAI25B,EAAGC,GAAIl9B,GAC/BqS,EAAMhP,KAAKgP,IAAIhP,KAAKgP,IAAI4qB,EAAGC,GAAIl9B,GAC/BilC,EAAU3hC,EAAM+O,EACtB,IAAI6yB,EACAC,EAuBJ,OApBCD,EADGD,EAAS,EACA5yB,GAAO,EAAI4yB,GAEX,EAIZE,EADGF,GAAU,EACP,EAEH3hC,IAAQ25B,GACHC,EAAIl9B,GAAKilC,EAAU,EAExB3hC,IAAQ45B,EACL,GAAKl9B,EAAIi9B,GAAKgI,EAEd,GAAKhI,EAAIC,GAAK+H,EAGrBE,GAAO,EACPA,GAAO,EAEA,CAAO,IAANA,EAAoB,IAATF,EAA0B,IAAZC,EAClC,EAEA9D,EAAQG,IAAIW,IAAM,SAAUX,GAC3B,MAAM1gC,EAAI0gC,EAAI,GAAK,IACbpxC,EAAIoxC,EAAI,GAAK,IAEbrU,EAAI/8B,EAAI,GAAO,EAAM0Q,EAAI1Q,EAAM,EAAM0Q,GAAK,EAAM1Q,GAEtD,IAAIojB,EAAI,EAKR,OAJI2Z,EAAI,IACP3Z,GAAKpjB,EAAI,GAAM+8B,IAAM,EAAMA,IAGrB,CAACqU,EAAI,GAAQ,IAAJrU,EAAa,IAAJ3Z,EAC1B,EAEA6tB,EAAQI,IAAIU,IAAM,SAAUV,GAC3B,MAAM3gC,EAAI2gC,EAAI,GAAK,IACbkB,EAAIlB,EAAI,GAAK,IAEbtU,EAAIrsB,EAAI6hC,EACd,IAAInvB,EAAI,EAMR,OAJI2Z,EAAI,IACP3Z,GAAKmvB,EAAIxV,IAAM,EAAIA,IAGb,CAACsU,EAAI,GAAQ,IAAJtU,EAAa,IAAJ3Z,EAC1B,EAEA6tB,EAAQc,IAAIpF,IAAM,SAAUoF,GAC3B,MAAMI,EAAIJ,EAAI,GAAK,IACbhV,EAAIgV,EAAI,GAAK,IACbhF,EAAIgF,EAAI,GAAK,IAEnB,GAAU,IAANhV,EACH,MAAO,CAAK,IAAJgQ,EAAa,IAAJA,EAAa,IAAJA,GAG3B,MAAMkI,EAAO,CAAC,EAAG,EAAG,GACd7B,EAAMjB,EAAI,EAAK,EACfI,EAAIa,EAAK,EACTX,EAAI,EAAIF,EACd,IAAI2C,EAAK,EAGT,OAAQhiC,KAAKmgC,MAAMD,IAClB,KAAK,EACJ6B,EAAK,GAAK,EAAGA,EAAK,GAAK1C,EAAG0C,EAAK,GAAK,EAAG,MACxC,KAAK,EACJA,EAAK,GAAKxC,EAAGwC,EAAK,GAAK,EAAGA,EAAK,GAAK,EAAG,MACxC,KAAK,EACJA,EAAK,GAAK,EAAGA,EAAK,GAAK,EAAGA,EAAK,GAAK1C,EAAG,MACxC,KAAK,EACJ0C,EAAK,GAAK,EAAGA,EAAK,GAAKxC,EAAGwC,EAAK,GAAK,EAAG,MACxC,KAAK,EACJA,EAAK,GAAK1C,EAAG0C,EAAK,GAAK,EAAGA,EAAK,GAAK,EAAG,MACxC,QACCA,EAAK,GAAK,EAAGA,EAAK,GAAK,EAAGA,EAAK,GAAKxC,EAMtC,OAFAyC,GAAM,EAAMnY,GAAKgQ,EAEV,CACe,KAApBhQ,EAAIkY,EAAK,GAAKC,GACM,KAApBnY,EAAIkY,EAAK,GAAKC,GACM,KAApBnY,EAAIkY,EAAK,GAAKC,GAEjB,EAEAjE,EAAQc,IAAIV,IAAM,SAAUU,GAC3B,MAAMhV,EAAIgV,EAAI,GAAK,IAGbQ,EAAIxV,EAFAgV,EAAI,GAAK,KAEA,EAAMhV,GACzB,IAAI3Z,EAAI,EAMR,OAJImvB,EAAI,IACPnvB,EAAI2Z,EAAIwV,GAGF,CAACR,EAAI,GAAQ,IAAJ3uB,EAAa,IAAJmvB,EAC1B,EAEAtB,EAAQc,IAAIX,IAAM,SAAUW,GAC3B,MAAMhV,EAAIgV,EAAI,GAAK,IAGb/xC,EAFI+xC,EAAI,GAAK,KAEJ,EAAMhV,GAAK,GAAMA,EAChC,IAAIrsB,EAAI,EASR,OAPI1Q,EAAI,GAAOA,EAAI,GAClB0Q,EAAIqsB,GAAK,EAAI/8B,GAEVA,GAAK,IAAOA,EAAI,IACnB0Q,EAAIqsB,GAAK,GAAK,EAAI/8B,KAGZ,CAAC+xC,EAAI,GAAQ,IAAJrhC,EAAa,IAAJ1Q,EAC1B,EAEAixC,EAAQc,IAAIT,IAAM,SAAUS,GAC3B,MAAMhV,EAAIgV,EAAI,GAAK,IAEbQ,EAAIxV,EADAgV,EAAI,GAAK,KACA,EAAMhV,GACzB,MAAO,CAACgV,EAAI,GAAc,KAATQ,EAAIxV,GAAoB,KAAT,EAAIwV,GACrC,EAEAtB,EAAQK,IAAIS,IAAM,SAAUT,GAC3B,MAAMmB,EAAInB,EAAI,GAAK,IAEbiB,EAAI,EADAjB,EAAI,GAAK,IAEbvU,EAAIwV,EAAIE,EACd,IAAI1F,EAAI,EAMR,OAJIhQ,EAAI,IACPgQ,GAAKwF,EAAIxV,IAAM,EAAIA,IAGb,CAACuU,EAAI,GAAQ,IAAJvU,EAAa,IAAJgQ,EAC1B,EAEAkE,EAAQe,MAAMrF,IAAM,SAAUqF,GAC7B,MAAO,CAAEA,EAAM,GAAK,MAAS,IAAMA,EAAM,GAAK,MAAS,IAAMA,EAAM,GAAK,MAAS,IAClF,EAEAf,EAAQtE,IAAIqF,MAAQ,SAAUrF,GAC7B,MAAO,CAAEA,EAAI,GAAK,IAAO,MAAQA,EAAI,GAAK,IAAO,MAAQA,EAAI,GAAK,IAAO,MAC1E,EAEAsE,EAAQV,KAAK5D,IAAM,SAAUJ,GAC5B,MAAO,CAACA,EAAK,GAAK,IAAM,IAAKA,EAAK,GAAK,IAAM,IAAKA,EAAK,GAAK,IAAM,IACnE,EAEA0E,EAAQV,KAAKa,IAAM,SAAU7E,GAC5B,MAAO,CAAC,EAAG,EAAGA,EAAK,GACpB,EAEA0E,EAAQV,KAAKc,IAAMJ,EAAQV,KAAKa,IAEhCH,EAAQV,KAAKe,IAAM,SAAUf,GAC5B,MAAO,CAAC,EAAG,IAAKA,EAAK,GACtB,EAEAU,EAAQV,KAAKgB,KAAO,SAAUhB,GAC7B,MAAO,CAAC,EAAG,EAAG,EAAGA,EAAK,GACvB,EAEAU,EAAQV,KAAKkB,IAAM,SAAUlB,GAC5B,MAAO,CAACA,EAAK,GAAI,EAAG,EACrB,EAEAU,EAAQV,KAAKoB,IAAM,SAAUpB,GAC5B,MAAM0C,EAAwC,IAAlC//B,KAAKohC,MAAM/D,EAAK,GAAK,IAAM,KAGjC3xC,IAFWq0C,GAAO,KAAOA,GAAO,GAAKA,GAEpByB,SAAS,IAAIv8B,cACpC,MAAO,SAASw8B,UAAU/1C,EAAOnE,QAAUmE,CAC5C,EAEAqyC,EAAQtE,IAAI4D,KAAO,SAAU5D,GAE5B,MAAO,EADMA,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAAM,EAC3B,IAAM,IACrB,kBCt0BA,MAAMwI,EAAc,EAAQ,MACtBC,EAAQ,EAAQ,MAEhBnE,EAAU,CAAC,EAEFz0C,OAAOC,KAAK04C,GA0DpBl7C,SAAQo7C,IACdpE,EAAQoE,GAAa,CAAC,EAEtB74C,OAAO0wC,eAAe+D,EAAQoE,GAAY,WAAY,CAACruC,MAAOmuC,EAAYE,GAAWnE,WACrF10C,OAAO0wC,eAAe+D,EAAQoE,GAAY,SAAU,CAACruC,MAAOmuC,EAAYE,GAAWlE,SAEnF,MAAMmE,EAASF,EAAMC,GACD74C,OAAOC,KAAK64C,GAEpBr7C,SAAQs7C,IACnB,MAAMjJ,EAAKgJ,EAAOC,GAElBtE,EAAQoE,GAAWE,GA9CrB,SAAqBjJ,GACpB,MAAMkJ,EAAY,YAAajJ,GAC9B,MAAMkJ,EAAOlJ,EAAK,GAElB,GAAIkJ,QACH,OAAOA,EAGJA,EAAKh7C,OAAS,IACjB8xC,EAAOkJ,GAGR,MAAMn1C,EAASgsC,EAAGC,GAKlB,GAAsB,iBAAXjsC,EACV,IAAK,IAAIo1C,EAAMp1C,EAAO7F,OAAQuK,EAAI,EAAGA,EAAI0wC,EAAK1wC,IAC7C1E,EAAO0E,GAAKkO,KAAKohC,MAAMh0C,EAAO0E,IAIhC,OAAO1E,CACR,EAOA,MAJI,eAAgBgsC,IACnBkJ,EAAUG,WAAarJ,EAAGqJ,YAGpBH,CACR,CAcgCI,CAAYtJ,GAC1C2E,EAAQoE,GAAWE,GAASM,IArE9B,SAAiBvJ,GAChB,MAAMkJ,EAAY,YAAajJ,GAC9B,MAAMkJ,EAAOlJ,EAAK,GAClB,OAAIkJ,QACIA,GAGJA,EAAKh7C,OAAS,IACjB8xC,EAAOkJ,GAGDnJ,EAAGC,GACX,EAOA,MAJI,eAAgBD,IACnBkJ,EAAUG,WAAarJ,EAAGqJ,YAGpBH,CACR,CAiDoCM,CAAQxJ,EAAG,GAC5C,IAGHvzC,EAAOD,QAAUm4C,kBChFjB,MAAMkE,EAAc,EAAQ,MAwD5B,SAAS97B,EAAK5Z,EAAMs2C,GACnB,OAAO,SAAUxJ,GAChB,OAAOwJ,EAAGt2C,EAAK8sC,GAChB,CACD,CAEA,SAASyJ,EAAeT,EAASU,GAChC,MAAM/tC,EAAO,CAAC+tC,EAAMV,GAASlT,OAAQkT,GACrC,IAAIjJ,EAAK6I,EAAYc,EAAMV,GAASlT,QAAQkT,GAExCW,EAAMD,EAAMV,GAASlT,OACzB,KAAO4T,EAAMC,GAAK7T,QACjBn6B,EAAKmzB,QAAQ4a,EAAMC,GAAK7T,QACxBiK,EAAKjzB,EAAK87B,EAAYc,EAAMC,GAAK7T,QAAQ6T,GAAM5J,GAC/C4J,EAAMD,EAAMC,GAAK7T,OAIlB,OADAiK,EAAGqJ,WAAaztC,EACTokC,CACR,CAEAvzC,EAAOD,QAAU,SAAUu8C,GAC1B,MAAMY,EA/CP,SAAmBZ,GAClB,MAAMY,EAnBP,WACC,MAAMA,EAAQ,CAAC,EAETE,EAAS35C,OAAOC,KAAK04C,GAE3B,IAAK,IAAIO,EAAMS,EAAO17C,OAAQuK,EAAI,EAAGA,EAAI0wC,EAAK1wC,IAC7CixC,EAAME,EAAOnxC,IAAM,CAGlB8tC,UAAW,EACXzQ,OAAQ,MAIV,OAAO4T,CACR,CAIeG,GACRC,EAAQ,CAAChB,GAIf,IAFAY,EAAMZ,GAAWvC,SAAW,EAErBuD,EAAM57C,QAAQ,CACpB,MAAMukB,EAAUq3B,EAAMC,MAChBC,EAAY/5C,OAAOC,KAAK04C,EAAYn2B,IAE1C,IAAK,IAAI02B,EAAMa,EAAU97C,OAAQuK,EAAI,EAAGA,EAAI0wC,EAAK1wC,IAAK,CACrD,MAAMwxC,EAAWD,EAAUvxC,GACrB6J,EAAOonC,EAAMO,IAEI,IAAnB3nC,EAAKikC,WACRjkC,EAAKikC,SAAWmD,EAAMj3B,GAAS8zB,SAAW,EAC1CjkC,EAAKwzB,OAASrjB,EACdq3B,EAAMhb,QAAQmb,GAEhB,CACD,CAEA,OAAOP,CACR,CAwBeQ,CAAUpB,GAClBM,EAAa,CAAC,EAEdQ,EAAS35C,OAAOC,KAAKw5C,GAC3B,IAAK,IAAIP,EAAMS,EAAO17C,OAAQuK,EAAI,EAAGA,EAAI0wC,EAAK1wC,IAAK,CAClD,MAAMuwC,EAAUY,EAAOnxC,GAGH,OAFPixC,EAAMV,GAEVlT,SAKTsT,EAAWJ,GAAWS,EAAeT,EAASU,GAC/C,CAEA,OAAON,CACR,wBC7FA58C,EAAOD,QAAU,CAChB,UAAa,CAAC,IAAK,IAAK,KACxB,aAAgB,CAAC,IAAK,IAAK,KAC3B,KAAQ,CAAC,EAAG,IAAK,KACjB,WAAc,CAAC,IAAK,IAAK,KACzB,MAAS,CAAC,IAAK,IAAK,KACpB,MAAS,CAAC,IAAK,IAAK,KACpB,OAAU,CAAC,IAAK,IAAK,KACrB,MAAS,CAAC,EAAG,EAAG,GAChB,eAAkB,CAAC,IAAK,IAAK,KAC7B,KAAQ,CAAC,EAAG,EAAG,KACf,WAAc,CAAC,IAAK,GAAI,KACxB,MAAS,CAAC,IAAK,GAAI,IACnB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,GAAI,IAAK,KACvB,WAAc,CAAC,IAAK,IAAK,GACzB,UAAa,CAAC,IAAK,IAAK,IACxB,MAAS,CAAC,IAAK,IAAK,IACpB,eAAkB,CAAC,IAAK,IAAK,KAC7B,SAAY,CAAC,IAAK,IAAK,KACvB,QAAW,CAAC,IAAK,GAAI,IACrB,KAAQ,CAAC,EAAG,IAAK,KACjB,SAAY,CAAC,EAAG,EAAG,KACnB,SAAY,CAAC,EAAG,IAAK,KACrB,cAAiB,CAAC,IAAK,IAAK,IAC5B,SAAY,CAAC,IAAK,IAAK,KACvB,UAAa,CAAC,EAAG,IAAK,GACtB,SAAY,CAAC,IAAK,IAAK,KACvB,UAAa,CAAC,IAAK,IAAK,KACxB,YAAe,CAAC,IAAK,EAAG,KACxB,eAAkB,CAAC,GAAI,IAAK,IAC5B,WAAc,CAAC,IAAK,IAAK,GACzB,WAAc,CAAC,IAAK,GAAI,KACxB,QAAW,CAAC,IAAK,EAAG,GACpB,WAAc,CAAC,IAAK,IAAK,KACzB,aAAgB,CAAC,IAAK,IAAK,KAC3B,cAAiB,CAAC,GAAI,GAAI,KAC1B,cAAiB,CAAC,GAAI,GAAI,IAC1B,cAAiB,CAAC,GAAI,GAAI,IAC1B,cAAiB,CAAC,EAAG,IAAK,KAC1B,WAAc,CAAC,IAAK,EAAG,KACvB,SAAY,CAAC,IAAK,GAAI,KACtB,YAAe,CAAC,EAAG,IAAK,KACxB,QAAW,CAAC,IAAK,IAAK,KACtB,QAAW,CAAC,IAAK,IAAK,KACtB,WAAc,CAAC,GAAI,IAAK,KACxB,UAAa,CAAC,IAAK,GAAI,IACvB,YAAe,CAAC,IAAK,IAAK,KAC1B,YAAe,CAAC,GAAI,IAAK,IACzB,QAAW,CAAC,IAAK,EAAG,KACpB,UAAa,CAAC,IAAK,IAAK,KACxB,WAAc,CAAC,IAAK,IAAK,KACzB,KAAQ,CAAC,IAAK,IAAK,GACnB,UAAa,CAAC,IAAK,IAAK,IACxB,KAAQ,CAAC,IAAK,IAAK,KACnB,MAAS,CAAC,EAAG,IAAK,GAClB,YAAe,CAAC,IAAK,IAAK,IAC1B,KAAQ,CAAC,IAAK,IAAK,KACnB,SAAY,CAAC,IAAK,IAAK,KACvB,QAAW,CAAC,IAAK,IAAK,KACtB,UAAa,CAAC,IAAK,GAAI,IACvB,OAAU,CAAC,GAAI,EAAG,KAClB,MAAS,CAAC,IAAK,IAAK,KACpB,MAAS,CAAC,IAAK,IAAK,KACpB,SAAY,CAAC,IAAK,IAAK,KACvB,cAAiB,CAAC,IAAK,IAAK,KAC5B,UAAa,CAAC,IAAK,IAAK,GACxB,aAAgB,CAAC,IAAK,IAAK,KAC3B,UAAa,CAAC,IAAK,IAAK,KACxB,WAAc,CAAC,IAAK,IAAK,KACzB,UAAa,CAAC,IAAK,IAAK,KACxB,qBAAwB,CAAC,IAAK,IAAK,KACnC,UAAa,CAAC,IAAK,IAAK,KACxB,WAAc,CAAC,IAAK,IAAK,KACzB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,IAAK,IAAK,KACxB,YAAe,CAAC,IAAK,IAAK,KAC1B,cAAiB,CAAC,GAAI,IAAK,KAC3B,aAAgB,CAAC,IAAK,IAAK,KAC3B,eAAkB,CAAC,IAAK,IAAK,KAC7B,eAAkB,CAAC,IAAK,IAAK,KAC7B,eAAkB,CAAC,IAAK,IAAK,KAC7B,YAAe,CAAC,IAAK,IAAK,KAC1B,KAAQ,CAAC,EAAG,IAAK,GACjB,UAAa,CAAC,GAAI,IAAK,IACvB,MAAS,CAAC,IAAK,IAAK,KACpB,QAAW,CAAC,IAAK,EAAG,KACpB,OAAU,CAAC,IAAK,EAAG,GACnB,iBAAoB,CAAC,IAAK,IAAK,KAC/B,WAAc,CAAC,EAAG,EAAG,KACrB,aAAgB,CAAC,IAAK,GAAI,KAC1B,aAAgB,CAAC,IAAK,IAAK,KAC3B,eAAkB,CAAC,GAAI,IAAK,KAC5B,gBAAmB,CAAC,IAAK,IAAK,KAC9B,kBAAqB,CAAC,EAAG,IAAK,KAC9B,gBAAmB,CAAC,GAAI,IAAK,KAC7B,gBAAmB,CAAC,IAAK,GAAI,KAC7B,aAAgB,CAAC,GAAI,GAAI,KACzB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,IAAK,IAAK,KACxB,SAAY,CAAC,IAAK,IAAK,KACvB,YAAe,CAAC,IAAK,IAAK,KAC1B,KAAQ,CAAC,EAAG,EAAG,KACf,QAAW,CAAC,IAAK,IAAK,KACtB,MAAS,CAAC,IAAK,IAAK,GACpB,UAAa,CAAC,IAAK,IAAK,IACxB,OAAU,CAAC,IAAK,IAAK,GACrB,UAAa,CAAC,IAAK,GAAI,GACvB,OAAU,CAAC,IAAK,IAAK,KACrB,cAAiB,CAAC,IAAK,IAAK,KAC5B,UAAa,CAAC,IAAK,IAAK,KACxB,cAAiB,CAAC,IAAK,IAAK,KAC5B,cAAiB,CAAC,IAAK,IAAK,KAC5B,WAAc,CAAC,IAAK,IAAK,KACzB,UAAa,CAAC,IAAK,IAAK,KACxB,KAAQ,CAAC,IAAK,IAAK,IACnB,KAAQ,CAAC,IAAK,IAAK,KACnB,KAAQ,CAAC,IAAK,IAAK,KACnB,WAAc,CAAC,IAAK,IAAK,KACzB,OAAU,CAAC,IAAK,EAAG,KACnB,cAAiB,CAAC,IAAK,GAAI,KAC3B,IAAO,CAAC,IAAK,EAAG,GAChB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,GAAI,IAAK,KACvB,YAAe,CAAC,IAAK,GAAI,IACzB,OAAU,CAAC,IAAK,IAAK,KACrB,WAAc,CAAC,IAAK,IAAK,IACzB,SAAY,CAAC,GAAI,IAAK,IACtB,SAAY,CAAC,IAAK,IAAK,KACvB,OAAU,CAAC,IAAK,GAAI,IACpB,OAAU,CAAC,IAAK,IAAK,KACrB,QAAW,CAAC,IAAK,IAAK,KACtB,UAAa,CAAC,IAAK,GAAI,KACvB,UAAa,CAAC,IAAK,IAAK,KACxB,UAAa,CAAC,IAAK,IAAK,KACxB,KAAQ,CAAC,IAAK,IAAK,KACnB,YAAe,CAAC,EAAG,IAAK,KACxB,UAAa,CAAC,GAAI,IAAK,KACvB,IAAO,CAAC,IAAK,IAAK,KAClB,KAAQ,CAAC,EAAG,IAAK,KACjB,QAAW,CAAC,IAAK,IAAK,KACtB,OAAU,CAAC,IAAK,GAAI,IACpB,UAAa,CAAC,GAAI,IAAK,KACvB,OAAU,CAAC,IAAK,IAAK,KACrB,MAAS,CAAC,IAAK,IAAK,KACpB,MAAS,CAAC,IAAK,IAAK,KACpB,WAAc,CAAC,IAAK,IAAK,KACzB,OAAU,CAAC,IAAK,IAAK,GACrB,YAAe,CAAC,IAAK,IAAK,2BCrJ3BC,EAAOD,QAAU,CAChB49C,QAAQ,EACRC,QAAQ,gCCFT,MAAMC,EAAa,EAAQ,OACpBF,OAAQG,EAAaF,OAAQG,GAAe,EAAQ,MACrD,iBACLC,EAAgB,+BAChBC,GACG,EAAQ,OAEN,QAACpe,GAAWp5B,MAGZy3C,EAAe,CACpB,OACA,OACA,UACA,WAGK3S,EAAS9nC,OAAO06C,OAAO,MAY7B,MAAMC,EACL,WAAA/d,CAAYz/B,GAEX,OAAOy9C,EAAaz9C,EACrB,EAGD,MAAMy9C,EAAez9C,IACpB,MAAM8L,EAAQ,CAAC,EAcf,MAhCoB,EAACqwB,EAAQn8B,EAAU,CAAC,KACxC,GAAIA,EAAQ09C,SAAWhkC,OAAOikC,UAAU39C,EAAQ09C,QAAU19C,EAAQ09C,OAAS,GAAK19C,EAAQ09C,OAAS,GAChG,MAAM,IAAIlwC,MAAM,uDAIjB,MAAMowC,EAAaV,EAAcA,EAAYQ,MAAQ,EACrDvhB,EAAOuhB,WAA0Bn7C,IAAlBvC,EAAQ09C,MAAsBE,EAAa59C,EAAQ09C,KAAK,EAYvEG,CAAa/xC,EAAO9L,GAEpB8L,EAAMgyC,SAAW,IAAIC,IAAeC,EAASlyC,EAAMgyC,YAAaC,GAEhEl7C,OAAOo7C,eAAenyC,EAAOoyC,EAAMte,WACnC/8B,OAAOo7C,eAAenyC,EAAMgyC,SAAUhyC,GAEtCA,EAAMgyC,SAASre,YAAc,KAC5B,MAAM,IAAIjyB,MAAM,2EAA2E,EAG5F1B,EAAMgyC,SAASK,SAAWX,EAEnB1xC,EAAMgyC,QAAQ,EAGtB,SAASI,EAAMl+C,GACd,OAAOy9C,EAAaz9C,EACrB,CAEA,IAAK,MAAOk3C,EAAWxyB,KAAU7hB,OAAOqxC,QAAQ+I,GAC/CtS,EAAOuM,GAAa,CACnB,GAAArpC,GACC,MAAMuwC,EAAUC,EAAcnyC,KAAMoyC,EAAa55B,EAAMqH,KAAMrH,EAAMyyB,MAAOjrC,KAAKqyC,SAAUryC,KAAKsyC,UAE9F,OADA37C,OAAO0wC,eAAernC,KAAMgrC,EAAW,CAAC7pC,MAAO+wC,IACxCA,CACR,GAIFzT,EAAOpb,QAAU,CAChB,GAAA1hB,GACC,MAAMuwC,EAAUC,EAAcnyC,KAAMA,KAAKqyC,SAAS,GAElD,OADA17C,OAAO0wC,eAAernC,KAAM,UAAW,CAACmB,MAAO+wC,IACxCA,CACR,GAGD,MAAMK,EAAa,CAAC,MAAO,MAAO,UAAW,MAAO,MAAO,MAAO,OAAQ,WAE1E,IAAK,MAAMnG,KAASmG,EACnB9T,EAAO2N,GAAS,CACf,GAAAzqC,GACC,MAAM,MAAC6vC,GAASxxC,KAChB,OAAO,YAAa6xC,GACnB,MAAMW,EAASJ,EAAarB,EAAWnI,MAAMwI,EAAaI,IAAQpF,MAAUyF,GAAad,EAAWnI,MAAMqC,MAAOjrC,KAAKqyC,SACtH,OAAOF,EAAcnyC,KAAMwyC,EAAQxyC,KAAKsyC,SACzC,CACD,GAIF,IAAK,MAAMlG,KAASmG,EAEnB9T,EADgB,KAAO2N,EAAM,GAAG95B,cAAgB85B,EAAMhzC,MAAM,IAC1C,CACjB,GAAAuI,GACC,MAAM,MAAC6vC,GAASxxC,KAChB,OAAO,YAAa6xC,GACnB,MAAMW,EAASJ,EAAarB,EAAWrH,QAAQ0H,EAAaI,IAAQpF,MAAUyF,GAAad,EAAWrH,QAAQuB,MAAOjrC,KAAKqyC,SAC1H,OAAOF,EAAcnyC,KAAMwyC,EAAQxyC,KAAKsyC,SACzC,CACD,GAIF,MAAMG,EAAQ97C,OAAO+7C,kBAAiB,QAAU,IAC5CjU,EACH+S,MAAO,CACNlK,YAAY,EACZ,GAAA3lC,GACC,OAAO3B,KAAK2yC,WAAWnB,KACxB,EACA,GAAA5vC,CAAI4vC,GACHxxC,KAAK2yC,WAAWnB,MAAQA,CACzB,KAIIY,EAAe,CAACvyB,EAAMorB,EAAOzO,KAClC,IAAIoW,EACAC,EASJ,YARex8C,IAAXmmC,GACHoW,EAAU/yB,EACVgzB,EAAW5H,IAEX2H,EAAUpW,EAAOoW,QAAU/yB,EAC3BgzB,EAAW5H,EAAQzO,EAAOqW,UAGpB,CACNhzB,OACAorB,QACA2H,UACAC,WACArW,SACA,EAGI2V,EAAgB,CAAC9+C,EAAMg/C,EAASC,KACrC,MAAMJ,EAAU,IAAIL,IACf9e,EAAQ8e,EAAW,KAAO9e,EAAQ8e,EAAW,GAAG7B,KAE5C8C,EAAWZ,EAASJ,EAASI,KAAYL,IAK1CiB,EAAWZ,EAAgC,IAAtBL,EAAWj9C,OAAiB,GAAKi9C,EAAW,GAAMA,EAAWp4C,KAAK,MAW/F,OANA9C,OAAOo7C,eAAeG,EAASO,GAE/BP,EAAQS,WAAat/C,EACrB6+C,EAAQG,QAAUA,EAClBH,EAAQI,SAAWA,EAEZJ,CAAO,EAGTY,EAAa,CAACz/C,EAAM0F,KACzB,GAAI1F,EAAKm+C,OAAS,IAAMz4C,EACvB,OAAO1F,EAAKi/C,SAAW,GAAKv5C,EAG7B,IAAIy5C,EAASn/C,EAAKg/C,QAElB,QAAeh8C,IAAXm8C,EACH,OAAOz5C,EAGR,MAAM,QAAC65C,EAAO,SAAEC,GAAYL,EAC5B,IAAkC,IAA9Bz5C,EAAOmmB,QAAQ,KAClB,UAAkB7oB,IAAXm8C,GAINz5C,EAASm4C,EAAiBn4C,EAAQy5C,EAAOvH,MAAOuH,EAAO3yB,MAEvD2yB,EAASA,EAAOhW,OAOlB,MAAMuW,EAAUh6C,EAAOmmB,QAAQ,MAK/B,OAJiB,IAAb6zB,IACHh6C,EAASo4C,EAA+Bp4C,EAAQ85C,EAAUD,EAASG,IAG7DH,EAAU75C,EAAS85C,CAAQ,EAGnC,IAAIjB,EACJ,MAAME,EAAW,CAAClyC,KAAUozC,KAC3B,MAAOC,GAAeD,EAEtB,IAAKjgB,EAAQkgB,KAAiBlgB,EAAQkgB,EAAYjD,KAGjD,OAAOgD,EAAQv5C,KAAK,KAGrB,MAAMo4C,EAAamB,EAAQ55C,MAAM,GAC3B85C,EAAQ,CAACD,EAAYjD,IAAI,IAE/B,IAAK,IAAI7wC,EAAI,EAAGA,EAAI8zC,EAAYr+C,OAAQuK,IACvC+zC,EAAMx8C,KACLwZ,OAAO2hC,EAAW1yC,EAAI,IAAIsH,QAAQ,UAAW,QAC7CyJ,OAAO+iC,EAAYjD,IAAI7wC,KAQzB,YAJiB9I,IAAbu7C,IACHA,EAAW,EAAQ,OAGbA,EAAShyC,EAAOszC,EAAMz5C,KAAK,IAAI,EAGvC9C,OAAO+7C,iBAAiBV,EAAMte,UAAW+K,GAEzC,MAAM7+B,EAAQoyC,IACdpyC,EAAMuzC,cAAgBnC,EACtBpxC,EAAMkxC,OAASkB,EAAM,CAACR,MAAOP,EAAcA,EAAYO,MAAQ,IAC/D5xC,EAAMkxC,OAAOqC,cAAgBlC,EAE7B/9C,EAAOD,QAAU2M,yBCnOjB,MAAMwzC,EAAiB,4JACjBC,EAAc,iCACdC,EAAe,mCACfC,EAAe,6DAEfC,EAAU,IAAIrL,IAAI,CACvB,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,IAAK,MACN,CAAC,KAAM,MACP,CAAC,IAAK,KACN,CAAC,IAAK,OAGP,SAASsL,EAASvc,GACjB,MAAMwc,EAAa,MAATxc,EAAE,GACNyc,EAAmB,MAATzc,EAAE,GAElB,OAAKwc,IAAMC,GAAwB,IAAbzc,EAAEtiC,QAA2B,MAATsiC,EAAE,IAA2B,IAAbA,EAAEtiC,OACpDsb,OAAO0jC,aAAajV,SAASzH,EAAE99B,MAAM,GAAI,KAG7Cs6C,GAAKC,EACDzjC,OAAO2jC,cAAclV,SAASzH,EAAE99B,MAAM,GAAI,GAAI,KAG/Co6C,EAAQ7xC,IAAIu1B,IAAMA,CAC1B,CAEA,SAAS4c,EAAe7L,EAAM4J,GAC7B,MAAMkC,EAAU,GACVC,EAASnC,EAAW79C,OAAOC,MAAM,YACvC,IAAI03B,EAEJ,IAAK,MAAMsoB,KAASD,EAAQ,CAC3B,MAAME,EAAS1mC,OAAOymC,GACtB,GAAKzmC,OAAO2mC,MAAMD,GAEX,MAAKvoB,EAAUsoB,EAAMn7C,MAAMw6C,IAGjC,MAAM,IAAIhyC,MAAM,0CAA0C2yC,gBAAoBhM,OAF9E8L,EAAQr9C,KAAKi1B,EAAQ,GAAGllB,QAAQ8sC,GAAc,CAAC/5C,EAAGiY,EAAQ2iC,IAAc3iC,EAASgiC,EAAShiC,GAAU2iC,IAGrG,MALCL,EAAQr9C,KAAKw9C,EAMf,CAEA,OAAOH,CACR,CAEA,SAASM,EAAW77B,GACnB66B,EAAYiB,UAAY,EAExB,MAAMP,EAAU,GAChB,IAAIpoB,EAEJ,KAA+C,QAAvCA,EAAU0nB,EAAYkB,KAAK/7B,KAAkB,CACpD,MAAMyvB,EAAOtc,EAAQ,GAErB,GAAIA,EAAQ,GAAI,CACf,MAAM+a,EAAOoN,EAAe7L,EAAMtc,EAAQ,IAC1CooB,EAAQr9C,KAAK,CAACuxC,GAAMjxC,OAAO0vC,GAC5B,MACCqN,EAAQr9C,KAAK,CAACuxC,GAEhB,CAEA,OAAO8L,CACR,CAEA,SAASS,EAAW50C,EAAO6+B,GAC1B,MAAMgW,EAAU,CAAC,EAEjB,IAAK,MAAMC,KAASjW,EACnB,IAAK,MAAMjmB,KAASk8B,EAAMjW,OACzBgW,EAAQj8B,EAAM,IAAMk8B,EAAMhM,QAAU,KAAOlwB,EAAMpf,MAAM,GAIzD,IAAI+f,EAAUvZ,EACd,IAAK,MAAOorC,EAAWvM,KAAW9nC,OAAOqxC,QAAQyM,GAChD,GAAK96C,MAAMo5B,QAAQ0L,GAAnB,CAIA,KAAMuM,KAAa7xB,GAClB,MAAM,IAAI7X,MAAM,wBAAwB0pC,KAGzC7xB,EAAUslB,EAAO7pC,OAAS,EAAIukB,EAAQ6xB,MAAcvM,GAAUtlB,EAAQ6xB,EANtE,CASD,OAAO7xB,CACR,CAEAjmB,EAAOD,QAAU,CAAC2M,EAAO+0C,KACxB,MAAMlW,EAAS,GACTuV,EAAS,GACf,IAAIC,EAAQ,GA0BZ,GAvBAU,EAAUluC,QAAQ2sC,GAAgB,CAAC55C,EAAGo7C,EAAiBlM,EAASlwB,EAAOyyB,EAAOmJ,KAC7E,GAAIQ,EACHX,EAAMv9C,KAAK+8C,EAASmB,SACd,GAAIp8B,EAAO,CACjB,MAAMzf,EAASk7C,EAAMx6C,KAAK,IAC1Bw6C,EAAQ,GACRD,EAAOt9C,KAAuB,IAAlB+nC,EAAO7pC,OAAemE,EAASy7C,EAAW50C,EAAO6+B,EAAlB+V,CAA0Bz7C,IACrE0lC,EAAO/nC,KAAK,CAACgyC,UAASjK,OAAQ4V,EAAW77B,IAC1C,MAAO,GAAIyyB,EAAO,CACjB,GAAsB,IAAlBxM,EAAO7pC,OACV,MAAM,IAAI0M,MAAM,gDAGjB0yC,EAAOt9C,KAAK89C,EAAW50C,EAAO6+B,EAAlB+V,CAA0BP,EAAMx6C,KAAK,MACjDw6C,EAAQ,GACRxV,EAAOgS,KACR,MACCwD,EAAMv9C,KAAK09C,EACZ,IAGDJ,EAAOt9C,KAAKu9C,EAAMx6C,KAAK,KAEnBglC,EAAO7pC,OAAS,EAAG,CACtB,MAAMigD,EAAa,qCAAqCpW,EAAO7pC,yBAA2C,IAAlB6pC,EAAO7pC,OAAe,GAAK,cACnH,MAAM,IAAI0M,MAAMuzC,EACjB,CAEA,OAAOb,EAAOv6C,KAAK,GAAG,yBCjGvBvG,EAAOD,QAAU,CAChBi+C,iBAlCwB,CAACn4C,EAAQ+1C,EAAWgG,KAC5C,IAAIn6C,EAAQ5B,EAAOmmB,QAAQ4vB,GAC3B,IAAe,IAAXn0C,EACH,OAAO5B,EAGR,MAAMg8C,EAAkBjG,EAAUl6C,OAClC,IAAIogD,EAAW,EACXC,EAAc,GAClB,GACCA,GAAel8C,EAAOm8C,OAAOF,EAAUr6C,EAAQq6C,GAAYlG,EAAYgG,EACvEE,EAAWr6C,EAAQo6C,EACnBp6C,EAAQ5B,EAAOmmB,QAAQ4vB,EAAWkG,UACf,IAAXr6C,GAGT,OADAs6C,GAAel8C,EAAOm8C,OAAOF,GACtBC,CAAW,EAmBlB9D,+BAhBsC,CAACp4C,EAAQgX,EAAQolC,EAASx6C,KAChE,IAAIq6C,EAAW,EACXC,EAAc,GAClB,EAAG,CACF,MAAMG,EAA8B,OAAtBr8C,EAAO4B,EAAQ,GAC7Bs6C,GAAel8C,EAAOm8C,OAAOF,GAAWI,EAAQz6C,EAAQ,EAAIA,GAASq6C,GAAYjlC,GAAUqlC,EAAQ,OAAS,MAAQD,EACpHH,EAAWr6C,EAAQ,EACnBA,EAAQ5B,EAAOmmB,QAAQ,KAAM81B,EAC9B,QAAoB,IAAXr6C,GAGT,OADAs6C,GAAel8C,EAAOm8C,OAAOF,GACtBC,CAAW,8GC5BfI,EAAgC,IAAIC,IAAI,aACxCC,EAA0B,IAA4B,KACtDC,EAAqC,IAAgCH,GAEzEE,EAAwB7+C,KAAK,CAACxD,EAAOuiD,GAAI,w+FAA8+FD,EAAqC,w/OAA8/OA,EAAqC,0zGAA+zG,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,wCAAwC,MAAQ,GAAG,SAAW,u6IAAu6I,eAAiB,CAAC,oxmBAAoxmB,WAAa,MAEjtrC,yFCPID,QAA0B,GAA4B,KAE1DA,EAAwB7+C,KAAK,CAACxD,EAAOuiD,GAAI,uhCAA0hC,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,0CAA0C,MAAQ,GAAG,SAAW,0dAA0d,eAAiB,CAAC,4lDAA8lD,WAAa,MAErvG,iCCDAviD,EAAOD,QAAU,SAAUyiD,GACzB,IAAI3nC,EAAO,GA6FX,OA3FAA,EAAK8gC,SAAW,WACd,OAAO7uC,KAAKzG,KAAI,SAAUmU,GACxB,IAAIvC,EAAU,GACVwqC,OAA+B,IAAZjoC,EAAK,GA4B5B,OA1BIA,EAAK,KACPvC,GAAW,cAAcnU,OAAO0W,EAAK,GAAI,QAGvCA,EAAK,KACPvC,GAAW,UAAUnU,OAAO0W,EAAK,GAAI,OAGnCioC,IACFxqC,GAAW,SAASnU,OAAO0W,EAAK,GAAG9Y,OAAS,EAAI,IAAIoC,OAAO0W,EAAK,IAAM,GAAI,OAG5EvC,GAAWuqC,EAAuBhoC,GAE9BioC,IACFxqC,GAAW,KAGTuC,EAAK,KACPvC,GAAW,KAGTuC,EAAK,KACPvC,GAAW,KAGNA,CACT,IAAG1R,KAAK,GACV,EAGAsU,EAAK5O,EAAI,SAAWy2C,EAASC,EAAOC,EAAQC,EAAUrB,GAC7B,iBAAZkB,IACTA,EAAU,CAAC,CAAC,KAAMA,OAASv/C,KAG7B,IAAI2/C,EAAyB,CAAC,EAE9B,GAAIF,EACF,IAAK,IAAIjJ,EAAI,EAAGA,EAAI7sC,KAAKpL,OAAQi4C,IAAK,CACpC,IAAI4I,EAAKz1C,KAAK6sC,GAAG,GAEP,MAAN4I,IACFO,EAAuBP,IAAM,EAEjC,CAGF,IAAK,IAAIQ,EAAK,EAAGA,EAAKL,EAAQhhD,OAAQqhD,IAAM,CAC1C,IAAIvoC,EAAO,GAAG1W,OAAO4+C,EAAQK,IAEzBH,GAAUE,EAAuBtoC,EAAK,WAIrB,IAAVgnC,SACc,IAAZhnC,EAAK,KAGdA,EAAK,GAAK,SAAS1W,OAAO0W,EAAK,GAAG9Y,OAAS,EAAI,IAAIoC,OAAO0W,EAAK,IAAM,GAAI,MAAM1W,OAAO0W,EAAK,GAAI,MAF/FA,EAAK,GAAKgnC,GAOVmB,IACGnoC,EAAK,IAGRA,EAAK,GAAK,UAAU1W,OAAO0W,EAAK,GAAI,MAAM1W,OAAO0W,EAAK,GAAI,KAC1DA,EAAK,GAAKmoC,GAHVnoC,EAAK,GAAKmoC,GAOVE,IACGroC,EAAK,IAGRA,EAAK,GAAK,cAAc1W,OAAO0W,EAAK,GAAI,OAAO1W,OAAO0W,EAAK,GAAI,KAC/DA,EAAK,GAAKqoC,GAHVroC,EAAK,GAAK,GAAG1W,OAAO++C,IAOxBhoC,EAAKrX,KAAKgX,GACZ,CACF,EAEOK,CACT,yBCnGA7a,EAAOD,QAAU,SAAUuL,EAAK1K,GAK9B,OAJKA,IACHA,EAAU,CAAC,GAGR0K,GAILA,EAAM0R,OAAO1R,EAAI03C,WAAa13C,EAAI23C,QAAU33C,GAExC,eAAesT,KAAKtT,KACtBA,EAAMA,EAAIpF,MAAM,GAAI,IAGlBtF,EAAQmc,OACVzR,GAAO1K,EAAQmc,MAKb,oBAAoB6B,KAAKtT,IAAQ1K,EAAQsiD,WACpC,IAAKp/C,OAAOwH,EAAIiI,QAAQ,KAAM,OAAOA,QAAQ,MAAO,OAAQ,KAG9DjI,GAnBEA,CAoBX,yBC1BAtL,EAAOD,QAAU,SAAUya,GACzB,IAAIvC,EAAUuC,EAAK,GACf2oC,EAAa3oC,EAAK,GAEtB,IAAK2oC,EACH,OAAOlrC,EAGT,GAAoB,mBAATmrC,KAAqB,CAC9B,IAAIC,EAASD,KAAK7C,SAAShhC,mBAAmB7c,KAAKC,UAAUwgD,MACzDnT,EAAO,+DAA+DlsC,OAAOu/C,GAC7EC,EAAgB,OAAOx/C,OAAOksC,EAAM,OACpCuT,EAAaJ,EAAWK,QAAQn9C,KAAI,SAAUo9C,GAChD,MAAO,iBAAiB3/C,OAAOq/C,EAAWO,YAAc,IAAI5/C,OAAO2/C,EAAQ,MAC7E,IACA,MAAO,CAACxrC,GAASnU,OAAOy/C,GAAYz/C,OAAO,CAACw/C,IAAgB/8C,KAAK,KACnE,CAEA,MAAO,CAAC0R,GAAS1R,KAAK,KACxB,wBCpBE,IAAS1G,SAYQ,IAAV,EAAAm0C,EAAwB,EAAAA,EAASlnC,KARxC9M,EAAOD,QAQuC,SAASF,GAExD,GAAIA,EAAKof,KAAOpf,EAAKof,IAAIV,OACxB,OAAO1e,EAAKof,IAAIV,OAIjB,IAAIolC,EAAY,SAAS11C,GACxB,GAAwB,GAApB/K,UAAUxB,OACb,MAAM,IAAIkiD,UAAU,sCAQrB,IANA,IAGIC,EAHAh+C,EAASmX,OAAO/O,GAChBvM,EAASmE,EAAOnE,OAChB+F,GAAS,EAETF,EAAS,GACTu8C,EAAgBj+C,EAAOk+C,WAAW,KAC7Bt8C,EAAQ/F,GAOA,IANhBmiD,EAAWh+C,EAAOk+C,WAAWt8C,IA2B5BF,GAbCs8C,GAAY,GAAUA,GAAY,IAAuB,KAAZA,GAGpC,GAATp8C,GAAco8C,GAAY,IAAUA,GAAY,IAIvC,GAATp8C,GACAo8C,GAAY,IAAUA,GAAY,IACjB,IAAjBC,EAIS,KAAOD,EAASlI,SAAS,IAAM,IAOhC,GAATl0C,GACU,GAAV/F,GACY,IAAZmiD,KAWAA,GAAY,KACA,IAAZA,GACY,IAAZA,GACAA,GAAY,IAAUA,GAAY,IAClCA,GAAY,IAAUA,GAAY,IAClCA,GAAY,IAAUA,GAAY,KAdxB,KAAOh+C,EAAOm+C,OAAOv8C,GAiBrB5B,EAAOm+C,OAAOv8C,GAhDxBF,GAAU,IAyDZ,OAAOA,CACR,EAOA,OALK1H,EAAKof,MACTpf,EAAKof,IAAM,CAAC,GAGbpf,EAAKof,IAAIV,OAASolC,EACXA,CAER,CApGmB7jD,CAAQD,aCL3BG,EAAOD,QAAU,SAAgBkkD,GAE7B,IADA,IAAIC,EAAS,GACJC,EAAK,EAAGA,EAAKjhD,UAAUxB,OAAQyiD,IACpCD,EAAOC,EAAK,GAAKjhD,UAAUihD,GAE/B,IAAI1rB,EAAU,GACVqnB,EAAqC,iBAApBmE,EAA+B,CAACA,GAAmBA,EAAgB/9C,QAExF45C,EAAQA,EAAQp+C,OAAS,GAAKo+C,EAAQA,EAAQp+C,OAAS,GAAG6R,QAAQ,iBAAkB,IAEpF,IAAK,IAAItH,EAAI,EAAGA,EAAI6zC,EAAQp+C,OAAQuK,IAAK,CACrC,IAAIrG,GACAA,EAAQk6C,EAAQ7zC,GAAGrG,MAAM,eACzB6yB,EAAQj1B,KAAK+8B,MAAM9H,EAAS7yB,EAEpC,CAEA,GAAI6yB,EAAQ/2B,OACR,KAAI0iD,EAAOjqC,KAAKgP,IAAIoX,MAAMpmB,KAAMse,EAAQpyB,KAAI,SAAU4H,GAAS,OAAOA,EAAMvM,OAAS,CAAG,KACpF2iD,EAAU,IAAI1lC,OAAO,WAAaylC,EAAO,IAAK,KAClD,IAASn4C,EAAI,EAAGA,EAAI6zC,EAAQp+C,OAAQuK,IAChC6zC,EAAQ7zC,GAAK6zC,EAAQ7zC,GAAGsH,QAAQ8wC,EAAS,KAH8C,CAO/FvE,EAAQ,GAAKA,EAAQ,GAAGvsC,QAAQ,SAAU,IAE1C,IAAI1N,EAASi6C,EAAQ,GACrB,IAAS7zC,EAAI,EAAGA,EAAIi4C,EAAOxiD,OAAQuK,IAC/BpG,GAAUq+C,EAAOj4C,GAAK6zC,EAAQ7zC,EAAI,GAEtC,OAAOpG,CACX,yBCNA,SAASy+C,EAAWn1C,GAClB,GAAoB,iBAATA,EACT,MAAM,IAAIy0C,UAAU,mCAAqClhD,KAAKC,UAAUwM,GAE5E,CAGA,SAASo1C,EAAqBp1C,EAAMq1C,GAMlC,IALA,IAII9Q,EAJAtO,EAAM,GACNqf,EAAoB,EACpBC,GAAa,EACbC,EAAO,EAEF14C,EAAI,EAAGA,GAAKkD,EAAKzN,SAAUuK,EAAG,CACrC,GAAIA,EAAIkD,EAAKzN,OACXgyC,EAAOvkC,EAAK40C,WAAW93C,OACpB,IAAa,KAATynC,EACP,MAEAA,EAAO,EAAQ,CACjB,GAAa,KAATA,EAAmB,CACrB,GAAIgR,IAAcz4C,EAAI,GAAc,IAAT04C,QAEpB,GAAID,IAAcz4C,EAAI,GAAc,IAAT04C,EAAY,CAC5C,GAAIvf,EAAI1jC,OAAS,GAA2B,IAAtB+iD,GAA8D,KAAnCrf,EAAI2e,WAAW3e,EAAI1jC,OAAS,IAAsD,KAAnC0jC,EAAI2e,WAAW3e,EAAI1jC,OAAS,GAC1H,GAAI0jC,EAAI1jC,OAAS,EAAG,CAClB,IAAIkjD,EAAiBxf,EAAIrL,YAAY,KACrC,GAAI6qB,IAAmBxf,EAAI1jC,OAAS,EAAG,EACb,IAApBkjD,GACFxf,EAAM,GACNqf,EAAoB,GAGpBA,GADArf,EAAMA,EAAIl/B,MAAM,EAAG0+C,IACKljD,OAAS,EAAI0jC,EAAIrL,YAAY,KAEvD2qB,EAAYz4C,EACZ04C,EAAO,EACP,QACF,CACF,MAAO,GAAmB,IAAfvf,EAAI1jC,QAA+B,IAAf0jC,EAAI1jC,OAAc,CAC/C0jC,EAAM,GACNqf,EAAoB,EACpBC,EAAYz4C,EACZ04C,EAAO,EACP,QACF,CAEEH,IACEpf,EAAI1jC,OAAS,EACf0jC,GAAO,MAEPA,EAAM,KACRqf,EAAoB,EAExB,MACMrf,EAAI1jC,OAAS,EACf0jC,GAAO,IAAMj2B,EAAKjJ,MAAMw+C,EAAY,EAAGz4C,GAEvCm5B,EAAMj2B,EAAKjJ,MAAMw+C,EAAY,EAAGz4C,GAClCw4C,EAAoBx4C,EAAIy4C,EAAY,EAEtCA,EAAYz4C,EACZ04C,EAAO,CACT,MAAoB,KAATjR,IAA+B,IAAViR,IAC5BA,EAEFA,GAAQ,CAEZ,CACA,OAAOvf,CACT,CAcA,IAAIyf,EAAQ,CAEVxyB,QAAS,WAKP,IAJA,IAEIyyB,EAFAC,EAAe,GACfC,GAAmB,EAGd/4C,EAAI/I,UAAUxB,OAAS,EAAGuK,IAAM,IAAM+4C,EAAkB/4C,IAAK,CACpE,IAAIkD,EACAlD,GAAK,EACPkD,EAAOjM,UAAU+I,SAEL9I,IAAR2hD,IACFA,EAAMG,QAAQH,OAChB31C,EAAO21C,GAGTR,EAAWn1C,GAGS,IAAhBA,EAAKzN,SAITqjD,EAAe51C,EAAO,IAAM41C,EAC5BC,EAA0C,KAAvB71C,EAAK40C,WAAW,GACrC,CAQA,OAFAgB,EAAeR,EAAqBQ,GAAeC,GAE/CA,EACED,EAAarjD,OAAS,EACjB,IAAMqjD,EAEN,IACAA,EAAarjD,OAAS,EACxBqjD,EAEA,GAEX,EAEAG,UAAW,SAAmB/1C,GAG5B,GAFAm1C,EAAWn1C,GAES,IAAhBA,EAAKzN,OAAc,MAAO,IAE9B,IAAIyjD,EAAoC,KAAvBh2C,EAAK40C,WAAW,GAC7BqB,EAAyD,KAArCj2C,EAAK40C,WAAW50C,EAAKzN,OAAS,GAQtD,OAHoB,KAFpByN,EAAOo1C,EAAqBp1C,GAAOg2C,IAE1BzjD,QAAiByjD,IAAYh2C,EAAO,KACzCA,EAAKzN,OAAS,GAAK0jD,IAAmBj2C,GAAQ,KAE9Cg2C,EAAmB,IAAMh2C,EACtBA,CACT,EAEAg2C,WAAY,SAAoBh2C,GAE9B,OADAm1C,EAAWn1C,GACJA,EAAKzN,OAAS,GAA4B,KAAvByN,EAAK40C,WAAW,EAC5C,EAEAx9C,KAAM,WACJ,GAAyB,IAArBrD,UAAUxB,OACZ,MAAO,IAET,IADA,IAAI2jD,EACKp5C,EAAI,EAAGA,EAAI/I,UAAUxB,SAAUuK,EAAG,CACzC,IAAI4xB,EAAM36B,UAAU+I,GACpBq4C,EAAWzmB,GACPA,EAAIn8B,OAAS,SACAyB,IAAXkiD,EACFA,EAASxnB,EAETwnB,GAAU,IAAMxnB,EAEtB,CACA,YAAe16B,IAAXkiD,EACK,IACFR,EAAMK,UAAUG,EACzB,EAEAC,SAAU,SAAkB5+C,EAAMs2C,GAIhC,GAHAsH,EAAW59C,GACX49C,EAAWtH,GAEPt2C,IAASs2C,EAAI,MAAO,GAKxB,IAHAt2C,EAAOm+C,EAAMxyB,QAAQ3rB,OACrBs2C,EAAK6H,EAAMxyB,QAAQ2qB,IAEF,MAAO,GAIxB,IADA,IAAIuI,EAAY,EACTA,EAAY7+C,EAAKhF,QACa,KAA/BgF,EAAKq9C,WAAWwB,KADYA,GASlC,IALA,IAAIC,EAAU9+C,EAAKhF,OACf+jD,EAAUD,EAAUD,EAGpBG,EAAU,EACPA,EAAU1I,EAAGt7C,QACa,KAA3Bs7C,EAAG+G,WAAW2B,KADUA,GAW9B,IAPA,IACIC,EADQ3I,EAAGt7C,OACKgkD,EAGhBhkD,EAAS+jD,EAAUE,EAAQF,EAAUE,EACrCC,GAAiB,EACjB35C,EAAI,EACDA,GAAKvK,IAAUuK,EAAG,CACvB,GAAIA,IAAMvK,EAAQ,CAChB,GAAIikD,EAAQjkD,EAAQ,CAClB,GAAmC,KAA/Bs7C,EAAG+G,WAAW2B,EAAUz5C,GAG1B,OAAO+wC,EAAG92C,MAAMw/C,EAAUz5C,EAAI,GACzB,GAAU,IAANA,EAGT,OAAO+wC,EAAG92C,MAAMw/C,EAAUz5C,EAE9B,MAAWw5C,EAAU/jD,IACoB,KAAnCgF,EAAKq9C,WAAWwB,EAAYt5C,GAG9B25C,EAAgB35C,EACD,IAANA,IAGT25C,EAAgB,IAGpB,KACF,CACA,IAAIC,EAAWn/C,EAAKq9C,WAAWwB,EAAYt5C,GAE3C,GAAI45C,IADS7I,EAAG+G,WAAW2B,EAAUz5C,GAEnC,MACoB,KAAb45C,IACPD,EAAgB35C,EACpB,CAEA,IAAI65C,EAAM,GAGV,IAAK75C,EAAIs5C,EAAYK,EAAgB,EAAG35C,GAAKu5C,IAAWv5C,EAClDA,IAAMu5C,GAAkC,KAAvB9+C,EAAKq9C,WAAW93C,KAChB,IAAf65C,EAAIpkD,OACNokD,GAAO,KAEPA,GAAO,OAMb,OAAIA,EAAIpkD,OAAS,EACRokD,EAAM9I,EAAG92C,MAAMw/C,EAAUE,IAEhCF,GAAWE,EACoB,KAA3B5I,EAAG+G,WAAW2B,MACdA,EACG1I,EAAG92C,MAAMw/C,GAEpB,EAEAK,UAAW,SAAmB52C,GAC5B,OAAOA,CACT,EAEAsO,QAAS,SAAiBtO,GAExB,GADAm1C,EAAWn1C,GACS,IAAhBA,EAAKzN,OAAc,MAAO,IAK9B,IAJA,IAAIgyC,EAAOvkC,EAAK40C,WAAW,GACvBiC,EAAmB,KAATtS,EACV7R,GAAO,EACPokB,GAAe,EACVh6C,EAAIkD,EAAKzN,OAAS,EAAGuK,GAAK,IAAKA,EAEtC,GAAa,MADbynC,EAAOvkC,EAAK40C,WAAW93C,KAEnB,IAAKg6C,EAAc,CACjBpkB,EAAM51B,EACN,KACF,OAGFg6C,GAAe,EAInB,OAAa,IAATpkB,EAAmBmkB,EAAU,IAAM,IACnCA,GAAmB,IAARnkB,EAAkB,KAC1B1yB,EAAKjJ,MAAM,EAAG27B,EACvB,EAEAqkB,SAAU,SAAkB/2C,EAAMg3C,GAChC,QAAYhjD,IAARgjD,GAAoC,iBAARA,EAAkB,MAAM,IAAIvC,UAAU,mCACtEU,EAAWn1C,GAEX,IAGIlD,EAHA21B,EAAQ,EACRC,GAAO,EACPokB,GAAe,EAGnB,QAAY9iD,IAARgjD,GAAqBA,EAAIzkD,OAAS,GAAKykD,EAAIzkD,QAAUyN,EAAKzN,OAAQ,CACpE,GAAIykD,EAAIzkD,SAAWyN,EAAKzN,QAAUykD,IAAQh3C,EAAM,MAAO,GACvD,IAAIi3C,EAASD,EAAIzkD,OAAS,EACtB2kD,GAAoB,EACxB,IAAKp6C,EAAIkD,EAAKzN,OAAS,EAAGuK,GAAK,IAAKA,EAAG,CACrC,IAAIynC,EAAOvkC,EAAK40C,WAAW93C,GAC3B,GAAa,KAATynC,GAGA,IAAKuS,EAAc,CACjBrkB,EAAQ31B,EAAI,EACZ,KACF,OAEwB,IAAtBo6C,IAGFJ,GAAe,EACfI,EAAmBp6C,EAAI,GAErBm6C,GAAU,IAER1S,IAASyS,EAAIpC,WAAWqC,IACR,KAAZA,IAGJvkB,EAAM51B,IAKRm6C,GAAU,EACVvkB,EAAMwkB,GAId,CAGA,OADIzkB,IAAUC,EAAKA,EAAMwkB,GAAmC,IAATxkB,IAAYA,EAAM1yB,EAAKzN,QACnEyN,EAAKjJ,MAAM07B,EAAOC,EAC3B,CACE,IAAK51B,EAAIkD,EAAKzN,OAAS,EAAGuK,GAAK,IAAKA,EAClC,GAA2B,KAAvBkD,EAAK40C,WAAW93C,IAGhB,IAAKg6C,EAAc,CACjBrkB,EAAQ31B,EAAI,EACZ,KACF,OACkB,IAAT41B,IAGXokB,GAAe,EACfpkB,EAAM51B,EAAI,GAId,OAAa,IAAT41B,EAAmB,GAChB1yB,EAAKjJ,MAAM07B,EAAOC,EAE7B,EAEAykB,QAAS,SAAiBn3C,GACxBm1C,EAAWn1C,GAQX,IAPA,IAAIo3C,GAAY,EACZC,EAAY,EACZ3kB,GAAO,EACPokB,GAAe,EAGfQ,EAAc,EACTx6C,EAAIkD,EAAKzN,OAAS,EAAGuK,GAAK,IAAKA,EAAG,CACzC,IAAIynC,EAAOvkC,EAAK40C,WAAW93C,GAC3B,GAAa,KAATynC,GASS,IAAT7R,IAGFokB,GAAe,EACfpkB,EAAM51B,EAAI,GAEC,KAATynC,GAEkB,IAAd6S,EACFA,EAAWt6C,EACY,IAAhBw6C,IACPA,EAAc,IACK,IAAdF,IAGTE,GAAe,QArBb,IAAKR,EAAc,CACjBO,EAAYv6C,EAAI,EAChB,KACF,CAoBN,CAEA,OAAkB,IAAds6C,IAA4B,IAAT1kB,GAEH,IAAhB4kB,GAEgB,IAAhBA,GAAqBF,IAAa1kB,EAAM,GAAK0kB,IAAaC,EAAY,EACjE,GAEFr3C,EAAKjJ,MAAMqgD,EAAU1kB,EAC9B,EAEA6kB,OAAQ,SAAgBC,GACtB,GAAmB,OAAfA,GAA6C,iBAAfA,EAChC,MAAM,IAAI/C,UAAU,0EAA4E+C,GAElG,OAvVJ,SAAiBC,EAAKD,GACpB,IAAI/sC,EAAM+sC,EAAW/sC,KAAO+sC,EAAW9mD,KACnCgnD,EAAOF,EAAWE,OAASF,EAAW5R,MAAQ,KAAO4R,EAAWR,KAAO,IAC3E,OAAKvsC,EAGDA,IAAQ+sC,EAAW9mD,KACd+Z,EAAMitC,EAERjtC,EA8UU,IA9UEitC,EALVA,CAMX,CA6UWC,CAAQ,EAAKH,EACtB,EAEA38B,MAAO,SAAe7a,GACpBm1C,EAAWn1C,GAEX,IAAI43C,EAAM,CAAElnD,KAAM,GAAI+Z,IAAK,GAAIitC,KAAM,GAAIV,IAAK,GAAIpR,KAAM,IACxD,GAAoB,IAAhB5lC,EAAKzN,OAAc,OAAOqlD,EAC9B,IAEInlB,EAFA8R,EAAOvkC,EAAK40C,WAAW,GACvBoB,EAAsB,KAATzR,EAEbyR,GACF4B,EAAIlnD,KAAO,IACX+hC,EAAQ,GAERA,EAAQ,EAaV,IAXA,IAAI2kB,GAAY,EACZC,EAAY,EACZ3kB,GAAO,EACPokB,GAAe,EACfh6C,EAAIkD,EAAKzN,OAAS,EAIlB+kD,EAAc,EAGXx6C,GAAK21B,IAAS31B,EAEnB,GAAa,MADbynC,EAAOvkC,EAAK40C,WAAW93C,KAUV,IAAT41B,IAGFokB,GAAe,EACfpkB,EAAM51B,EAAI,GAEC,KAATynC,GAEkB,IAAd6S,EAAiBA,EAAWt6C,EAA2B,IAAhBw6C,IAAmBA,EAAc,IACrD,IAAdF,IAGXE,GAAe,QAlBb,IAAKR,EAAc,CACjBO,EAAYv6C,EAAI,EAChB,KACF,CAwCN,OArBkB,IAAds6C,IAA4B,IAAT1kB,GAEP,IAAhB4kB,GAEgB,IAAhBA,GAAqBF,IAAa1kB,EAAM,GAAK0kB,IAAaC,EAAY,GACvD,IAAT3kB,IACiCklB,EAAIF,KAAOE,EAAIhS,KAAhC,IAAdyR,GAAmBrB,EAAkCh2C,EAAKjJ,MAAM,EAAG27B,GAAgC1yB,EAAKjJ,MAAMsgD,EAAW3kB,KAG7G,IAAd2kB,GAAmBrB,GACrB4B,EAAIhS,KAAO5lC,EAAKjJ,MAAM,EAAGqgD,GACzBQ,EAAIF,KAAO13C,EAAKjJ,MAAM,EAAG27B,KAEzBklB,EAAIhS,KAAO5lC,EAAKjJ,MAAMsgD,EAAWD,GACjCQ,EAAIF,KAAO13C,EAAKjJ,MAAMsgD,EAAW3kB,IAEnCklB,EAAIZ,IAAMh3C,EAAKjJ,MAAMqgD,EAAU1kB,IAG7B2kB,EAAY,EAAGO,EAAIntC,IAAMzK,EAAKjJ,MAAM,EAAGsgD,EAAY,GAAYrB,IAAY4B,EAAIntC,IAAM,KAElFmtC,CACT,EAEAH,IAAK,IACLI,UAAW,IACXC,MAAO,KACPpC,MAAO,MAGTA,EAAMA,MAAQA,EAEd7kD,EAAOD,QAAU8kD,yBC9gBjB,IAAIqC,EAAc,GAElB,SAASC,EAAqBC,GAG5B,IAFA,IAAI7/C,GAAU,EAEL0E,EAAI,EAAGA,EAAIi7C,EAAYxlD,OAAQuK,IACtC,GAAIi7C,EAAYj7C,GAAGm7C,aAAeA,EAAY,CAC5C7/C,EAAS0E,EACT,KACF,CAGF,OAAO1E,CACT,CAEA,SAAS8/C,EAAaxsC,EAAMja,GAI1B,IAHA,IAAI0mD,EAAa,CAAC,EACdC,EAAc,GAETt7C,EAAI,EAAGA,EAAI4O,EAAKnZ,OAAQuK,IAAK,CACpC,IAAIuO,EAAOK,EAAK5O,GACZs2C,EAAK3hD,EAAQimD,KAAOrsC,EAAK,GAAK5Z,EAAQimD,KAAOrsC,EAAK,GAClDvS,EAAQq/C,EAAW/E,IAAO,EAC1B6E,EAAa,GAAGtjD,OAAOy+C,EAAI,KAAKz+C,OAAOmE,GAC3Cq/C,EAAW/E,GAAMt6C,EAAQ,EACzB,IAAIu/C,EAAoBL,EAAqBC,GACzCK,EAAM,CACRC,IAAKltC,EAAK,GACVmoC,MAAOnoC,EAAK,GACZmtC,UAAWntC,EAAK,GAChBqoC,SAAUroC,EAAK,GACfgnC,MAAOhnC,EAAK,IAGd,IAA2B,IAAvBgtC,EACFN,EAAYM,GAAmBI,aAC/BV,EAAYM,GAAmBK,QAAQJ,OAClC,CACL,IAAII,EAAUC,EAAgBL,EAAK7mD,GACnCA,EAAQmnD,QAAU97C,EAClBi7C,EAAY5wC,OAAOrK,EAAG,EAAG,CACvBm7C,WAAYA,EACZS,QAASA,EACTD,WAAY,GAEhB,CAEAL,EAAY/jD,KAAK4jD,EACnB,CAEA,OAAOG,CACT,CAEA,SAASO,EAAgBL,EAAK7mD,GAC5B,IAAIonD,EAAMpnD,EAAQsf,OAAOtf,GAezB,OAdAonD,EAAIC,OAAOR,GAEG,SAAiBS,GAC7B,GAAIA,EAAQ,CACV,GAAIA,EAAOR,MAAQD,EAAIC,KAAOQ,EAAOvF,QAAU8E,EAAI9E,OAASuF,EAAOP,YAAcF,EAAIE,WAAaO,EAAOrF,WAAa4E,EAAI5E,UAAYqF,EAAO1G,QAAUiG,EAAIjG,MACzJ,OAGFwG,EAAIC,OAAOR,EAAMS,EACnB,MACEF,EAAIj3B,QAER,CAGF,CAEA/wB,EAAOD,QAAU,SAAU8a,EAAMja,GAG/B,IAAIunD,EAAkBd,EADtBxsC,EAAOA,GAAQ,GADfja,EAAUA,GAAW,CAAC,GAGtB,OAAO,SAAgBwnD,GACrBA,EAAUA,GAAW,GAErB,IAAK,IAAIn8C,EAAI,EAAGA,EAAIk8C,EAAgBzmD,OAAQuK,IAAK,CAC/C,IACIxE,EAAQ0/C,EADKgB,EAAgBl8C,IAEjCi7C,EAAYz/C,GAAOmgD,YACrB,CAIA,IAFA,IAAIS,EAAqBhB,EAAae,EAASxnD,GAEtCujD,EAAK,EAAGA,EAAKgE,EAAgBzmD,OAAQyiD,IAAM,CAClD,IAEImE,EAASnB,EAFKgB,EAAgBhE,IAIK,IAAnC+C,EAAYoB,GAAQV,aACtBV,EAAYoB,GAAQT,UAEpBX,EAAY5wC,OAAOgyC,EAAQ,GAE/B,CAEAH,EAAkBE,CACpB,CACF,yBCrGA,IAAIE,EAAO,CAAC,EAoCZvoD,EAAOD,QAVP,SAA0BkgB,EAAQqF,GAChC,IAAIjR,EAxBN,SAAmBA,GACjB,QAA4B,IAAjBk0C,EAAKl0C,GAAyB,CACvC,IAAIm0C,EAAc/kC,SAASgN,cAAcpc,GAEzC,GAAIkR,OAAOkjC,mBAAqBD,aAAuBjjC,OAAOkjC,kBAC5D,IAGED,EAAcA,EAAYE,gBAAgBC,IAC5C,CAAE,MAAOv+B,GAEPo+B,EAAc,IAChB,CAGFD,EAAKl0C,GAAUm0C,CACjB,CAEA,OAAOD,EAAKl0C,EACd,CAKeu0C,CAAU3oC,GAEvB,IAAK5L,EACH,MAAM,IAAIjG,MAAM,2GAGlBiG,EAAOurB,YAAYta,EACrB,wBC1BAtlB,EAAOD,QAPP,SAA4Ba,GAC1B,IAAI+gB,EAAU8B,SAASsiB,cAAc,SAGrC,OAFAnlC,EAAQof,cAAc2B,EAAS/gB,EAAQioD,YACvCjoD,EAAQqf,OAAO0B,EAAS/gB,EAAQA,SACzB+gB,CACT,+BCGA3hB,EAAOD,QARP,SAAwC+oD,GACtC,IAAIC,EAAmD,KAEnDA,GACFD,EAAahhB,aAAa,QAASihB,EAEvC,yBC4DA/oD,EAAOD,QAZP,SAAgBa,GACd,IAAIkoD,EAAeloD,EAAQuf,mBAAmBvf,GAC9C,MAAO,CACLqnD,OAAQ,SAAgBR,IAzD5B,SAAeqB,EAAcloD,EAAS6mD,GACpC,IAAIC,EAAM,GAEND,EAAI5E,WACN6E,GAAO,cAAc5jD,OAAO2jD,EAAI5E,SAAU,QAGxC4E,EAAI9E,QACN+E,GAAO,UAAU5jD,OAAO2jD,EAAI9E,MAAO,OAGrC,IAAIF,OAAiC,IAAdgF,EAAIjG,MAEvBiB,IACFiF,GAAO,SAAS5jD,OAAO2jD,EAAIjG,MAAM9/C,OAAS,EAAI,IAAIoC,OAAO2jD,EAAIjG,OAAS,GAAI,OAG5EkG,GAAOD,EAAIC,IAEPjF,IACFiF,GAAO,KAGLD,EAAI9E,QACN+E,GAAO,KAGLD,EAAI5E,WACN6E,GAAO,KAGT,IAAIC,EAAYF,EAAIE,UAEhBA,GAA6B,oBAATvE,OACtBsE,GAAO,uDAAuD5jD,OAAOs/C,KAAK7C,SAAShhC,mBAAmB7c,KAAKC,UAAUglD,MAAe,QAMtI/mD,EAAQmf,kBAAkB2nC,EAAKoB,EAAcloD,EAAQA,QACvD,CAiBM2/B,CAAMuoB,EAAcloD,EAAS6mD,EAC/B,EACA12B,OAAQ,YAjBZ,SAA4B+3B,GAE1B,GAAgC,OAA5BA,EAAa/yC,WACf,OAAO,EAGT+yC,EAAa/yC,WAAWwoB,YAAYuqB,EACtC,CAWME,CAAmBF,EACrB,EAEJ,yBCpDA9oD,EAAOD,QAZP,SAA2B2nD,EAAKoB,GAC9B,GAAIA,EAAaG,WACfH,EAAaG,WAAWC,QAAUxB,MAC7B,CACL,KAAOoB,EAAa3mC,YAClB2mC,EAAavqB,YAAYuqB,EAAa3mC,YAGxC2mC,EAAalpB,YAAYnc,SAASslB,eAAe2e,GACnD,CACF,kVCZIyB,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBlmD,IAAjBmmD,EACH,OAAOA,EAAavpD,QAGrB,IAAIC,EAASmpD,EAAyBE,GAAY,CACjD9G,GAAI8G,EACJE,QAAQ,EACRxpD,QAAS,CAAC,GAUX,OANAypD,EAAoBH,GAAU/oB,KAAKtgC,EAAOD,QAASC,EAAQA,EAAOD,QAASqpD,GAG3EppD,EAAOupD,QAAS,EAGTvpD,EAAOD,OACf,QAGAqpD,EAAoB9iD,EAAIkjD,EC3BxBJ,EAAoB5/B,EAAKxpB,IACxB,IAAIypD,EAASzpD,GAAUA,EAAOgjD,WAC7B,IAAOhjD,EAAiB,QACxB,IAAM,EAEP,OADAopD,EAAoBM,EAAED,EAAQ,CAAE5yC,EAAG4yC,IAC5BA,CAAM,ECLdL,EAAoBM,EAAI,CAAC3pD,EAAS4pD,KACjC,IAAI,IAAItoD,KAAOsoD,EACXP,EAAoBQ,EAAED,EAAYtoD,KAAS+nD,EAAoBQ,EAAE7pD,EAASsB,IAC5EoC,OAAO0wC,eAAep0C,EAASsB,EAAK,CAAE+yC,YAAY,EAAM3lC,IAAKk7C,EAAWtoD,IAE1E,ECND+nD,EAAoBpV,EAAI,WACvB,GAA0B,iBAAf6V,WAAyB,OAAOA,WAC3C,IACC,OAAO/8C,MAAQ,IAAIg9C,SAAS,cAAb,EAChB,CAAE,MAAO1/B,GACR,GAAsB,iBAAX7E,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB6jC,EAAoBQ,EAAI,CAACnC,EAAKsC,IAAUtmD,OAAO+8B,UAAUryB,eAAemyB,KAAKmnB,EAAKsC,GCAlFX,EAAoBY,IAAOhqD,IAC1BA,EAAOiqD,MAAQ,GACVjqD,EAAOiW,WAAUjW,EAAOiW,SAAW,IACjCjW,GCHRopD,EAAoBtyC,EAAI2M,SAASymC,SAAW/pD,KAAKysB,SAASC,KCA1Du8B,EAAoBe,QAAKhnD,oJCWrBvC,EAAU,CAAC,EAEfA,EAAQmf,kBAAoB,IAC5Bnf,EAAQof,cAAgB,IAElBpf,EAAQqf,OAAS,SAAc,KAAM,QAE3Crf,EAAQsf,OAAS,IACjBtf,EAAQuf,mBAAqB,IAEhB,IAAI,IAASvf,GAKJ,KAAW,IAAQwf,QAAS,IAAQA,qBCvBtDgqC,EAAsB3mC,SAASsiB,cAAc,OACjDqkB,EAAoB7H,GAAK,uBACzB9+B,SAASoS,KAAK+J,YAAYwqB,GAE1B,IAAIC,EAAkB5mC,SAASsiB,cAAc,OAC7CskB,EAAgB9H,GAAK,mBACrB6H,EAAoBxqB,YAAYyqB,GAEhC,IAAIC,EAAS7mC,SAASsiB,cAAc,YACpCukB,EAAO/H,GAAK,SACZ8H,EAAgBzqB,YAAY0qB,GAE5B,IAAIC,EAAiB9mC,SAASsiB,cAAc,OAC5CwkB,EAAehI,GAAK,UACpB8H,EAAgBzqB,YAAY2qB,GAC5BA,EAAexgC,UAEN,2FAGT,IAAIygC,EAAsB/mC,SAASsiB,cAAc,OACjDykB,EAAoBjI,GAAK,uBACzB6H,EAAoBxqB,YAAY4qB,GAEhC,IAAIn5B,EAAkB5N,SAASsiB,cAAc,OAC7C1U,EAAgBkxB,GAAK,UACrBiI,EAAoB5qB,YAAYvO,GAEhC,IAAMo5B,EAAcpqD,EAAAA,MAAAA,EAChBqqD,EAAoBC,aAAajuB,QAAQ,SAAW+tB,EAexD,SAASG,IACPN,EAAOr8C,MAAQq8C,EAAOr8C,OAASw8C,EAC/BE,aAAahuB,QAAQ,OAAQ2tB,EAAOr8C,OAEpCs8C,EAAez5B,UAAUC,OAAO,SAChCw5B,EAAexgC,UAhCR,2FAkCP,KACE8gC,EAAAA,EAAAA,SAAcP,EAAOr8C,MACvB,CAAE,MAAMmc,GACNmgC,EAAexgC,UAAYK,EAAE0gC,QAC7BP,EAAez5B,UAAUwI,IAAI,SAC7BjI,EAAgByb,UAAY,mBAC5Bn8B,QAAQ8L,MAAM2N,EAChB,CACF,CA7BI,CAAC,YAAa,aAAarP,SAASwK,OAAOqH,SAASm+B,YAAWL,EAAoBD,GAEvFH,EAAOr8C,MAAQy8C,EACfJ,EAAOn9B,iBAAiB,QAAQ,SAAC/C,GAAC,OAAK8F,YAAW,kBAAM06B,GAAU,GAAC,IAEnEN,EAAOn9B,iBAAiB,SAAS,WAC3Bo9B,EAAez5B,UAAUwF,SAAS,WACtCi0B,EAAexgC,UApBR,2FAqBT,IAEAob,MAAQ,SAAC75B,GAAG,OAAKqF,QAAQC,IAAI,sBAAD9M,OAAuBwH,EAAG,6BAA8B8mB,QAAQuT,QAAQ,EAEpGilB","sources":["webpack:///webpack/universalModuleDefinition","webpack:///./cli/build/components/json_for_expl_file.js","webpack:///./cli/build/components/json_for_project_directory.js","webpack:///./cli/build/components/matchers.js","webpack:///./cli/build/components/parse_paragraph.js","webpack:///./cli/build/components/parse_text.js","webpack:///./cli/build/components/parser_context.js","webpack:///./cli/build/components/reference.js","webpack:///./cli/build/components/simple-helpers.js","webpack:///./cli/build/components/tokens.js","webpack:///./cli/bulk/bulk_file_parser.js","webpack:///./cli/bulk/file_set.js","webpack:///./cli/shared/block.js","webpack:///./cli/shared/remove_style_characters.js","webpack:///./cli/shared/simple-helpers.js","webpack:///./cli/shared/topic.js","webpack:///./client/style/canopy.scss?ec98","webpack:///./client/keys/key_handlers.js","webpack:///./client/keys/arrow_keys.js","webpack:///./client/keys/register_key_listeners.js","webpack:///./client/history/register_pop_state_listener.js","webpack:///./client/canopy.js","webpack:///./client/display/display_path.js","webpack:///./client/display/helpers.js","webpack:///./client/display/update_view.js","webpack:///./client/helpers/getters.js","webpack:///./client/helpers/scrollable_container.js","webpack:///./client/models/link.js","webpack:///./client/models/paragraph.js","webpack:///./client/models/path.js","webpack:///./client/rebuild_canopy.js","webpack:///./client/render/click_handlers.js","webpack:///./client/requests/request_json.js","webpack:///./client/requests/helpers.js","webpack:///./client/render/helpers.js","webpack:///./client/render/render_token_element.js","webpack:///./client/render/render_dom_tree.js","webpack:///./client/render/fetch_and_render_path.js","webpack:///./client/requests/request_cache.js","webpack:///./playground/default_text.js","webpack:///./node_modules/chalk/node_modules/ansi-styles/index.js","webpack:///./node_modules/chalk/node_modules/color-convert/conversions.js","webpack:///./node_modules/chalk/node_modules/color-convert/index.js","webpack:///./node_modules/chalk/node_modules/color-convert/route.js","webpack:///./node_modules/chalk/node_modules/color-name/index.js","webpack:///./node_modules/chalk/node_modules/supports-color/browser.js","webpack:///./node_modules/chalk/source/index.js","webpack:///./node_modules/chalk/source/templates.js","webpack:///./node_modules/chalk/source/util.js","webpack:///./client/style/canopy.scss","webpack:///./playground/playground.scss","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/css-loader/dist/runtime/getUrl.js","webpack:///./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack:///./node_modules/css.escape/css.escape.js","webpack:///./node_modules/dedent-js/lib/index.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack:///./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack:///./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack:///./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack:///./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/node module decorator","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/runtime/nonce","webpack:///./playground/playground.scss?9247","webpack:///./playground/src.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Canopy\"] = factory();\n\telse\n\t\troot[\"Canopy\"] = factory();\n})(self, () => {\nreturn ","let parseParagraph = require('./parse_paragraph');\nlet Topic = require('../../shared/topic');\nlet Block = require('../../shared/block');\nlet parseText = require('./parse_text');\n\nfunction jsonForExplFile(filePath, explFileData, parserContext, options) {\n  let paragraphsWithKeys = explFileData[filePath].trim().split(/\\n\\n/);\n  let rootParagraph = new Block(paragraphsWithKeys[0]);\n  let paragraphsBySubtopic = {};\n  parserContext.filePath = filePath;\n\n  paragraphsWithKeys.forEach(function(paragraphWithKey) {\n    let paragraph = new Block(paragraphWithKey.trim());\n    if (!paragraph.key) { return; }\n\n    parserContext.setTopicAndSubtopic(Topic.for(rootParagraph.key), Topic.for(paragraph.key));\n    parserContext.setLineNumberToCurrentSubtopic();\n    if (!paragraph.newlineAfterDelimiter) parserContext.incrementCharacterNumber(paragraph.key.length + paragraph.charsAfterKey); // move cursor past key\n    if (paragraph.newlineAfterDelimiter) parserContext.incrementLineAndResetCharacterNumber();\n\n    let tokensOfParagraph = parseParagraph(paragraph.text, parserContext);\n\n    paragraphsBySubtopic[parserContext.currentSubtopic.mixedCase] = tokensOfParagraph;\n  });\n\n  parserContext.validateRedundantLocalReferences();\n  parserContext.throwSubsumptionConditionalErrors();\n  parserContext.addFragmentReferenceSubtopics(subtopic => { paragraphsBySubtopic[subtopic.mixedCase] = []; });\n\n  let jsonObject = {\n    displayTopicName: rootParagraph.key,\n    topicTokens: parseText({ text: rootParagraph.key, parserContext: parserContext.clone({ insideToken: true }) }), // ignore multi-line matchers\n    paragraphsBySubtopic\n  };\n\n  return JSON.stringify(\n    jsonObject,\n    null,\n    options.pretty ? 2 : 0\n  );\n}\n\nmodule.exports = jsonForExplFile;\n","let jsonForExplFile = require('./json_for_expl_file.js');\nlet { topicKeyOfString } = require('./simple-helpers');\nlet ParserContext = require('./parser_context');\nlet Topic = require('../../shared/topic');\n\nfunction jsonForProjectDirectory(explFileData, newStatusData, defaultTopicString, options={}) {\n  let destinationBuildDirectory = 'build';\n  let destinationDataDirectory = destinationBuildDirectory + '/_data';\n  let parserContext = new ParserContext({ explFileData, newStatusData, defaultTopicString, options });\n  let directoriesToEnsure = [];\n  let filesToWrite = {};\n\n  directoriesToEnsure.push(destinationDataDirectory);\n\n  Object.keys(explFileData).forEach(function(filePath) {\n    if (!topicKeyOfString(explFileData[filePath])) return;\n    if (newStatusData && !newStatusData[filePath]) return; // with --cache we only build json for new expl files\n\n    let json = jsonForExplFile(filePath, explFileData, parserContext, options);\n    let topic = new Topic(topicKeyOfString(explFileData[filePath]), true);\n    let destinationPath = `${destinationDataDirectory}/${topic.fileName}.json`;\n\n    filesToWrite[destinationPath] = json;\n\n    if (options.symlinks) {\n      let folderTopic = new Topic(topicKeyOfString(explFileData[filePath]));\n      directoriesToEnsure.push(destinationBuildDirectory + '/' + folderTopic.fileName);\n    }\n  });\n\n  parserContext.validateSubtopicDefinitions();\n  parserContext.validateGlobalReferences();\n  if (options.orphans) parserContext.logGlobalOrphans();\n  if (options.orphans) parserContext.logLocalOrphans();\n\n  return { directoriesToEnsure, filesToWrite };\n}\n\nmodule.exports = jsonForProjectDirectory;\n","let {\n  LocalReferenceToken,\n  GlobalReferenceToken,\n  DisabledReferenceToken,\n  ExternalLinkToken,\n  ImageToken,\n  FootnoteMarkerToken,\n  HtmlToken,\n  CodeBlockToken,\n  BlockQuoteToken,\n  OutlineToken,\n  TableToken,\n  MenuToken,\n  FootnoteLinesToken,\n  ItalicsToken,\n  BoldToken,\n  InlineCodeSnippetToken,\n  UnderlineToken,\n  ToolTipToken,\n} = require('./tokens');\n\nconst Matchers = [\n  escapedNewlineMatcher,\n  escapedCharacterMatcher,\n  fenceCodeBlockMatcher,\n  prefixCodeBlockMatcher,\n  blockQuoteMatcher,\n  outlineMatcher,\n  tableMatcher,\n  tableListMatcher,\n  htmlMatcher,\n  htmlEntityMatcher,\n  footnoteLinesMatcher,\n  localReferenceMatcher,\n  globalReferenceMatcher,\n  disabledReferenceMatcher,\n  fragmentReferenceMatcher,\n  footnoteMarkerMatcher,\n  italicsMatcher,\n  boldMatcher,\n  codeSnippetMatcher,\n  underlineMatcher,\n  imageMatcher,\n  hyperlinkMatcher,\n  urlMatcher,\n  toolTipMatcher\n];\n\nlet Topic = require('../../shared/topic');\nlet { splitOnPipes } = require('../../shared/simple-helpers');\nlet Reference = require('./reference');\n\nfunction fenceCodeBlockMatcher({ string, startOfLine }) {\n  let match = string.match(/^```\\n(.*\\n)```(\\n|$)/s);\n\n  if (match && startOfLine) {\n    let text = match[1];\n    if (text[text.length - 1] === \"\\n\") text = text.slice(0, -1); // remove trailing newline\n\n    return [\n      new CodeBlockToken(text),\n      match[0].length\n    ];\n  }\n}\n\nfunction prefixCodeBlockMatcher({ string, startOfLine }) {\n  let match = string.match(/^(`((\\n|$)| [^\\n]*(\\n|$)))+/s); // if there is content on the line, we require a space\n\n  if (match && startOfLine) {\n    let text = [...match[0].matchAll(/^` ?([^\\n]*)/gm)].map(m => m[1]).join('\\n');\n    // if (text[text.length - 1] === \"\\n\") text = text.slice(0, -1); // remove trailing newline\n\n    return [\n      new CodeBlockToken(text),\n      match[0].length\n    ];\n  }\n}\n\nfunction blockQuoteMatcher({ string, parserContext, startOfLine }) {\n  let match =\n    string.match(/^((<)(?: [^\\n]+|(?=\\n))(\\n|$))+/s)\n    || string.match(/^((>)(?: [^\\n]+|(?=\\n))(\\n|$))+/s); // one direction or the other not a mix\n\n  if (match && startOfLine) {\n    let text = Array.from(\n      match[0]\n        .matchAll(/(?:^|\\n)(?:[><])(?: ([^\\n]+)|(?=\\n))/g))\n      .map(m => m?.[1] || '')\n      .join('\\n');\n\n    if (text[text.length - 1] === \"\\n\") text = text.slice(0, -1); // remove trailing newline\n    let direction = match[2] === '>' ? 'ltr' : 'rtl';\n\n    return [\n      new BlockQuoteToken(text, direction, parserContext),\n      match[0].length\n    ];\n  }\n}\n\nfunction outlineMatcher({ string, parserContext, startOfLine }) {\n  let match = string.match(/^(\\s*(((?:[0-9+*-]{1,3}|[a-zA-Z])\\.)|[+*-])([ ]+[^\\n]+)(\\n|$))+/s);\n\n  if (match && startOfLine) {\n    return [\n      new OutlineToken(match[0], parserContext),\n      match[0].length\n    ];\n  }\n}\n\nfunction tableMatcher({ string, parserContext, startOfLine }) {\n  let match = string.match(/^(?:(?:\\|(?:[^\\n]*\\|))(?:\\n|$))+/);\n  if (!match) return null;\n  let tableMatch = match[0];\n  if (tableMatch.endsWith('\\n')) tableMatch = tableMatch.slice(0, -1);\n\n  let lines = tableMatch.split(/\\n/g).map(l => splitOnPipes(l)); // split rows by unescaped pipe characters\n  if (!lines.every(l => l.length === lines[0].length)) return null; // all rows must have an equal number of cells\n\n  if (match && startOfLine) {\n    return [\n      new TableToken(tableMatch, parserContext),\n      tableMatch.length\n    ];\n  }\n}\n\nfunction tableListMatcher({ string, parserContext, startOfLine }) {\n  if (!string.match(/\\n[-=<]+(\\n|$)/)) return; // check the end first to avoid catastrophic backtracking\n  let match = string.match(/^[=\\-<]+\\n((([-<>] ?|[\\w\\d]+\\.\\s)[^\\n]*\\n)+)[=\\-<]+\\n?/);\n  if (!match) return null;\n\n  if (match && startOfLine) {\n    return [\n      new MenuToken(match[0], parserContext),\n      match[0].length\n    ];\n  }\n}\n\nfunction htmlMatcher({ string, parserContext, startOfLine }) {\n  let fragments = string.match(/(<[^>]+>|((?!<[^>]+>).)*)/gs);\n  let result = null;\n\n  fragments.forEach((_, index) => { // Look at eg <a><b><c> then <a><b> then <a> for balanced fragment\n    let segment = fragments.slice(0, fragments.length - index).join('');\n\n    let match = segment.match(/^<([^<> ]+)[^<>]*>(.*<[^>]+>)?/s);\n    if (match) {\n      let [_, openingTagName, doubleTag] = match;\n      let singleTag = !doubleTag;\n\n      let balancedFirstTag = !singleTag && (Array.from(match[0].matchAll(/<(\\/?)([^<> ]+[^<>]*)>/gs)).slice(1).reduce((count, match) => {\n        let [_, forwardSlash, tagName] = match;\n\n        if (count === 0) return NaN; // if we've close the opening tag before finishing, reject the block eg <div></div><div></div>\n\n        if (tagName.toLowerCase() === openingTagName.toLowerCase()) {\n          if (forwardSlash) {\n            count--;\n          } else {\n            count++;\n          }\n        }\n\n        return count;\n\n      }, 1) === 0); // if we end with zero having never hit zero in between, the outer tag is balanced eg <b><b></b></b> and not <b></b><b></b>\n\n\n      if (singleTag || balancedFirstTag) {\n        let terminalNewlineLength = (startOfLine && string[segment.length] === '\\n') ? '\\n'.length : 0;\n\n        result = result || [\n          new HtmlToken(match[0], parserContext),\n          match[0].length + terminalNewlineLength\n        ];\n      }\n    }\n  });\n\n  return result;\n}\n\nfunction htmlEntityMatcher({ string, parserContext }) {\n  let match = string.match(/^&[a-zA-Z]+;/s);\n\n  if (match) {\n    return [\n      new HtmlToken(match[0], parserContext),\n      match[0].length\n    ];\n  }\n}\n\nfunction footnoteLinesMatcher({ string, parserContext, startOfLine }) {\n  let match = string.match(/^(\\[\\^[^\\]]+]:[^\\n]+(\\n|$))+/s);\n\n  if (match && startOfLine) {\n    return [\n      new FootnoteLinesToken(match[0], parserContext),\n      match[0].length\n    ];\n  }\n}\n\nfunction localReferenceMatcher({ string, parserContext, index }) {\n  if (parserContext.noLinks) return;\n  if (!Reference.candidateSubstring(string)) return;\n  let { currentTopic, currentSubtopic } = parserContext;\n\n  let reference = Reference.for(Reference.candidateSubstring(string), parserContext);\n\n  if (!reference.valid) return;\n  if (!reference.simpleTarget) return; // eg [[A]] or [[A|B]] not [[A#B/C#D]] or [[A#B/C#D|XYZ]]\n  if (!reference.targetText) return; // Eg someone accidentally did [[]] or [[|XYZ]]\n\n  let potentialSubtopic = Topic.for(reference.targetText);\n  if (!potentialSubtopic) return; // subsumption dependent error\n  if (potentialSubtopic.caps === currentTopic.caps) return; // this is a global self-reference, the root subtopic cannot be local-referenced\n  if (potentialSubtopic.caps === currentSubtopic.caps) return; // a subtopic can't link to itself, perhaps a global topic by same name\n\n  if (parserContext.currentTopicHasSubtopic(potentialSubtopic)) {\n    if (parserContext.subtopicReferenceIsRedundant(potentialSubtopic)) {\n      parserContext.registerPotentialRedundantLocalReference(potentialSubtopic);\n    }\n\n    let localReferenceToken = new LocalReferenceToken(\n      currentTopic.mixedCase,\n      parserContext.getOriginalSubtopic(currentTopic, potentialSubtopic).mixedCase,\n      currentTopic.mixedCase,\n      currentSubtopic.mixedCase,\n      reference.displayText,\n      parserContext\n    );\n\n    parserContext.registerLocalReference(potentialSubtopic, index, reference.contents, string, localReferenceToken);\n\n    return [localReferenceToken, reference.fullText.length];\n  } else {\n    return null;\n  }\n}\n\nfunction globalReferenceMatcher({ string, parserContext }) {\n  if (parserContext.noLinks) return;\n  if (!Reference.candidateSubstring(string)) return;\n  let { currentTopic, currentSubtopic } = parserContext;\n  \n  let reference = Reference.for(Reference.candidateSubstring(string), parserContext);\n  if (!reference.valid) return;\n  let pathString = reference.pathString;\n\n  parserContext.registerGlobalReference(pathString, reference, reference.fullText);\n\n  return [\n    new GlobalReferenceToken(\n      pathString,\n      currentTopic.mixedCase,\n      currentSubtopic.mixedCase,\n      reference.displayText,\n      parserContext\n    ), reference.fullText.length\n  ];\n}\n\nfunction disabledReferenceMatcher({ string, parserContext }) {\n  let match = string.match(/^\\[!\\[(?:\\\\.|(?!]]).)+]]/s);\n\n  if (match) {\n    let reference = Reference.for('[[' + match[0].slice('[!['.length), parserContext);\n\n    return [new DisabledReferenceToken(\n      reference.displayText,\n      parserContext\n    ),\n    match[0].length];\n  }\n}\n\nfunction fragmentReferenceMatcher({ string, parserContext }) {\n  let match = string.match(/^\\[#\\[(?:\\\\.|(?!]]).)+]]/s);\n  let { currentTopic, currentSubtopic } = parserContext;\n\n  if (match) {\n    let reference = Reference.for('[[' + match[0].slice('[#['.length), parserContext);\n\n    parserContext.registerFragmentReference(reference);\n\n    return [new LocalReferenceToken(\n      currentTopic.mixedCase,\n      reference.targetAsTopic.mixedCase,\n      currentTopic.mixedCase,\n      currentSubtopic.mixedCase,\n      reference.displayText,\n      parserContext\n    ),\n    match[0].length];\n  }\n}\n\nfunction escapedCharacterMatcher({ string, parserContext }) {\n  let match = string.match(/^\\\\(.)/s);\n  if (match) {\n    parserContext.buffer += match[1];\n\n    return [null, match[0].length];\n  }\n}\n\nfunction escapedNewlineMatcher({ string }) {\n  let match = string.match(/^\\\\\\n/s);\n  if (match) {\n    return [null, match[0].length];\n  }\n}\n\nfunction footnoteMarkerMatcher({ string, startOfLine }) {\n\n  let match = string.match(/^\\[\\^([^\\]]+)\\]/);\n  if (match && !startOfLine) { // a footnote marker cannot start a line to distinguish from footnote line itself\n    return [\n      new FootnoteMarkerToken(match[1]),\n      match[0].length\n    ];\n  }\n}\n\nfunction hyperlinkMatcher({ string, parserContext }) {\n  let match = string.match(/^\\[((?:\\\\.|!\\[(?:\\\\.|[^\\\\])+?\\)|[^\\\\])+?)\\](?:\\(((?:\\\\[^ ]|[^\\\\ ])+))\\)/); // non-greedy unless text looks like nested image\n  if (match) {\n    let [_, text, url] = match;\n    return [\n      new ExternalLinkToken(url, text, parserContext),\n      match[0].length\n    ];\n  }\n}\n\nfunction urlMatcher({ string }) {\n  let match = string.match(/^([A-Za-z0-9+\\-.]+:\\/\\/\\S+[^.,;!\\s])/);\n  if (match) {\n    return [\n      new ExternalLinkToken(match[1]),\n      match[0].length\n    ];\n  }\n}\n\nfunction imageMatcher({ string, parserContext }) {\n  let match = string.match(/^!\\[((?:\\\\.|[^\\\\])*?)\\]\\((\\S+?)\\s*(?:[\"'“”]((?:\\\\.|[^\\\\\"'“”])*?)(?:\"|”)(?: [\"'“”]((?:\\\\.|[^\\\\])*?)[\"'“”])?)?\\)/);\n\n  if (match) {\n    return [\n      new ImageToken(\n        {\n          alt: match[1],\n          resourceUrl:\n          match[2],\n          title: match[3],\n          caption: match[4],\n          parserContext\n        }\n      ), match[0].length\n    ];\n  }\n}\n\nfunction italicsMatcher({ string, parserContext, previousCharacter }) {\n  let strictPreviousCharacter = previousCharacter === undefined || !previousCharacter.match(/[A-Za-z0-9]/);\n  let match = string.match(/^_(.*?[^\\\\])_(.|$)/s);\n  let strictNextCharacter = (match?.[2] !== undefined) && !match?.[2].match(/[A-Za-z0-9]/); // nextChar is null, or non-alpha-numeric\n  let containsSpaces = match?.[0].match(/\\s/s);\n\n  let matchExists = match &&\n    ((strictPreviousCharacter && strictNextCharacter) || // either _ is at the edges of a word, in which case selected text can contain spaces\n      !containsSpaces); // or _ is within a word, and the italicized region may not contain spaces\n\n  if (matchExists) {\n    return [\n      new ItalicsToken(\n        match[1],\n        parserContext\n      ),\n      match[0].length - match?.[2].length\n    ];\n  }\n}\n\nfunction boldMatcher({ string, parserContext, previousCharacter }) {\n  let strictPreviousCharacter = previousCharacter === undefined || !previousCharacter.match(/[A-Za-z0-9]/);\n  let match = string.match(/^\\*(.*?[^\\\\])\\*(.|$)/s);\n  let strictNextCharacter = (match?.[2] !== undefined) && !match?.[2].match(/[A-Za-z0-9]/); // nextChar is null, or non-alpha-numeric\n  let containsSpaces = match?.[0].match(/\\s/s);\n\n  let matchExists = match &&\n    ((strictPreviousCharacter && strictNextCharacter) || // either * is at the edges of a word, in which case selected text can contain spaces\n      !containsSpaces); // or * is within a word, and the bolded region may not contain spaces\n\n  if (matchExists) {\n    return [\n      new BoldToken(\n        match[1],\n        parserContext\n      ),\n      match[0].length - match?.[2].length\n    ];\n  }\n}\n\nfunction codeSnippetMatcher({ string, parserContext, _, previousCharacter }) {\n  let validPreviousCharacter = previousCharacter === undefined || !previousCharacter.match(/[A-Za-z0-9]/);\n  let match = string.match(/^`(.*?[^\\\\])`(?=.|$)/s);\n\n  if (match && validPreviousCharacter) {\n    return [\n      new InlineCodeSnippetToken(\n        match[1],\n        parserContext\n      ),\n      match[0].length\n    ];\n  }\n}\n\nfunction underlineMatcher({ string, parserContext, previousCharacter }) {\n  let strictPreviousCharacter = previousCharacter === undefined || !previousCharacter.match(/[A-Za-z0-9]/);\n  let match = string.match(/^~(.*?[^\\\\])~(.|$)/s);\n  let strictNextCharacter = (match?.[2] !== undefined) && !match?.[2].match(/[A-Za-z0-9]/); // nextChar is null, or non-alpha-numeric\n  let containsSpaces = match?.[0].match(/\\s/s);\n\n  let matchExists = match &&\n    ((strictPreviousCharacter && strictNextCharacter) || // either ~ is at the edges of a word, in which case selected text can contain spaces\n      !containsSpaces); // or ~ is within a word, and the struck through region may not contain spaces\n\n\n  if (matchExists) {\n    return [\n      new UnderlineToken(\n        match[1],\n        parserContext\n      ),\n      match[0].length - match?.[2].length\n    ];\n  }\n}\n\nfunction toolTipMatcher({ string, parserContext }) {\n  let match = string.match(/^ ?(\\{!\\s?)((?:[^\\\\}]|\\\\.)+)\\}/s);\n  if (match) {\n    return [\n      new ToolTipToken(\n        match[2],\n        match[1],\n        parserContext\n      ),\n      match[0].length\n    ];\n  }\n}\n\nmodule.exports = Matchers;\n","let parseText = require('./parse_text');\n\nfunction parseParagraph(text, parserContext) {\n  let tokens = [];\n  parserContext.parseText = parseText; // avoids circular dependency when called from tokens code\n  parserContext.paragraphText = text; // to determine global reference of import reference\n  parserContext.paragraphReferences = []; // to determine global reference of import reference\n\n  tokens = parseText({ text, parserContext, recursive: false });\n\n  return tokens;\n}\n\nmodule.exports = parseParagraph;\n","let Matchers = require('./matchers');\nlet { TextToken } = require('./tokens');\n\nfunction parseText({ text, parserContext }) {\n  let tokens = [];\n  parserContext.currentText = text;\n  parserContext.currentTokens = tokens;\n  parserContext.buffer = '';\n\n  let characters = text.split('');\n\n  for (let i = 0; i < characters.length; i++) {\n    let string = characters.slice(i).join('');\n    let result;\n\n    for (let j = 0; j < Matchers.length; j++) {\n      let startOfText = text[i - 1] === undefined && !parserContext.insideToken;\n      let startOfLine =\n        (text[i - 1] === \"\\n\") || // really is start of new line\n        (startOfText); // start of text when not parsing token within token ie start of paragraph\n\n\n      result = Matchers[j]({ string, parserContext, index: i, previousCharacter: text[i - 1], startOfLine, startOfText });\n\n      if (result) {\n        let [token, length] = result;\n        if (result[0]) { // escapedCharacterMatcher doesn't return a token but adds to buffer\n          if (parserContext.buffer) tokens.push(new TextToken(parserContext.buffer));\n          parserContext.buffer = '';\n          tokens.push(token);\n\n          let tokenString = string.slice(0, length);\n          parserContext.incrementLineAndResetCharacterNumber(tokenString.match(/\\n/g)?.length || 0);\n          parserContext.incrementCharacterNumber(tokenString.split('\\n').slice(-1)[0].length || 0);\n        }\n\n        i += length - 1; // after this loop finishes it will increment to the next unprocessed character\n        break;\n      }\n    }\n\n    if (result) continue;\n\n    parserContext.buffer += characters[i];\n    parserContext.incrementCharacterNumber();\n    if (characters[i] === '\\n') parserContext.incrementLineAndResetCharacterNumber();\n  }\n\n  if (parserContext.buffer) tokens.push(new TextToken(parserContext.buffer));\n\n  return tokens;\n}\n\nmodule.exports = parseText;\n","let Topic = require('../../shared/topic');\nlet dedent = require('dedent-js');\nlet Block = require('../../shared/block');\nlet { displaySegment } = require('../../shared/simple-helpers');\nlet chalk = require('chalk');\n\nclass ParserContext {\n  constructor({ explFileData, defaultTopicString, priorParserContext, options }) {\n    if (priorParserContext) {\n      Object.assign(this, priorParserContext, options); // create a new object with new properties, but with references to prior data properties\n    } else {\n      this.subtopicLineNumbers = {}; // by topic, by subtopic, the line number of that subtopic\n      this.topicSubtopics = {}; // by topic, by subtopic, topic objects for the name of that subtopic\n      this.subtopicParents = {}; // by topic, by subtopic, the parent subtopic that contains a local reference to that subtopic\n      this.redundantLocalReferences = []; // a list of redundant local references with metadata to validate at the end of the second-pass\n      this.ambiguousLocalReferences = []; // a list of local references that are possibly global/import and possibly redundant\n      this.provisionalLocalReferences = {}; // a list of local reference tokens for conversion to import if later found to be redundant\n      this.doubleDefinedSubtopics = []; // subtopics which are defined twice for later validation that they are subsumed and thus invalid\n      this.subsumptionConditionalErrors = []; // this is a catch-all for errors that should be thrown if an enclosing subtopic is subsumed\n      this.defaultTopic = new Topic(defaultTopicString); // the default topic of the project, used to log orphan topics not connected to it\n      this.topicConnections = {}; // by topic, an object of other topics that that topic has outgoing global references to\n      this.topicFilePaths = {}; // by topic, the file path where that topic is defined\n      this.currentTopic = null; // the current topic file being parsed\n      this.currentSubtopic = null; // the current subtopic paragraph being parsed\n      this.pathsReferenced = []; // a list of paths referenced in global references to validate\n      this.globalReferencesBySubtopic = {}; // for each topic#subtopic combo, what global references / path references exist?\n      this.fragmentReferenceSubtopics = {}; // per topic, a list of subtopics added by fragment references\n\n      this.lineNumber = 1; // the current line number being parsed\n      this.characterNumber = 1; // the current line number being parsed\n      this.linePrefixSize = 0; // The number of characters assumed to be on the line when we see a newline, eg '> ' for block quote\n\n      this.buildNamespaceObject(explFileData);\n      \n      this.insideToken = false; // are we parsing tokens inside another token? We use this to avoid recognizing multi-line tokens inside other tokens.\n\n      Object.assign(this, options); // add options if supplied at constructor time\n    }\n  }\n\n  clone(options = {}) {\n    return new ParserContext({ priorParserContext: this, options }); // reuse the data about the project but allow new properties on the instance\n  }\n\n  // This function does a first-pass over all the expl files of the project and creates several\n  // indexes of that content which will be necessary for the more in-depth second pass performed in parseBlock\n  buildNamespaceObject(explFileData) {\n    let { topicSubtopics, topicFilePaths, subtopicLineNumbers, doubleDefinedSubtopics } = this;\n\n    Object.keys(explFileData).forEach(function(filePath){\n      let fileContents = explFileData[filePath];\n      let paragraphsWithKeys = fileContents.split(/\\n\\n/);\n      let topicParargaph = new Block(paragraphsWithKeys[0]);\n      if (!topicParargaph.key) return;\n      let currentTopic = new Topic(topicParargaph.key);\n      let lineNumber = 1;\n\n      if (topicSubtopics.hasOwnProperty(currentTopic.caps)) {\n        throw new Error(chalk.red(dedent`Error: Topic or similar appears twice in project: [${currentTopic.mixedCase}]\n        - One file is: ${topicFilePaths[currentTopic.caps]}\n        - Another file is: ${filePath}\n        `));\n      } else {\n        topicFilePaths[currentTopic.caps] = filePath;\n      }\n\n      if (currentTopic.display.trim() !== currentTopic.display) {\n        throw new Error(chalk.red(`Error: Topic name [${currentTopic.display}] begins or ends with whitespace.\\n` + filePath));\n      }\n\n      topicSubtopics[currentTopic.caps] = {};\n\n      paragraphsWithKeys.forEach(function(paragraphText) {\n        if (paragraphText[0] === \"\\n\") { // because we split on \\n\\n, there is only a chance that the first character is a newline\n          lineNumber++;\n          paragraphText = paragraphText.slice(1);\n        }\n\n        let paragraph = new Block(paragraphText);\n        if (paragraph.key) {\n          let currentSubtopic = new Topic(paragraph.key);\n\n          if (topicSubtopics[currentTopic.caps].hasOwnProperty(currentSubtopic.caps)) {\n            doubleDefinedSubtopics.push(\n              [\n                currentTopic,\n                currentSubtopic,\n                filePath,\n                subtopicLineNumbers[currentTopic.caps][currentSubtopic.caps],\n                lineNumber\n              ]\n            );\n          }\n\n          if (currentSubtopic.display.trim() !== currentSubtopic.display) {\n            throw new Error(chalk.red(`Error: Subtopic name [${currentSubtopic.display}] in topic [${currentTopic.display}] begins or ends with whitespace.\\n\\n${filePath}:${lineNumber}`));\n          }\n          topicSubtopics[currentTopic.caps][currentSubtopic.caps] = currentSubtopic;\n          subtopicLineNumbers[currentTopic.caps] = subtopicLineNumbers[currentTopic.caps] || {};\n          subtopicLineNumbers[currentTopic.caps][currentSubtopic.caps] = lineNumber;\n        }\n\n        lineNumber += paragraphText.split(\"\\n\").length + 1; // length of paragraph plus additional newline separating paragraphs\n      });\n    });\n\n    return topicSubtopics;\n  }\n\n  setLineNumberToCurrentSubtopic() {\n    this.lineNumber = this.subtopicLineNumbers[this.currentTopic.caps][this.currentSubtopic.caps];\n    this.characterNumber = 1;\n  }\n\n  setTopicAndSubtopic(topic, subtopic) {\n    this.currentTopic = topic;\n    this.currentSubtopic = subtopic;\n    this.subtopicParents[this.currentTopic.caps] = this.subtopicParents[this.currentTopic.caps] || {};\n    this.topicFilePaths[topic.caps] = this.filePath;\n  }\n\n  get inTopicParagraph() {\n    return this.currentTopic.mixedCase === this.currentSubtopic.mixedCase;\n  }\n\n  set currentText(text) {\n    this.text = text;\n  }\n\n  set currentTokens(tokens) {\n    this.tokens = tokens;\n  }\n\n  get currentText() {\n    return this.text;\n  }\n\n  get currentTokens() {\n    return this.tokens;\n  }\n\n  resetCharacterNumber() {\n    this.characterNumber = 1 + this.linePrefixSize;\n  }\n\n  incrementCharacterNumber(num) {\n    if (num === 0) return this;\n    if (num) {\n      this.characterNumber += num;\n    } else {\n      this.characterNumber++;\n    }\n    return this;\n  }\n\n  incrementLineAndResetCharacterNumber(num) {\n    if (num === 0) return this;\n    this.characterNumber = 1 + this.linePrefixSize;\n    if (num) {\n      this.lineNumber += num;\n    } else {\n      this.lineNumber++;\n    }\n    return this;\n  }\n\n  get filePathAndLineNumber() {\n    return `${this.topicFilePaths[this.currentTopic.caps]}:${this.lineNumber}:${this.characterNumber}`;\n  }\n\n  set filePath(filePath) {\n    this.filePathString = filePath;\n  }\n\n  get filePath() {\n    return this.filePathString;\n  }\n\n  getOriginalTopic(givenTopic) {\n    return this.topicSubtopics[givenTopic.caps]?.[givenTopic.caps];\n  }\n\n  getOriginalSubtopic(currentTopic, givenSubtopic) {\n    if (!givenSubtopic) throw new Error('two arguments required');\n    return this.topicSubtopics[currentTopic.caps]?.[givenSubtopic.caps];\n  }\n\n  currentTopicHasSubtopic(targetSubtopic) {\n    return this.topicSubtopics[this.currentTopic.caps].hasOwnProperty(targetSubtopic.caps);\n  }\n\n  topicHasSubtopic(topic, subtopic) {\n    return this.topicSubtopics[topic.caps]?.hasOwnProperty(subtopic.caps);\n  }\n\n  topicExists(topic) {\n    return this.topicSubtopics.hasOwnProperty(topic.caps);\n  }\n\n  pathExists(path) {\n    return path.array.reduce((segment) => {\n      if (!segment) return false;\n\n      if (this.topicSubtopics.hasOwnProperty(segment[0].caps) && this.topicSubtopics[segment[0].caps].hasOwnProperty(segment[1].caps)) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n\n  subtopicReferenceIsRedundant(targetSubtopic) {\n    return this.subtopicParents[this.currentTopic.caps][targetSubtopic.caps];\n  }\n\n  provisionalLocalReference(targetSubtopic) {\n    return this.provisionalLocalReferences[targetSubtopic.caps];\n  }\n\n  registerPotentialRedundantLocalReference(targetSubtopic) { // we won't know if these are really redundant until all conversions to import are done\n    this.redundantLocalReferences.push([\n      this.subtopicParents[this.currentTopic.caps][targetSubtopic.caps],\n      this.currentSubtopic,\n      this.currentTopic,\n      targetSubtopic\n    ]);\n  }\n\n  registerLocalReference(targetSubtopic, index, linkText, linkFullText, token) {\n    this.subtopicParents[this.currentTopic.caps][targetSubtopic.caps] = this.currentSubtopic;\n\n    this.provisionalLocalReferences[targetSubtopic.caps] = { // local references to convert to imports if found redundant\n      token,\n      paragraphText: this.paragraphText,\n      index,\n      enclosingTopic: this.currentTopic,\n      enclosingSubtopic: this.currentSubtopic,\n      linkText,\n      linkFullText,\n      filePath: this.filePath,\n      lineNumber: this.lineNumber,\n      characterNumber: this.characterNumber\n    };\n  }\n\n  registerFragmentReference(reference) {\n    this.fragmentReferenceSubtopics[this.currentTopic.caps] = this.fragmentReferenceSubtopics[this.currentTopic.caps] || [];\n    this.fragmentReferenceSubtopics[this.currentTopic.caps].push(reference.targetAsTopic);\n  }\n\n  addFragmentReferenceSubtopics(callback) {\n    if (this.fragmentReferenceSubtopics[this.currentTopic.caps]) {\n      this.fragmentReferenceSubtopics[this.currentTopic.caps].forEach(fragmentReferenceTargetTopic => {\n        callback(fragmentReferenceTargetTopic); // caller will know how to add topics to json object\n      });\n    }\n  }\n\n  parentTopicOf(subtopic) {\n    return this.subtopicParents[this.currentTopic.caps][subtopic.caps];\n  }\n\n  registerSubsumptionConditionalError(errorString) {\n    this.subsumptionConditionalErrors.push({ // this is an error that should be thrown if the enclosing paragraph is subsumed\n      enclosingTopic: this.currentTopic,\n      enclosingSubtopic: this.currentSubtopic,\n      errorString\n    });\n  }\n\n  throwSubsumptionConditionalErrors() {\n    this.subsumptionConditionalErrors.forEach(errorObject => {\n      if (this.hasConnection(errorObject.enclosingSubtopic, errorObject.enclosingTopic, {}, true)) {\n        throw new Error(chalk.red(errorObject.errorString));\n      }\n    });\n  }\n\n  get currentFilePathAndLineNumber() {\n    return `${this.topicFilePaths[this.currentTopic.caps]}:${this.lineNumber}:${this.characterNumber}`;\n  }\n\n  validateSubtopicDefinitions() {\n    this.doubleDefinedSubtopics.forEach(([topic, subtopic, filePath, lineNumber1, lineNumber2]) => {\n      if (this.subtopicParents[topic.caps]?.hasOwnProperty(subtopic.caps)) { // if the double defined subtopic gets subsumed and is accessible, it is invalid data\n        throw new Error(chalk.red(`Error: Subtopic [${subtopic.mixedCase}] or similar appears twice in topic: [${topic.mixedCase}]\\n` +\n          `First definition: ${filePath}:${lineNumber1}\\n` +\n          `Second definition: ${filePath}:${lineNumber2}`));\n      }\n    });\n  }\n\n  registerGlobalReference(pathString, reference, referenceString) {\n    this.topicConnections[this.currentTopic.caps] = this.topicConnections[this.currentTopic.caps] || {};\n    this.topicConnections[this.currentTopic.caps][reference.firstTopic.caps] = true;\n    this.topicConnections[reference.firstTopic.caps] = this.topicConnections[reference.firstTopic.caps] || {};\n\n    this.globalReferencesBySubtopic[this.currentTopic.caps] =\n      this.globalReferencesBySubtopic[this.currentTopic.caps] || {};\n    this.globalReferencesBySubtopic[this.currentTopic.caps][this.currentSubtopic.caps] =\n      this.globalReferencesBySubtopic[this.currentTopic.caps][this.currentSubtopic.caps] || {};\n    this.globalReferencesBySubtopic[this.currentTopic.caps][this.currentSubtopic.caps][reference.firstTopic.caps] = true;\n\n    this.pathsReferenced.push([pathString, reference, this.currentFilePathAndLineNumber, referenceString, this.currentTopic, this.currentSubtopic]);\n  }\n\n  logGlobalOrphans() {\n    this.connectedTopics = {};\n    this.registerConnectedTopic(this.defaultTopic.caps);\n    Object.keys(this.topicSubtopics).forEach(topicCapsString => {\n      let topic = this.topicSubtopics[topicCapsString][topicCapsString];\n      if (!this.connectedTopics[topic.caps]) {\n        console.log(chalk.magenta(\n          `Warning: Global Orphan\\n` +\n          `Topic [${topic.mixedCase}] is not connected to the default topic [${this.defaultTopic.mixedCase}]\\n` +\n          `${this.topicFilePaths[topic.caps]}\\n`\n        ));\n      }\n    });\n  }\n\n  registerConnectedTopic(givenTopicCapsString) {\n    if (!this.connectedTopics[givenTopicCapsString]) {\n      this.connectedTopics[givenTopicCapsString] = true;\n      Object.keys(this.topicConnections[givenTopicCapsString] || {}).forEach(targetTopicCapsString => this.registerConnectedTopic(targetTopicCapsString));\n    }\n  }\n\n  logLocalOrphans() {\n    Object.keys(this.subtopicParents).forEach(topicCapsString => {\n      let topic = this.topicSubtopics[topicCapsString][topicCapsString];\n      Object.keys(this.topicSubtopics[topicCapsString]).forEach(subtopicCapsString => {\n        let subtopic = this.topicSubtopics[topicCapsString][subtopicCapsString];\n        if (!this.hasConnection(subtopic, topic)) {\n          console.log(chalk.magenta(`Warning: Local Orphan\\n` +\n            `Subtopic [${subtopic.mixedCase}] lacks a connection to its topic [${topic.mixedCase}]\\n` +\n            `${this.topicFilePaths[topic.caps]}:${this.subtopicLineNumbers[topic.caps][subtopic.caps]}\\n`\n          ));\n        }\n      });\n    });\n  }\n\n  validateRedundantLocalReferences() { // see if redundant local links are in paragraphs that ended up getting subsumed\n    this.redundantLocalReferences.forEach(([enclosingSubtopic1, enclosingSubtopic2, topic, referencedSubtopic]) => { // are problematic links in separate real subsumed paragraphs? (You're allowed to have redundant local references in the same paragraph.)\n      if (this.hasConnection(enclosingSubtopic1, topic) && this.hasConnection(enclosingSubtopic2, topic) && enclosingSubtopic1 !== enclosingSubtopic2) { // in same p allowed\n        throw new Error(chalk.red(dedent`Error: Two local references exist in topic [${topic.mixedCase}] to subtopic [${referencedSubtopic.mixedCase}]\n\n            One reference is in subtopic ${displaySegment(topic, enclosingSubtopic1)}\n            ${this.topicFilePaths[topic.caps]}:${this.subtopicLineNumbers[topic.caps][enclosingSubtopic1.caps]}\n\n            One reference is in subtopic ${displaySegment(topic, enclosingSubtopic2)}\n            ${this.topicFilePaths[topic.caps]}:${this.subtopicLineNumbers[topic.caps][enclosingSubtopic2.caps]}\n\n            Multiple local references to the same subtopic are not permitted.\n\n            Consider making one of these local references a self path reference.\n            That would look like using [[#${referencedSubtopic.mixedCase}]].\n            `));\n      }\n    });\n  }\n\n  validateGlobalReferences() {\n    this.pathsReferenced.forEach(([pathString, reference, pathAndLineNumberString, referenceString, enclosingTopic, enclosingSubtopic]) => {\n      if (this.hasConnection(enclosingSubtopic, enclosingTopic)) {\n        [...pathString.matchAll(/(?:\\\\.|[^/])+/g)].map(match => match[0]).map(segmentString => {\n          let [currentTopic, currentSubtopic] = Topic.parseUrlSegment(segmentString);\n\n          if (!this.topicExists(currentTopic)) {\n            let punctuationWarning = currentTopic.mixedCase.match(/[.,:;]/) ? '\\nWarning: Using punctuation like [.,;:] terminates a paragraph key.' : '';\n            throw new Error(chalk.red(`Error: Reference \"${referenceString}\" in subtopic [${enclosingTopic.mixedCase}, ${enclosingSubtopic.mixedCase}] mentions nonexistent topic or subtopic [${currentTopic.mixedCase}].\\n${pathAndLineNumberString}` + punctuationWarning));\n          }\n\n          if (currentSubtopic && !this.topicHasSubtopic(currentTopic, currentSubtopic)) {\n            throw new Error(chalk.red(`Error: Subtopic [${currentTopic.mixedCase}, ${currentSubtopic.mixedCase}] referenced in reference \"${referenceString}\" of paragraph [${enclosingTopic.mixedCase}, ${enclosingSubtopic.mixedCase}] does not exist.\\n${pathAndLineNumberString}`));\n          }\n\n          if (!this.cache && !this.hasConnection(currentSubtopic || currentTopic, currentTopic)) {\n            throw new Error(chalk.red(`Error: Subtopic [${currentTopic.mixedCase}, ${reference.firstSubtopic.mixedCase}] referenced in reference \"${referenceString}\" of paragraph [${enclosingTopic.mixedCase}, ${enclosingSubtopic.mixedCase}] exists but is not subsumed by given topic.\\n${pathAndLineNumberString}`));\n          }\n\n          return segmentString;\n        }).reduce((currentSegmentString, nextSegmentString) => {\n          let [_, currentTopic, currentSubtopic] = currentSegmentString.match(/^((?:\\\\.|[^\\\\])+?)(?:#(.*))?$/).map(m => m && Topic.fromUrl(m));\n          let [__, nextTopic] = nextSegmentString.match(/^((?:\\\\.|[^\\\\])+?)(?:#(.*))?$/).map(m => m && Topic.fromUrl(m));\n\n          if (!this.cache && !this.globalReferencesBySubtopic[currentTopic.caps]?.[(currentSubtopic||currentTopic).caps]?.[nextTopic.caps]) {\n            throw new Error(chalk.red(`Error: Global reference \"${referenceString}\" contains invalid adjacency:\\n` +\n             `[${currentTopic.mixedCase}, ${(currentSubtopic||currentTopic).mixedCase}] does not reference [${nextTopic.mixedCase}]\\n`+\n             `${pathAndLineNumberString}`));\n          }\n\n          return nextSegmentString;\n        });\n      }\n    });\n  }\n\n  hasConnection(subtopic, topic, visitedSubtopics = {}) { // Does a given subtopic have a local-reference path to the given topic?\n    if (subtopic.caps === topic.caps) return true;\n    if (this.subtopicParents[topic.caps] === null) return true; // we will proceed assuming there is a connection because this is a cache run\n    if (this.subtopicParents[topic.caps] && !this.subtopicParents[topic.caps][subtopic.caps]) return false;\n    if (!this.subtopicParents.hasOwnProperty(topic.caps)) return false; // there were no local references in that topic\n    if (!this.subtopicParents[topic.caps].hasOwnProperty(subtopic.caps)) return false; // no one ever referenced the subtopic\n    if (visitedSubtopics[subtopic.caps]) return false; // ignore the cycle and allow other paths to continue\n    visitedSubtopics[subtopic.caps] = true;\n    return this.hasConnection(this.subtopicParents[topic.caps][subtopic.caps], topic, visitedSubtopics);\n  }\n}\n\nmodule.exports = ParserContext;\n","let Topic = require('../../shared/topic');\nlet chalk = require('chalk');\n\nclass Reference {\n  constructor(string, parserContext) { // eg [[A#B/C#D|X Y]]\n    this.fullText = string;\n    this.enclosingTopic = parserContext.currentTopic;\n    this.enclosingSubtopic = parserContext.currentSubtopic;\n    this.parserContext = parserContext;\n    this.displayText = '';\n    this.targetText = '';\n    this.exclusiveDisplayText = '';\n    this.exclusiveTargetText = '';\n    if (!this.contents) throw new Error(`Link has no contents: ${string}`);\n    this.parseDisplayAndTarget(); // populates this.displayText and this.targetText\n  }\n\n  get valid() {\n    return !!this.fullText.match(/^\\[\\[((?:\\\\.|(?!\\[\\[|\\]\\]).)+)\\]\\]$/s);\n  }\n\n  get contents() {\n    return this.fullText.match(/^\\[\\[(.*)\\]\\]$/s)[1];\n  }\n\n  get empty() {\n    return this.contents === '';\n  }\n\n  get hasCurlyBraces() {\n    return !!this.contents.match(/(^|[^\\\\])\\{/);\n  }\n\n  get hasPipe() {\n    return !!this.contents.match(/^(?:\\\\.|[^\\\\])+\\|/); // requires text before and after pipe\n  }\n\n  parseDisplayAndTarget() {\n    if (!this.valid) {\n      this.parserContext.registerSubsumptionConditionalError(\n        chalk.red('Invalid reference string: ' + this.fullText + `\\n${this.parserContext.filePathAndLineNumber}`)\n      );\n    }\n\n    if (this.hasCurlyBraces) { // curly braces and pipe is interpreted as pipe literal because {a|b} is curly braces not pipe\n      this.parseCurlyBraceReference();\n    } else if (this.hasPipe) {\n      this.parsePipeReference();\n    } else {\n      this.parseSimple();\n    }\n\n    this.removeNewlines();\n  }\n\n  removeNewlines() {\n    this.targetText = this.targetText\n      .replace(/\\n/g, ' ') // Replaces all newlines with spaces\n      .replace(/<br>|<BR>|<Br>|<bR>/g, ' '); // Replaces all capitalizations of '<BR>' with a space\n  }\n\n  parseCurlyBraceReference() {\n    const regex = /(\\{\\{?)((?:(?!\\}).)+)(\\}\\}?)|((?:\\\\.|[^{}])+)/gs;\n    const segments = Array.from(this.contents.matchAll(regex));\n\n    segments.forEach(([_, openingBraces, braceContents, closingBraces, plainText]) => {\n      if (plainText) {\n        this.displayText += plainText; //{|The }Literature/Big Bad Wolf\n        this.targetText += plainText;\n      } else {\n        this.validateBraces(openingBraces, closingBraces);\n\n        if (openingBraces.length === 1) {\n          this.handleSingleBrace(braceContents);\n        } else if (openingBraces.length === 2) {\n          this.handleDoubleBrace(braceContents);\n        }\n      }\n    });\n\n    this.displayText = this.exclusiveDisplaySyntax ? this.exclusiveDisplayText : \n      (this.exclusiveTargetSyntax ? this.displayText : this.findLastPathComponent(this.displayText)); // only {{}} is path if present\n\n    this.targetText = this.exclusiveTargetSyntax ? this.exclusiveTargetText : this.targetText;\n  }\n\n  validateBraces(opening, closing) {\n    if (opening.length !== closing.length) {\n      throw new Error(`Unbalanced curly braces in reference: ${this.fullText}`);\n    }\n  }\n\n  handleSingleBrace(contents) {\n    const match = contents.match(/((?:\\\\.|[^\\\\|])*?)\\|((?:\\\\.|[^\\\\|])*?)$/);\n\n    if (match) { // ie \"A|B\" or \"A|\" or \"|A\"\n      this.targetText += match[1];\n      this.displayText += match[2];\n      this.exclusiveTargetText += match[1];\n      this.exclusiveDisplayText += match[2];\n    } else {\n      this.exclusiveDisplaySyntax = true;\n      this.exclusiveDisplayText += contents;\n      this.targetText += contents;\n    }\n  }\n\n  handleDoubleBrace(contents) {\n    this.exclusiveTargetSyntax = true;\n    this.exclusiveTargetText += contents;\n    this.displayText += contents;\n  }\n\n\n  parsePipeReference() {\n    if (this.contents.matchAll(/((?:\\\\.|[^\\\\])+?)\\|/g).length > 1) throw `Reference has too many pipes: ${this.fullText}`;\n    const [_, target, display] = [...this.contents.match(/((?:\\\\.|[^\\\\])+?)\\|((?:\\\\.|[^\\\\])+?)$/)];\n    this.targetText = target;\n    this.displayText = display;\n  }\n\n  get lastPathComponent() {\n    if (this.singleTopicWithEmptyFragment) return Reference.textBeforeFragment(this.contents);\n    if (this.soloPoundSign) return null;\n    if (this.soloCaretSign) return null;\n    if (this.soloPeriod) return null;\n    // Regular expression to match the last unescaped slash or hash\n    return this.findLastPathComponent(this.contents);\n  }\n\n  findLastPathComponent(string) {\n    const match = string.match(/(?:^|[^\\\\< ]|\\\\\\\\+)([/#])([^/#]*(?:\\\\.[^/#]*)*)$/);\n    if (match) {\n      return match[2]; // Return text after the last unescaped slash or hash\n    } else {\n      return string;\n    }\n  }\n\n  parseSimple() {\n    this.targetText = this.contents;\n    this.displayText = this.lastPathComponent;\n    if (!this.displayText && (this.soloPoundSign || this.soloCaretSign || this.soloPeriod)) this.displayText = 'Back';\n  }\n\n  get isPath() {\n    return !!this.targetText.match(/(^|[^\\\\])(\\\\\\\\)*[#/]/);\n  }\n\n  get simpleTarget() {\n    return !this.isPath;\n  }\n\n  get targetAsTopic() {\n    if (!this.simpleTarget) return null;\n    return Topic.for(this.targetText);\n  }\n\n  get orphanFragment() {\n    return !!this.targetText.match(/^#([^#/]*(?:\\\\.[^#/]*)*)$/);\n  }\n\n  get initialOrphanFragment() {\n    return !!this.targetText.match(/^#([^#/]*)/);\n  }\n\n  get soloPoundSign() {\n    return !!(this.targetText === '#');\n  }\n\n  get soloCaretSign() {\n    return !!(this.targetText === '^');\n  }\n\n  get soloPeriod() {\n    return !!(this.targetText === '.');\n  }\n\n  get singleTopicWithEmptyFragment() {\n    return !!this.targetText.match(/^([^#/]*(?:\\\\.[^#/]*)*)#$/);\n  }\n\n  static textBeforeFragment(string) {\n    const match = string.match(/^((?:\\\\.|[^/])+?)#/);\n    return match ? match[1] : null;\n  }\n\n  static textAfterFragment(string) {\n    const match = string.match(/^(?:\\\\.|[^/])*?#(.*)$/);\n    return match ? match[1] : null;\n  }\n\n  static firstSegmentComponent(string) {\n    return string.match(/^[^/#]*/)[0] || this.targetText;\n  }\n\n  get firstTopic() {\n    return Topic.fromUrl(Reference.firstSegmentComponent(this.pathString));\n  }\n\n  get firstSubtopic() {\n    let subtopicString = this.pathString.match(/^(?:\\\\.|[^/])+?#((?:\\\\.|[^/])+?)(?:\\/.*)?$/)?.[1];\n    subtopicString = subtopicString || this.firstTopic.mixedCase;\n    return subtopicString ? Topic.fromUrl(subtopicString) :  null;\n  }\n\n  get localReference() {\n    return this.simpleTarget && this.parserContext.currentTopicHasSubtopic(this.targetAsTopic);\n  }\n\n  get simpleGlobalReference() {\n    return this.simpleTarget\n      && !this.parserContext.currentTopicHasSubtopic(this.targetAsTopic)\n      && this.parserContext.topicExists(this.targetAsTopic);\n  }\n\n  get pathString() {\n    return [...this.displayPathString.matchAll(/(?:\\\\.|[^\\\\/])+?(?:#(?:\\\\.|[^\\\\/])+?)?(?:(?=\\/|$))/g)].map(match => match[0]).map(segmentString => {\n      let [topic, subtopic] = segmentString.match(/((?:[^#/\\\\]|\\\\.)*)(?:[#]((?:[^#/\\\\]|\\\\.)*))?/).slice(1).map(m => m && Topic.fromReference(m));\n      return (this.parserContext.getOriginalTopic(topic)||topic).url + // gives us original display version\n        (subtopic ? ('#' + ((this.parserContext.getOriginalSubtopic(topic, subtopic)||subtopic).url)) : '');\n    }).join('/');\n  }\n\n  get displayPathString() {\n    if (this.soloPoundSign) { //eg [#], short for topic subtopic\n      let enclosingTopicMixedCase = this.enclosingTopic.mixedCase.replace(/([^\\\\])\\//g, '$1\\\\/');\n      return `${enclosingTopicMixedCase}#${enclosingTopicMixedCase}`;\n    }\n\n    if (this.soloCaretSign) { //eg [^], short for parent paragraph\n      let enclosingTopicMixedCase = this.enclosingTopic.mixedCase.replace(/([^\\\\])\\//g, '$1\\\\/');\n      if (this.parserContext.inTopicParagraph) return enclosingTopicMixedCase; // self-reference is pop in topic paragraph, parent unknown\n      let parentSubtopic = this.parserContext.parentTopicOf(this.parserContext.currentSubtopic);\n      if (!parentSubtopic) throw new Error(`Cannoy use [[^]] syntax for parent declared after reference in expl file.`);\n      return `${enclosingTopicMixedCase}#${parentSubtopic.mixedCase}`;\n    }\n\n    if (this.soloPeriod) { // eg [[.]] meaning parent link in subtopic and pop in topic\n      if (this.parserContext.inTopicParagraph) {\n        return this.enclosingTopic.mixedCase;\n      } else {\n        return `${this.enclosingTopic.mixedCase}#${this.enclosingSubtopic.mixedCase}`;\n      }\n    }\n\n    if (this.localReference) { // eg [[X]] where X is a subtopic of current topic\n      return `${this.parserContext.currentTopic.mixedCase}#${this.targetText}`;\n    }\n\n    if (this.simpleGlobalReference) { // eg [[X]] where X is only global topic\n      return this.targetText;\n    }\n\n    if (this.singleTopicWithEmptyFragment) { // eg [[A#]], global reference override for subtopic collision\n    }\n\n    if (this.orphanFragment) { // eg [[#A]], global self-reference to current topic and given subtopic\n      return `${this.enclosingTopic.mixedCase}#${Reference.textAfterFragment(this.targetText)}`;\n    }\n\n    if (this.initialOrphanFragment) {\n      return `${this.enclosingTopic.mixedCase}#${Reference.textAfterFragment(this.targetText)}`;\n    }\n\n    return this.targetText;\n  }\n\n  static candidateSubstring(string) { // eg '[[abc]] and then more text' -> '[[abc]]'\n    return string.match(/^\\[\\[((?:\\\\.|[^\\\\])+?)\\]\\]/)?.[0] || '';\n  }\n\n  static for(string, parserContext) {\n    return new Reference(string, parserContext);\n  }\n}\n\nmodule.exports = Reference;\n","let Block = require('../../shared/block');\nlet { TextToken } = require('./tokens');\n\nfunction consolidateTextTokens(tokenArray) {\n  for (let i = 0; i < tokenArray.length; i++) {\n    if (tokenArray[i].type === 'text' && tokenArray[i+1]?.type === 'text') {\n      tokenArray.splice(i, 2, new TextToken(tokenArray[i].text + tokenArray[i+1].text, true));\n      i = 0;\n    }\n  }\n  return tokenArray;\n}\n\nfunction topicKeyOfString(string) {\n  let paragraphsWithKeys = string.trim().split(/\\n\\n+/);\n  return (new Block(paragraphsWithKeys[0])).key;\n}\n\nfunction removeCircularListKeys(tokens) {\n  tokens.filter(token => token.type === 'list').forEach(token => {\n    delete token.lastNode;\n    token.topLevelNodes.forEach(node => removeExtraKeys(node));\n  });\n}\n\nfunction removeExtraKeys(node) {\n  delete node.parentNode;\n  delete node.indentation;\n  node.children.forEach(removeExtraKeys);\n}\n\nfunction frontLoadImages(tokens) {\n  tokens.sort((a,b) => {\n    if (a.type === 'image' & b.type !== 'image') {\n      return -1;\n    } else if (a.type !== 'image' & b.type === 'image') {\n      return 1;\n    } else {\n      return 0;\n    }\n  });\n}\n\nfunction isCategoryNotesFile(filePath) {\n  return filePath.match(/([^/]+)\\/(\\1).expl$/);\n}\n\nfunction terminalCategoryofPath(filePath) {\n  let items = filePath.split('/');\n  return items[items.length - 2];\n}\n\n\nmodule.exports = {\n  consolidateTextTokens,\n  topicKeyOfString,\n  removeCircularListKeys,\n  removeExtraKeys,\n  frontLoadImages,\n  isCategoryNotesFile,\n  terminalCategoryofPath\n};\n","let { splitOnPipes, detectTextDirection } = require('../../shared/simple-helpers');\nlet chalk = require('chalk');\n\nfunction parseText(options) {\n  return require('./parse_text')(options); // avoid circular dependency\n}\n\nfunction TextToken(text) {\n  this.text = text;\n  this.type = 'text';\n}\n\nfunction LocalReferenceToken(\n  targetTopic,\n  targetSubtopic,\n  enclosingTopic,\n  enclosingSubtopic,\n  text,\n  parserContext\n) {\n  this.text = text;\n  this.type = 'local';\n  this.tokens = parseText({ text: convertSpacesToHtml(text), parserContext: parserContext.clone({ insideToken: true }) });\n  this.targetSubtopic = targetSubtopic;\n  this.targetTopic = targetTopic;\n  this.enclosingTopic = enclosingTopic;\n  this.enclosingSubtopic = enclosingSubtopic;\n  parserContext.paragraphReferences.push(this); // not necessary for import validation but included for consistency\n}\n\nfunction GlobalReferenceToken(\n  pathString,\n  enclosingTopic,\n  enclosingSubtopic,\n  text,\n  parserContext\n) {\n  this.text = text;\n  this.type = 'global';\n  this.tokens = parseText({ text: convertSpacesToHtml(text), parserContext: parserContext.clone({ insideToken: true }) });\n  this.pathString = pathString;\n  this.enclosingTopic = enclosingTopic;\n  this.enclosingSubtopic = enclosingSubtopic;\n  parserContext.paragraphReferences.push(this);\n}\n\nfunction DisabledReferenceToken(\n  text,\n  parserContext\n) {\n  this.text = text;\n  this.type = 'disabled_reference';\n  this.tokens = parseText({ text: convertSpacesToHtml(text), parserContext: parserContext.clone({ insideToken: true }) });\n}\n\nfunction FragmentReferenceToken(\n  text,\n  parserContext\n) {\n  this.text = text;\n  this.type = 'fragment_reference';\n  this.tokens = parseText({ text: convertSpacesToHtml(text), parserContext: parserContext.clone({ insideToken: true }) });\n}\n\nfunction convertSpacesToHtml(str) { // eg [[ abc ]] -> [[&nbsp;abc&nbsp;]]\n  return str.replace(/^ +| +$/g, match => '&nbsp;'.repeat(match.length));\n}\n\nfunction ExternalLinkToken(url, text, parserContext) {\n  this.type = 'external';\n  this.url = (url || text).replace(/\\\\\\\\|\\\\./g, match => match === '\\\\\\\\' ? '\\\\' : match[1]);\n  this.text = text || url;\n  if (!text) {\n    this.tokens = [{ type: 'text', text: url }]; // to avoid infinite loop of URL recognition\n  } else {\n    this.tokens = parseText({ text: text || url, parserContext: parserContext.clone({ insideToken: true }) });\n  }\n}\n\nfunction ImageToken({ alt, resourceUrl, title, caption, anchorUrl, parserContext }) {\n  this.type = 'image';\n  let { projectPathPrefix } = parserContext;\n  if (resourceUrl.startsWith('/') && projectPathPrefix) {\n    resourceUrl = `/${projectPathPrefix}${resourceUrl}`;\n  }\n  this.resourceUrl = resourceUrl;\n  this.title = (title||'').split('\\\\\\\\').map(s => s.replace(/\\\\/g, '')).join('') || null; // title is not tokenized so escaping must be done manually\n  this.tokens = parseText({\n    text: caption || '',\n    parserContext: parserContext.clone({ insideToken: true }) });\n  this.altText = alt || null;\n  this.caption = caption;\n  this.anchorUrl = anchorUrl || null;\n}\n\nfunction FootnoteMarkerToken(superscript) {\n  this.type = 'footnote_marker';\n  this.text = superscript;\n}\n\nfunction HtmlToken(html, parserContext) {\n  this.type = 'html_element';\n  this.tokenInsertions = [];\n\n  // Updated regex to handle escaped {{ and }} sequences\n  const regex = /(^|[^\\\\])(\\{\\{)([^{}\\\\]*(?:\\}(?!\\})|\\{(?!\\{)|[^}{\\\\]|\\\\.)*?[^\\\\]?)(}})/gs;\n\n  this.html = html.replace(regex, (match, precedingChar, openingBraces, content, closingBraces, offset) => {\n    const isEscaped = precedingChar === '\\\\';\n\n    if (isEscaped || !openingBraces || !closingBraces) {\n      return match;\n    } else {\n      this.tokenInsertions.push(\n        parseText({\n          text: content,\n          parserContext: parserContext.clone({ insideToken: true })\n            .incrementLineAndResetCharacterNumber(html.slice(0, offset - precedingChar.length).match(/\\n/g)?.length || 0)\n            .incrementCharacterNumber(html.slice(0, offset + precedingChar.length).split('\\n').slice(-1)[0].length + openingBraces.length)\n        })\n      );\n\n      return `${precedingChar}<div class=\"canopy-html-insertion\" data-replacement-number=\"${this.tokenInsertions.length - 1}\"></div>`;\n    }\n  });\n}\n\nfunction CodeBlockToken(text) {\n  this.type = 'code_block';\n  this.text = text.split('\\\\\\\\').map(s => s.replace('\\\\', '')).join('\\\\'); // remove single backslashes, and replace double with single\n}\n\nfunction BlockQuoteToken(text, direction, parserContext) {\n  this.type = 'block_quote';\n\n  this.tokens = parseText({\n    text,\n    parserContext: parserContext.clone({\n      insideToken: true,\n      linePrefixSize: 2 // ie \"> \"\n    }).incrementCharacterNumber('> '.length)\n  });\n\n  this.direction = direction;\n}\n\nfunction OutlineToken(text, parserContext) {\n  this.topLevelNodes = [];\n  this.type = 'outline';\n\n  text.split(\"\\n\").filter(Boolean).forEach((line, lineIndex) => { // filter handles terminal newline\n    let initialWhitespace = line.match(/^(\\s*)/)[1];\n    let orderedListMatch = line.match(/^\\s*(\\S+)(\\.\\s?)(.*$)/);\n    let unorderedListMatch = line.match(/^\\s*([+*-])(\\s?)(.*$)/);\n    let match = orderedListMatch || unorderedListMatch;\n\n    let ordinal = match[1];\n    let postOrdinalCharacters = match[2];\n    let lineContents = match[3];\n    let tokensOfLine = parseText({\n      text: lineContents,\n      parserContext: parserContext.clone({\n        insideToken: true\n      }).incrementLineAndResetCharacterNumber(lineIndex).incrementCharacterNumber(initialWhitespace.length + ordinal.length + postOrdinalCharacters.length)\n    });\n\n    let newNode = {\n      indentation: initialWhitespace.length,\n      ordinal: ordinal,\n      ordered: !!orderedListMatch,\n      tokensOfLine: tokensOfLine,\n      children: [],\n      parentNode: null\n    };\n\n    if (!this.lastNode) {\n      this.topLevelNodes.push(newNode); // This is the first node we're parsing\n    } else if (newNode.indentation > this.lastNode.indentation) { // Child node of the previous line\n      newNode.parentNode = this.lastNode;\n      this.lastNode.children.push(newNode);\n    } else if (newNode.indentation === this.lastNode.indentation) { // Sibling node of the previous line\n      if (newNode.indentation === 0) {\n        this.topLevelNodes.push(newNode);\n      } else {\n        newNode.parentNode = this.lastNode.parentNode;\n        this.lastNode.parentNode.children.push(newNode);\n      }\n    } else { // Child node of a previous line, or new top-level node\n      let parentNode = this.lastNode;\n      while (parentNode && newNode.indentation <= parentNode.indentation) {\n        parentNode = parentNode.parentNode;\n      }\n      if (!parentNode) {\n        this.topLevelNodes.push(newNode);\n        newNode.parentNode = null;\n      } else {\n        newNode.parentNode = parentNode;\n        parentNode.children.push(newNode);\n      }\n    }\n\n    this.lastNode = newNode;\n  });\n\n  removeCircularListKeys([this]);\n\n  function removeCircularListKeys(tokens) {\n    tokens.filter(token => token.type === 'outline').forEach(token => {\n      delete token.lastNode;\n      token.topLevelNodes.forEach(node => removeExtraKeys(node));\n    });\n  }\n\n  function removeExtraKeys(node) {\n    delete node.parentNode;\n    delete node.indentation;\n    node.children.forEach(removeExtraKeys);\n  }\n}\n\nfunction TableToken(text, parserContext) {\n  this.type = 'table';\n  this.rows = [];\n  const MERGE_DIRECTION = { 'v': {x: 0, y: 1}, '>': {x: 1, y: 0}, '<': {x: -1, y: 0}, '^': {x: 0, y: -1} };\n  let cellObjectList = [];\n\n  text.split(\"\\n\")\n    .filter(Boolean) // the trailing newline will create an empty row\n    .forEach((line, lineNumber) => {\n      if (line.match(/^\\s*[=#\\-|]+\\s*$/)) return; // ignore horizontal row marker\n\n      let cellObjects = splitOnPipes(line).map(\n        (cellString, cellIndex, cellsOfRow) => {\n          if (cellString.match(/^\\s*\\\\[v^<>]\\s*$/)) return { tokens: [], merge: MERGE_DIRECTION[cellString.match(/[v^<>]/)[0]] };\n\n          if (cellString.match(/^\\s*\\\\x\\s*$/)) return { tokens: [], hidden: true };\n\n          let earlierCharactersOnLine = ['|'] // first | on line\n            .concat(\n              cellsOfRow.slice(0, cellIndex).join('|'), // all the intermediary cell contents plus pipes\n              cellIndex > 0 ? '|' : '' // the pipe before the current cell\n            ).join('');\n\n          return {\n            tokens: parseText({\n              text: cellString.trim(),  // we trim because the person might be using spaces to line up unevenly sized cells\n              parserContext: parserContext.clone({\n                insideToken: true,\n              })\n                .incrementLineAndResetCharacterNumber(lineNumber) // we want error messages to know how far into the table we are\n                .incrementCharacterNumber(earlierCharactersOnLine.length + cellString.match(/^\\s+/)?.[0].length) // count earlier chars and leading space\n            })\n          };\n        }\n      );\n      this.rows.push(cellObjects);\n    });\n\n  if (detectTextDirection(text) === 'rtl') this.dir = 'rtl';\n\n  this.rows.forEach((cellObjects, y, rows) => {\n    cellObjects.forEach((cellObject, x, columns) => {\n      if (cellObject.merge) {\n        let collection = cellObject.merge.x ? columns : rows;\n        let op = cellObject.merge;\n        let dir = op.x ? 'x' : 'y';\n        let attribute = cellObject.merge.x ? 'colspan' : 'rowspan';\n        let limit = Math.max([op.x, op.y]) > 0 ? collection.length : -1;\n        let selection = {x: x + op.x, y: y + op.y};\n        if ((selection.x < 0 || selection.x > limit && limit > 0 && dir ==='x')\n          ||(selection.y < 0 || selection.y > limit && limit > 0 && dir ==='y')) {\n          throw new Error(chalk.red(`Invalid merge instructions in table: ${text}`));\n        }\n\n        while(selection[dir] !== limit) {\n          if (!rows[selection.y][selection.x].merge) {\n            rows[selection.y][selection.x][attribute] = (Number(rows[selection.y][selection.x][attribute]) || 1) + 1;\n            break;\n          } else {\n            if (rows[selection.y][selection.x].merge.x !== op.x || rows[selection.y][selection.x].merge.y !== op.y) {\n              throw new Error(chalk.red(`Invalid merge instructions in table: ${text}`)); // eg | \\> | \\^ |\n            }\n            selection[dir] += op[dir];\n          }\n        }\n        cellObjectList.push(cellObject); // we preserve the direction information for the above check until we are done will all the cells\n      }\n    });\n  });\n\n  cellObjectList.forEach(cellObject => cellObject.merge && (cellObject.merge = true));\n}\n\nfunction MenuToken(text, parserContext) {\n  this.type = 'menu';\n\n  let items = [...text.matchAll(/(?:- ?|(([\\w\\d]{1,4})\\.\\s)|([<>]) )([^\\n]+)\\n/g)];\n\n  const allRightAligned = items.every(item => item[3] === '>');\n  const allLeftAligned = items.every(item => item[3] === '<');\n  const mixedAlignment = items.some(item => item[3] === '<') && items.some(item => item[3] === '>');\n\n  this.alignment = allRightAligned ? 'right' : (allLeftAligned ? 'left' : (mixedAlignment ? 'mixed' : null));\n\n  items = items.map(item => {\n    if (item[2]) { // It has an ordinal, so it's some sort of list.\n      return { list: true, ordinal: item[2], text: item[4] };\n    } else if (item[3]) { // It starts with '>' or '<', so it's a left or right aligned list item.\n      return { list: false, text: item[4], alignment: item[3] === '>' ? 'right' : 'left' };\n    } else { // It's not an ordinal item.\n      return { list: false, text: item[4] };\n    }\n  });\n\n  this.rtl = (text.startsWith('<') || detectTextDirection(text) === 'rtl') ? true : false;\n\n  this.items = items.map((item, lineNumber) => {\n    return {\n      list: item.list,\n      hidden: item.text.includes('\\\\x'),\n      ordinal: item.ordinal,\n      alignment: this.alignment === 'mixed' ? item.alignment : undefined,\n      tokens: parseText({\n        text: item.text.trim(),  // we trim because the person might be using spaces to line up unevenly sized cells\n        parserContext: parserContext.clone({\n          insideToken: true,\n        })\n          .incrementLineAndResetCharacterNumber(lineNumber + 1) // how far into the menu are we, line number plus initial delimiter\n          .incrementCharacterNumber('- '.length) // count earlier chars and leading space\n      })\n    };\n  });\n}\n\nfunction FootnoteLinesToken(text, parserContext) {\n  this.type = 'footnote_lines';\n  this.lines = [];\n\n  let matches = Array.from(text.matchAll(/^\\[\\^([^\\]]+)]:([^\\n]*($|\\n))/msg));\n\n  matches.forEach(match => {\n    let superscript = match[1];\n    let text = match[2];\n    let footnoteTokens = parseText({\n      text,\n      parserContext: parserContext.clone({\n        insideToken: true }).incrementCharacterNumber('['+ superscript + ']:'.length)\n    });\n\n    this.lines.push({\n      superscript,\n      tokens: footnoteTokens\n    });\n  });\n}\n\nfunction ItalicsToken(text, parserContext) {\n  this.type = 'italics';\n  this.tokens = parseText({\n    text,\n    parserContext: parserContext.clone({ insideToken: true }).incrementCharacterNumber('_'.length)\n  });\n}\n\nfunction BoldToken(text, parserContext) {\n  this.type = 'bold';\n  this.tokens = parseText({\n    text,\n    parserContext: parserContext.clone({ insideToken: true }).incrementCharacterNumber('*'.length)\n  });\n}\n\nfunction InlineCodeSnippetToken(text) {\n  this.type = 'inline_code';\n  this.text = text.split('\\\\\\\\').map(s => s.replace('\\\\', '')).join('\\\\'); // remove single backslashes, and replace double with single;\n}\n\nfunction UnderlineToken(text, parserContext) {\n  this.type = 'underlined';\n  this.tokens = parseText({\n    text,\n    parserContext: parserContext.clone({ insideToken: true }).incrementCharacterNumber('~'.length)\n  });\n}\n\nfunction ToolTipToken(text, openingBrace, parserContext) {\n  this.type = 'tool_tip';\n  this.tokens = parseText({\n    text,\n    parserContext: parserContext.clone({ \n      insideToken: true, \n      noLinks: true\n    }).incrementCharacterNumber(openingBrace.length) //'{!' or '{! '\n  });\n}\n\nmodule.exports = {\n  LocalReferenceToken,\n  GlobalReferenceToken,\n  DisabledReferenceToken,\n  FragmentReferenceToken,\n  TextToken,\n  ExternalLinkToken,\n  ImageToken,\n  FootnoteMarkerToken,\n  HtmlToken,\n  CodeBlockToken,\n  BlockQuoteToken,\n  OutlineToken,\n  TableToken,\n  MenuToken,\n  FootnoteLinesToken,\n  ItalicsToken,\n  BoldToken,\n  InlineCodeSnippetToken,\n  ToolTipToken,\n  UnderlineToken\n};\n","let FileSet = require('./file_set');\nlet Block = require('../shared/block.js');\nlet Topic = require('../shared/topic.js');\nlet chalk = require('chalk');\n\nclass BulkFileParser {\n  constructor(bulkFileString) {\n    this.bulkFileString = bulkFileString;\n  }\n\n  parseSections() {\n    return this.bulkFileString.split(/(?=^\\[[^[\\]]+\\]$)/mg) // split only on [XYZ] that is on its own line.\n      .map(s => s.trim()).filter(Boolean).map((sectionString) => {\n        let displayCategoryPath = sectionString.match(/\\[\\/?(.*?)\\/?\\]/)?.[1];\n        if (!displayCategoryPath) throw new Error('Malformed Canopy bulk file: ' + sectionString);\n\n        return {\n          displayCategoryPath,\n          diskDirectoryPath: 'topics/' + Topic.convertSpacesToUnderscores(displayCategoryPath),\n          terminalCategory: displayCategoryPath.split('/').slice(-1)[0],\n          files: sectionString\n            .split(/\\n/).slice(1).join('\\n').trim() // In case only one newline after [category]\n            .split(/(?=^\\*\\*?(?: |\\n))/mg)\n            .filter(Boolean)\n            .map(string => {\n              let blockString = string.match(/^\\*?\\*? ?(.*)/s)[1];\n              let block = new Block(blockString);\n              return {\n                asterisk: string.match(/^\\*\\*? /) ? true : false,\n                doubleAsterisk: string.startsWith('** ') ? true : false,\n                key: block.key,\n                text: blockString\n              };\n            })\n        };\n      });\n  }\n\n  generateFileSet() {\n    let fileContentsByPath = {};\n    let defaultTopicPath;\n    let defaultTopicKey;\n\n    this.parseSections().forEach(section => {\n      if (section.diskDirectoryPath === 'topics/') {\n        throw new Error(chalk.red(`Invalid directory path: \"[${section.displayCategoryPath}]\"`));\n      }\n\n      section.files.forEach((file) => {\n        if (file.asterisk && file.key) { // Create topic file\n          let topicFilePath = `${section.diskDirectoryPath}/${Topic.for(file.key).fileName}.expl`;\n\n          if (fileContentsByPath.hasOwnProperty(topicFilePath)) {\n            throw new Error(chalk.bgRed(chalk.white(`Error: Topic [${file.key}] is defined twice in bulk file.`)));\n          }\n\n          fileContentsByPath[topicFilePath] = file.text.replace(/\\n\\n+/g, '\\n\\n').trim() + '\\n';\n\n          if (file.doubleAsterisk) {\n            if (defaultTopicPath) {\n              console.error(chalk.red(`Error: Multiple default topics set: [${file.key}] and [${defaultTopicKey}], using [${defaultTopicKey}]`));\n            } else {\n              defaultTopicPath = topicFilePath;\n              defaultTopicKey = file.key;\n            }\n          }\n        } else { // make note file\n          let firstFourtyCharacters = file.text.match(/^(([^\\n.?!]{0,40}(?![A-Za-z0-9]))|([^\\n.?!]{0,40}))/)[0] || section.terminalCategory;\n          let fileName = Topic.for(firstFourtyCharacters).fileName;\n          let idSuffix = section.orderedCategory ? '' : generateIdSuffix(`${section.diskDirectoryPath}/${fileName}`, `.expl`, fileContentsByPath);\n          let noteFileName = `${section.diskDirectoryPath}/${Topic.for(firstFourtyCharacters).fileName}${idSuffix}.expl`;\n          fileContentsByPath[noteFileName] = file.text.replace(/\\n\\n+/g, '\\n\\n').trim() + '\\n';\n        }\n      });\n    });\n\n    return { newFileSet: new FileSet(fileContentsByPath), defaultTopicPath, defaultTopicKey };\n  }\n}\n\nfunction generateIdSuffix(prefix, suffix, hash) {\n  if (hash.hasOwnProperty(prefix + suffix)) {\n    let i = 1;\n    while (hash.hasOwnProperty(`${prefix}-${String(i).padStart(2, '0')}${suffix}`)) { i++; }\n    return `-${String(i).padStart(2, '0')}`;\n  } else {\n    return '';\n  }\n}\n\nmodule.exports = BulkFileParser;\n","// A set of files and their contents, grouped optionally by directory path\nlet pathLibrary = require('path');\nlet Topic = require('../shared/topic');\nlet Block = require('../shared/block');\n\nclass FileSet {\n  constructor(fileContentsByPath) {\n    this.filesObject = {};\n    this.directoriesObject = {};\n    this.fileContentsByPath = fileContentsByPath;\n\n    Object.keys(fileContentsByPath).forEach(filePath => {\n      let directoryPath = pathLibrary.dirname(filePath);\n\n      let file = {\n        path: filePath,\n        fileName: filePath.split('/').slice(-1)[0],\n        fileNameWithoutExtension: filePath.split('/').slice(-1)[0].match(/^(.*?)(\\..*)?$/)[1],\n        contents: fileContentsByPath[filePath],\n        key: (new Block(fileContentsByPath[filePath])).key,\n        directoryPath: directoryPath.replace(/\\/#$/, '/\\\\#'),\n        terminalCategory: terminalCategoryofFilePath(filePath)\n      };\n\n      this.filesObject[filePath] = file;\n\n      // Add this file to the appropriate directory, or create new directory that contains it\n      if (this.directoriesObject.hasOwnProperty(directoryPath)) {\n        this.directoriesObject[directoryPath].files.push(file);\n      } else {\n        let displayPath = generateDisplayPath(directoryPath);\n\n        this.directoriesObject[directoryPath] = {\n          path: directoryPath,\n          files: [file],\n          displayPath\n        };\n      }\n\n      // Add subpaths of this directory path to the directories list\n      directoryPath = pathLibrary.dirname(directoryPath);\n      while (directoryPath.includes('topics') && !directoryPath.endsWith('topics')) {\n        if (!this.directoriesObject.hasOwnProperty(directoryPath)) {\n          this.directoriesObject[directoryPath] = {\n            path: directoryPath,\n            files: [],\n            displayPath: generateDisplayPath(directoryPath)\n          };\n        }\n        directoryPath = pathLibrary.dirname(directoryPath);\n      }\n    });\n  }\n\n  get directories () {\n    return Object.keys(this.directoriesObject)\n      .map(path => this.directoriesObject[path]);\n  }\n\n  get directoryPaths() {\n    return Object.keys(this.directoriesObject)\n      .map(path => this.directoriesObject[path].path);\n  }\n\n  get files() {\n    return Object.keys(this.filesObject).\n      map(path => this.filesObject[path]);\n  }\n\n  getFileContents(filePath) {\n    return this.filesObject[filePath].contents;\n  }\n\n  hasFile(filePath) {\n    return !!this.filesObject[filePath];\n  }\n\n  getDirectory(directoryPath) {\n    return this.directoriesObject[directoryPath];\n  }\n\n  hasDirectory(directoryPath) {\n    return !!this.directoriesObject[directoryPath];\n  }\n\n  get json() {\n    return JSON.stringify(Object.keys(this.fileContentsByPath));\n  }\n}\n\nfunction terminalCategoryofFilePath(filePath) {\n  let items = filePath.split('/');\n  return Topic.fromFileName(items[items.length - 2]).mixedCase;\n}\n\nfunction generateDisplayPath(directoryPath) {\n  if (!directoryPath.match(/topics\\/(.*)/)) return 'PLEASE ADD CATEGORY'; // eg .DS_STORE in root directory\n\n  return directoryPath\n    .match(/topics\\/(.*)/)[1]\n    .split('/')\n    .map(segment => (Topic.fromFileName(segment).mixedCase))\n    .join('/');\n}\n\nmodule.exports = FileSet;\n","class Block {\n  constructor(textWithKey) {\n    // A key is a non-hyphen-initial string of characters that are not unescaped colons, periods, commands or semi-colons,\n    // which are followed by a colon or a question mark followed by white space. If the delimiter is a colon, it is not part\n    // of the \"key\", if the delimeter is a question mark, it is part of the key. White space after the colon or question mark\n    // is not considered part of the key, but is matched so that it isn't part of the text either.\n\n    // Match characters which are either not sentence-terminating punctuation, or which are backslash-escaped sentence-terminating punctuation,\n    // or which are sentence terminating punctuation not followed by a space; and these characters must be followed by a colon or a question mark.\n    // If the terminator is a question mark or colon, accept the match, and if it is a question mark, include it in the match\n    let match = textWithKey.match(/^(?!-)((?:[^:.!?\\n\\\\]|\\\\.|[:.!?](?!\\s))+)(?::|(\\?))(\\s+|\\n|$)/);\n\n    if (!match) {\n      return {\n        key: null,\n        text: textWithKey\n      };\n    }\n\n    // Trailing question marks are part of the key, colons are not.\n    let key = match[1] + (match[2] || '');\n    let text = textWithKey.slice(match[0].length);\n\n    this.key = key;\n    this.text = text;\n    this.charsAfterKey = match[2] === '?' ? 1 : 2;\n    this.newlineAfterDelimiter = match[3] === '\\n';\n  }\n\n  static for(textWithKey) {\n    return new Block(textWithKey);\n  }\n}\n\nmodule.exports = Block;\n","/*\nThis function removes style characters from a string, eg '*_a_* -> 'a'\nIn order to remove multiple layers of wrapping, eg *_a_*, each call removes the outermost layer,\n  then, if there was a difference between the previous value and this one, we try once more.\n  If there was no difference, then we have run out of style tokens and can return.\n*/\n\nlet Cache = {};\n\nfunction removeStyleCharacters(string) {\n  if (Cache.hasOwnProperty(string)) return Cache[string];\n  let newString = string.replace(/(.*?(?:^|[^\\\\]))([_`*~])(\\S*?[^\\\\])\\2(.*)/, '$1$3$4'); // style characters within words if no spaces\n  newString = newString.replace(/(.*?(?:^|[^\\\\]))([_`*~])(.*?[^\\\\])\\2(?![A-Za-z0-9])(.*)/, '$1$3$4'); // style characters at edges regardless of content\n  if (newString !== string) {\n    let processedString = removeStyleCharacters(newString);\n    Cache[string] = processedString;\n    return removeStyleCharacters(processedString);\n  } else {\n    return string;\n  }\n}\n\nmodule.exports = removeStyleCharacters;\n","let Topic = require('./topic');\n\nfunction displaySegment(topic, subtopic) {\n  if (topic.mixedCase === subtopic.mixedCase) {\n    return `[${topic.mixedCase}]`;\n  } else {\n    return `[${subtopic.mixedCase} (${topic.mixedCase})]`;\n  }\n}\n\nfunction splitOnPipes(string) { // ignore pipes that are escaped or inside links eg [[a|b]]\n  let oneOpenBracket = false;\n  let oneCloseBracket = false;\n  let openLink = false;\n  let escape = false;\n  let result = [''];\n\n  for (let i = 0; i < string.length; i++) {\n    if (string[i] === '|' && !openLink && !escape) {\n      result.push('');\n    } else {\n      result[result.length - 1] += string[i];\n      if (string[i] === '\\\\' && !escape) { escape = true; } else { escape = false; }\n      if (string[i] === '[' && !oneOpenBracket) oneOpenBracket = true;\n      if (string[i] === '[' && oneOpenBracket) {openLink = true; oneOpenBracket = false;}\n      if (string[i] === ']' && openLink && !oneCloseBracket) oneCloseBracket = true;\n      if (string[i] === ']' && openLink && oneCloseBracket) openLink = false;\n\n    }\n  }\n\n  return result.slice(1, -1);\n}\n\nfunction wrapText(str, width) {\n  var paragraphs = str.split('\\n');\n  return paragraphs.map(paragraph => {\n    let words = paragraph.split(' ');\n    var lines = [];\n    var line = '';\n    for (var i = 0; i < words.length; i++) {\n      // Check if the current word will fit on the current line.\n      if (line.length + ' '.length + words[i].length <= width) {\n        line += (line ? ' ': '') + words[i];\n      } else {\n        // The current word will not fit on the current line.\n        lines.push(line);\n        line = '  ' + words[i];\n      }\n    }\n    // Add the last line to the output.\n    lines.push(line);\n    return lines.join('\\n');\n  }).join('\\n').trim();\n}\n\nfunction detectTextDirection(text) {\n  // Regular expression patterns for different character ranges\n  const rtlChars = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\n  const rtlDirCheck = new RegExp(`^${rtlChars}]+`);\n\n  // Check if the text is RTL\n  return rtlDirCheck.test(text) ? 'rtl' : 'ltr';\n}\n\nfunction determineTopicAndSubtopic(linkTarget, linkFragment) {\n  let targetTopic, targetSubtopic;\n  if (linkFragment) {\n    targetTopic = new Topic(linkTarget);\n    targetSubtopic = new Topic(linkFragment);\n  } else {\n    targetTopic = null;\n    targetSubtopic = new Topic(linkTarget);\n  }\n\n  return {\n    targetTopic,\n    targetSubtopic\n  };\n}\n\nmodule.exports = { displaySegment, splitOnPipes, wrapText, detectTextDirection, determineTopicAndSubtopic };\n","let removeStyleCharacters = require('./remove_style_characters');\nrequire('css.escape'); /* global CSS */\nconst Cache = {};\n\nclass Topic {\n  // There are several permutations of the topic key\n\n  constructor(string) {\n    if (!string) throw new Error('String required to instantiate Topic');\n    if (Cache.hasOwnProperty(string) && Cache.hasOwnProperty(string).display) return Cache[string];\n\n    this.display = string; // the string precisely as it appears in the expl file, even with backslashes which will get handled on the front-end\n\n    this.mixedCase = removeStyleCharacters(string)  // the display verison sans style characters * _ ~ ` and a trailing question mark, encoding style characters\n      .replace(/\\\\./g, (match) => match[1] === '\\\\' ? '\\\\' : match[1]); // remove backslashes that are escaping subsequent character. webkit compatible\n\n    this.cssMixedCase = CSS.escape(this.mixedCase);\n\n    this.url = this.mixedCase.replace(\n      new RegExp('\\\\' + Object.keys(Topic.urlConversionRules).join('|\\\\'), 'g'), // this way the output of one rule isn't input to another\n      match => Topic.urlConversionRules[match]\n    );\n\n    // console.error([string, this.url])\n\n    this.fileName = this.mixedCase.replace(\n      new RegExp('\\\\' + Object.keys(Topic.fileNameConversionRules).join('|\\\\'), 'g'), // this way the output of one rule isn't input to another\n      match => Topic.fileNameConversionRules[match]\n    );\n\n    this.caps = this.mixedCase // This is the string that is used to find matches between links and topic names. Not reversible.\n      .toUpperCase() // We want matches to be case-insensitive\n      .replace(/\\?$/, '') // It should match whether or not both have trailing question marks\n      .replace(/[\"”“’‘']/g, '') // We remove quotation marks so matches ignore them\n      .replace(/(\\\\{2})*([.,])(?=[\"'')}\\]]*$)/g, (m, bs) => bs ? m : '') // Allow links to contain terminal periods or commas eg he went to [[\"Spain.\"]]\n      .replace(/\\(/g, '') // we remove parentheses to allow link texts to contain optional parentheses\n      .replace(/\\)/g, '')\n      .replace(/ +/g, ' ') // consolidate spaces\n      .replace(/&[Nn][Bb][Ss][Pp];/g, ' ')\n      .trim(); // remove initial and leading space, eg when using interpolation syntax: [[{|display only} actual topic name]]\n\n    this.requestFileName = encodeURIComponent(this.fileName); // This is the string that will be used to _request_ the file name on disk, so it needs to be encoded\n\n    Cache[string] = this;\n  }\n\n  static urlConversionRules = {\n    '%': '%25',\n    '#': '%5C#', // The %5C is enough to know # is name-# not path-#, so we preserve human-readability ie %5C#1 not %5C%231\n    '/': '%2F',\n    ' ': '_', // underscore rules\n    '_': '%5C_',\n    '\\\\': '%5C%5C',\n  };\n\n  static fileNameConversionRules = {\n    '%': '%25', // encoding % ensures no collisions for other rules\n    '\"': '%22',\n    '\\'': '%27',\n    '/': '%2F',\n    ',': '%2C',\n    ':': '%3A',\n    '<': '%3C',\n    '>': '%3E',\n    '|': '%7C',\n    '*': '%2A',\n    '?': '%3F',\n    ' ': '_', // underscore rules\n    '_': '%5C_',\n    '\\\\': '%5C%5C',\n  };\n\n  static spaceToUnderscoreRules = {\n    '%': '%25',\n    ' ': '_',\n    '_': '%5C_',\n    '\\\\': '%5C%5C'\n  };\n\n  static underscoreToSpaceRules = {\n    '%5C%5C': '\\\\\\\\', // this is first so that all even-numbered backslashes get converted\n    '%5C_': '_',\n    '_': ' '\n  };\n\n  static fromMixedCase(string) {\n    string = string.replace(/([`_~*\\\\])/g, '\\\\$1'); // In mixed case style character literals are unescaped, so we escape them to avoid double-processing, same for \\\\\n    let topic = new Topic(string);\n    topic.display = null; // If a topic instance was instantiated from the mixed-case string, the display version is irretrievable\n    return topic;\n  }\n\n  static fromReference(string) { // backslashes eg \\# should be removed, unlike from mixed case\n    let topic = new Topic(string);\n    topic.display = null; // If a topic instance was instantiated from something other than the original topic key ie display, it is irreversible\n    return topic;\n  }\n\n  static fromUrl(string) { // eg %5C_Topic_names_with_literal_underscores%5C_ which needs decoding and then is mixed case already _X_\n    let convertedString = string.replace(\n      new RegExp('\\\\' + Object.keys(Topic.underscoreToSpaceRules).join('|\\\\'), 'g'),\n      match => Topic.underscoreToSpaceRules[match]\n    );\n    let decodedString = decodeURIComponent(convertedString); // turns eg %5C_ into \\_\n    let escapedString = decodedString.replace(/\\\\./g, (match) => match[1] === '\\\\' ? '\\\\' : match[1]);\n    return Topic.fromMixedCase(escapedString);\n  }\n\n  static fromFileName(string) {\n    let convertedString = string.replace(\n      new RegExp('\\\\' + Object.keys(Topic.underscoreToSpaceRules).join('|\\\\'), 'g'),\n      match => Topic.underscoreToSpaceRules[match]\n    );\n    let decodedString = decodeURIComponent(convertedString); // because all file name rules are simple encodings, simple decoding suffices\n    let escapedString = decodedString.replace(/\\\\./g, (match) => match[1] === '\\\\' ? '\\\\' : match[1]);\n    return Topic.fromMixedCase(escapedString);\n  }\n\n  static convertSpacesToUnderscores(string) {\n    return string.replace(\n      new RegExp('\\\\' + Object.keys(Topic.spaceToUnderscoreRules).join('|\\\\'), 'g'),\n      match => Topic.spaceToUnderscoreRules[match]\n    );\n  }\n\n  static convertUnderscoresToSpaces(string) {\n    let convertedString = string.replace(\n      new RegExp('\\\\' + Object.keys(Topic.underscoreToSpaceRules).join('|\\\\'), 'g'),\n      match => Topic.underscoreToSpaceRules[match]\n    );\n    let decodedString = decodeURIComponent(convertedString);\n    let escapedString = decodedString.replace(/\\\\./g, (match) => match[1] === '\\\\' ? '\\\\' : match[1]);\n    return escapedString;\n  }\n\n  static parseUrlSegment(segmentString) {\n    let match = segmentString.match(/((?:(?:(?:\\\\|%5C)#)|[^#])*)(?:#(.*))?/);\n    return [match[1] && Topic.fromUrl(match[1]), match[2] && Topic.fromUrl(match[2]) || null];\n  }\n\n  static for(string) {\n    return new Topic(string);\n  }\n}\n\nmodule.exports = Topic;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./canopy.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\nimport { scrollElementToPosition } from 'display/helpers';\n\nfunction topicParentLink() {\n  let link = Link.selection;\n  let newLink = Link.lastSelectionOfParagraph(link.enclosingParagraph.topicParagraph.parentParagraph) ||\n    link.enclosingParagraph.topicParagraph.parentLink;\n\n  return newLink?.select() || Link.deselect();\n}\n\nfunction moveToParent() {\n  let link = Link.selection;\n  let parentLink = link && link.parentLink && Link.lastSelectionOfParagraph(link.parentLink?.enclosingParagraph) || link.parentLink;\n  let selectionInRootParagraph = !parentLink;\n\n  if (selectionInRootParagraph && !link.isVisible) {\n    let sectionElement = Link.selection.enclosingParagraph.sectionElement;\n    return scrollElementToPosition(sectionElement, {targetRatio: 0.75, maxScrollRatio: 0.5, minDiff: 0, direction: 'up', behavior: 'smooth'});\n  }\n\n  if (selectionInRootParagraph && link.isVisible) {\n    return updateView(link.enclosingParagraph.path); // deselect link\n  }\n\n  if (parentLink && !parentLink.isVisible) {\n    return scrollElementToPosition(parentLink.element, {targetRatio: 0.3, maxScrollRatio: 0.5, minDiff: 50, direction: 'up', behavior: 'smooth'})\n      .then(() => { \n        if (parentLink.isFocused) {\n          return parentLink.select({ noScroll: true });\n        }\n      });\n  }\n\n  if (parentLink && parentLink.isVisible) {\n    return link.parentLink.select();\n  }\n}\n\nfunction moveDownOrRedirect({ newTab, altKey, shiftKey }) {\n  let firstChild = !Link.selection.isClosedCycle && Link.selection.firstChild;\n\n  if (firstChild && firstChild.isBelowViewport && firstChild.positionOnViewport > 0.8 && !Link.selection.isPathReference) {\n    return scrollElementToPosition(firstChild.element, {targetRatio: 0.25, maxScrollRatio: 0.5, minDiff: 50, direction: 'down', behavior: 'smooth', side: 'bottom'});\n  }\n\n  if (firstChild && firstChild.isAboveViewport && !Link.selection.isPathReference) {\n    return scrollElementToPosition(firstChild.element, {targetRatio: 0.25, maxScrollRatio: 0.5, minDiff: 50, direction: 'up', behavior: 'smooth', side: 'bottom'});\n  }\n\n  if (Link.selection.isParent && !Link.selection.hasChildren && !Link.selection.cycle && !Link.selection.isPathReference) {\n    let sectionElement = Link.selection.targetParagraph.sectionElement;\n    return scrollElementToPosition(sectionElement, {targetRatio: 0.2, maxScrollRatio: 0.5, minDiff: 50, direction: 'down', behavior: 'smooth', side: 'bottom'});\n  }\n\n  if (firstChild && firstChild.isVisible && !firstChild.isSelected && !newTab && !Link.selection.isPathReference) { // selectALink\n    return firstChild.select({ newTab, redirect: altKey, inlineCycles: shiftKey });\n  }\n\n  return Link.selection.execute({ newTab, redirect: altKey, inlineCycles: shiftKey, selectALink: true });\n}\n\nfunction inlineACycleLink() {\n  if (!Link.selection.isCycle) return moveDownOrRedirect();\n  return Link.selection.execute({ inlineCycles: true });\n}\n\nfunction copyDecodedUrl() {\n  navigator.clipboard.writeText(decodeURIComponent(window.location));\n}\n\nfunction goToDefaultTopic() {\n  return updateView(\n    Path.default,\n    null\n  );\n}\n\nfunction zoomOnLocalPath() {\n  let relativeLinkNumber = Link.selection.relativeLinkNumber;\n\n  return Link.selection?.inlinePath.lastSegment.display({ renderOnly: true }).then(() => {\n    Link.from(() => Link.selection?.inlinePath.lastSegment.parentParagraph.nthLink(relativeLinkNumber)).select({ scrollStyle: 'instant' });\n  });\n}\n\nfunction removeSelection() {\n  return updateView(Path.current.firstTopicPath, null, { scrollStyle: 'instant' });\n}\n\nfunction duplicate() {\n  return window.open(window.location.href, '_blank');\n}\n\nexport {\n  moveToParent,\n  moveDownOrRedirect,\n  inlineACycleLink,\n  topicParentLink,\n  zoomOnLocalPath,\n  removeSelection,\n  duplicate,\n  copyDecodedUrl,\n  goToDefaultTopic\n};\n","import Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\nimport { scrollElementToPosition, scrollToWithPromise } from 'display/helpers';\nimport ScrollableContainer from 'helpers/scrollable_container';\n\nfunction moveInDirection(direction) {\n  const currentLinkElement = Link.selection?.element;\n\n  if (direction === 'up') {\n    if (!currentLinkElement) return; // don't select first link because that's \"down\"\n    let candidateLinks = Array.from(document.querySelectorAll('.canopy-selectable-link')).filter(link => link.offsetParent !== null);\n    let currentSelectionHigherRect = getBoundingRectInDirection(currentLinkElement, 'up');\n    let currentSelectionLowerRect = getBoundingRectInDirection(currentLinkElement, 'down');\n    let rectContainers = getRectsOfElements(candidateLinks, currentLinkElement);\n\n    let candidateRectContainers = rectContainers\n      .filter(rect => isHigher(rect, currentSelectionLowerRect)\n        && !isVerticallyOverlapping(rect, currentSelectionLowerRect)\n        && rect.element !== currentLinkElement);\n\n    if (candidateRectContainers.length === 0) {\n      if (currentSelectionLowerRect.top < -10) {\n        return scrollElementToPosition(currentLinkElement, {targetRatio: 0.25, maxScrollRatio: 0.5, minDiff: 40, direction: 'up', behavior: 'smooth'});\n      } else {\n        return Path.root.display().then(() => scrollToWithPromise({top: 0}));\n      }\n    }\n\n    let lowestHigherRect = candidateRectContainers\n      .reduce((lowestHigherRect, newRect) => {\n        let bestLink = lowestHigherRect.link;\n        let newLink = newRect.link;\n\n        // Prefer parent within higher paragraph\n        if (newLink.siblingOf(bestLink) && bestLink.isParentLinkOf(Link.selection.enclosingParagraph)) return lowestHigherRect;\n        if (bestLink.siblingOf(newLink) && Link.for(newRect.element).isParentLinkOf(Link.selection?.enclosingParagraph)) return newRect;\n\n        if (isLower(lowestHigherRect, newRect) && // of those links that are higher than current selection, prefer lower if noticeable\n          !isVerticallyOverlapping(lowestHigherRect, newRect) &&\n          !isVerticallyOverlapping(lowestHigherRect, currentSelectionLowerRect)) return lowestHigherRect;\n\n        if (isLower(newRect, lowestHigherRect) &&\n          !isVerticallyOverlapping(lowestHigherRect, newRect) &&\n          !isVerticallyOverlapping(newRect, currentSelectionLowerRect)) return newRect;\n\n        if (isHorizontallyWithin(currentSelectionHigherRect, lowestHigherRect)) return lowestHigherRect;\n        if (isHorizontallyWithin(currentSelectionHigherRect, newRect)) return newRect;\n        if (isHorizontallyWithin(lowestHigherRect, currentSelectionHigherRect) && !isHorizontallyWithin(newRect, currentSelectionHigherRect)) return lowestHigherRect;\n        if (isHorizontallyWithin(newRect, currentSelectionHigherRect) && !isHorizontallyWithin(lowestHigherRect, currentSelectionHigherRect)) return newRect;\n\n        if (isHorizontallyOverlapping(lowestHigherRect, currentSelectionHigherRect) && !isHorizontallyOverlapping(newRect, currentSelectionHigherRect)) return lowestHigherRect;\n        if (isHorizontallyOverlapping(newRect, currentSelectionHigherRect) && !isHorizontallyOverlapping(lowestHigherRect, currentSelectionHigherRect)) return newRect;\n\n        if (lowestHigherRect.element.closest('p.canopy-paragraph') === Link.selection.parentLink.enclosingParagraph.paragraphElement) { // going up to new paragraph\n          if (isHorizontallyOverlapping(lowestHigherRect, currentSelectionHigherRect) && isHorizontallyOverlapping(newRect, currentSelectionHigherRect)) {\n            return greaterHorizontalOverlap(currentSelectionHigherRect, lowestHigherRect, newRect);\n          } else {\n            return horizontallyCloserRect(lowestHigherRect, newRect, currentSelectionHigherRect);\n          }\n        } else { // going up in same paragraph\n          if (isHorizontallyOverlapping(lowestHigherRect, currentSelectionLowerRect) && isHorizontallyOverlapping(newRect, currentSelectionLowerRect)) {\n            return greaterHorizontalOverlap(currentSelectionLowerRect, lowestHigherRect, newRect);\n          } else {\n            return horizontallyCloserRect(lowestHigherRect, newRect, currentSelectionLowerRect);\n          }\n        }\n      });\n\n    scrollOrSelect(lowestHigherRect, { direction: 'up'} );\n\n  } else if (direction === 'down') {\n    if (!currentLinkElement) return Path.rendered.selectALink({ direction: 'down' });\n\n    let candidateLinks = Array.from(document.querySelectorAll('.canopy-selectable-link')).filter(link => link.offsetParent !== null && isVisible(link));\n    let currentSelectionHigherRect = getBoundingRectInDirection(currentLinkElement, 'up');\n    let currentSelectionLowerRect = getBoundingRectInDirection(currentLinkElement, 'down');\n    let rectContainers = getRectsOfElements(candidateLinks, currentLinkElement);\n\n    let candidateRectContainers = rectContainers\n      .filter(rect => isLower(rect, currentSelectionHigherRect)\n        && !isVerticallyOverlapping(rect, currentSelectionHigherRect)\n        && isInViewportVertically(rect)\n        && (!Link.selection.isAboveViewport || !Link.selection.siblingOf(rect.link)) // down means return ie switch paragraphs\n        && rect.element !== currentLinkElement);\n\n    if (candidateRectContainers.length === 0) {\n      let sectionElement = Paragraph.current.sectionElement;\n      return scrollElementToPosition(sectionElement, {targetRatio: 0.05, maxScrollRatio: 0.5, minDiff: 40, direction: 'down', behavior: 'smooth', side: 'bottom'});\n    }\n\n    let highestLowerRect = candidateRectContainers\n      .reduce((highestLowerRect, newRect) => {\n        let bestLink = highestLowerRect.link;\n        let newLink = newRect.link;\n\n        // prefer previous selection of paragraph\n        if (newLink.isLastSelection && bestLink.siblingOf(newLink)) return newRect;\n        if (bestLink.isLastSelection && newLink.siblingOf(bestLink)) return highestLowerRect;\n\n        // going down to new paragraph, prefer first link rather than geometrically proximate\n        // if (newLink.firstChildOf(Link.selection) && bestLink.siblingOf(newLink)) return newRect;\n        // if (bestLink.firstChildOf(Link.selection) && newLink.siblingOf(bestLink)) return highestLowerRect;\n\n        // If we are previewing a path reference, 'down' should take us down the open path\n        // if (bestLink.isOpen) return highestLowerRect; // actually, this is confusing because it makes other links in the current P unreachable\n        // if (newLink.isOpen) return newRect;\n\n        if (isHigher(highestLowerRect, newRect) &&\n          !isVerticallyOverlapping(highestLowerRect, newRect) &&\n          !isVerticallyOverlapping(highestLowerRect, currentSelectionHigherRect)) return highestLowerRect; // prefer the higher element if noticeably higher\n\n        if (isHigher(newRect, highestLowerRect) &&\n          !isVerticallyOverlapping(highestLowerRect, newRect) &&\n          !isVerticallyOverlapping(newRect, currentSelectionHigherRect)) return newRect;\n\n        if (isHorizontallyWithin(currentSelectionLowerRect, highestLowerRect)) return highestLowerRect;\n        if (isHorizontallyWithin(currentSelectionLowerRect, newRect)) return newRect;\n        if (isHorizontallyWithin(highestLowerRect, currentSelectionLowerRect) && !isHorizontallyWithin(newRect, currentSelectionLowerRect)) return highestLowerRect;\n        if (isHorizontallyWithin(newRect, currentSelectionLowerRect) && !isHorizontallyWithin(highestLowerRect, currentSelectionLowerRect)) return newRect;\n\n        if (highestLowerRect.element.closest('p.canopy-paragraph') === Link.selection?.targetParagraph?.paragraphElement) { // going down into new paragraph\n          if (isHorizontallyOverlapping(highestLowerRect, currentSelectionLowerRect) && !isHorizontallyOverlapping(newRect, currentSelectionLowerRect)) return highestLowerRect;\n          if (isHorizontallyOverlapping(newRect, currentSelectionLowerRect) && !isHorizontallyOverlapping(highestLowerRect, currentSelectionLowerRect)) return newRect;\n          if (Paragraph.current.links[0].element === highestLowerRect.element) return highestLowerRect; // prefer first link if it is close\n          if (Paragraph.current.links[0].element === newRect.element) return newRect;\n          return greaterHorizontalOverlap(currentSelectionHigherRect, highestLowerRect, newRect);\n        } else { // going down in same paragraph\n          if (isHorizontallyOverlapping(highestLowerRect, currentSelectionHigherRect) && !isHorizontallyOverlapping(newRect, currentSelectionHigherRect)) return highestLowerRect;\n          if (isHorizontallyOverlapping(newRect, currentSelectionHigherRect) && !isHorizontallyOverlapping(highestLowerRect, currentSelectionHigherRect)) return newRect;\n          return greaterHorizontalOverlap(currentSelectionLowerRect, highestLowerRect, newRect);\n        }\n      });\n\n    scrollOrSelect(highestLowerRect, { direction: 'down'} );\n\n  } else if (direction === 'left') {\n    let candidateLinks = Link.selection.element.closest('p.canopy-paragraph').querySelectorAll('.canopy-selectable-link');\n    let currentSelectionRect = getBoundingRectInDirection(currentLinkElement, 'right');\n    let rectContainers = getRectsOfElements(candidateLinks, currentLinkElement);\n\n    let candidateRectContainers = rectContainers.filter(rectObject => rectObject.right < currentSelectionRect.right);\n    candidateRectContainers = candidateRectContainers.filter(rectObject => isVerticallyOverlapping(rectObject, currentSelectionRect));\n    candidateRectContainers = candidateRectContainers.filter(rectObject => rectObject.element !== currentLinkElement);\n\n    if (candidateRectContainers.length > 0) {\n      let rightmostLeftRect = candidateRectContainers\n        .reduce((rightmostLeftRect, newRect) => {\n          if (rightmostLeftRect.bottom === currentSelectionRect.bottom && newRect.bottom !== currentSelectionRect.bottom) return rightmostLeftRect; // prefer direct left\n          if (newRect.bottom === currentSelectionRect.bottom && rightmostLeftRect.bottom !== currentSelectionRect.bottom) return newRect;\n          if (rightmostLeftRect.right > newRect.right) return rightmostLeftRect;\n          if (rightmostLeftRect.right < newRect.right) return newRect;\n          if (rightmostLeftRect.right === newRect.right) {\n            let yDistanceFromCurrentToBest = distanceComparingSide(currentSelectionRect, rightmostLeftRect, 'bottom');\n            let yDistanceFromCurrentToNew = distanceComparingSide(currentSelectionRect, newRect, 'bottom');\n            return yDistanceFromCurrentToBest > yDistanceFromCurrentToNew ? newRect : rightmostLeftRect;\n          }\n        });\n\n      if (rightmostLeftRect) {\n        return scrollOrSelect(rightmostLeftRect);\n      }\n    }\n\n    // Wrap to upward far-right for LTR (or downward far-left for rtl)\n    let verticalDirectionOfWrap = verticalDirectionToWrapAfterLeftmostLink(currentLinkElement);\n    let horizontalDirectionOfWrap = horizontalDirectionToWrapAfterLink(currentLinkElement, verticalDirectionOfWrap);\n    let isInCorrectVerticalDirection = verticalDirectionOfWrap === 'up' ? isHigher : isLower; // has to be eg upward in general\n    let isInBetterVerticalDirection = verticalDirectionOfWrap === 'up' ? isLower : isHigher; // but of the upward links, eg, lower is better\n    let closerToCorrectHorizontalEdge = horizontalDirectionOfWrap === 'right' ? rightMostRect : leftMostRect;\n\n    candidateRectContainers = rectContainers.filter(rectObject => isInCorrectVerticalDirection(rectObject, currentSelectionRect));\n    candidateRectContainers = candidateRectContainers.filter(rectObject => !isVerticallyOverlapping(rectObject, currentSelectionRect)); // if left and right accept overlap wrap must not\n    candidateRectContainers = candidateRectContainers.filter(rectObject => rectObject.element !== currentLinkElement);\n\n    if (candidateRectContainers.length > 0) {\n      let rightmostUpwardRect = candidateRectContainers // name reflects LTR text\n        .reduce((rightmostUpwardRect, newRect) => {\n          if (isInBetterVerticalDirection(rightmostUpwardRect, newRect) && !isVerticallyOverlapping(rightmostUpwardRect, newRect)) return rightmostUpwardRect;\n          if (isInBetterVerticalDirection(newRect, rightmostUpwardRect) && !isVerticallyOverlapping(rightmostUpwardRect, newRect)) return newRect;\n          return closerToCorrectHorizontalEdge(rightmostUpwardRect, newRect);\n        });\n\n      if (rightmostUpwardRect) {\n        return scrollOrSelect(rightmostUpwardRect);\n      }\n    }\n\n    // Wrap to rightmost bottom (or leftmost top for RTL)\n    let verticalDirectionOfExtremeWrap = verticalDirectionToWrapAfterFinalLeftmostLink(currentLinkElement);\n    let horizontalDirectionOfExtremeWrap = horizontalDirectionToWrapAfterExtremeLink(currentLinkElement, verticalDirectionOfExtremeWrap);\n    let isVerticallyFarther = verticalDirectionOfExtremeWrap === 'up' ? isHigher : isLower;\n    let closerToCorrectExtremeHorizontalEdge = horizontalDirectionOfExtremeWrap === 'right' ? rightMostRect : leftMostRect;\n\n    let rightBottomMostRect = rectContainers // Name reflects LTR text\n      .reduce((rightBottomMostRect, newRect) => {\n        if (isVerticallyFarther(rightBottomMostRect, newRect)  && !isVerticallyOverlapping(rightBottomMostRect, newRect)) return rightBottomMostRect;\n        if (isVerticallyFarther(newRect, rightBottomMostRect) &&  !isVerticallyOverlapping(rightBottomMostRect, newRect)) return newRect;\n        return closerToCorrectExtremeHorizontalEdge(rightBottomMostRect, newRect);\n      });\n\n    if (rightBottomMostRect) {\n      return scrollOrSelect(rightBottomMostRect);\n    }\n\n  } else if (direction === 'right') {\n    let candidateLinks = Link.selection.element.closest('p.canopy-paragraph').querySelectorAll('.canopy-selectable-link');\n    let currentSelectionRect = getBoundingRectInDirection(currentLinkElement, 'left');\n    let rectContainers = getRectsOfElements(candidateLinks, currentLinkElement);\n\n    let candidateRectContainers = rectContainers.filter(rectObject => rectObject.left > currentSelectionRect.left);\n    candidateRectContainers = candidateRectContainers.filter(rectObject => isVerticallyOverlapping(rectObject, currentSelectionRect));\n    candidateRectContainers = candidateRectContainers.filter(rectObject => rectObject.element !== currentLinkElement);\n\n    if (candidateRectContainers.length > 0) {\n      let leftmostRightRect = candidateRectContainers\n        .reduce((leftmostRightRect, newRect) => {\n          if (leftmostRightRect.bottom === currentSelectionRect.bottom && newRect.bottom !== currentSelectionRect.bottom) return leftmostRightRect; // prefer direct right\n          if (newRect.bottom === currentSelectionRect.bottom && leftmostRightRect.bottom !== currentSelectionRect.bottom) return newRect;\n          if (leftmostRightRect.left < newRect.left) return leftmostRightRect;\n          if (leftmostRightRect.left > newRect.left) return newRect;\n          if (leftmostRightRect.left === newRect.left) {\n            return topMostRect(leftmostRightRect, newRect);\n          }\n        });\n\n      if (leftmostRightRect) {\n        return scrollOrSelect(leftmostRightRect);\n      }\n    }\n\n    // Wrap to downward far-left (or upward far-right for RTL text)\n    let verticalDirectionOfWrap = verticalDirectionToWrapAfterRightmostLink(currentLinkElement);\n    let isInCorrectVerticalDirection = verticalDirectionOfWrap === 'up' ? isHigher : isLower;\n    let isInBetterVerticalDirection = verticalDirectionOfWrap === 'up' ? isLower : isHigher;\n    let closerToCorrectHorizontalEdge = horizontalDirectionOfExtremeWrap === 'right' ? rightMostRect : leftMostRect;\n\n    candidateRectContainers = rectContainers.filter(rectObject => isInCorrectVerticalDirection(rectObject, currentSelectionRect));\n    candidateRectContainers = candidateRectContainers.filter(rectObject => !isVerticallyOverlapping(rectObject, currentSelectionRect)); // if left and right accept overlap wrap must not\n    candidateRectContainers = candidateRectContainers.filter(rectObject => rectObject.element !== currentLinkElement);\n\n    if (candidateRectContainers.length > 0) {\n      let leftmostDownwardRect = candidateRectContainers // Name reflects LTR text\n        .reduce((leftmostDownwardRect, newRect) => {\n          if (isInBetterVerticalDirection(leftmostDownwardRect, newRect) && !isVerticallyOverlapping(leftmostDownwardRect, newRect)) return leftmostDownwardRect;\n          if (isInBetterVerticalDirection(newRect, leftmostDownwardRect) && !isVerticallyOverlapping(newRect, leftmostDownwardRect)) return newRect;\n          return closerToCorrectHorizontalEdge(leftmostDownwardRect, newRect);\n        });\n\n      if (leftmostDownwardRect) {\n        return scrollOrSelect(leftmostDownwardRect);\n      }\n    }\n\n    // Wrap to leftmost top (or rightmost bottom for RTL)\n    let verticalDirectionOfExtremeWrap = verticalDirectionToWrapAfterFinalRightmostLink(currentLinkElement);\n    let horizontalDirectionOfExtremeWrap = horizontalDirectionToWrapAfterExtremeLink(currentLinkElement, verticalDirectionOfExtremeWrap);\n    let verticalSideToCompareExtremeWrap = verticalDirectionOfExtremeWrap === 'up' ? 'top' : 'bottom';\n    let isVerticallyFarther = verticalDirectionOfExtremeWrap === 'up' ? isHigher : isLower;\n    let closerToCorrectHorizontalExtremeEdge = horizontalDirectionOfExtremeWrap === 'right' ? rightMostRect : leftMostRect;\n\n    let leftmostTopRect = rectContainers\n      .reduce((leftmostTopRect, newRect) => {\n        if (isVerticallyFarther(leftmostTopRect, newRect)) return leftmostTopRect;\n        if (isVerticallyFarther(newRect, leftmostTopRect)) return newRect;\n        if (leftmostTopRect[verticalSideToCompareExtremeWrap] === newRect[verticalSideToCompareExtremeWrap]) {\n          return closerToCorrectHorizontalExtremeEdge(leftmostTopRect, newRect);\n        }\n      });\n\n    if (leftmostTopRect) {\n      return scrollOrSelect(leftmostTopRect);\n    }\n  }\n}\n\nfunction isHigher(rect1, rect2) {\n  if (rect1.bottom < rect2.bottom) return true;\n  return false;\n}\n\nfunction isLower(rect1, rect2) {\n  if (rect1.top > rect2.top) return true;\n  return false;\n}\n\nfunction rightMostRect(rect1, rect2) {\n  return rect1.right > rect2.right ? rect1 : rect2;\n}\n\nfunction leftMostRect(rect1, rect2) {\n  return rect1.left < rect2.left ? rect1 : rect2;\n}\n\nfunction topMostRect(rect1, rect2) {\n  return rect1.top < rect2.top ? rect1 : rect2;\n}\n\nfunction isHorizontallyWithin(rect1, rect2) {\n  if (rect1.left > rect2.left && rect1.right < rect2.right) return true;\n  return false;\n}\n\nfunction isHorizontallyOverlapping(rect1, rect2) {\n  return (rect1.left < rect2.right && rect2.left < rect1.right);\n}\n\nfunction isVerticallyOverlapping(rect1, rect2) {\n  return (\n    (rect1.top < rect2.bottom && rect1.bottom > rect2.top) ||\n    (rect2.top < rect1.bottom && rect2.bottom > rect1.top)\n  );\n}\n\nfunction isInViewportVertically(rectObject) {\n  const viewportHeight = ScrollableContainer.visibleHeight;\n\n  // Check if the top or the bottom of the rectangle is within the viewport\n  return (\n    (rectObject.top >= 0 && rectObject.top <= viewportHeight) ||\n    (rectObject.bottom >= 0 && rectObject.bottom <= viewportHeight)\n  );\n}\n\nfunction horizontallyCloserRect(rect1, rect2, targetRect) {\n  const midpointRect1 = (rect1.left + rect1.right) / 2;\n  const midpointRect2 = (rect2.left + rect2.right) / 2;\n  const midpointTarget = (targetRect.left + targetRect.right) / 2;\n\n  const distanceToRect1 = Math.abs(midpointRect1 - midpointTarget);\n  const distanceToRect2 = Math.abs(midpointRect2 - midpointTarget);\n\n  if (distanceToRect1 < distanceToRect2) {\n    return rect1;\n  } else {\n    return rect2;\n  }\n}\n\nfunction isVisible(element) {\n  const style = window.getComputedStyle(element);\n  return style.display !== 'none' && style.visibility !== 'hidden' && style.opacity !== '0' && style.opacity !== '0%';\n}\n\nfunction scrollOrSelect(rect, options) {\n  const AmountOfLinkThatMustBeVisibleToSelect = -10; // we even let links be a bit over the viewport\n\n  if (rect.top - ScrollableContainer.top > window.innerHeight - AmountOfLinkThatMustBeVisibleToSelect) {\n    return scrollElementToPosition(rect.element, {targetRatio: 0.2, maxScrollRatio: 0.5, minDiff: 70, direction: 'down', behavior: 'smooth'});\n  } else if (rect.bottom - ScrollableContainer.top < AmountOfLinkThatMustBeVisibleToSelect) {\n    return scrollElementToPosition(rect.element, {targetRatio: 0.2, maxScrollRatio: 0.5, minDiff: 70, direction: 'up', behavior: 'smooth'});\n  } else {\n    const link = new Link(rect.element);\n    return link.select(options);\n  }\n}\n\nfunction greaterHorizontalOverlap(selectedRect, candidateRect1, candidateRect2) {\n  function calculateHorizontalOverlap(rect1, rect2) {\n    return Math.max(0, Math.min(rect1.right, rect2.right) - Math.max(rect1.left, rect2.left));\n  }\n\n  const overlap1 = calculateHorizontalOverlap(selectedRect, candidateRect1);\n  const overlap2 = calculateHorizontalOverlap(selectedRect, candidateRect2);\n\n  if (overlap1 > overlap2) {\n    return candidateRect1;\n  } else {\n    return candidateRect2;\n  }\n}\n\nfunction distanceComparingSide(rect1, rect2, side) {\n  if (typeof rect1 === 'number') rect1 = { [side]: rect1 };\n  if (typeof rect2 === 'number') rect2 = { [side]: rect2 };\n\n  switch (side) {\n    case 'left':\n      return Math.abs(rect1.left - rect2.left);\n    case 'right':\n      return Math.abs(rect1.right - rect2.right);\n    case 'top':\n      return Math.abs(rect1.top - rect2.top);\n    case 'bottom':\n      return Math.abs(rect1.bottom - rect2.bottom);\n    case 'middle':\n      return Math.abs(((rect1.left - rect1.right)/2) - ((rect2.left - rect2.right)/2));\n    default:\n      // Invalid side\n      return null;\n  }\n}\n\nfunction getRectsOfElements(elementArray) {\n  const result = [];\n\n  for (const element of elementArray) {\n    let elementForRect = element;\n    if (element.closest('.canopy-arrow-keys-container')) {\n      elementForRect = element.closest('.canopy-arrow-keys-container'); // a single link in TD should use the TD's borders eg\n    }\n\n    const subRects = Array.from(elementForRect.getClientRects());\n    let singleRect = { element, link: Link.for(element), text: element.innerText, ...JSON.parse(JSON.stringify(elementForRect.getBoundingClientRect()))};\n\n    if (element.closest('.canopy-arrow-keys-container')) { // a link in a TD eg\n      result.push(singleRect);\n    } else {\n      for (let i = 0; i < subRects.length; i++) { // treat multiple rects of same link as separate candidates\n        const rect = subRects[i];\n        result.push({\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height,\n          top: rect.top,\n          right: rect.right,\n          bottom: rect.bottom,\n          left: rect.left,\n          element: element,\n          text: element.innerText,\n          link: Link.for(element)\n        });\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction getBoundingRectInDirection(element, direction) {\n  let singleRect = JSON.parse(JSON.stringify(element.getBoundingClientRect()));\n  let multipleRects = mergeRectsWithSameTop(getTextNodesRects(element));\n\n  if (multipleRects.length === 1 || linkTextIsOneUnit(element)) return { element, ...singleRect};\n  if (multipleRects.length === 0) return null;\n\n  switch(direction) {\n    case 'left':\n      return { element, link: Link.for(element), ...multipleRects.reduce((leftmostRect, currentRect) => {\n        return currentRect.right > leftmostRect.right ? leftmostRect : currentRect;\n      })};\n    case 'right':\n      return { element, link: Link.for(element), ...multipleRects.reduce((rightmostRect, currentRect) => {\n        return currentRect.left < rightmostRect.left ?  rightmostRect : currentRect;\n      })};\n    case 'up':\n      return { element, link: Link.for(element), ...multipleRects.reduce((uppermostRect, currentRect) => {\n        return currentRect.bottom < uppermostRect.bottom ? currentRect : uppermostRect;\n      })};\n    case 'down':\n      return { element, link: Link.for(element), ...multipleRects.reduce((lowestRect, currentRect) => {\n        return currentRect.top > lowestRect.top ? currentRect : lowestRect;\n      })};\n    default:\n      throw new Error(\"Invalid direction argument\");\n  }\n\n  function linkTextIsOneUnit(linkElement) { // is wrapped text new unit for proximity calculations or is container one unit?\n    return linkElement.closest('.canopy-arrow-keys-container'); // descendants of a div are not inline, unlike direct children of <p> or eg <b>\n  }\n}\n\nfunction getTextNodesRects(element) {\n  const textNodesRects = [];\n\n  function traverse(node) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      const range = document.createRange();\n      range.selectNodeContents(node);\n      const rects = range.getClientRects();\n      for (let i = 0; i < rects.length; i++) {\n        textNodesRects.push(rects[i]);\n      }\n    } else if (node.nodeType === Node.ELEMENT_NODE) {\n      for (const childNode of node.childNodes) {\n        traverse(childNode);\n      }\n    }\n  }\n\n  traverse(element);\n  return textNodesRects.map(rect => JSON.parse(JSON.stringify(rect)));\n}\n\nfunction mergeRectsWithSameTop(rectangles) {\n  const mergedRectangles = [];\n\n  // Sort the rectangles by their top value\n  rectangles.sort((rect1, rect2) => rect1.top - rect2.top);\n\n  let currentRect = rectangles[0];\n\n  for (let i = 1; i < rectangles.length; i++) {\n    const nextRect = rectangles[i];\n\n    // Check if the top values are the same\n    if (currentRect.top === nextRect.top) {\n      // Merge the rectangles horizontally\n      currentRect.left = Math.min(currentRect.left, nextRect.left);\n      currentRect.right = Math.max(currentRect.right, nextRect.right);\n    } else {\n      // Add the current merged rectangle to the result\n      mergedRectangles.push(currentRect);\n\n      // Set the current rectangle to the next one\n      currentRect = nextRect;\n    }\n  }\n\n  // Add the last merged rectangle to the result\n  mergedRectangles.push(currentRect);\n\n  return mergedRectangles;\n}\n\n// ** Direction wrap handling **\n\n// When the user presses right or left, whether we wrap up or down depends on the current text direction,\n// but if we wrap down, whether to pick the right-most link or the left-most link of the lower links\n// depends on the text orientation of their container, not the current container, so this function\n// finds the next link vertically and determines its text orientation in order to decide which side to pick from.\n\nfunction verticalDirectionToWrapAfterRightmostLink(linkElement) {\n  return getTextDirectionOfRootAncestor(linkElement) === 'ltr' ? 'down' : 'up';\n}\n\nfunction verticalDirectionToWrapAfterLeftmostLink(linkElement) {\n  return getTextDirectionOfRootAncestor(linkElement) === 'ltr' ? 'up' : 'down';\n}\n\nfunction verticalDirectionToWrapAfterFinalRightmostLink(linkElement) {\n  return getTextDirectionOfRootAncestor(linkElement) === 'ltr' ? 'up' : 'down';\n}\n\nfunction verticalDirectionToWrapAfterFinalLeftmostLink(linkElement) {\n  return getTextDirectionOfRootAncestor(linkElement) === 'ltr' ? 'down' : 'up';\n}\n\n// Unlike the vertical direction of the wrap, the horiztonal direction of the wrap is dependent of the text direction\n// of the _next_ link that will get selected, not the current one, and so is not necessarily the opposite horizontal direction of wrap\nfunction horizontalDirectionToWrapAfterLink(linkElement, verticalDirectionOfWrap) {\n  if (verticalDirectionOfWrap === 'up') {\n    return getTextDirectionOfRootAncestor(getPreviousLinkOfParagraph(linkElement)) === 'ltr' ? 'right' : 'left';\n  } else if (verticalDirectionOfWrap === 'down') {\n    return getTextDirectionOfRootAncestor(getNextLinkOfParagraph(linkElement)) === 'ltr' ? 'left' : 'right';\n  }\n}\n\n// This is when in LTR text we go 'right' on the bottom right link or 'left' on the top-left link and cycle on x and y\nfunction horizontalDirectionToWrapAfterExtremeLink(linkElement, verticalDirectionOfWrap) {\n  if (verticalDirectionOfWrap === 'up') {\n    return getTextDirectionOfRootAncestor(getPreviousLinkOfParagraph(linkElement)) === 'ltr' ? 'left' : 'right';\n  } else if (verticalDirectionOfWrap === 'down') {\n    return getTextDirectionOfRootAncestor(getNextLinkOfParagraph(linkElement)) === 'ltr' ? 'right' : 'left';\n  }\n}\n\nfunction getNextLinkOfParagraph(linkElement) {\n  let paragraphElement = linkElement.closest('p.canopy-paragraph');\n  let allLinks = Array.from(paragraphElement.querySelectorAll('.canopy-selectable-link'));\n  let currentLinkIndex = allLinks.indexOf(Link.selection.element);\n\n  if (currentLinkIndex < allLinks.length - 1) {\n    return allLinks[currentLinkIndex + 1];\n  } else {\n    return Link.selection.element;\n  }\n}\n\nfunction getPreviousLinkOfParagraph(linkElement) {\n  let paragraphElement = linkElement.closest('p.canopy-paragraph');\n  let allLinks = Array.from(paragraphElement.querySelectorAll('.canopy-selectable-link'));\n  let currentLinkIndex = allLinks.indexOf(Link.selection);\n\n  if (currentLinkIndex > 0) {\n    return allLinks[currentLinkIndex - 1];\n  } else {\n    return Link.selection.element;\n  }\n}\n\nfunction getTextDirectionOfRootAncestor(element) { // allow manual override of rtl eg for english names of semetic works\n  return element.dir === 'rtl' ? 'rtl' : detectTextDirection(getHighestAncestor(element).innerText);\n}\n\nfunction getHighestAncestor(element) { // find the ancestor element that is a direct child of the paragraph element\n  while(element.parentNode !== Link.selection.element.closest('p.canopy-paragraph')) {\n    element = element.parentNode;\n  }\n  return element;\n}\n\nfunction detectTextDirection(text) {\n  // Regular expression patterns for different character ranges\n  const rtlChars = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\n  const ltrChars = 'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF' +\n                   '\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF';\n  const rtlDirCheck = new RegExp(`^[^${ltrChars}]*[${rtlChars}]`);\n\n  // Check if the text is RTL\n  return rtlDirCheck.test(text) ? 'rtl' : 'ltr';\n}\n\n\nexport {\n  moveInDirection\n}\n","import {\n  topicParentLink,\n  moveToParent,\n  moveDownOrRedirect,\n  inlineACycleLink,\n  zoomOnLocalPath,\n  removeSelection,\n  duplicate,\n  copyDecodedUrl,\n  goToDefaultTopic\n} from 'keys/key_handlers';\nimport { moveInDirection } from 'keys/arrow_keys';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nconst registerKeyListeners = () => {\n  window.addEventListener('keydown', function(e) {\n    if (isActiveElementTextInput()) return; // User is typing in text box\n\n    let modifiers =\n      (e.metaKey ? 'meta-' : '') +\n      (e.ctrlKey ? 'ctrl-' : '') +\n      (e.altKey ? 'alt-' : '') +\n      (e.shiftKey ? 'shift-' : '');\n\n    let keyName = keyNames[e.keyCode];\n    let shortcutName = modifiers + keyName;\n    if (['tab', 'down', 'up', 'left', 'right'].includes(keyName)) {\n      if (!((e.metaKey || e.ctrlKey) && ['left', 'right'].includes(keyName))) { // unless browser back\n        e.preventDefault();\n      }\n    }\n\n    if (keyName === 'escape' && !Link.selection) {\n      return goToDefaultTopic();\n    }\n\n    if (Link.selection || universalShortcutRelationships.includes(shortcutName)) {\n      (shortcutRelationships[shortcutName]||function(){})()\n    } else if (shortcutRelationships[shortcutName]) {\n      Path.rendered.selectALink();\n    }\n  });\n}\n\nconst shortcutRelationships = {\n  'left': moveInDirection.bind(null, 'left'),\n  'up': moveInDirection.bind(null, 'up'),\n  'down': moveInDirection.bind(null, 'down'),\n  'shift-down': inlineACycleLink,\n  'alt-down': inlineACycleLink,\n  'right': moveInDirection.bind(null, 'right'),\n\n  'h': moveInDirection.bind(null, 'left'),\n  'k': moveInDirection.bind(null, 'up'),\n  'j': moveInDirection.bind(null, 'down'),\n  'shift-j': inlineACycleLink,\n  'alt-j': inlineACycleLink,\n  'l': moveInDirection.bind(null, 'right'),\n\n  'u': moveToParent,\n  'i': moveToParent,\n  'shift-enter': moveToParent,\n\n  'n': moveDownOrRedirect,\n  'm': moveDownOrRedirect,\n\n  'escape': removeSelection,\n  'z': zoomOnLocalPath,\n  'd': duplicate,\n  'shift-up': topicParentLink,\n  'shift-k': topicParentLink,\n\n  'c': copyDecodedUrl,\n\n  'enter': () => moveDownOrRedirect({}),\n  'meta-enter': () => moveDownOrRedirect({ newTab: true }), // mac\n  'ctrl-enter': () => moveDownOrRedirect({ newTab: true }), // windows & linux\n  'alt-enter': () => moveDownOrRedirect({ newTab: false, altKey: true }),\n  'meta-alt-enter': () => moveDownOrRedirect({ newTab: true, altKey: true }), // mac\n  'ctrl-alt-enter': () => moveDownOrRedirect({ newTab: true, altKey: true }), // windows & linux\n\n  'enter-shift': () => moveDownOrRedirect({}),\n  'meta-shift-enter': () => moveDownOrRedirect({ newTab: true, shiftKey: true }), // mac\n  'ctrl-shift-enter': () => moveDownOrRedirect({ newTab: true, shiftKey: true }), // windows & linux\n  'alt-shift-enter': () => moveDownOrRedirect({ newTab: false, altKey: true, shiftKey: true }),\n  'meta-alt-shift-enter': () => moveDownOrRedirect({ newTab: true, altKey: true, shiftKey: true }), // mac\n  'ctrl-alt-shift-enter': () => moveDownOrRedirect({ newTab: true, altKey: true, shiftKey: true }), // windows & linux\n}\n\nconst universalShortcutRelationships = [ // shortcuts that always work, even if there isn't an already selected link\n  'c',\n  'd',\n  'up',\n  'down'\n];\n\nconst keyNames = {\n  37: 'left',\n  39: 'right',\n  38: 'up',\n  40: 'down',\n\n  71: 'g',\n  72: 'h',\n  75: 'k',\n  74: 'j',\n  76: 'l',\n  186: ';',\n  90: 'z',\n  68: 'd',\n  67: 'c',\n\n  85: 'u',\n  73: 'i',\n  78: 'n',\n  77: 'm',\n\n  13: 'enter',\n  9: 'tab',\n  27: 'escape',\n  32: 'space',\n\n  192: '`',\n\n  49: '1',\n  50: '2',\n  51: '3',\n  52: '4',\n  53: '5',\n}\n\nfunction isActiveElementTextInput() {\n    let activeElement = document.activeElement;\n    if (activeElement && (activeElement.tagName === \"TEXTAREA\" || (activeElement.tagName === \"INPUT\" && [\"text\", \"password\", \"email\", \"search\", \"number\", \"tel\", \"url\"].includes(activeElement.type.toLowerCase())))) {\n        return true; // Active element is a text input or textarea\n    }\n    return false; // Active element is not a text input or textarea\n}\n\nregisterKeyListeners();\n","import updateView from 'display/update_view';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nfunction registerPopStateListener() {\n  if ('scrollRestoration' in history) {\n    history.scrollRestoration = 'manual';\n  }\n\n  history.replaceState(history.state, document.title, window.location.href); // no-op call to put initial path in history API\n\n  window.addEventListener('popstate', (e) => {\n    let linkSelection = e?.state?.linkSelection ? new Link(e?.state?.linkSelection) : null;\n\n    let scrollStyle;\n    if (Path.current.firstTopicPath.equals(Path.url.firstTopicPath)) { // Navigating within the same page\n      scrollStyle = 'smooth';\n    } else { // Nagivating to a new page\n      scrollStyle = 'instant';\n    }\n\n    updateView(\n      Path.url,\n      linkSelection || Path.url.parentLink,\n      { scrollStyle, scrollDirect: true, popState: true, scrollToParagraph: true }\n    );\n  });\n}\n\nregisterPopStateListener();\n","import 'style/canopy.scss';\nimport updateView from 'display/update_view';\nimport 'keys/register_key_listeners';\nimport 'history/register_pop_state_listener';\nimport Path from 'models/path';\nimport Link from 'models/link';\n\nupdateView(\n  Path.initial,\n  Link.savedSelection || Link.from(() => Path.initial.parentLink),\n  { scrollStyle: 'instant', initialLoad: true, scrollToParagraph: true }\n)\n","import Path from 'models/path';\nimport Link from 'models/link';\nimport Paragraph from 'models/paragraph';\nimport updateView from 'display/update_view';\nimport {\n  setHeader,\n  tryPathPrefix,\n  resetDom,\n  beforeChangeScroll,\n  afterChangeScroll\n} from 'display/helpers';\n\nfunction displayPath(pathToDisplay, linkToSelect, options = {}) {\n  if (!Paragraph.byPath(pathToDisplay)) return tryPathPrefix(pathToDisplay, options);\n  options.afterChangePause = !options.noAfterChangePause && Path.current.twoStepChange(pathToDisplay);\n\n  beforeChangeScroll(pathToDisplay, linkToSelect, options).then(() => {  // eg long distance up or two-step path transition\n    Paragraph.byPath(pathToDisplay).addToDom(); // add before reset so classes on DOM elements are removed\n    resetDom(pathToDisplay);\n    if (linkToSelect && !linkToSelect?.element) { linkToSelect?.eraseLinkData(); return updateView(pathToDisplay, null, options); }\n    Path.setPath(linkToSelect?.urlPath || pathToDisplay, options); // before link.select because selection cache by current URL\n    Link.persistLinkSelection(linkToSelect || pathToDisplay.parentLink); // if null, persists deselect\n    Link.updateSelectionClass(linkToSelect || pathToDisplay.parentLink); // if null, removes previous selection's class\n    let header = setHeader(pathToDisplay.firstTopicPath.topic, options);\n    document.title = pathToDisplay.pageTitle;\n\n    let visibleParagraphs = displayPathTo(pathToDisplay.paragraph, options);\n    pathToDisplay.paragraph.addSelectionClass();\n    setTimeout(() => Link.visible.filter(link => link.isGlobal).forEach(link => setTimeout(() => link.execute({ renderOnly: true })))); // eager render\n\n    return afterChangeScroll(pathToDisplay, linkToSelect, options).then(() => {\n      visibleParagraphs.forEach(paragraph => paragraph.display()) || header.show();\n    });\n  });\n}\n\nconst displayPathTo = (paragraph, options) => {\n  let visibleParagraphs = [];\n\n  while (paragraph) {\n    options.scrollStyle === 'instant' ? paragraph.allocateSpace() : paragraph.display(); // scroll to correct location before showing content\n    visibleParagraphs.push(paragraph);\n    if (paragraph.parentLink) paragraph.parentLink?.open(); // remember open links of path reference\n    Link.persistLinkSelectionInSession(paragraph.parentLink); // being an open link makes that link the most recently selected for its paragraph\n    paragraph = paragraph.parentParagraph;\n  }\n\n  return visibleParagraphs;\n}\n\nexport default displayPath;\n","import { canopyContainer } from 'helpers/getters';\nimport ScrollableContainer from 'helpers/scrollable_container';\nimport displayPath from 'display/display_path';\nimport Link from 'models/link';\nimport Path from 'models/path';\nimport Paragraph from 'models/paragraph';\nimport updateView from 'display/update_view';\n\nfunction setHeader(topic, displayOptions) {\n  let headerDomElement = document.querySelector(`h1[data-topic-name=\"${topic.cssMixedCase}\"]`);\n  headerDomElement.style.display = 'block';\n  headerDomElement.style.opacity = '0%';\n  if (displayOptions.scrollStyle !== 'instant') {\n    headerDomElement.style.opacity = '100%'; // the page is scrolled to the right position so there wont be a jump\n  }\n  return { show: () => { headerDomElement.style.opacity = '100%' } };\n}\n\nfunction hideAllSectionElements(pathToDisplay) {\n  removeUnusedChildSections(canopyContainer, pathToDisplay);\n\n  function removeUnusedChildSections(parentElement, pathToDisplay) { // remove all elements from parents top-down to reduce dom changes\n    Array.from(parentElement.childNodes)\n      .filter(element => element.tagName === 'SECTION')\n      .forEach(element => {\n        let currentParagraph = Paragraph.for(element);\n        if (!currentParagraph.path.isIn(pathToDisplay)) currentParagraph.removeFromDom();\n        removeUnusedChildSections(element, pathToDisplay);\n      });\n  }\n}\n\nfunction closeAllLinks() { // now selection class management is done in Link.updateSelectionClass\n  Array.from(document.getElementsByTagName(\"a\")).forEach((linkElement) => {\n    linkElement.classList.remove('canopy-open-link'); // now\n  });\n}\n\nfunction deselectSectionElement() {\n  Array.from(document.querySelectorAll('.canopy-selected-section')).forEach((sectionElement) => {\n    sectionElement.classList.remove('canopy-selected-section');\n  });\n}\n\nfunction hideHeaders() {\n  Array.from(document.querySelectorAll('#_canopy h1')).forEach(header => {\n    header.style.display = 'none';\n  });\n}\n\nfunction tryPathPrefix(path, displayOptions) {\n  console.error(\"No section element found for path:\", path.string);\n  if (path.length > 1) {\n    console.log(\"Trying:\", path.withoutLastSegment.string);\n    return displayPath(path.withoutLastSegment, null, {scrollStyle: 'instant', replaceHistoryState: true });\n  } else if(!displayOptions.defaultRedirect) {\n    console.error(\"No path prefixes remain to try. Redirecting to default topic: \" + Path.default);\n    return updateView(Path.default, null, { defaultRedirect: true, scrollStyle: 'instant', replaceHistoryState: true });\n  } else {\n    throw new Error('Redirect to default topic failed terminally.')\n  }\n}\n\nconst resetDom = (pathToDisplay) => {\n  hideHeaders();\n  closeAllLinks();\n  hideAllSectionElements(pathToDisplay);\n  deselectSectionElement();\n}\n\nfunction scrollElementToPosition(element, options) {\n  if (!(element instanceof Element)) throw new Error('Argument to scrollElementToPosition must be DOM element');\n  let { targetRatio, maxScrollRatio, minDiff, direction, behavior, side } = options;\n\n  let elementRect = element.getBoundingClientRect();\n  let idealTargetPositionOnVisibleContainer = ScrollableContainer.visibleHeight * targetRatio;\n\n  let containerPointToPutAtTarget;\n  if (side === 'bottom') {\n    containerPointToPutAtTarget = elementRect.bottom - ScrollableContainer.top + ScrollableContainer.currentScroll;\n  } else if (side === 'middle') {\n    containerPointToPutAtTarget = (elementRect.top - ScrollableContainer.top + ScrollableContainer.currentScroll) + (elementRect.height / 2);\n  } else { // top\n    containerPointToPutAtTarget = elementRect.top - ScrollableContainer.top + ScrollableContainer.currentScroll;\n  }\n\n  // Handling large A tags\n  if (element.tagName === 'A' && (side === 'middle' || side === 'bottom')) {\n    const padding = 20; // minimum space between top of link and top of screen\n    const topOffScreen = (side === 'bottom' ? 1 : .5) * (elementRect.bottom - elementRect.top) + padding > idealTargetPositionOnVisibleContainer;\n    if (topOffScreen) {\n      targetRatio = 0.05;\n      idealTargetPositionOnVisibleContainer = ScrollableContainer.visibleHeight * targetRatio;\n      containerPointToPutAtTarget = elementRect.top + ScrollableContainer.currentScroll;\n    }\n  }\n\n  let idealScrollY = containerPointToPutAtTarget - idealTargetPositionOnVisibleContainer;\n\n  // Adjust idealScrollY to the closest possible scroll position\n  if (ScrollableContainer.scrollHeight - ScrollableContainer.visibleHeight < idealScrollY) console.error('Scrollable area not long enough to scroll to desired position');\n  idealScrollY = Math.max(0, Math.min(idealScrollY, ScrollableContainer.scrollHeight - ScrollableContainer.visibleHeight));\n\n  // Use the calculated scroll or max scroll if it is too big\n  const maxScrollDistance = maxScrollRatio ? ScrollableContainer.visibleHeight * maxScrollRatio : Infinity;\n  let actualScrollY;\n  if (idealScrollY > ScrollableContainer.currentScroll) {\n    actualScrollY = Math.min(idealScrollY, ScrollableContainer.currentScroll + maxScrollDistance);\n  } else {\n    actualScrollY = Math.max(idealScrollY, ScrollableContainer.currentScroll - maxScrollDistance);\n  }\n\n  let shouldScroll = idealScrollY - ScrollableContainer.currentScroll !== 0;\n\n  // Check that the scroll is larger than the minimum we would initiate a scroll for\n  if (minDiff) { // && maxScrollRatio !== Infinity) {\n    const diff = Math.abs(ScrollableContainer.currentScroll - actualScrollY);\n    let linkOffScreen = element.tagName === 'A' && (elementRect.top < 5 || elementRect.bottom > ScrollableContainer.visibleHeight);\n    shouldScroll = !minDiff || (minDiff && (diff > minDiff)) || linkOffScreen;\n  }\n\n  // If the caller has constrained the scroll in a single direction, check we're going that way\n  if (direction === 'up') {\n    shouldScroll = shouldScroll && actualScrollY < ScrollableContainer.currentScroll;\n  }\n\n  if (direction === 'down') {\n    shouldScroll = shouldScroll && actualScrollY > ScrollableContainer.currentScroll;\n  }\n\n  if (shouldScroll) {\n    return scrollToWithPromise({ top: actualScrollY, behavior, ...options });\n  } else {\n    return Promise.resolve(false);\n  }\n}\n\nlet scrollInProgress = null;\nfunction getScrollInProgress() {\n  return scrollInProgress;\n}\n\nlet currentScrollOptions = null; // multiple calls to scrollToWithPromise replace the desired destination\n\nfunction scrollToWithPromise(options) {\n  currentScrollOptions = options;\n  return (scrollInProgress = new Promise(function(resolve) {\n    ScrollableContainer.scrollTo(currentScrollOptions);\n    let lastY = ScrollableContainer.currentScroll;\n    let inactivityStart = null;\n    let checks = 0;\n\n    const checkScroll = () => {\n      const currentY = ScrollableContainer.currentScroll;\n      if (lastY === currentY && !inactivityStart) inactivityStart = Date.now();\n      if (lastY !== currentY) inactivityStart = null;\n      if (lastY === currentY && checks < 1) {\n        ScrollableContainer.scrollTo(currentScrollOptions);\n      }\n\n      lastY = currentY;\n      checks++;\n\n      if (inactivityStart && (Date.now() - inactivityStart > 1000)) {\n        scrollInProgress = null;\n        return resolve(false); // the user prevented the scroll from completing\n      }\n\n      if (Math.abs(currentY - options.top) < 10) {\n        scrollInProgress = null;\n        resolve(true); // Resolve the promise when close to the target\n      } else {\n        setTimeout(checkScroll, 50); // Recheck after 50 milliseconds\n      }\n    };\n\n    setTimeout(checkScroll, 50); // Start checking after 50 milliseconds\n  }));\n}\n\nconst LINK_TARGET_RATIO = .25;\nconst PARAGRAPH_TARGET_RATIO = .17;\nconst BIG_PARAGRAPH_TARGET_RATIO = .05;\nconst BIG_LINK_TARGET_RATIO = .1;\n\nfunction beforeChangeScroll(newPath, linkToSelect, options = {}) {\n  if (!Path.rendered) return Promise.resolve();  // user may be changing URL first so we use path from DOM\n  if (!newPath.paragraph) return Promise.resolve();\n  if (!newPath.initialOverlap(Path.rendered)) return Promise.resolve();\n  if (options.noScroll || options.noBeforeChangeScroll || options.initialLoad || options.scrollStyle === 'instant') return Promise.resolve();\n  if (Path.current.isIn(newPath)) return Promise.resolve(); // moving down\n  if (Path.rendered.fulcrumLink(newPath).isFocused) return Promise.resolve();\n\n  let previousPath = Link.selection?.isEffectivePathReference ? Link.selection.enclosingPath : Path.rendered;\n  let minDiff = options.noMinDiff ? null : 75;\n\n  // If it is a two step change, go to fulcrum element, otherwise go straight to final position\n  let targetElement = (Path.rendered.twoStepChange(newPath) && previousPath.fulcrumLink(newPath)).linkElement ||\n    (options.scrollToParagraph && !linkToSelect?.isFragment && newPath.paragraphElement) ||\n    (linkToSelect?.element || newPath.paragraphElement);\n\n  let targetRatio = targetElement.tagName === 'A' ?\n    (Link.for(targetElement).isBig ? BIG_LINK_TARGET_RATIO : LINK_TARGET_RATIO) :\n    (Paragraph.for(targetElement.parentNode).isBig ? BIG_PARAGRAPH_TARGET_RATIO : PARAGRAPH_TARGET_RATIO);\n\n  if (elementIsFocused(targetElement)) {\n    return Promise.resolve();\n  }\n\n  let preChangePause = new Promise(resolve => setTimeout(resolve, 110))\n\n  return (scrollElementToPosition(targetElement, {targetRatio, maxScrollRatio: Infinity, minDiff, behavior: 'smooth', side: 'top' })\n    .then((scrolled) => scrolled && preChangePause)); // we only pause before change if there was a real scroll to the fulcrum link\n}\n\nfunction afterChangeScroll(pathToDisplay, linkToSelect, options={}) {\n  if (options.noScroll) return Promise.resolve();\n  let behavior = options.scrollStyle || 'smooth';\n  let { direction } = options;\n  canopyContainer.dataset.imageLoadScrollBehavior = behavior; // if images later load, follow the most recent scroll behavior\n  \n  if (pathToDisplay.equals(Path.firstTopicPath) && !linkToSelect) return scrollElementToPosition(\n    Paragraph.root.paragraphElement, {targetRatio: 0.5, maxScrollRatio: Infinity, behavior, side: 'top' }\n  );\n\n  if (linkToSelect?.isFragment) return scrollElementToPosition(\n    linkToSelect.element, {targetRatio: LINK_TARGET_RATIO, Infinity, minDiff, behavior, side: 'top', direction}\n  );\n\n  let postChangePause = options.afterChangePause ? (new Promise(resolve => setTimeout(resolve, 150))) : Promise.resolve();\n  let maxScrollRatio = Infinity; // no limit on initial load and click\n  let minDiff = 50;\n\n  if (!linkToSelect || (options.scrollToParagraph && !linkToSelect.isFragment)) {\n    return postChangePause.then(() => scrollElementToPosition(pathToDisplay.paragraphElement, {\n      targetRatio: pathToDisplay.paragraph.isBig ? BIG_PARAGRAPH_TARGET_RATIO : PARAGRAPH_TARGET_RATIO,\n      maxScrollRatio,\n      minDiff,\n      behavior, \n      side: 'top', \n      direction // up on root needs direction to do nothing\n    }));\n  } else { // scroll to linkToSelect\n    let targetElement, targetRatio;\n    if (linkToSelect.isIn(pathToDisplay.paragraph) && linkToSelect.enclosingParagraph.fits) {\n      targetElement = linkToSelect.enclosingParagraph.paragraphElement\n      targetRatio = PARAGRAPH_TARGET_RATIO;\n    } else {\n      targetElement = linkToSelect.element;\n      targetRatio = LINK_TARGET_RATIO;\n    }\n\n    return postChangePause.then(() => scrollElementToPosition(targetElement, {targetRatio, maxScrollRatio, minDiff, behavior, direction}));\n  }\n}\n\nfunction elementIsFocused(element) {\n  const rect = element.getBoundingClientRect(); // Get the bounding rectangle of the element\n\n  // Define the viewport height thresholds for the element to be considered within the desired vertical range\n  const topThreshold = ScrollableContainer.visibleHeight * 0.1;\n  const bottomThreshold = ScrollableContainer.visibleHeight * 0.4;\n\n  // Check if the entire element is within the 5% to 50% range of the viewport\n  // The top of the element should be below the top threshold (5% mark)\n  // The bottom of the element should be above the bottom threshold (50% mark)\n  // This ensures the entire element is between 5% and 50% of the viewport vertically\n  return rect.top >= topThreshold && rect.bottom <= bottomThreshold;\n}\n\nexport {\n  setHeader,\n  resetDom,\n  tryPathPrefix,\n  afterChangeScroll,\n  scrollElementToPosition,\n  beforeChangeScroll,\n  scrollToWithPromise,\n  getScrollInProgress\n};\n","import { fetchAndRenderPath } from 'render/fetch_and_render_path';\nimport displayPath from 'display/display_path';\nimport Path from 'models/path';\nimport Paragraph from 'models/paragraph';\nimport { canopyContainer } from 'helpers/getters';\nlet lastPath = null; // ensure only the last call gets displayed\n\nconst updateView = (pathToDisplay, linkToSelect, options = {}) => {\n  if (pathToDisplay?.empty) pathToDisplay = Path.default;\n\n  let renderComplete = (lastPath = (!options?.renderOnly && pathToDisplay) || lastPath) &&\n    fetchAndRenderPath(pathToDisplay, pathToDisplay, Promise.resolve(canopyContainer)).catch(e => console.error(e));\n\n  Promise.race([\n    renderComplete,\n    (new Promise(resolve => setTimeout(resolve, 400)))\n  ]).then((success) => {\n    if (!success && linkToSelect && Paragraph.contentLoaded && !options.renderOnly) {\n      linkToSelect?.tryElement && linkToSelect.addSelectionClass() || updateView(linkToSelect.enclosingPath, linkToSelect, { pending: true });\n    }\n  });\n\n  return renderComplete.then(() => {\n    if (!options?.renderOnly && pathToDisplay.equals(lastPath)) displayPath(\n      pathToDisplay,\n      linkToSelect,\n      options\n    );\n  }).catch(e => console.error(e));\n}\n\nexport default updateView;\n","import json from '../../package.json';\n\nlet canopyContainer = document.getElementById('_canopy');\nif (!canopyContainer) throw new Error('Page must contain an element with id #_canopy');\n\ncanopyContainer.dataset.canopyVersion = json.version;\n\nlet defaultTopic = () => canopyContainer && canopyContainer.dataset.defaultTopic;\n\nlet defaultTopicJson = () => canopyContainer && document.getElementById('canopy_default_topic_json')?.textContent;\n\nlet projectPathPrefix = canopyContainer && canopyContainer.dataset.projectPathPrefix;\n\nlet hashUrls = canopyContainer && canopyContainer.dataset.hashUrls;\n\nexport {\n  canopyContainer,\n  defaultTopic,\n  defaultTopicJson,\n  projectPathPrefix,\n  hashUrls\n};\n","import { canopyContainer } from 'helpers/getters';\n\nclass ScrollableContainer {\n  static get windowMode() {\n    return !isElementScrollable(canopyContainer.parentElement)\n  }\n\n  static get element() {\n    if (this.windowMode) return document.body;\n    if (!this.windowMode) return canopyContainer.parentElement;\n  }\n\n  static get visibleHeight() {\n    if (this.windowMode) return window.innerHeight;\n    if (!this.windowMode) return this.element.clientHeight;\n  }\n\n  static get innerHeight() {\n    throw 'Use ScrollableContainer.visibleHeight';\n  }\n\n  static get scrollHeight() {\n    if (this.windowMode) return document.documentElement.scrollHeight;\n    if (!this.windowMode) return this.element.scrollHeight;\n  }\n\n  static get currentScroll() {\n    if (this.windowMode) return window.scrollY;\n    if (!this.windowMode) return this.element.scrollTop;\n  }\n\n  static get top () {\n    if (this.windowMode) return 0;\n    return canopyContainer.parentElement.getBoundingClientRect().top;\n  }\n\n  static addEventListener(type, handler) {\n    if (this.windowMode) return window.addEventListener(type, handler);\n    if (!this.windowMode) return this.element.addEventListener(type, handler);\n  }\n\n  static scrollTo(options){\n    if (this.windowMode) return window.scrollTo(options);\n    if (!this.windowMode) return this.element.scrollTo(options);\n  }\n\n  static get focusGap() {\n    return ScrollableContainer.visibleHeight * 0.3;\n  }\n\n  static get focusY() {\n    return ScrollableContainer.visibleHeight * 0.3 + ScrollableContainer.currentScroll;\n  }\n\n  static get focusedElement() { // return the HTML element that should be used as a focus when image load events disrupt viewport\n    return Array.from(document.querySelectorAll('*'))\n      .filter(el => {\n        // Exclude non-visible elements\n        if (el.offsetWidth === 0 && el.offsetHeight === 0) return false;\n        if (el.closest('.canopy-image')) return false;\n\n        const rect = el.getBoundingClientRect();\n        // Check if element's bottom is within the viewport\n        return rect.bottom > 0 && rect.bottom <= this.visibleHeight;\n      })\n      .reduce((highest, el) => {\n        if (highest?.classList.contains('canopy-selected-link')) return highest; // selected link if visible is always the focus\n        if (el?.classList.contains('canopy-selected-link')) return el;\n\n        return !highest || el.getBoundingClientRect().bottom < highest.getBoundingClientRect().bottom ? el : highest;\n      }, null) || canopyContainer; // Initialize reduce with null\n  }\n}\n\nfunction isElementScrollable(element) {\n  const overflowY = window.getComputedStyle(element).overflowY;\n  const isOverflowScrollable = overflowY === 'scroll' || overflowY === 'auto';\n  const contentOverflows = element.scrollHeight > element.clientHeight;\n  return isOverflowScrollable && contentOverflows;\n}\n\nexport default ScrollableContainer;\n","import Path from 'models/path';\nimport Paragraph from 'models/paragraph';\nimport Topic from '../../cli/shared/topic';\nimport updateView from 'display/update_view';\nimport ScrollableContainer from 'helpers/scrollable_container';\n\nclass Link {\n  constructor(argument) {\n    // There are three ways to instantiate a link object:\n    // 1. You can provide a DOM element\n    // 2. You can provide a metadata object\n    //   (This is helpful when storing link selection in the session or history)\n    // 3. You can provide a callback that returns the link\n    //   (This is helpful for selecting links that are not yet rendered)\n\n    if (argument?.tagName === 'A') {\n      this.element = argument;\n    } else if (argument instanceof Link) {\n      throw new Error(\"Cannot instantiate link from link\");\n    } else if (typeof argument === 'object') {\n      this.metadataObject = argument;\n    } else if (typeof argument === 'function') {\n      this.selectorCallback = argument;\n    } else {\n      throw new Error('Invalid argument to Link constructor');\n    }\n  }\n\n  equals(otherLink) {\n    if (!(otherLink instanceof Link)) throw new Error('Argument must be of type link');\n    return this.element === otherLink.element;\n  }\n\n  matches(otherLink) {\n    if (!otherLink) throw new Error('Invalid link argument to Link#matches');\n\n    return this.targetTopic === otherLink.targetTopic &&\n      this.targetSubtopic === otherLink.targetSubtopic &&\n      this.relativeLinkNumber === otherLink.relativeLinkNumber;\n  }\n\n  contradicts(otherPath) {\n    if (!(otherPath instanceof Path)) throw new Error('Invalid path argument to Link#contradicts');\n    return this.targetPath.string !== otherPath.string;\n  }\n\n  get element () { // callers should be prepared for null element indicating request that doesn't correspond to current data\n    if (this.linkElement) {\n      return this.linkElement\n    } else if (this.metadataObject) {\n      this.linkElement = Link.elementFromMetadata(this.metadata);\n      if (!this.linkElement) return null;\n      return this.linkElement;\n    } else if (this.selectorCallback) {\n      let link = this.selectorCallback();\n      this.element = link?.element; // return undefined if not present and let caller handle\n      return this.linkElement;\n    }\n  }\n\n  get tryElement() {\n    try { this.element } catch { return null; }\n  }\n\n  set element(argument) {\n    if (argument instanceof HTMLAnchorElement) {\n      this.linkElement = argument;\n    } else if (argument instanceof Link) {\n      this.linkElement = argument.element;\n    }\n    this.transferDataset();\n  }\n\n  get top() {\n    if (!this.element) return null;\n    if (this.element.closest('.canopy-arrow-keys-container')) {\n      return this.element.closest('.canopy-arrow-keys-container').getBoundingClientRect().top;\n    }\n\n    return this.element.getBoundingClientRect().top;\n  }\n\n  get bottom() {\n    if (!this.element) return null;\n    if (this.element.closest('.canopy-arrow-keys-container')) {\n      return this.element.closest('.canopy-arrow-keys-container').getBoundingClientRect().bottom;\n    }\n\n    return this.element.getBoundingClientRect().bottom;\n  }\n\n  get innerText() {\n    if (!this.element) return null;\n    return this.element?.innerText;\n  }\n\n  get isBig() {\n    let viewPercent = this.element.offsetHeight / ScrollableContainer.visibleHeight;\n    return viewPercent > .4;\n  }\n\n  get positionOnViewport() {\n    if (!this.element) return null;\n\n    const rect = this.element.getBoundingClientRect();\n    const viewportHeight = ScrollableContainer.visibleHeight;\n    const elementTop = rect.top;\n\n    if (elementTop < 0) return -1;\n    if (elementTop > viewportHeight) return Infinity;\n\n    // Calculate the percentage of the viewport the element's top is at\n    const percentageInView = (elementTop / viewportHeight);\n\n    return percentageInView;\n  }\n\n  transferDataset() {\n    // This is just to make it easier to inspect and debug DOM elements\n    if (!this.linkElement) return;\n    this._literalPathString = this.linkElement.dataset.literalPathString;\n    this._enclosingTopic = this.linkElement.dataset.enclosingTopic;\n    this._enclosingSubtopic = this.linkElement.dataset.enclosingSubtopic;\n    this._typeValue = this.linkElement.dataset.type;\n    this._text = this.linkElement.dataset.text;\n\n    this.linkElement._literalPathString = this.linkElement.dataset.literalPathString;\n    this.linkElement._enclosingTopic = this.linkElement.dataset.enclosingTopic;\n    this.linkElement._enclosingSubtopic = this.linkElement.dataset.enclosingSubtopic;\n    this.linkElement._typeValue = this.linkElement.dataset.type;\n    this.linkElement._text = this.linkElement.dataset.text;\n  }\n\n  get text() {\n    return this.linkElement?.dataset?.text || this.metadataObject?.text;\n  }\n\n  get targetTopic() {\n    return this.literalPath.lastTopic;\n  }\n  get targetSubtopic() {\n    if (!this.element) return Topic.fromMixedCase(this.metadataObject.targetSubtopicString);\n    if (this.isLocal) return Topic.fromMixedCase(this.element.dataset.targetSubtopic);\n    return this.literalPath.lastSubtopic;\n  }\n\n  get childTopic() {\n    return this.literalPath.firstTopic;\n  }\n  get childSubtopic() {\n    if (!this.element) return Topic.fromMixedCase(this.metadataObject.targetSubtopicString);\n    if (this.isLocal) return Topic.fromMixedCase(this.element.dataset.targetSubtopic);\n    return this.literalPath.firstSubtopic;\n  }\n\n  get enclosingTopic() {\n    return Topic.fromMixedCase(this.element.dataset.enclosingTopic);\n  }\n\n  get enclosingTopicParagraph() {\n    return this.enclosingParagraph.topicParagraph;\n  }\n\n  get enclosingSubtopic() {\n    return Topic.fromMixedCase(this.element.dataset.enclosingSubtopic);\n  }\n\n  get topicName() {\n    throw new Error('Links have no topicName, only targetTopic or enclosingTopic');\n  }\n\n  get subtopicName() {\n    throw new Error('Links have no subtopicName, only targetSubtopic or enclosingSubtopic');\n  }\n\n  get type() {\n    return this.element.dataset.type;\n  }\n\n  get enclosingSectionElement() {\n    return this.element?.parentNode.closest('.canopy-section');\n  }\n\n  get sectionElement() {\n    throw new Error(\"Depreciated in favor of #enclosingSectionElement\");\n  }\n\n  get enclosingParagraphElement() {\n    return this.element?.parentNode.closest('.canopy-paragraph');\n  }\n\n  get parentParagraphElement() {\n    throw new Error(\"Depreciated in favor of #enclosingParagraphElement\");\n  }\n\n  get enclosingParagraph() {\n    if (!this.enclosingSectionElement) return null;\n    return new Paragraph(this.enclosingSectionElement);\n  }\n\n  get enclosingPath() {\n    if (!this.metadataObject && !this.enclosingSectionElement) return null; // eg link callback constructor that doesn't resolve\n    if (this.metadataObject) return new Path(this.metadataObject.enclosingPathString);\n    return this.enclosingParagraph.path;\n  }\n\n  get targetParagraph() { // if the link is to A/B/C, A is the child and C is the targetParagraph\n    if (!this.isParent) return null;\n\n    if (!Paragraph.byPath(this.inlinePath)) {\n      if (this.cycle) return null; // the paragraph doesn't exist because we didn't preview it\n      console.log(`Did not find paragraph child element matching link [${this.literalPath.firstTopic.mixedCase}, ${this.literalPath.firstSubtopic.mixedCase}]`); // could be network issues\n      return null;\n    }\n\n    return Paragraph.byPath(this.inlinePath);\n  }\n\n  get childPath() {\n    return this.childParagraph.path;\n  }\n\n  get childParagraph() {\n    if (this.isLocal) return this.targetParagraph;\n    if (this.isGlobal) return this.enclosingPath.append(this.literalPath.firstTopicPath).paragraph;\n    return null;\n  }\n\n  get matcher() {\n    return (link) => link.matches(this);\n  }\n\n  get relativeLinkNumber() {\n    if (this.storedRelativeLinkNumber) return this.storedRelativeLinkNumber;\n    this.storedRelativeLinkNumber = this.\n      enclosingParagraph.\n      links.\n      map(e => e.element).\n      indexOf(this.element);\n\n    return this.storedRelativeLinkNumber;\n  }\n\n  get metadata() {\n    if (this.metadataObject) {\n      if (this?.linkElement) return Link.collectMetadata(this.linkElement); // rewrite in case format changed\n      return this.metadataObject;\n    } else if(this.linkElement) {\n      let metadata = Link.collectMetadata(this.linkElement);\n      this.metadataObject = metadata;\n      return metadata;\n    } else if (this.selectorCallback) {\n      this.element = this.selectorCallback();\n      return this.metadata; // now that there is a this.linkElement\n    } else {\n      throw new Error(\"Link has neither supplied metadata, dom element, nor selector function\");\n    }\n  }\n\n  get path() {\n    throw '#path is deprecated in favor of #inlinePath or #literalPath';\n  }\n\n  get targetPath() { // links are assumed to be inlined unless the user redirects explicitly\n    throw '#targetPath is deprecated in favor of #inlinePath or #literalPath';\n  }\n\n  get literalPath() {\n    if (this.isLocal) return Path.forSegment(this.enclosingTopic, this.targetSubtopic);\n    if (this.isGlobal) return Path.for((this.element?.dataset||this.metadataObject).literalPathString);\n    return null;\n  }\n\n  static collectMetadata(linkElement) {\n    let link = new Link(linkElement);\n\n    return {\n      enclosingPathString: link.enclosingPath.string,\n      text: linkElement.dataset.text,\n      relativeLinkNumber: link.relativeLinkNumber,\n      previewPathString: link.previewPath.string, // on initial page load we need the paragraph path to call updateView before we have a link to use\n      targetUrl: linkElement.dataset.targetUrl,\n      targetTopicString: linkElement.dataset.targetTopic,\n      targetSubtopicString: linkElement.dataset.targetSubtopic,\n      literalPathString: linkElement.dataset.literalPathString\n    };\n  }\n\n  static elementFromMetadata(object) {\n    let enclosingPath = new Path(object.enclosingPathString);\n    let enclosingParagraph = enclosingPath.paragraph;\n    if (!enclosingParagraph) { return console.error(\"Link selection data refers to non-existant link\", object); }\n    \n    let perfectMatch = enclosingParagraph.linkBySelector(\n      (link) => (\n        link.isParent && \n        link.previewPath.string === object.previewPathString &&\n        link.relativeLinkNumber === object.relativeLinkNumber &&\n        link.text === object.text\n      )\n    );\n\n    let link = perfectMatch || enclosingParagraph.linkBySelector(  // if the link gets moved to a new paragraph, we should invalidate else select and not open parent link\n      (link) => (link.isParent && link.previewPath.string === object.previewPathString) ||\n        (link.isExternal && link.element?.dataset?.targetUrl === object.targetUrl)\n    );\n\n    return link?.element || null;\n  }\n\n  get nextSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[links.length - 1])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink + 1];\n    } else {\n      return null;\n    }\n  }\n\n  get previousSibling() {\n    let links = this.enclosingParagraph.links;\n    if (!this.equals(links[0])) {\n      let linkElements = links.map((link) => link.element);\n      let indexOfCurrentLink = linkElements.indexOf(this.element);\n      return links[indexOfCurrentLink - 1];\n    } else {\n      return null;\n    }\n  }\n\n  get siblings() {\n    return this.enclosingParagraph.links;\n  }\n\n  get firstSibling() {\n    return this.siblings[0];\n  }\n\n  get lastSibling() {\n    return this.siblings[this.siblings.length - 1];\n  }\n\n  get firstChildLink() {\n    return this.targetParagraph.firstLink;\n  }\n\n  get lastChildLink() {\n    return this.targetParagraph.lastLink;\n  }\n\n  siblingOf(link) {\n    return this.enclosingParagraph && this.enclosingParagraph.equals(link?.enclosingParagraph);\n  }\n\n  get parentLink() {\n    return this.enclosingParagraph?.parentLink;\n  }\n\n  isParentLinkOf(paragraph) {\n    return paragraph?.parentLink?.equals(this);\n  }\n\n  get grandParentLink() {\n    return this.parentLink?.parentLink;\n  }\n\n  get topicParagraph() {\n    if (!this.element) return null;\n    return new Paragraph(this.element.parentNode.closest('.canopy-topic-section'));\n  }\n\n  get selected() {\n    return this.element?.classList.includes('canopy-selected-link');\n  }\n\n  open() {\n    this.element?.classList.add('canopy-open-link');\n  }\n\n  get isOpen() {\n    return this.element?.classList.contains('canopy-open-link');\n  }\n\n  get isClosed() {\n    return !this.isOpen;\n  }\n\n  get isClosedCycle() {\n    return !this.isOpen && this.cycle;\n  }\n\n  get isSelected() {\n    return this.element?.classList.contains('canopy-selected-link');\n  }\n\n  get isPathReference() {\n    return this.type === 'global' && (this.literalPath.length > 1 || this.childTopic.mixedCase !== this.childSubtopic.mixedCase); // A/B or A/B#C\n  }\n\n  get isCoterminalReference() { // ie A/B/C/D with [[E/C/D]], if not coterminal, regular reduction\n    return this.literalPath.includesTopic(this.enclosingTopic) \n      && this.literalPath.lastTopic.mixedCase === this.enclosingTopic.mixedCase\n      && this.literalPath.lastSubtopic.mixedCase === this.enclosingSubtopic.mixedCase;\n  }\n\n  get selfReferencingOverlapStart() { // e.g. A/B/C/D with reference [[E/F/C/D/G]] inline A/B/C/D/E/F/C/D/G and focus on F's link to C ie divergence\n    let topicMatches = this.inlinePath.pathArray.map(([topic, _]) => topic.mixedCase === this.enclosingTopic.mixedCase);\n    let indexOfSelfReference = topicMatches.lastIndexOf(true);\n    let indexOfCurrentSegment = this.enclosingPath.length - 1;\n\n    while(indexOfCurrentSegment !== 0 && this.inlinePath.pathArray[indexOfCurrentSegment - 1][0].mixedCase === this.inlinePath.pathArray[indexOfSelfReference - 1][0].mixedCase) {\n      indexOfSelfReference--;\n      indexOfCurrentSegment--;\n    }\n\n    if (indexOfCurrentSegment === 0) { // e.g. A/B/C/D [[G/A/B/C/D]], point to G's link to A because here that's context for the repetition\n      return this.inlinePath.slice(0, indexOfSelfReference + 1); // +1 so slice includes the last element which is also root topic so we get it's parent link\n    }\n\n    return this.inlinePath.slice(0, indexOfSelfReference + 1); // e.g. A/B/C/D [[G/B/C/E]] point to A/B/C/D/G/B/C/E B's link to C ie start of shared portion\n  }\n\n  get isSelfReference() {\n    return this.enclosingParagraph.path.lastSegment.equals(this.literalPath);\n  }\n\n  get isRehashReference() {\n    return this.enclosingPath.endsWith(this.literalPath);\n  }\n\n  get parentLinkBeforeRehash() { // eg A/B/C [[B/C]] or A/B#C [[B#C]] give parent link in B\n    return this.enclosingPath.sliceBeforeLastTopicInstance(this.literalPath.firstTopic)\n      .append(Path.forTopic(this.literalPath.firstTopic))\n      .intermediaryPathsTo(this.enclosingPath)[1].parentLink;\n  }\n\n  get isSimpleGlobal() {\n    return this.isGlobal && !this.isPathReference; // a global reference to a single global topic\n  }\n\n  get isEffectivePathReference() { // a path reference which is not a cycle unless the cycle is open and thus functioning as a path reference\n    return this.isPathReference && (!this.cycle || this.isInlinedCycleReference);\n  }\n\n  get isInlinedCycleReference() { // a cycle reference that has been inlined\n    return this.introducesNewCycle && this.isOpen;\n  }\n\n  get isInDom() {\n    return !!this.element?.closest('#_canopy');\n  }\n\n  get isExternal() {\n    return this.type === 'external';\n  }\n\n  get isGlobal() {\n    return this.type === 'global';\n  }\n\n  get isLocal() {\n    return this.type === 'local';\n  }\n\n  get isCycle() {\n    return this.introducesNewCycle;\n  }\n\n  get isBackCycle() {\n    return this.inlinePath.reduce().subsetOf(this.enclosingPath) ||\n      this.isRehashReference; // e.g. A/B/C with [[B/C]] which focuses on B\n  }\n\n  get isLateralCycle() {\n    return this.cycle && !this.inlinePath.reduce().subsetOf(this.enclosingPath);\n  }\n\n  get isParent() {\n    return this.isGlobal || this.isLocal;\n  }\n\n  isSiblingOf(otherLink) {\n    return this.enclosingParagraph.equals(otherLink.enclosingParagraph);\n  }\n\n  isIn(paragraph) {\n    if (!(paragraph instanceof Paragraph)) throw 'Wrong argument type: ' + typeof paragraph;\n    return paragraph.links.map(link => link.element).includes(this.element);\n  }\n\n  get hasChildren() {\n    return this.childParagraph?.hasLinks;\n  }\n\n  get firstChild() {\n    return this.childParagraph?.links.filter(link => !link.element?.closest('.canopy-image-caption'))[0];\n  }\n\n  firstChildOf(otherLink) {\n    return !!otherLink.firstChild?.equals(this);\n  }\n\n  get isFragment() {\n    return this.childParagraph?.paragraphElement?.innerText === '';\n  }\n\n  get childParagraphElement() {\n    return this.childParagraph?.paragraphElement;\n  }\n\n  get isOffScreen() {\n    if (!this.element) return null;\n    const rect = this.element.getBoundingClientRect();\n    const viewportHeight = ScrollableContainer.visibleHeight;\n    return rect.top < 0 || rect.bottom > viewportHeight;\n  }\n\n  get isVisible() {\n    if (!this.element) return false;\n    return this.top >= 0 && this.bottom <= ScrollableContainer.visibleHeight;\n  }\n\n  get isAboveViewport() {\n    return this.top < ScrollableContainer.top;\n  }\n\n  get isBelowViewport() {\n    return this.bottom > ScrollableContainer.visibleHeight;\n  }\n\n  isHigherThan(otherLink) {\n    return this.top < otherLink.top;\n  }\n\n  get isFocused() {\n    const topLimit = ScrollableContainer.visibleHeight * 0.15;\n    const bottomLimit = ScrollableContainer.visibleHeight * 0.5;\n\n    // Check if the element is within the target area\n    const overlapsTop = this.bottom > topLimit;\n    const overlapsBottom = this.top < bottomLimit;\n\n    return overlapsTop && overlapsBottom;\n  }\n\n  get cycle() {\n    return this.introducesNewCycle;\n  }\n\n  get backButton() { // ie, a cycle link pointing to the current topic root, which when reduced would take you to the previous path segment\n    return this.literalPath.equals(this.enclosingParagraph.topicPath);\n  }\n\n  get introducesNewCycle() {\n    if (!this.isGlobal) return false;\n    return Path.introducesNewCycle(this.enclosingPath, this.literalPath);\n  }\n\n  get inlinePath() { // ie if the user would inline the link's target at the link's enclosing path\n    // if (this.literalPath.equals(this.enclosingParagraph.literalPath)) { // link to self in root topic = pop\n    //   return this?.enclosingParagraph.parentParagraph?.path || this.enclosingParagraph.path;\n    // }\n\n    if (this.isGlobal) {\n      return this.enclosingParagraph.path.append(this.literalPath);\n    }\n\n    if (this.isLocal) {\n      return this.enclosingParagraph.path.replaceTerminalSubtopic(this.targetSubtopic);\n    }\n\n    return this.enclosingParagraph.path;\n  }\n\n  get previewPath() {\n    if (this.metadataObject && !Paragraph.contentLoaded) { // for initial page load before links exist\n      return new Path(this.metadataObject.previewPathString);\n    }\n\n    if (this.isExternal) { // select the link and display enclosing path\n      return this.enclosingPath;\n    }\n\n    if (this.isGlobal && this.introducesNewCycle) { // select the link and display enclosing path\n      return this.enclosingPath;\n    }\n\n    if (this.isGlobal) { // select link and advance the path\n      return this.inlinePath;\n    }\n\n    if (this.isLocal) { // select link and advance the path\n      return this.inlinePath;\n    }\n  }\n\n  get urlPath() {\n    if (this.cycle || this.externalLink || this.isPathReference) return this.enclosingPath; // path references display target but keep URL\n    if (this.isLocal || this.isSimpleGlobal || this.isInlinedCycleReference) return this.inlinePath;\n  }\n\n  select(options = {}) {\n    if (options.options) throw 'Caller produced malformed options object';\n    if (options?.newTab && this.isParent && options.redirect) return window.open(location.origin + this.literalPath.productionPathString, '_blank');\n    if (options?.newTab && this.isParent) return window.open(location.origin + this.previewPath.productionPathString, '_blank');\n\n    if (options.inlineCycles && this.isCycle) return updateView(this.inlinePath, this, options);\n    if (options.scrollToParagraph) return updateView(this.previewPath, null, options);\n\n    return updateView(this.previewPath, this, options);\n  }\n\n  execute(options = {}) {\n    options = { scrollDirect: true, ...options };\n\n    if (!options.renderOnly) Link.persistLinkSelectionInSession(this); // even if execution selects different link, this link was last touched within paragraph\n\n    if (this.isExternal) {\n      return window.open(this.element.href, '_blank'); // external links must open in new tab\n    }\n\n    if (options?.newTab && this.isParent && options.redirect) return window.open(location.origin + this.literalPath.productionPathString, '_blank');\n    if (options?.newTab && this.isParent) return window.open(location.origin + this.previewPath.productionPathString, '_blank');\n\n    if (options.redirect) { // all handling is the same for redirection\n      return this.literalPath.display({ scrollStyle: 'instant', ...options}); // handles new tab\n    }\n\n    if (this.isSelfReference && !this.isOpen) {\n      if (this.enclosingPath.lastSegment.isTopic) return this.enclosingPath.withoutLastSegment.display(options); // pop\n      return this.enclosingPath.parentLink.select({ renderOnly: options.renderOnly });\n    }\n\n    if (this.isRehashReference && !this.isOpen) { // e.g. A/B/C/D with reference [[B/C/D]] indicating empasis on B's link to C\n      if (this.literalPath.isTopic) return updateView(this.enclosingPath, this.enclosingPath.parentLink, { ...options, scrollToParagraph: false });\n      return updateView(\n        Path.rendered, \n        this.parentLinkBeforeRehash,\n        { renderOnly: options.renderOnly }\n      )\n    }\n\n    if (this.isCoterminalReference && !this.isOpen) { // e.g. A/B/C/D with reducing reference [[E/F/C/D/G]] inline A/B/C/D/E/F/C/D/G and focus on F's link to C ie divergence\n      return this.inlinePath.display({...options, renderOnly: true, inlineCycles: true }).then(() => {\n        return updateView(\n          this.inlinePath, \n          this.selfReferencingOverlapStart.parentLink, \n          { renderOnly: options.renderOnly }\n        );\n      });\n    }\n\n    if (this.isGlobal && this.introducesNewCycle && !options.inlineCycles) { // reduction\n      if (options.pushHistoryState) Link.pushHistoryState(this);\n      return this.inlinePath.reduce().display({\n        renderOnly: options.renderOnly // initiating a cycle reduction disconnects the change from previous options\n      });\n    }\n\n    if ((this.isPathReference && !this.cycle) || (this.cycle && options.inlineCycles)) { // path reference down\n      if (options.pushHistoryState) Link.pushHistoryState(this);\n      return this.inlinePath.display({ noScroll: true, ...options }).then( // path reference means interested in parent\n        () => this.inlinePath.parentLink.select({ ...options, scrollDirect: true, scrollToParagraph: false })\n      );\n    }\n\n    return (options.selectALink && this.firstChild || this).select(options);\n  }\n\n  static removeSelectionClass() {\n    Array.from(document.getElementsByTagName(\"a\")).forEach((linkElement) => {\n      linkElement.classList.remove('canopy-selected-link');\n    });\n  }\n\n  addSelectionClass() {\n    Link.updateSelectionClass(this);\n  }\n\n  get onPage() {\n    if (!this.element) return null;\n    const style = window.getComputedStyle(this.element);\n\n    return (\n      this.element.offsetWidth > 0 &&\n      this.element.offsetHeight > 0 &&\n      style.display !== 'none' &&\n      style.visibility !== 'hidden'\n    );\n  }\n\n  static deselect(newLink) {\n    Link.updateSelectionClass(newLink || null);\n  }\n\n  static updateSelectionClass(linkToSelect) {\n    Array.from(document.querySelectorAll('a.canopy-selected-link')).forEach(link => link.classList.remove('canopy-selected-link'));\n    if (linkToSelect) linkToSelect.element?.classList.add('canopy-selected-link');\n  }\n\n  static persistLinkSelection(linkToSelect) {\n    Link.persistLinkSelectionInHistory(linkToSelect);\n    Link.persistLinkSelectionInSession(linkToSelect);\n  }\n\n  static selectionPresentInEvent(e) {\n    return e.state && e.state?.linkSelection;\n  }\n\n  static get sessionSelection() {\n    if (Path.url.empty) return null; // initial '/' load will never recall link selection\n\n    let lastSelectionsOfParagraph = JSON.parse(sessionStorage.getItem('lastSelectionsOfParagraph') || '{}');\n    let linkData = lastSelectionsOfParagraph[Path.url.string];\n\n    if (linkData && linkData !== null) {\n      return new Link(linkData);\n    } else {\n      return null;\n    }\n  }\n\n  eraseLinkData() {\n    let lastSelectionsOfParagraph = JSON.parse(sessionStorage.getItem('lastSelectionsOfParagraph') || '{}');\n    if (this.enclosingPath) delete lastSelectionsOfParagraph[this.enclosingPath];\n    sessionStorage.setItem('lastSelectionsOfParagraph', JSON.stringify(lastSelectionsOfParagraph));\n    if (history?.state?.linkSelection) history.state.linkSelection = null;\n  }\n\n  static get historySelection() {\n    if (Path.url.empty) return null; // initial '/' load will never recall link selection\n\n    if (history?.state?.linkSelection) {\n      return new Link(history.state.linkSelection);\n    } else {\n      return null;\n    }\n  }\n\n  static get savedSelection() {\n    return this.historySelection;// || this.sessionSelection || null;\n  }\n\n  static get selection() {\n    let selectedLink = document.querySelector('a.canopy-selected-link');\n    if (selectedLink) {\n      return new Link(selectedLink);\n    } else {\n      return null;\n    }\n  }\n\n  static persistLinkSelectionInHistory(link) {\n    // This has to be static because Link.selection hasn't always updated\n    // between when a new link is selected and when we want to persist that selection\n    history.replaceState(\n      link && { linkSelection: link.metadata } || null,\n      document.title,\n      window.location.href\n    );\n  }\n\n  static pushHistoryState(link) {\n    if (!link) return;\n\n    history.pushState(\n      { linkSelection: link.metadata },\n      document.title,\n      window.location.origin + link.previewPath.productionPathString\n    );\n  }\n\n  static current() {\n    throw new Error(\"Link#current does not exist, try Link#selection\");\n  }\n\n  static persistLinkSelectionInSession(link) {\n    if (link) {\n      let lastSelectionsOfParagraph = JSON.parse(sessionStorage.getItem('lastSelectionsOfParagraph') || '{}');\n      lastSelectionsOfParagraph[link.enclosingParagraph.path] = link.metadata;\n      sessionStorage.setItem('lastSelectionsOfParagraph', JSON.stringify(lastSelectionsOfParagraph));\n      //console.log('Storing', link?.childSubtopic?.mixedCase, 'as session selection for', link.enclosingParagraph.path.string)\n    }\n  }\n\n  static lastSelectionOfParagraph(paragraph) {\n    let lastSelectionsOfParagraph = JSON.parse(sessionStorage.getItem('lastSelectionsOfParagraph') || '{}');\n    if (lastSelectionsOfParagraph[paragraph.path]) {\n      return new Link(lastSelectionsOfParagraph[paragraph.path]);\n    }\n  }\n\n  get isLastSelection() {\n    return Link.lastSelectionOfParagraph(this.enclosingParagraph)?.equals(this); // trigger DOM check\n  }\n\n  static get visible() {\n    return Array.from(document.querySelectorAll('.canopy-selectable-link'))\n      .map(element => Link.for(element))\n      .filter(link => link.isVisible)\n  }\n\n  static get onPage() {\n    return Array.from(document.querySelectorAll('.canopy-selectable-link'))\n      .map(element => Link.for(element))\n      .filter(link => link.onPage)\n  }\n\n  static for(arg) {\n    return new this(arg);\n  }\n\n  static from(arg) {\n    return new this(arg);\n  }\n}\n\nexport default Link;\n","import Path from 'models/path';\nimport Link from 'models/link';\nimport { canopyContainer } from 'helpers/getters';\nimport ScrollableContainer from 'helpers/scrollable_container';\nimport Topic from '../../cli/shared/topic';\n\nclass Paragraph {\n  // A paragraph instance represents a visible paragraph, not\n  // specifically the DOM element of type paragraph.\n  //\n  // Visible paragraphs in the UI are created with a section element\n  // that has a paragraph element child.\n  //\n  // paragraph.sectionElement returns the section element, whereas\n  // paragraph.paragraphElement returns the paragraph element.\n\n  constructor(sectionElement) {\n    if (!sectionElement || sectionElement.tagName !== 'SECTION' ) throw new Error(\"Paragraph instantiation requires section element\");\n    if (!sectionElement.classList.contains('canopy-section')) throw new Error(\"Paragraph class requires Canopy section element\");\n    this.sectionElement = sectionElement;\n    // this.parentNode = sectionElement.parentNode;\n    this.transferDataset();\n\n    let existingParagraph = Paragraph.byPath(this.sectionElement.dataset.pathString);\n    if (existingParagraph) return existingParagraph;\n  }\n\n  static from(sectionElement) {\n    return new this(sectionElement);\n  }\n\n  equals(otherParagraph) {\n    if (!otherParagraph) return false;\n    return this.sectionElement === otherParagraph.sectionElement;\n  }\n\n  allocateSpace() {\n    this.sectionElement.style.display = 'block';\n    this.sectionElement.style.opacity = '0%';\n  }\n\n  display() {\n    this.sectionElement.style.display = 'block';\n    this.sectionElement.style.opacity = '100%';\n\n    // Fixes firefox unicode bug\n    this.paragraphElement.style.unicodeBidi = 'unset';\n    requestAnimationFrame(() => {\n      this.paragraphElement.style.unicodeBidi = 'plaintext';\n    });\n  }\n\n  get element() {\n    throw new Error(\"Depreciated in favor of #sectionElement property\");\n  }\n\n  transferDataset() { // This is so we can more easily debug in the console\n    this._topicName = this.sectionElement.dataset.topicName;\n    this._subtopicName = this.sectionElement.dataset.subtopicName;\n    this._pathString = this.sectionElement.dataset.pathString;\n    this.pathDepth = Number(this.sectionElement.dataset.pathDepth);\n  }\n\n  get isVisible() {\n    return window.getComputedStyle(this.sectionElement).display !== 'none';\n  }\n\n  get isFocused() {\n    if (!this.element) return null;\n    const rect = this.element.getBoundingClientRect();\n\n    // Get the viewport height\n    const viewportHeight = ScrollableContainer.visibleHeight;\n\n    const topLimit = viewportHeight * 0.1;\n    const bottomLimit = viewportHeight * 0.5;\n\n    const topInRange = rect.top > topLimit;\n    const bottomInRange = rect.top < bottomLimit;\n\n    return topInRange && bottomInRange;\n  }\n\n  get topic () {\n    return Topic.fromMixedCase(this.sectionElement.dataset.topicName);\n  }\n\n  get subtopic () {\n    return Topic.fromMixedCase(this.sectionElement.dataset.subtopicName);\n  }\n\n  get topicName() {\n    throw new Error(\"Depreciated in favor of #topic\");\n  }\n\n  get subtopicName() {\n    throw new Error(\"Depreciated in favor of #subtopic\");\n  }\n\n  get paragraphElement() {\n    let paragraphElement = Array.from(this.sectionElement.childNodes).\n      find((element) => element.tagName === 'P');\n\n    if (!paragraphElement) throw new Error(\"Paragraph has no paragraph element\");\n    return paragraphElement;\n  }\n\n  get path() {\n    return new Path(this.sectionElement.dataset.pathString);\n  }\n\n  get literalPath() {\n    return Path.forSegment(this.topic, this.subtopic);\n  }\n\n  get topicPath() {\n    return this.path.lastSegment.firstTopicPath;\n  }\n\n  get pathDown() { // path from the paragraph down the page\n    return this.path.slice(this.pathDepth);\n  }\n\n  get links() {\n    if (this.linkObjects) return this.linkObjects;\n    let linkElements = this.paragraphElement.querySelectorAll('a.canopy-selectable-link');\n    this.linkObjects = Array.from(linkElements).map((element) => new Link(element));\n    return this.linkObjects;\n  }\n\n  get linkElements() {\n    return Array.from(this.paragraphElement.querySelectorAll('.canopy-selectable-link'));\n  }\n\n  get firstLink() {\n    return this.links[0] || null;\n  }\n\n  nthLink(n) {\n    return this.links[n] || null;\n  }\n\n  get lastLink() {\n    return this.links[this.links.length - 1] || null;\n  }\n\n  get previousLink() {\n    return Link.lastSelectionOfParagraph(this);\n  }\n\n  get isRoot() {\n    return this.sectionElement.parentNode === canopyContainer\n  }\n\n  get hasLinks() {\n    return this.links.length > 0;\n  }\n\n  linkBySelector(callback) {\n    return this.links.find(callback);\n  }\n\n  linksBySelector(callback) {\n    return this.links.filter(callback);\n  }\n\n  linkByChild(givenTopic, givenSubtopic) {\n    return this.linkBySelector(\n      (link) =>\n        (link.isGlobal && link.childTopic.caps === givenTopic?.caps) ||\n        (link.isLocal && link.targetSubtopic.caps === givenSubtopic?.caps)\n    );\n  }\n\n  get parentLink() {\n    if (this.parentNode === canopyContainer) { return null; } // with shadow dom can't assume section element is attached\n\n    if (this.parentParagraph.linkElements.includes(Link.selection?.element) && Link.selection?.childParagraph?.equals(this)) {\n      return Link.selection; // when selected link is path reference and so is one of the open links also\n    }\n\n    // if paragraph is subtopic, parent link must be local reference in parent\n    if (!this.isTopic) {\n      return this.parentParagraph.links.find(link => link.isLocal && link.targetSubtopic.caps === this.subtopic.caps);\n    }\n\n    // if there are multiple global links beginning with the given topic, prefer the last selection\n    let lastSelectionOfParent = Link.lastSelectionOfParagraph(this.parentParagraph);\n    if (this.parentLinks.length > 1 && lastSelectionOfParent && this.parentLinks.find(l => l.equals(lastSelectionOfParent))) {\n      return lastSelectionOfParent;\n    }\n\n    // if one of the potential parents is a simple global reference, prefer that over a longer path\n    let simpleGlobalParent = this.parentParagraph && this.parentParagraph.links.find(\n      link => link.isGlobal &&\n        link.literalPath.length === 1 &&\n        link.childTopic.caps === this.topic.caps &&\n        link.childSubtopic.caps === this.topic.caps\n    );\n    if (simpleGlobalParent) return simpleGlobalParent;\n\n    // otherwise pick the first matching link\n    return this.parentParagraph && this.parentParagraph.links.find(\n      link => link.isGlobal && link.childTopic.caps === this.topic.caps\n    );\n  }\n\n  get parentLinks() {\n    if (this.sectionElement.parentNode === canopyContainer) { return null; }\n\n    return this.parentParagraph.linksBySelector(\n      (link) =>\n        (link.isGlobal && link.childTopic.caps === this.topic.caps) ||\n        (link.isLocal && link.targetSubtopic.caps === this.subtopic.caps)\n    );\n  }\n\n  get displayTopicName() {\n    return this.sectionElement.dataset.displayTopicName;\n  }\n\n  get parentParagraph() {\n    if (this.parentNode && this.parentNode.tagName === 'SECTION') return Paragraph.for(this.parentNode);\n\n    if (this.sectionElement) {\n      let parentElement = this.sectionElement?.parentNode?.closest('.canopy-section');\n      return parentElement ? new Paragraph(parentElement) : null;\n    } else {\n      return null;\n    }\n  }\n\n  get topicParagraph() {\n    if (this.isTopic) {\n      return this;\n    } else {\n      let topicParagraph = this.sectionElement.parentNode.closest('.canopy-topic-section');\n      if (!topicParagraph) throw new Error('Missing topic paragraph');\n      return new Paragraph(topicParagraph);\n    }\n  }\n\n  get isTopic() {\n    return this.topic.mixedCase === this.subtopic.mixedCase;\n  }\n\n  get isInDom() {\n    return !!this.sectionElement.closest('div#_canopy');\n  }\n\n  get isBig() {\n    let paragraphPercent = this.paragraphElement.offsetHeight / ScrollableContainer.visibleHeight;\n    return paragraphPercent > .75;\n  }\n\n  get fits() {\n    let paragraphPercent = this.paragraphElement.offsetHeight / ScrollableContainer.visibleHeight;\n    return paragraphPercent < .8;\n  }\n\n  get top() {\n    return this.paragraphElement.getBoundingClientRect().top;\n  }\n\n  get bottom() {\n    return this.paragraphElement.getBoundingClientRect().bottom;\n  }\n\n  get positionOnViewport() {\n    if (!this.paragraphElement) return null;\n\n    const rect = this.element.getBoundingClientRect();\n    const viewportHeight = ScrollableContainer.visibleHeight;\n    const elementTop = rect.top;\n\n    if (elementTop < 0) return -1;\n    if (elementTop > viewportHeight) return Infinity;\n\n    // Calculate the percentage of the viewport the element's top is at\n    const percentageInView = (elementTop / viewportHeight) * 100;\n\n    return percentageInView;\n  }\n\n  static get selection() {\n    return Paragraph.current;\n  }\n\n  static get current() {\n    let sectionElement = document.querySelector('.canopy-selected-section');\n    if (sectionElement) {\n      return new Paragraph(sectionElement);\n    } else {\n      return null;\n    }\n  }\n\n  addSelectionClass() {\n    this.sectionElement.classList.add('canopy-selected-section');\n  }\n\n  scrollComplete() {\n    this.sectionElement.classList.add('canopy-scroll-complete');\n  }\n\n  static get root() {\n    let path = Path.current.firstTopicPath;\n    return path.paragraph;\n  }\n\n  static containingLink(link) {\n    if (!(link instanceof Link)) throw new Error(\"Must provide link instance argument\");\n    let sectionElement = link.element.parentNode.closest('.canopy-section');\n    return new Paragraph(sectionElement);\n  }\n\n  static get visible() {\n    let path = Path.rendered;\n    let paragraphs = [];\n\n    while (path) {\n      paragraphs.push(path.paragraph);\n      path = path.parentPath;\n    }\n\n    return paragraphs;\n  }\n\n  static atY(integerY) {\n    return Paragraph.visible.reduce((bestParagraph, currentParagraph) => {\n      if (bestParagraph.top < integerY && bestParagraph.bottom > integerY) return bestParagraph;\n      if (currentParagraph.top < integerY && currentParagraph.bottom > integerY) return currentParagraph;\n      return Math.abs(bestParagraph.top - integerY) < Math.abs(currentParagraph.top - integerY) ? bestParagraph : currentParagraph;\n    });\n  }\n\n  // Shadow DOM\n  static paragraphsByPath = {};\n  static byPath(pathString) {\n    if (!pathString) return null;\n    if (pathString instanceof Path) pathString = pathString.pathString;\n    return this.paragraphsByPath[pathString];\n  }\n\n  removeFromDom() {\n    this.sectionElement.parentNode.removeChild(this.sectionElement);\n  }\n\n  addToDom() {\n    if (!this.parentNode) throw new Error('Every sectionElement must have parentNode');\n    this.parentNode.appendChild(this.sectionElement); // attach bottom up so added to the DOM all at once.\n    if (this.parentParagraph) this.parentParagraph.addToDom(); // recurse\n    if (this.path.isTopic) return canopyContainer.appendChild(this.sectionElement); // base\n  }\n\n  static registerNode(sectionElement) {\n    let paragraph = Paragraph.byPath(sectionElement.dataset.pathString) || Paragraph.for(sectionElement);\n    Paragraph.paragraphsByPath[sectionElement.dataset.pathString] = paragraph;\n  }\n\n  static registerChild(childElement, parentElement) {\n    Paragraph.registerNode(childElement);\n    let childParagraph = Paragraph.byPath(childElement.dataset.pathString)\n    childParagraph.parentNode = parentElement; // including canopyContainer, to reassemble DOM later\n  }\n\n  static registerSubtopics(sectionElement) { // take a rendered tree and register all nodes and adjacencies\n    Array.from(sectionElement.querySelectorAll('.canopy-section'))\n      .forEach(sectionElement => {\n        Paragraph.registerNode(sectionElement)\n        Paragraph.registerChild(sectionElement, sectionElement.parentNode);\n      })\n  }\n\n  static detachSubtopics(sectionElement) { // separate the subtopics from parents until attached to DOM\n    Array.from(sectionElement.querySelectorAll('.canopy-section'))\n      .forEach(sectionElement => {\n        sectionElement.parentNode.removeChild(sectionElement);\n      })\n  }\n\n  static get all() {\n    return Array.from(document.querySelectorAll('.canopy-section')).map(sectionElement => Paragraph.for(sectionElement));\n  }\n\n  static get focused() {\n    return Paragraph.atY(ScrollableContainer.visibleHeight * 0.3 + ScrollableContainer.currentScroll);\n  }\n\n  static get contentLoaded() {\n    return !!document.querySelector('h1.canopy-header'); // this is a proxy for whether the first render has occured yet\n  }\n\n  static for(element) {\n    if (Paragraph.byPath(element.dataset.pathString)) return Paragraph.byPath(element.dataset.pathString);\n    return new Paragraph(element);\n  }\n}\n\nexport default Paragraph;\n","import { defaultTopic, canopyContainer, projectPathPrefix, hashUrls } from 'helpers/getters';\nimport Paragraph from 'models/paragraph';\nimport Link from 'models/link';\nimport Topic from '../../cli/shared/topic';\nimport updateView from 'display/update_view';\n\nclass Path {\n  constructor(argument) {\n    if (!argument) {\n      this.pathArray = [];\n    } else if (Array.isArray(argument)) {\n      if (argument.length === 0) {\n        this.pathArray = [];\n      } else {\n        this.pathArray = argument.slice();\n        Path.validatePathArray(this.array);\n      }\n      this.pathString = Path.arrayToString(this.array);\n    } else if (typeof argument === 'string' || argument instanceof String) {\n      this.pathArray = Path.stringToArray(argument);\n      this.pathString = Path.arrayToString(this.array); // array formation removes invalid segments so we reform the string\n    }\n  }\n\n  get length() {\n    if (!this.pathArray[0]) {\n      return 0;\n    } else {\n      return this.pathArray.length;\n    }\n  }\n\n  static stringToArrayCache = {};\n\n  static stringToArray(pathString) {\n    if (typeof pathString !== 'string') throw new Error(\"Function requires string argument\");\n    if (this.stringToArrayCache.hasOwnProperty(pathString)) return this.stringToArrayCache[pathString];\n\n    if (pathString === '/') {\n      return [];\n    }\n\n    let slashSeparatedUnits = pathString\n      .replace(/%5C%5C(%23|#)|%5C(%23|#)|(%23|#)/g, match => {\n        if (match.startsWith('%5C%5C')) return '%5C%5C#'; // this is a name-character escaped backslash followed by path-#\n        if (match.startsWith('%5C')) return '%5C#'; // this is a name-character #\n        return '#'; // # or %23 are path-#\n      })\n      .split('/')\n      .filter((string) => string !== '');\n\n    slashSeparatedUnits = Path.fixOrphanSubtopics(pathString, slashSeparatedUnits);\n\n    let array = slashSeparatedUnits.map((segmentString) => {\n      let [topic, subtopic] = Topic.parseUrlSegment(segmentString);\n      return [topic, subtopic || topic];\n    }).filter(segment => segment[0]);\n\n    this.stringToArrayCache[pathString] = array;\n\n    return array;\n  }\n\n  static arrayToString(array) {\n    if (!Array.isArray(array)) throw new Error('Argument must be array');\n\n    if (Array.isArray(array) && array.length === 0) {\n      return '/';\n    }\n\n    if (!Array.isArray(array[0])) {\n      throw new Error('Path array must be two-dimensional array');\n    }\n\n    let pathString = '/';\n\n    pathString += array.map(([topic, subtopic]) => {\n      let pathSegmentString = topic.url;\n      if (subtopic && subtopic.url !== topic.url) {\n        pathSegmentString += \"#\" + subtopic.url;\n      }\n      return pathSegmentString;\n    }).join('/');\n\n    return pathString;\n  }\n\n  equals(otherPath) {\n    if (!otherPath) return false;\n    return this.string === otherPath.string;\n  }\n\n  isIn(otherPath) { // is otherPath a subpath of this\n    if (!otherPath) return false;\n    if (this.equals(otherPath)) return true;\n    if (otherPath.isTopic) return false;\n    if (this.visitsTopicNotIn(otherPath)) return false // trying to figure it out before DOM is rendered\n    return this.isIn(otherPath?.paragraph?.parentParagraph.path);\n  }\n\n  visitsTopicNotIn(otherPath) {\n    return this.topicStringArray.some(topic => !otherPath.topicStringArray.includes(topic));\n  }\n\n  includes(otherPath) {\n    return otherPath.isIn(this);\n  }\n\n  includesTopic(topic) {\n    return this.pathArray.find(([currentTopic, _]) => {\n      return topic.mixedCase === currentTopic.mixedCase;\n    });\n  }\n\n  get array() {\n    return this.pathArray;\n  }\n\n  get string() {\n    return this.pathString;\n  }\n\n  get empty() {\n    return !this.array[0];\n  }\n\n  slice() {\n    return new this.constructor(this.pathArray.slice.call(this.pathArray, ...arguments));\n  }\n\n  sliceAfterLastTopicInstance(topic) {\n    return new this.constructor(this.pathArray.slice(0, this.pathArray.findLastIndex(([t]) => t.mixedCase === topic.mixedCase) + 1)); // after\n  }\n\n  sliceBeforeLastTopicInstance(topic) {\n    return new this.constructor(this.pathArray.slice(0, this.pathArray.findLastIndex(([t]) => t.mixedCase === topic.mixedCase))); // after\n  }\n\n  get segments() {\n    return this.pathArray;\n  }\n\n  get firstTopic() {\n    if (this.empty) return null;\n    return this.pathArray[0][0];\n  }\n\n  get firstTopicPath() {\n    return this.constructor.forSegment(this.pathArray[0][0], this.pathArray[0][0]);\n  }\n\n  get lastTopic() {\n    return this.lastSegment.topic;\n  }\n\n  get topic() {\n    return this.lastSegment.array[0]?.[0];\n  }\n\n  get firstSubtopic() {\n    if (this.empty) return null;\n    return this.pathArray[0][1];\n  }\n\n  get lastSubtopic() {\n    return this.lastSegment.firstSubtopic;\n  }\n\n  get secondTopic() {\n    return this.pathArray[1] && this.pathArray[1][0];\n  }\n\n  get secondSubtopic() {\n    return this.pathArray[1] && this.pathArray[1][1];\n  }\n\n  get firstSegment() {\n    return new this.constructor(this.pathArray.slice(0, 1));\n  }\n\n  get lastSegment() {\n    return new this.constructor(this.pathArray.slice(-1));\n  }\n\n  get withoutFirstSegment() {\n    return new this.constructor(this.pathArray.slice(1));\n  }\n\n  get withoutLastSegment() {\n    return new this.constructor(this.pathArray.slice(0, -1));\n  }\n\n  get withoutLastSubtopic() {\n    return new this.constructor(this.pathArray.slice(0, -1)).append(Path.forTopic(this.lastTopic));\n  }\n\n  endsWith(otherPath) {\n    // Check if there is at least one segment at the end of both paths that matches.\n    const thisLength = this.pathArray.length;\n    const otherLength = otherPath.pathArray.length;\n\n    // If the other path is longer, it cannot be at the end of this path.\n    if (otherLength > thisLength) {\n      return false;\n    }\n\n    // Compare the segments starting from the end of both paths.\n    for (let i = 1; i <= otherLength; i++) {\n      const [thisTopic, thisSubtopic] = this.pathArray[thisLength - i];\n      const [otherTopic, otherSubtopic] = otherPath.pathArray[otherLength - i];\n\n      if (\n        thisTopic.mixedCase !== otherTopic.mixedCase ||\n        thisSubtopic.mixedCase !== otherSubtopic.mixedCase\n      ) {\n        return false;\n      }\n    }\n\n    return true; \n  }\n\n  get isTopic() {\n    return this.pathArray.length === 1 && this.pathArray[0][0].mixedCase === this.pathArray[0][1].mixedCase;\n  }\n\n  get parentPath() {\n    return this.paragraph?.parentParagraph?.path;\n  }\n\n  get parentLink() {\n    return this.paragraph?.parentLink;\n  }\n\n  firstParentLink() {\n    return this.firstTopicPath.intermediaryPathsTo(this)[1].parentLink;\n  }\n\n  get nextLink() {\n    return this.paragraph?.firstLink || this.paragraph?.parentLink;\n  }\n\n  forEach(callback) {\n    this.array.forEach(callback);\n  }\n\n  clone() {\n    return new Path(this.array.slice());\n  }\n\n  get pageTitle() {\n    if (this.firstTopic.mixedCase !== this.lastTopic.mixedCase) {\n      return this.firstTopic.mixedCase + ': ' + this.lastTopic.mixedCase;\n    } else {\n      return this.firstTopic.mixedCase;\n    }\n  }\n\n  get cycle() {\n    let cycle = null;\n\n    this.array.forEach((selectedSegment, selectedIndex) => {\n      this.array.forEach((currentSegment, currentIndex) => {\n        if (selectedSegment[0].mixedCase === currentSegment[0].mixedCase && selectedIndex < currentIndex) {\n          cycle = {\n            start: selectedIndex,\n            end: currentIndex\n          };\n        }\n      });\n    });\n\n    return cycle;\n  }\n\n  reduce() {\n    const cycle = this.cycle;\n    let resultPath;\n\n    // console.log(this.cycle)\n\n    if (cycle) {\n      const pathWithoutCycle = [\n        ...this.array.slice(0, cycle.start),\n        ...this.array.slice(cycle.end)\n      ];\n      resultPath = new Path(pathWithoutCycle);\n    } else {\n      resultPath = this.clone();\n    }\n\n    return resultPath;\n  }\n\n  get containsBackCycle() {\n    return this.reduce().subsetOf(this);\n  }\n\n  get containsForwardCycle() {\n    return this.cycle && !this.containsBackCycle;\n  }\n\n  static introducesNewCycle(parentPath, literalPath) {\n    if (literalPath.reduce().length < literalPath.length) return true; // unlikely but technically this introduces cycle\n\n    let parentPathTopicStrings = parentPath.topicArray.map(t => t.mixedCase); // we only want a cycle not already in parentPath\n    let targetPathTopicStrings = literalPath.topicArray.map(t => t.mixedCase);\n    return parentPathTopicStrings.some((enclosingTopicString) => {\n      return targetPathTopicStrings.some((targetTopicString) => {\n        return enclosingTopicString === targetTopicString; //&&\n          //!(parentPath.equals(parentPath.append(literalPath).reduce()))// Reject A/B/C -> C or A/B/C/C -> C, where reduction equals current path producing no-op\n      });\n    });\n  }\n\n  initialOverlap(otherPath) {\n    if (this.empty || otherPath.empty) return null;\n    if (this.firstTopic.mixedCase !== otherPath.firstTopic.mixedCase) return null;\n    let candidatePath = otherPath;\n\n    while (!candidatePath.isTopic) {\n      if (this.includes(candidatePath)) return candidatePath;\n      if (!candidatePath.parentPath) throw new Error(`Undefined parent path for ${candidatePath}`);\n      candidatePath = candidatePath.parentPath;\n    }\n\n    return candidatePath;\n  }\n\n  initialPartialOverlap(otherPath) { // an overlap that is not a subset or equivalence\n    return this.initialOverlap(otherPath)\n      && !this.equals(otherPath)\n      && !this.subsetOf(otherPath)\n      && !otherPath.subsetOf(this);\n  }\n\n  overlaps(otherPath) {\n    return this.topicArray.some(t1 => otherPath.topicArray.some(t2 => t1.mixedCase === t2.mixedCase));\n  }\n\n  twoStepChange(otherPath) {\n    return this.initialPartialOverlap(otherPath);\n  }\n\n  fulcrumLink(otherPath) { // parent link of first paragraph of otherPath under overlap paragraph\n    if (this.includes(otherPath)) return otherPath.initialOverlapAndFirstChild(this).parentLink;\n    return this.initialOverlapAndFirstChild(otherPath).parentLink;\n  }\n\n  initialOverlapAndFirstChild(otherPath) { // path of \"this\" plus first subtopic not in otherPath, to get parent link\n    if (this.includes(otherPath)) return null; // this function assumes we are going down from \"this\" to \"otherPath\"\n    let overlapPath = this.initialOverlap(otherPath);\n    return overlapPath.intermediaryPathsTo(otherPath)[1];\n  }\n\n  subsetOf(otherPath) { // this is subset of otherPath\n    return otherPath.includes(this) &&\n      !this.equals(otherPath); // unlike #includes, which accepts a self-match\n  }\n\n  intermediaryPathsTo(otherPath) {\n    let result = [];\n    let bufferPath = otherPath.clone();\n\n    while(bufferPath && !this.equals(bufferPath)) {\n      result.unshift(bufferPath);\n      bufferPath = bufferPath.parentPath;\n    }\n\n    result.unshift(this);\n\n    return result;\n  }\n\n  get includedParagraphs() {\n    let result = [];\n    let currentParagraph = this.paragraph;\n    while (currentParagraph) {\n      result.push(currentParagraph);\n      currentParagraph = currentParagraph.parentParagraph;\n    }\n\n    return result;\n  }\n\n  childOf(otherPath) { // this is child of otherPath\n    return this.parentPath?.equals(otherPath);\n  }\n\n  parentOf(otherPath) { // this is parent of otherPath\n    return otherPath.parentPath?.equals(this);\n  }\n\n  display(options = {}) {\n    if (options?.newTab) return window.open(location.origin + this.string, '_blank');\n    if (this.empty) return console.error('Cannot display empty path');\n    if (options.options) throw 'Caller produced malformed options object';\n\n    return updateView(this, null, options);\n  }\n\n  selectALink(options = {}) {\n    return this.display({ renderOnly: true}).then(() => (this.paragraph.firstLink || this.paragraph.parentLink).select(options));\n  }\n\n  addSegment(topic, subtopic) {\n    if (this.empty) return new Path([[topic, subtopic]]);\n    return new Path(this.array.concat([[topic, subtopic]]));\n  }\n\n  append(otherPath) {\n    return new Path(this.string + '/' + otherPath.string);\n  }\n\n  replaceTerminalSubtopic(newSubtopic) {\n    if (this.length === 0) return this;\n    let lastSegment = this.lastSegment;\n    return this.withoutLastSegment.addSegment(lastSegment.firstTopic, newSubtopic);\n  }\n\n  get removeTerminalSubtopic() {\n    if (this.length === 0) return this;\n    let lastSegment = this.lastSegment;\n    return this.withoutLastSegment.addSegment(lastSegment.firstTopic, lastSegment.firstTopic);\n  }\n\n  toString() {\n    return this.string;\n  }\n\n  get topicArray() {\n    return this.array.map(([topic]) => topic);\n  }\n\n  get topicStringArray() {\n    return this.array.map(([topic]) => topic.mixedCase);\n  }\n\n  get sectionElement() {\n    return Path.elementAtRelativePath(this, canopyContainer);\n  }\n\n  get paragraph() {\n    if (Paragraph.byPath(this)) return Paragraph.byPath(this);\n    if (this.length === 0) return null;\n\n    if (this.sectionElement) {\n      return new Paragraph(this.sectionElement);\n    } else {\n      return null;\n    }\n  }\n\n  get paragraphElement() {\n    return this.paragraph.paragraphElement;\n  }\n\n  get parentParagraph() {\n    return this.paragraph.parentParagraph;\n  }\n\n  get present() {\n    return !!this.array[0];\n  }\n\n  static get default() {\n    let topic = Topic.for(defaultTopic());\n    return new Path([[topic, topic]]);\n  }\n\n  static get root() {\n    return Path.url.firstTopicPath;\n  }\n\n  static get current() {\n    return Path.rendered || Path.url;\n  }\n\n  static get rendered() {\n    return Paragraph.selection?.path;  // the user may have just changed the URL, and we want to know what the current path rendered is\n  }\n\n  static get url() {\n    let pathString = window.location.href.slice(window.location.origin.length)\n\n    if (projectPathPrefix && pathString.indexOf(`/${projectPathPrefix}`) === 0) {\n      pathString = pathString.slice(projectPathPrefix.length + 1); // remove prefix and leading slash\n    }\n\n    if (pathString.indexOf('/#') === 0) pathString = pathString.slice(2);  // remove hash sign plus leading slash\n\n    return new Path(pathString);\n  }\n\n  static get initial() {\n    if (Path.url.present && Link.savedSelection) { // page doesn't exist yet so can't validate selection\n      return Link.savedSelection.previewPath;\n    } else if (Path.url.empty) {\n      return Path.default;\n    } else {\n      return Path.url;\n    }\n  }\n\n  static connectingLinkValid(parentElement, pathToAppend) {\n    if (!parentElement) throw new Error('Parent element required');\n    if (!(pathToAppend instanceof Path)) throw new Error('pathToAppend must be a Path object');\n\n    if (parentElement === canopyContainer) return true;\n\n    let parentParagraph = new Paragraph(parentElement);\n    if (!parentParagraph.linkByChild(pathToAppend.firstTopic)) { // this can happen eg if a live project is edited eg a-> [c->] b\n      console.error(`Parent element [${parentParagraph.topic.mixedCase}, ${parentParagraph.subtopic.mixedCase}] has no ` +\n        `connecting link to subsequent path segment [${pathToAppend.firstTopic.mixedCase}]`);\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  static elementAtRelativePath(path, rootElement) {\n    if (!(path instanceof Path)) throw new Error('pathToDisplay must be a Path object');\n    rootElement = rootElement || canopyContainer;\n\n    let currentNode = rootElement;\n    let subpath = path;\n    let currentPathDepth = Number(rootElement.dataset.pathDepth || -1);\n\n    for (let i = 0; i < path.length; i++) {\n      currentPathDepth = currentPathDepth + 1;\n      currentNode = currentNode.querySelector(\n        `:scope > ` + // the next topic must be a direct child of the current subtopic, not some other subtopic with the same global link\n        `[data-topic-name=\"${subpath.firstTopic.cssMixedCase}\"]` +\n        `[data-subtopic-name=\"${subpath.firstTopic.cssMixedCase}\"]` +\n        `[data-path-depth=\"${currentPathDepth}\"]` +\n        (subpath.firstTopic.mixedCase !== subpath.firstSubtopic.mixedCase ? // only look for a subtopic if the path segment has one\n        ` ` +\n        `[data-topic-name=\"${subpath.firstTopic.cssMixedCase}\"]` +\n        `[data-subtopic-name=\"${subpath.firstSubtopic.cssMixedCase}\"]` +\n        `[data-path-depth=\"${currentPathDepth}\"]` : '')\n      );\n\n      if (!currentNode) return null;\n      subpath = subpath.withoutFirstSegment;\n    }\n\n    if (!currentNode) console.log('element at relative path', path, rootElement, currentNode);\n\n    if (currentNode === canopyContainer) return null;\n\n    return currentNode;\n  }\n\n  static setPath(newPath, options = {}) {\n    if (!(newPath instanceof Path)) throw new Error('newPath must be Path object');\n    if (options.popState) return; // the URL has already changed\n\n    let oldPath = Path.url;\n    let documentTitle = newPath.lastTopic.mixedCase;\n\n    let replaceHistoryState = Path.url.empty || newPath.equals(oldPath); // either the old one is bad or the new one is the same\n    if (options.pushHistoryState) replaceHistoryState = false;\n    if (options.replaceHistoryState) replaceHistoryState = true;\n\n    let historyApiFunction = replaceHistoryState ? replaceState : pushState;\n    let fullPathString = newPath.productionPathString;\n\n    historyApiFunction(\n      history.state, // this will be changed via Link#persistInHistory\n      documentTitle,\n      fullPathString\n    );\n\n    function replaceState(a, b, c) {\n      history.replaceState(a, b, c);\n    }\n\n    function pushState(a, b, c) {\n      history.pushState(a, b, c);\n    }\n  }\n\n  get productionPathString() {\n    let productionPathString = '';\n\n    if (projectPathPrefix) productionPathString += `/${projectPathPrefix}`;\n\n    if (hashUrls) productionPathString += '/#';\n\n    return productionPathString + this.pathString;\n  }\n\n  static fixOrphanSubtopics(pathString, slashSeparatedUnits) {\n    // Sometimes browsers insert forward slashes before the first pound sign which we have to remove\n    // eg /Topic/#Subtopic/A#B  -> /Topic#Subtopic/A#B\n\n    if (typeof pathString !== 'string') throw new Error(\"pathString must be a string argument\");\n    if (!Array.isArray(slashSeparatedUnits)) throw new Error('slashSeparatedUnits must be an array');\n\n    if (pathString.match(/\\/#\\w+/)) {\n      for (let i = 1; i < slashSeparatedUnits.length; i++) {\n        if (slashSeparatedUnits[i].match(/^#/)) {\n          if (!slashSeparatedUnits[i - 1].match(/#/)) { // eg /Topic/#Subtopic -> /Topic#Subtopic\n            let newItem = slashSeparatedUnits[i - 1] + slashSeparatedUnits[i];\n            let newArray = slashSeparatedUnits.slice(0, i - 1).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          } else { // eg /Topic#Subtopic/#Subtopic2 -> /Topic#Subtopic/Subtopic2\n            let newItem = slashSeparatedUnits[i].slice(1);\n            let newArray = slashSeparatedUnits.slice(0, i).\n              concat([newItem]).\n              concat(slashSeparatedUnits.slice(i + 1));\n            return newArray;\n          }\n        }\n      }\n    }\n\n    return slashSeparatedUnits;\n  }\n\n  static validatePathArray(array) {\n    array.forEach(tuple => {\n      if (tuple.length !== 2) throw new Error(`Invalid path segment format: ${tuple}`);\n      if (!(tuple[0] instanceof Topic) || !(tuple[1] instanceof Topic)) throw new Error(`Invalid path segment format: ${JSON.stringify(tuple)}`);\n    })\n  }\n\n  static forTopic(topic) {\n    return new this([[topic, topic]]);\n  }\n\n  static forSegment(topic, subtopic) {\n    if (!(topic instanceof Topic && subtopic instanceof Topic)) throw new Error('Argument must be of type Topic');\n    return new this([[topic, subtopic]]);\n  }\n\n  static for(arg) {\n    return new this(arg);\n  }\n\n  static from(arg) {\n    return new this(arg);\n  }\n}\n\nexport default Path;\n","// Take a bulk string and build or rebuilt the #_canopy element.\n\nlet Topic = require('../cli/shared/topic');\nimport REQUEST_CACHE from 'requests/request_cache';\n\nfunction rebuild (bulkFileString) {\n  if (!bulkFileString) throw new Error('No bulk file string given');\n  let canopyContainer = document.querySelector('#_canopy'); // run after DOM set up\n\n  try {\n    Array.from(canopyContainer.children).forEach(child => { // clear old header data\n      if (child.tagName === 'SECTION' || child.tagName === 'H1') {\n        canopyContainer.removeChild(child);\n      }\n    });\n\n    let BulkFileParser = require('../cli/bulk/bulk_file_parser');\n    let bulkFileParser = new BulkFileParser(bulkFileString);\n    let { newFileSet, defaultTopicKey } = bulkFileParser.generateFileSet();\n    let Block = require('../cli/shared/block');\n    defaultTopicKey ||= bulkFileString.split('\\n').map(line => Block.for(line.match(/^\\*?\\*? ?(.*)/)[1]).key).find(key => key);\n    let defaultTopic = Topic.for(defaultTopicKey);\n\n    canopyContainer.dataset.defaultTopic = defaultTopic.mixedCase;\n    canopyContainer.dataset.hashUrls = true;\n    canopyContainer.dataset.projectPathPrefix = canopyContainer.dataset.projectPathPrefix || '';\n\n    let jsonForProjectDirectory = require('../cli/build/components/json_for_project_directory');\n\n    let filesToWrite;\n    ({ filesToWrite } = jsonForProjectDirectory(newFileSet.fileContentsByPath, null, defaultTopicKey));\n\n    for (let key in REQUEST_CACHE) { // Remove old data\n      if (REQUEST_CACHE.hasOwnProperty(key)) {\n        delete REQUEST_CACHE[key];\n      }\n    }\n\n    // Copy new data into the cache\n    Object.keys(filesToWrite).forEach(filePath => {\n      let { displayTopicName } = JSON.parse(filesToWrite[filePath]);\n      REQUEST_CACHE[Topic.for(displayTopicName).mixedCase] = Promise.resolve(JSON.parse(filesToWrite[filePath]));\n    });\n\n    // New data might invalidate old URL\n    let Path = require('models/path').default;\n    let path = Path.for(window.location.hash.slice(2));\n    let firstTopic = path.firstTopic;\n\n    if (firstTopic && !REQUEST_CACHE.hasOwnProperty(firstTopic.mixedCase)) { // URL invalid\n      history.replaceState(null, null, location.pathname + location.search); // clear fragment\n    }\n\n    require('render/fetch_and_render_path').invalidateFetchAndRenderCache();\n    require('models/paragraph').default.paragraphsByPath = {};\n\n    require('./canopy.js');\n\n    if (window.location.hash) {\n      Path.current.display();\n    } else {\n      Path.initial.display({ scrollStyle: 'instant' });\n    }\n  } catch(e) {\n    history.replaceState(null, null, location.pathname + location.search); // clear fragment in case of invalid URL\n    let ScrollableContainer = require('helpers/scrollable_container').default;\n    ScrollableContainer.scrollTo({ top: 0 });\n    throw e;\n  }\n}\n\nexport { rebuild };\n","import Path from 'models/path';\n\nfunction onLinkClick(link) {\n  return (e) => {\n    e.preventDefault();\n    if (textIsSelected()) return // disqualify drags\n\n    let newTab = e.metaKey || e.ctrlKey; // mac vs linux and windows\n\n    if (!newTab && !e.altKey && link.isSelected && !link.isClosedCycle) { // unselect global or path/cycle link\n      return link.parentLink?.select({ scrollDirect: true, noBeforeChangeScroll: true }) || Path.root.display({ scrollDirect: true });\n    }\n\n    if (!newTab && !e.altKey && link.isOpen) { // select open link\n      return link.select({ scrollDirect: true }); // not scrollToParagraph because returning up to parent link\n    }\n\n    if (!newTab && !e.altKey && !link.isVisible) { // scroll up to see link\n      return link.select({ scrollDirect: true }); // not scrollToParagraph because returning up to parent link\n    }\n\n    if (!newTab && !e.altKey && link.isInlinedCycleReference) { // un-inlining an inlined cycle reference\n      return link.select();\n    }\n\n    return link.execute({\n      newTab,\n      redirect: e.altKey,\n      inlineCycles: e.shiftKey,\n      scrollDirect: true,\n      selectALink: false,\n      pushHistoryState: true,\n      scrollToParagraph: true,\n      noBeforeChangeScroll: true, // we don't need to highlight fulcrum if it's being clicked\n      noAfterChangePause: true // either focus on clicked link if above viewport (above), or go straight to target\n    });\n  }\n}\n\nfunction textIsSelected() {\n  const selection = window.getSelection();\n  return selection && selection.rangeCount > 0 && !selection.isCollapsed;\n}\n\nexport { onLinkClick };\n","import { projectPathPrefix } from 'helpers/getters';\nimport REQUEST_CACHE from 'requests/request_cache';\nimport { preloadImages } from 'requests/helpers';\n\nconst requestJson = (topic) => {\n  if (REQUEST_CACHE[topic.mixedCase]) return REQUEST_CACHE[topic.mixedCase];\n\n  let dataPath = (projectPathPrefix ? '/' + projectPathPrefix : '') + '/_data/' + topic.requestFileName + '.json';\n\n  let promise = fetch(dataPath). // to allow preloading JSON from HTML\n    then(res => {\n      return res.json().then((json) => {\n        preloadImages(json);\n        return json;\n      });\n    }).catch(() => {\n      REQUEST_CACHE[topic.mixedCase] = undefined; // in case error is connectivity related & will work again later\n      return Promise.reject(new Error(`Unable to find topic file: \"${topic.requestFileName}\"`));\n    });\n\n  REQUEST_CACHE[topic.mixedCase] = promise;\n\n  return promise;\n}\n\nexport default requestJson;\n","import { canopyContainer } from 'helpers/getters';\n\nfunction preloadImages(parsedJson) {\n  let json = JSON.stringify(parsedJson);\n  canopyContainer.imagePreloadArray = canopyContainer.imagePreloadArray || [];\n\n  const regex = /<img\\s[^>]*?src=\\\\?[\"']([^\"']+?)\\\\?[\"']|resourceUrl\": ?\"([^\"]+)/g;\n\n  [...json.matchAll(regex)].map(m => m[1] || m[2]).forEach(url => {\n    let image = new Image();\n    image.src = url; // this loads and caches the image\n    canopyContainer.imagePreloadArray.push(image); // keep reference to avoid garbage collection\n  });\n}\n\nexport { preloadImages };\n","import Topic from '../../cli/shared/topic';\nimport renderTokenElements from './render_token_element';\n\nfunction generateHeader(topicTokens, displayTopicName) {\n  let topic = new Topic(displayTopicName);\n\n  let previousHeader = document.querySelector(`h1[data-topic-name=\"${topic.cssMixedCase}\"]`);\n  if (previousHeader) return previousHeader;\n\n  let headerElement = document.createElement('h1');\n  headerElement.dataset.topicName = topic.mixedCase;\n  headerElement.style.display = 'none';\n  headerElement.classList.add('canopy-header');\n\n  topicTokens.forEach(token => {\n    let elements = renderTokenElements(token);\n    elements.forEach(element => headerElement.appendChild(element));\n  });\n\n  return headerElement\n}\n\nfunction measureVerticalOverflow(element) {\n  // Get computed font size and font family from the element\n  const computedStyle = window.getComputedStyle(element);\n  const fontSize = parseFloat(computedStyle.fontSize);\n  const fontFamily = computedStyle.fontFamily;\n\n  if (!fontSize || fontSize <= 0) {\n    console.warn('Font size is invalid or zero.');\n    return [0, 0];\n  }\n\n  // Get the text content and split it by lines\n  const textLines = element.textContent.split('\\n');\n\n  // Create a canvas element for rendering\n  const canvas = document.createElement('canvas');\n  // Set the `willReadFrequently` option to true\n  const context = canvas.getContext('2d', { willReadFrequently: true });\n\n  // Set canvas width and height with extra space for any unusual characters\n  canvas.width = fontSize * 10;\n  canvas.height = fontSize * 3; // Triple the font size to ensure ample height\n  context.font = `${fontSize}px ${fontFamily}`;\n  context.textBaseline = 'alphabetic';\n\n  // Measure bounds for the reference \"()\" characters\n  function measureTextBounds(textContent) {\n    context.clearRect(0, 0, canvas.width, canvas.height); // Clear any previous drawings\n    context.fillText(textContent, 0, fontSize * 1.5); // Draw text centered vertically\n\n    const imageData = context.getImageData(0, 0, canvas.width, canvas.height).data;\n    let top = null;\n    let bottom = null;\n\n    for (let y = 0; y < canvas.height; y++) {\n      for (let x = 0; x < canvas.width; x++) {\n        const alpha = imageData[(y * canvas.width + x) * 4 + 3];\n        if (alpha > 0) {\n          if (top === null) top = y;\n          bottom = y;\n          break;\n        }\n      }\n    }\n    return { top, bottom };\n  }\n\n  const referenceBounds = measureTextBounds('()'); // tall but line-fitting characters as benchmark to detect overflow\n  let maxSpaceAbove = 0;\n  let maxSpaceBelow = 0;\n\n  // Measure each line of text\n  for (const line of textLines) {\n    const textBounds = measureTextBounds(line);\n\n    const spaceAbove = referenceBounds.top - textBounds.top > 0 ? referenceBounds.top - textBounds.top : 0;\n    const spaceBelow = textBounds.bottom - referenceBounds.bottom > 0 ? textBounds.bottom - referenceBounds.bottom : 0;\n\n    maxSpaceAbove = Math.max(maxSpaceAbove, spaceAbove);\n    maxSpaceBelow = Math.max(maxSpaceBelow, spaceBelow);\n  }\n\n  return [maxSpaceAbove, maxSpaceBelow];\n}\n\nfunction whenInDom(element) {\n  return function(callback) {\n    if (!element) return console.error('whenInDom received falsey element argument');\n    // Check if the element is already in the DOM\n    if (document.body.contains(element)) {\n      callback();\n    } else {\n      // Reschedule the check after a short delay if the element is not in the DOM\n      setTimeout(() => whenInDom(element)(callback), 1);\n    }\n  };\n}\n\nfunction getCombinedBoundingRect(element) { // taking into consideration relative positioning which native function doesn't do\n  // Initialize the bounds using the element's bounding rect\n  let rect = element.getBoundingClientRect();\n  let combinedRect = { top: rect.top, left: rect.left, bottom: rect.bottom, right: rect.right };\n\n  // Recursively look at all the children\n  Array.from(element.children).forEach(child => {\n    // Get the bounding rect of the child\n    let childRect = child.getBoundingClientRect();\n    \n    // Adjust combined rect to include the child's bounding box\n    combinedRect.top = Math.min(combinedRect.top, childRect.top);\n    combinedRect.left = Math.min(combinedRect.left, childRect.left);\n    combinedRect.bottom = Math.max(combinedRect.bottom, childRect.bottom);\n    combinedRect.right = Math.max(combinedRect.right, childRect.right);\n\n    // Recursively include the child's children\n    let childCombinedRect = getCombinedBoundingRect(child);\n    combinedRect.top = Math.min(combinedRect.top, childCombinedRect.top);\n    combinedRect.left = Math.min(combinedRect.left, childCombinedRect.left);\n    combinedRect.bottom = Math.max(combinedRect.bottom, childCombinedRect.bottom);\n    combinedRect.right = Math.max(combinedRect.right, childCombinedRect.right);\n  });\n\n  // Calculate the width and height of the combined bounding box\n  combinedRect.width = combinedRect.right - combinedRect.left;\n  combinedRect.height = combinedRect.bottom - combinedRect.top;\n\n  // Draw the bounding box visually around the final outer bounding box\n  // drawBoundingBox(combinedRect);\n\n  return combinedRect;\n}\n\nexport { generateHeader, measureVerticalOverflow, whenInDom, getCombinedBoundingRect };\n","import { onLinkClick } from 'render/click_handlers';\nimport Link from 'models/link';\nimport Path from 'models/path';\nimport Topic from '../../cli/shared/topic';\nimport { projectPathPrefix, hashUrls, canopyContainer } from 'helpers/getters';\nimport ScrollableContainer from 'helpers/scrollable_container';\nimport { scrollToWithPromise, getScrollInProgress } from 'display/helpers';\nimport requestJson from 'requests/request_json';\nimport { measureVerticalOverflow, whenInDom, getCombinedBoundingRect } from 'render/helpers';\n\nfunction renderTokenElements(token, renderContext) {\n  if (token.type === 'text') {\n    return renderTextToken(token);\n  } else if (token.type === 'local') {\n    renderContext.localLinkSubtreeCallback(token);\n    return renderLocalLink(token, renderContext);\n  } else if (token.type === 'global') {\n    Path.for(token.pathString).topicArray.map(topic => requestJson(topic)); // eager load\n    return renderGlobalLink(token, renderContext);\n  } else if (token.type === 'disabled_reference') {\n    return renderDisabledLink(token, renderContext);\n  } else if (token.type === 'fragment_reference') {\n    return renderFragmentReference(token, renderContext);\n  } else if (token.type === 'external') {\n    return renderExternalLink(token, renderContext);\n  } else if (token.type === 'image') {\n    return renderImage(token, renderContext);\n  } else if (token.type === 'html_element') {\n    return renderHtmlElement(token, renderContext);\n  } else if (token.type === 'footnote_marker') {\n    return renderFootnoteSymbol(token);\n  } else if (token.type === 'code_block') {\n    return renderCodeBlock(token);\n  } else if (token.type === 'block_quote') {\n    return renderBlockQuote(token, renderContext);\n  } else if (token.type === 'outline') {\n    return renderList(token.topLevelNodes, renderContext);\n  } else if (token.type === 'table') {\n    return renderTable(token, renderContext)\n  } else if (token.type === 'menu') {\n    return renderMenu(token, renderContext)\n  } else if (token.type === 'footnote_lines') {\n    return renderFootnoteLines(token, renderContext);\n  } else if (token.type === 'bold') {\n    return renderBoldText(token, renderContext);\n  } else if (token.type === 'underlined') {\n    return renderUnderlineText(token, renderContext);\n  } else if (token.type === 'italics') {\n    return renderItalicText(token, renderContext);\n  } else if (token.type === 'inline_code') {\n    return renderInlineCodeText(token, renderContext);\n  } else if (token.type === 'tool_tip') {\n    return renderToolTip(token, renderContext);\n  } else {\n    throw `Unhandled token type: ${token.type}`\n  }\n}\n\nfunction renderTextToken(token) {\n  let spans = [];\n\n  if (!token.text.includes('\\n')) {\n    let spanElement = document.createElement('SPAN');\n    spanElement.classList.add('canopy-text-span');\n    spanElement.innerText = token.text;\n    return [spanElement]\n  }\n\n  token.text.split('\\n').forEach((textSegment, index, segments) => {\n    if (textSegment) {\n      let spanElement = document.createElement('SPAN');\n      spanElement.classList.add('canopy-text-span');\n\n      spanElement.innerText = textSegment;\n      spans.push(spanElement);\n    }\n\n    if (index !== segments.length - 1) { // even if no text segment, insert linebreak\n      let lineBreakSpan = document.createElement('SPAN');\n      lineBreakSpan.classList.add('canopy-linebreak-span');\n      spans.push(lineBreakSpan);\n    }\n  });\n\n  return spans;\n}\n\nfunction renderLinkBase(token, renderContext) {\n  let linkElement = document.createElement('a');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n\n  let contentContainer = document.createElement('SPAN');\n  contentContainer.classList.add('canopy-link-content-container');\n  linkElement.appendChild(contentContainer);\n\n  // Append subtoken elements\n  token.tokens.forEach(subtoken => {\n    let subtokenElements = renderTokenElements(subtoken, renderContext);\n    subtokenElements.forEach(subtokenElement => contentContainer.appendChild(subtokenElement));\n  });\n\n  // Prevent dragging for easier text selection in tables\n  linkElement.addEventListener('dragstart', (e) => {\n    e.preventDefault();\n  });\n\n  contentContainer.dir = \"auto\"; // make sure ::after icons are on right side for RTL text\n\n  // Add click event handler\n  let link = new Link(linkElement);\n  let callback = onLinkClick(link);\n  linkElement._CanopyClickHandler = callback;\n  linkElement.addEventListener('click', callback);\n\n  whenInDom(contentContainer)(() => {\n    let [spaceAbove, spaceBelow] = measureVerticalOverflow(contentContainer);\n    if (spaceAbove) contentContainer.style.paddingTop = `${spaceAbove === 0 ? 0 : (spaceAbove + 0)}px`; // naturally more space above\n    if (spaceBelow) contentContainer.style.paddingBottom = `${spaceBelow === 0 ? 0 : (spaceBelow + 2)}px`;\n\n    // Detect if a link wraps over a newline\n    const computedStyle = window.getComputedStyle(linkElement);\n    const lineHeight = parseFloat(computedStyle.lineHeight);\n    const height = linkElement.getBoundingClientRect().height;\n\n    if (height > lineHeight) {\n      linkElement.classList.add('canopy-multiline-link'); // Add class if wrapped\n    }\n  });\n\n  return linkElement;\n}\n\nfunction renderLocalLink(token, renderContext) {\n  let linkElement = renderLinkBase(token, renderContext);\n\n  // Set specific attributes for local links\n  linkElement.classList.add('canopy-local-link');\n  linkElement.dataset.type = 'local';\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.targetTopic = token.targetTopic; // Helpful for debugger\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.targetSubtopic = token.targetSubtopic; // Helpful for debugger\n\n  let targetTopic = new Topic(token.targetTopic);\n  let targetSubtopic = new Topic(token.targetSubtopic);\n  linkElement.href = `${projectPathPrefix ? '/' + projectPathPrefix : ''}${hashUrls ? '/#' : ''}/${targetTopic.url}#${targetSubtopic.url}`;\n\n  return [linkElement];\n}\n\nfunction renderGlobalLink(token, renderContext) {\n  let linkElement = renderLinkBase(token, renderContext);\n\n  // Set specific attributes for global links\n  linkElement.classList.add('canopy-global-link');\n  linkElement.dataset.type = 'global';\n  linkElement.dataset.literalPathString = token.pathString;\n  linkElement.path = token.path; // Helpful for debugger\n  linkElement.href = Path.for(token.pathString).productionPathString;\n\n  let link = new Link(linkElement);\n  if (renderContext.pathToParagraph.overlaps(link.literalPath)) {\n    let cycleIcon = document.createElement('span');\n    cycleIcon.classList.add('canopy-provisional-cycle-icon');\n    cycleIcon.innerText = '↩'\n    linkElement.querySelector('.canopy-link-content-container').appendChild(cycleIcon);\n  }\n  \n  // Add additional class based on link type after delay\n  whenInDom(link.element)(() => {\n    if (!link.element) return;\n    if (!link.element.closest('.canopy-paragraph')) console.error('No paragraph for link', linkElement);\n\n    if (link.cycle) {\n      let cycleIcon = linkElement.querySelector('.canopy-provisional-cycle-icon');\n      cycleIcon.classList.remove('canopy-provisional-cycle-icon');\n\n      if (link.isBackCycle || linkElement.closest('.canopy-menu-cell-left-aligned')) {\n        cycleIcon.classList.add('canopy-back-cycle-icon');\n        cycleIcon.innerText = '↩';\n      } else if (link.isLateralCycle) {\n        cycleIcon.classList.add('canopy-forward-cycle-icon');\n        cycleIcon.innerText = '↪';\n      }\n    }\n  });\n\n  return [linkElement];\n}\n\nfunction renderDisabledLink(token, renderContext) {\n  // Call the helper to create the base link element\n  let linkElement = renderLinkBase(token, renderContext);\n\n  linkElement.classList.remove('canopy-selectable-link'); // not selectable\n\n  // Remove `href` attribute to disable link navigation\n  linkElement.removeAttribute('href');\n\n  // Remove the click event listener to disable interactions\n  if (linkElement._CanopyClickHandler) {\n    linkElement.removeEventListener('click', linkElement._CanopyClickHandler);\n    delete linkElement._CanopyClickHandler;\n  }\n\n  // Add disabled-specific styling and data attributes\n  linkElement.classList.add('canopy-disabled-link');\n  linkElement.dataset.type = 'disabled';\n\n  return [linkElement];\n}\n\nfunction renderFragmentReference(token, renderContext) {\n  let linkElement = document.createElement('a');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.targetTopic = token.targetTopic;\n  linkElement.targetTopic = token.targetTopic; // helpful for debugger\n  linkElement.dataset.targetSubtopic = token.targetSubtopic;\n  linkElement.targetSubtopic = token.targetSubtopic; // helpful to have in debugger\n  linkElement.dataset.enclosingTopic = token.enclosingTopic;\n  linkElement.dataset.enclosingSubtopic = token.enclosingSubtopic;\n  linkElement.dataset.text = token.text;\n\n  token.tokens.forEach(subtoken => {\n    let subtokenElements = renderTokenElements(subtoken, renderContext);\n    subtokenElements.forEach(subtokenElement => linkElement.appendChild(subtokenElement));\n  });\n\n  linkElement.addEventListener('dragstart', (e) => { // make text selection of table cell links easier\n    e.preventDefault();\n  });\n\n  let callback = onLinkClick(new Link(linkElement));\n  linkElement._CanopyClickHandler = callback;\n  linkElement.addEventListener(\n    'click',\n    callback\n  );\n\n  linkElement.classList.add('canopy-local-link');\n  linkElement.dataset.type = 'local';\n\n  let targetTopic = new Topic(token.targetTopic);\n  let targetSubtopic = new Topic(token.targetSubtopic);\n  linkElement.href = `${projectPathPrefix ? '/' + projectPathPrefix : ''}${hashUrls ? '/#' : ''}/${targetTopic.url}#${targetSubtopic.url}`;\n  return [linkElement];\n}\n\nfunction renderExternalLink(token, renderContext) {\n  let linkElement = document.createElement('A');\n  linkElement.classList.add('canopy-external-link');\n  linkElement.classList.add('canopy-selectable-link');\n  linkElement.dataset.type = 'external';\n  linkElement.dataset.text = token.text;\n  linkElement.setAttribute('href', token.url); // validation should have been done at the matcher/token stage\n  linkElement.setAttribute('target', '_blank');\n  linkElement.dataset.targetUrl = token.url;\n\n  whenInDom(linkElement)(() => {\n    if (linkElement.querySelector('img')) linkElement.classList.add('canopy-linked-image');\n  });\n\n  let contentContainer = document.createElement('SPAN');\n  contentContainer.classList.add('canopy-link-content-container');\n  linkElement.appendChild(contentContainer);\n\n  token.tokens.forEach(subtoken => {\n    let subtokenElements = renderTokenElements(subtoken, renderContext);\n    subtokenElements.forEach(subtokenElement => contentContainer.appendChild(subtokenElement));\n  });\n\n  let cycleIcon = document.createElement('span');\n  cycleIcon.classList.add('canopy-external-link-icon');\n  contentContainer.appendChild(cycleIcon);\n\n  return [linkElement];\n}\n\nfunction renderImage(token, renderContext) {\n  // Outer container\n  let outerDivElement = document.createElement('DIV');\n  outerDivElement.classList.add('canopy-image-container');\n\n  // Inner container (existing divElement)\n  let innerDivElement = document.createElement('DIV');\n  innerDivElement.classList.add('canopy-image');\n\n  let imageElement = document.createElement('IMG');\n  imageElement.setAttribute('src', token.resourceUrl);\n  imageElement.setAttribute('decoding', 'async'); // don't wait for image decode to update selected link on change\n\n  innerDivElement.appendChild(imageElement); // Append the image to the inner container\n\n  if (token.title) {\n    imageElement.setAttribute('title', token.title);\n  }\n\n  if (token.caption) {\n    let spanElement = document.createElement('SPAN');\n    spanElement.classList.add('canopy-image-caption');\n    innerDivElement.appendChild(spanElement); // Append the caption to the inner container\n\n    token.tokens.forEach(subtoken => {\n      let subtokenElements = renderTokenElements(subtoken, renderContext);\n      subtokenElements.forEach(subtokenElement => spanElement.appendChild(subtokenElement));\n    });\n  }\n\n  if (token.altText) {\n    imageElement.setAttribute('alt', token.altText);\n  }\n\n  handleDelayedImageLoad(imageElement, renderContext);\n\n  outerDivElement.appendChild(innerDivElement); // Append the inner container to the outer container\n\n  return [outerDivElement]; // Return the outer container\n}\n\nfunction handleDelayedImageLoad(imageElement, renderContext) { // we don't know how big the image will be, and don't want the load to disrupt viewport\n  let originalHeight = imageElement.style.height;\n  let originalOpacity = imageElement.style.opacity;\n  let originalWidth = imageElement.style.width;\n  if (imageElement.closest('.canopy-image')) var originalContainerWidth = imageElement.closest('.canopy-image').style.width;\n\n  imageElement.style.setProperty('height', ScrollableContainer.visibleHeight + 'px'); // big so that content changing doesn't cause flash\n  imageElement.style.setProperty('width', '100%');\n  imageElement.style.setProperty('opacity', '0');\n  if (imageElement.closest('.canopy-image')) imageElement.closest('.canopy-image').style.setProperty('width', '100%');\n\n  setTimeout(() => { // after 200 ms add gray box but not before then to avoid flash\n    if (!imageElement.complete) (imageElement.closest('.canopy-image')||imageElement).style.setProperty('background-color', '#f5f5f5')\n  }, 200)\n\n  imageElement.addEventListener('load', () => { // if images were unloaded, scroll was delayed and so we do it now to avoid viewport jump\n    (getScrollInProgress() || Promise.resolve()).then(() => { // if there is a scroll in progress, wait for it to complete.\n      let focusedElement = ScrollableContainer.focusedElement;\n      let oldBottomOfCurrentParagraph = focusedElement.getBoundingClientRect().bottom;\n\n      imageElement.style.setProperty('height', originalHeight);\n      imageElement.style.setProperty('width', originalWidth);\n      imageElement.style.setProperty('opacity', originalOpacity);\n      if (imageElement.closest('.canopy-image')) imageElement.closest('.canopy-image').style.setProperty('width', originalContainerWidth);\n\n      imageElement.closest('.canopy-image')?.style.setProperty('background-color', 'transparent') // remove gray placeholder\n      let newBottomOfCurrentParagraph = focusedElement.getBoundingClientRect().bottom;\n      let diff = newBottomOfCurrentParagraph - oldBottomOfCurrentParagraph\n      let newScroll = ScrollableContainer.currentScroll + diff;\n\n      let { pathToParagraph } = renderContext;\n      if (Path.current.includes(pathToParagraph)) { // if when the image loads, it is on the current page and might jump the viewport\n        scrollToWithPromise({  // restore old position\n          top: newScroll,\n          behavior: 'instant'\n        });\n      }\n    });\n  });\n}\n\nfunction renderHtmlElement(token, renderContext) {\n  let divElement = document.createElement('DIV');\n  divElement.classList.add('canopy-raw-html');\n\n  let fragment = document.createRange().createContextualFragment(token.html); // make script tags functional\n  divElement.appendChild(fragment);\n\n  Array.from(divElement.querySelectorAll('.canopy-html-insertion')).forEach((placeholderDiv) => {\n      let replacementIndex = placeholderDiv.dataset.replacementNumber;\n      let tokens = token.tokenInsertions[replacementIndex];\n      tokens.forEach(token => {\n        let elements = renderTokenElements(token, renderContext);\n        elements.forEach(element => placeholderDiv.appendChild(element));\n      });\n  });\n\n  [...divElement.querySelectorAll('img')].forEach((imageElement) => { // if the html contains image tags that haven't loaded yet\n    handleDelayedImageLoad(imageElement, renderContext);\n  });\n\n  return [divElement];\n}\n\nfunction renderFootnoteSymbol(token) {\n  let superscriptElement = document.createElement('SUP');\n  let textNode = document.createTextNode(token.text);\n  superscriptElement.appendChild(textNode);\n  return [superscriptElement];\n}\n\nfunction renderCodeBlock(token) {\n  let preElement = document.createElement('PRE');\n  let codeBlockElement = document.createElement('CODE');\n  preElement.appendChild(codeBlockElement);\n\n  codeBlockElement.innerText = token.text;\n  codeBlockElement.classList.add('canopy-code-block')\n\n  return [preElement];\n}\n\nfunction renderBlockQuote(token, renderContext) {\n  let blockQuoteElement = document.createElement('BLOCKQUOTE');\n  blockQuoteElement.setAttribute('dir', token.direction);\n\n  token.tokens.forEach(subtoken => {\n    let subtokenElements = renderTokenElements(subtoken, renderContext);\n    subtokenElements.forEach(subtokenElement => blockQuoteElement.appendChild(subtokenElement));\n  });\n\n  // Clone blockQuoteElement for manipulation\n  let clone = blockQuoteElement.cloneNode(true);\n\n  // Convert all text nodes in the clone to single character spans\n  function wrapEachLetterInSpan(element) {\n    [...element.querySelectorAll('*')].forEach(parentElement => {\n      [...parentElement.childNodes].forEach((node) => {\n        if (node.nodeType === Node.TEXT_NODE && node.textContent.length > 1) {\n          const text = node.textContent;\n          const parent = node.parentNode;\n          const fragment = document.createDocumentFragment();\n          for (let char of text) {\n            const span = document.createElement('span');\n            span.classList.add('canopy-blockquote-character');\n            span.textContent = char;\n            fragment.appendChild(span);\n          }\n\n          parent.replaceChild(fragment, node);\n        }\n      });\n    });\n  }\n\n  wrapEachLetterInSpan(clone);\n\n  let tempSectionElement = new DOMParser().parseFromString('<section class=\"canopy-section\"><p class=\"canopy-paragraph\"></p></section>', 'text/html').body.firstChild;\n  let tempParagraphElement = tempSectionElement.querySelector('p');\n  canopyContainer.appendChild(tempSectionElement);\n  tempParagraphElement.appendChild(clone);\n\n  // Check direction consistency among characters in the clone\n  let wraps = false;\n  let direction = null; // neutral\n\n  [...clone.querySelectorAll('span.canopy-blockquote-character,span.canopy-linebreak-span')].forEach((element, index, elements) => {\n    if (element.classList.contains('canopy-linebreak-span')) { // we switched spans ie linebreak\n      direction = null;\n    } else { // The element is a character span\n      let elementRect = element.getBoundingClientRect();\n      let previousElement = elements[index - 1];\n      let previousRect = elements[index - 1]?.getBoundingClientRect();\n\n      let previousElementWasNewline = previousElement && (previousElement?.classList.contains('canopy-linebreak-span') \n        || previousElement.tagName === \"BR\" || previousElement.innerText === '\\n');\n      \n      if (previousElement && !previousElementWasNewline) {  // don't compare first letter to last of last line\n        if (direction === null) {\n          direction = elementRect.right > previousRect.right ? 1 : -1;\n        } else {\n          wraps = wraps || (elementRect.right > previousRect.right ? 1 : -1) !== direction; // direction is not the same\n        }\n      }\n    }\n  });\n\n  // Remove clone from DOM after measurement\n  tempParagraphElement.removeChild(clone);\n\n  if (wraps) {\n    blockQuoteElement.querySelectorAll('.canopy-linebreak-span').forEach((span) => {\n      span.classList.add('canopy-blockquote-padded-linebreak'); // there is no terminal linebreak so we pad all\n    });\n  }\n\n  return [blockQuoteElement];\n}\n\nfunction renderList(listNodeObjects, renderContext) {\n  let listElement = listNodeObjects[0].ordered ?\n    document.createElement('OL') :\n    document.createElement('UL');\n\n  if (listNodeObjects[0].ordered) {\n    listElement.setAttribute('type', listNodeObjects[0].ordinal);\n  }\n\n  listNodeObjects.forEach((listNodeObject) => {\n    let listItemElement = document.createElement('LI');\n\n    listNodeObject.tokensOfLine.forEach(\n      (token) => {\n        let tokenElements = renderTokenElements(token, renderContext);\n        tokenElements.forEach(tokenElement => listItemElement.appendChild(tokenElement));\n      }\n    );\n\n    if (listNodeObject.children.length > 0) {\n      let [childList] = renderList(listNodeObject.children);\n      listItemElement.appendChild(childList);\n    }\n\n    listElement.appendChild(listItemElement);\n  });\n  return [listElement];\n}\n\nfunction renderTable(token, renderContext) {\n  let tableElement = document.createElement('TABLE');\n  tableElement.setAttribute('dir', 'auto');\n  if (token.rtl) tableElement.setAttribute('dir', 'rtl');\n\n  token.rows.forEach(\n    (row) => {\n      let tableRowElement = document.createElement('TR');\n      if (token.rtl) tableRowElement.setAttribute('dir', 'rtl');\n\n      row.forEach(\n        (cellObject) => {\n          let tableCellElement = document.createElement('TD');\n          if (cellObject.hidden) tableCellElement.classList.add('hidden');\n          if (cellObject.colspan) tableCellElement.setAttribute('colspan', cellObject.colspan);\n          if (cellObject.rowspan) tableCellElement.setAttribute('rowspan', cellObject.rowspan);\n\n          cellObject.tokens.forEach(\n            (token) => {\n              let tokenElements = renderTokenElements(token, renderContext);\n\n              tokenElements.forEach(tokenElement => {\n                const isOrHasOnlyLink = (el) => el.tagName === 'A' || (el.children.length === 1 && isOrHasOnlyLink(el.children[0]));\n                if (cellObject.tokens.length === 1 && isOrHasOnlyLink(tokenElement)) {\n                  tableCellElement.classList.add('canopy-table-link-cell');\n                  tableCellElement.classList.add('canopy-arrow-keys-container'); // rect to consider for arrow key comparisons\n                  whenInDom(tableCellElement)(() => { // need to wait for .parentNode to exist\n                    let linkElement = tokenElement.parentNode.querySelector('a');\n                    linkElement.classList.add('canopy-table-link');\n                    linkElement.removeEventListener('click', linkElement._CanopyClickHandler);\n                    tableCellElement.addEventListener('click', linkElement._CanopyClickHandler);\n                  });\n                }\n\n                tableCellElement.appendChild(tokenElement);\n              });\n            }\n          );\n\n          if (!cellObject.merge) {\n            tableRowElement.appendChild(tableCellElement);\n          }\n        }\n      )\n      tableElement.appendChild(tableRowElement);\n    }\n  );\n\n  let tempSectionElement = new DOMParser().parseFromString('<section class=\"canopy-section\"><p class=\"canopy-paragraph\"></p></section>', 'text/html').body.firstChild;\n  let tempParagraphElement = tempSectionElement.querySelector('p');\n  canopyContainer.appendChild(tempSectionElement);\n  tempParagraphElement.appendChild(tableElement);\n\n  let sizes = {widest: -1, narrowest: Infinity, tallest: -1, shortest: Infinity};\n\n  [...tableElement.querySelectorAll('td')].forEach(tableCellElement => {\n    let clsp = tableCellElement.getAttribute('colspan');\n    let rwsp = tableCellElement.getAttribute('rowspan');\n    \n    let styles = window.getComputedStyle(tableCellElement);\n    let paddingLeft = parseInt(styles.paddingLeft, 10);\n    let paddingRight = parseInt(styles.paddingRight, 10);\n    let paddingTop = parseInt(styles.paddingTop, 10);\n    let paddingBottom = parseInt(styles.paddingBottom, 10);\n\n    let cellWidth = tableCellElement.getBoundingClientRect().width;\n    let cellHeight = tableCellElement.getBoundingClientRect().height;\n\n    let widthWithoutPadding = cellWidth - paddingLeft - paddingRight;\n    let heightWithoutPadding = cellHeight - paddingTop - paddingBottom;\n\n    if (!clsp && widthWithoutPadding > sizes.widest) sizes.widest = widthWithoutPadding;\n    if (!clsp && widthWithoutPadding < sizes.narrowest) sizes.narrowest = widthWithoutPadding;\n    if (!rwsp && heightWithoutPadding > sizes.tallest) sizes.tallest = heightWithoutPadding;\n    if (!rwsp && heightWithoutPadding < sizes.shortest) sizes.shortest = heightWithoutPadding;\n  });\n\n  [...tableElement.querySelectorAll('td')].forEach(td => {\n    td.style.width = sizes.widest + 'px';\n  });\n\n  tableElement.dataset.widest = sizes.widest;\n  tableElement.dataset.narrowest = sizes.narrowest;\n  tableElement.dataset.widthDiff = sizes.widest - sizes.narrowest;\n\n  [...tableElement.querySelectorAll('td')].forEach(td => {\n    td.style.height = sizes.tallest + 'px';\n  });\n\n  tableElement.dataset.tallest = sizes.tallest;\n  tableElement.dataset.shortest = sizes.shortest;\n  tableElement.dataset.heightDiff = sizes.tallest - sizes.shortest;\n\n  canopyContainer.removeChild(tempSectionElement);\n  tempParagraphElement.removeChild(tableElement);\n\n  return [tableElement];\n}\n\nfunction renderMenu(token, renderContext) {\n  let menuElement = document.createElement('DIV');\n  menuElement.classList.add('canopy-menu');\n\n  if (token.rtl) menuElement.dir = 'rtl';\n\n  if (token.alignment === 'right') menuElement.classList.add('canopy-align-right');\n  if (token.alignment === 'left') menuElement.classList.add('canopy-align-left');\n  if (token.alignment === 'mixed') menuElement.classList.add('canopy-align-mixed');\n\n  let SizesByArea = ['eigth-pill', 'quarter-pill', 'third-pill', 'half-pill', 'quarter-card', 'third-card', 'half-tube', 'half-card'];\n  let tableListSizeIndex = 0;\n\n  let cellElements = token.items.map((cellObject) => {\n    let menuCellElement = document.createElement('DIV');\n    menuCellElement.classList.add('canopy-menu-cell');\n    let contentContainer = document.createElement('DIV');\n    contentContainer.classList.add('canopy-menu-content-container');\n\n    if (cellObject.hidden) menuCellElement.style.opacity = '0';\n\n    let tokenElements = renderTokenElements(cellObject.tokens[0], renderContext);\n\n    tokenElements.forEach(tokenElement => {\n      if (cellObject.tokens.length === 1 && tokenElement.tagName === 'A') {\n        menuCellElement.classList.add('canopy-menu-link-cell');\n        menuCellElement.classList.add('canopy-arrow-keys-container');\n        menuCellElement.addEventListener('click', tokenElement._CanopyClickHandler);\n        tokenElement.removeEventListener('click', tokenElement._CanopyClickHandler);\n      }\n      contentContainer.appendChild(tokenElement);\n      menuCellElement.appendChild(contentContainer);\n\n      if (cellObject.alignment || ['left', 'right'].includes(token.alignment)) { // apply alignment to specific cells\n        menuCellElement.classList.add(`canopy-menu-cell-${cellObject.alignment || token.alignment}-aligned`);\n      }\n    });\n\n    if (cellObject.list) {\n      let ordinalElement = document.createElement('SPAN');\n      ordinalElement.classList.add('canopy-menu-ordinal');\n      ordinalElement.innerHTML = cellObject.ordinal + '.&nbsp;';\n      contentContainer.prepend(ordinalElement);\n      menuCellElement.classList.add('canopy-menu-ordinal-cell');\n    }\n\n    return menuCellElement;\n  });\n\n  let tempSectionElement = new DOMParser().parseFromString('<section class=\"canopy-section\"><p class=\"canopy-paragraph\"></p></section>', 'text/html').body.firstChild;\n  let tempParagraphElement = tempSectionElement.querySelector('p');\n  let tempRowElement = createNewRow();\n  canopyContainer.appendChild(tempSectionElement);\n  tempParagraphElement.appendChild(menuElement);\n  menuElement.appendChild(tempRowElement);\n\n  for (let i = 0; i < cellElements.length; i++) {\n    let menuCellElement = cellElements[i];\n    tempRowElement.appendChild(menuCellElement);\n\n    while (true) {\n      if (tableListSizeIndex === SizesByArea.indexOf('half-pill') && token.items.length > 2) \n        tableListSizeIndex = SizesByArea.indexOf('quarter-card'); // Quarters look better than halves\n\n      menuElement.classList.add(`canopy-${SizesByArea[tableListSizeIndex]}`);\n\n      let contentBoundingRect = getCombinedBoundingRect(menuCellElement.querySelector('.canopy-menu-content-container'));\n\n      let container = menuCellElement.closest('.canopy-menu-cell');\n      let containerStyles = window.getComputedStyle(container);\n      let containerRect = container.getBoundingClientRect();\n\n      let containerPaddingLeft = parseFloat(containerStyles.paddingLeft);\n      let containerPaddingRight = parseFloat(containerStyles.paddingRight);\n      let containerPaddingTop = parseFloat(containerStyles.paddingTop);\n      let containerPaddingBottom = parseFloat(containerStyles.paddingBottom);\n\n      let adjustedContainerRect = {\n        top: containerRect.top + containerPaddingTop,\n        left: containerRect.left + containerPaddingLeft,\n        bottom: containerRect.bottom - containerPaddingBottom,\n        right: containerRect.right - containerPaddingRight\n      };\n\n      let isOverflowingHorizontally = contentBoundingRect.left < adjustedContainerRect.left || contentBoundingRect.right > adjustedContainerRect.right;\n      let isOverflowingVertically = contentBoundingRect.top < adjustedContainerRect.top || contentBoundingRect.bottom > adjustedContainerRect.bottom;\n\n      if (!isOverflowingHorizontally && !isOverflowingVertically) break; // try next menu element\n\n      if (tableListSizeIndex >= SizesByArea.length - 1) break; // No larger sizes available\n\n      menuElement.classList.remove(`canopy-${SizesByArea[tableListSizeIndex]}`);\n      tableListSizeIndex++;\n      i = 0; // Once we increment the size, we need to recheck all previous elements because a larger area might have a narrower width\n    }\n  }\n\n  tempParagraphElement.remove();\n  tempRowElement.remove();\n  tempSectionElement.remove();\n  menuElement.classList.add(`canopy-${SizesByArea[tableListSizeIndex]}`);\n\n  function createNewRow() {\n    let newRow = document.createElement('DIV');\n    newRow.classList.add('canopy-menu-row');\n    if (token.rtl) newRow.dir = 'rtl';\n    menuElement.appendChild(newRow);\n    return newRow;\n  }\n\n  let rowSize;\n  if (SizesByArea[tableListSizeIndex].includes('half')) rowSize = 2;\n  if (SizesByArea[tableListSizeIndex].includes('third')) rowSize = 3;\n  if (SizesByArea[tableListSizeIndex].includes('quarter')) rowSize = 4;\n  if (SizesByArea[tableListSizeIndex].includes('eigth')) rowSize = 8;\n\n  // Create the first row\n  let tableRowElement = createNewRow();\n\n  // Assuming cellElements is your array of cells\n  for (let i = 0; i < cellElements.length; i++) {\n    // Append cell to current row\n    tableRowElement.appendChild(cellElements[i]);\n\n    // If row is full and there are more cells to add, create a new row\n    if ((i + 1) % rowSize === 0 && (i + 1) !== cellElements.length) {\n      tableRowElement = createNewRow();\n    }\n  }\n\n  if (menuElement.childNodes.length > 1) { // if there is more than one row\n    const remainingCells = cellElements.length % rowSize;\n    const cellsToAdd = remainingCells > 0 ? rowSize - remainingCells : 0;\n    for (let i = 0; i < cellsToAdd; i++) {\n      let paddingElement = document.createElement('DIV');\n      paddingElement.classList.add('canopy-menu-cell');\n      paddingElement.style.opacity = '0';\n      tableRowElement.appendChild(paddingElement);\n    }\n  }\n\n  // Only inner-most of left and right aligned links need margin\n  [...tableRowElement.childNodes]\n    .filter(element => element.classList.contains('canopy-menu-cell-right-aligned'))?.[0]\n    ?.classList.add('canopy-menu-cell-first-right');\n\n  [...tableRowElement.childNodes]\n    .filter(element => element.classList.contains('canopy-menu-cell-left-aligned')).slice(-1)?.[0]\n    ?.classList.add('canopy-menu-cell-last-left');\n\n  return [menuElement];\n}\n\nfunction renderFootnoteLines(footnoteLinesToken, renderContext) {\n  let div = document.createElement('DIV');\n  let horizonalRule = document.createElement('HR');\n  horizonalRule.classList.add('canopy-footnote-rule');\n  div.appendChild(horizonalRule)\n\n  footnoteLinesToken.lines.forEach(line => {\n    let footnoteSpan = document.createElement('SPAN');\n    footnoteSpan.classList.add('canopy-footnote-span');\n    let textNode = document.createTextNode(line.superscript + '. ');\n    footnoteSpan.appendChild(textNode);\n    line.tokens.forEach((token) => {\n      let [tokenElement] = renderTokenElements(token, renderContext);\n      footnoteSpan.appendChild(tokenElement);\n    });\n\n    div.appendChild(footnoteSpan);\n  });\n\n  return [div];\n}\n\nfunction renderBoldText(token, renderContext) {\n  let element = document.createElement('B');\n  token.tokens.forEach(subtoken => {\n    let subtokenElements = renderTokenElements(subtoken, renderContext);\n    subtokenElements.forEach(subtokenElement => element.appendChild(subtokenElement));\n  });\n  return [element];\n}\nfunction renderUnderlineText(token, renderContext) {\n  let element = document.createElement('u');\n  token.tokens.forEach(subtoken => {\n    let subtokenElements = renderTokenElements(subtoken, renderContext);\n    subtokenElements.forEach(subtokenElement => element.appendChild(subtokenElement));\n  });\n  return [element];\n}\n\nfunction renderItalicText(token, renderContext) {\n  let element = document.createElement('I');\n  token.tokens.forEach(subtoken => {\n    let subtokenElements = renderTokenElements(subtoken, renderContext);\n    subtokenElements.forEach(subtokenElement => element.appendChild(subtokenElement));\n  });\n  return [element];\n}\n\nfunction renderInlineCodeText(token) {\n  let element = document.createElement('CODE');\n  element.innerText = token.text;\n  return [element];\n}\n\nfunction renderToolTip(token, renderContext) {\n  let tooltipContainerSpan = document.createElement('span');\n  tooltipContainerSpan.className = 'canopy-tooltip';\n\n  let tooltipIcon = document.createElement('sup');\n  tooltipIcon.textContent = 'ⓘ';\n  tooltipIcon.classList.add('canopy-tooltip-icon');\n  tooltipContainerSpan.appendChild(tooltipIcon);\n\n  // Create the tooltip text span\n  var tooltipTextSpan = document.createElement('span');\n  tooltipTextSpan.className = 'canopy-tooltiptext';\n  tooltipTextSpan.dir = 'auto';\n  token.tokens.forEach(subtoken => {\n    let subtokenElements = renderTokenElements(subtoken, renderContext);\n    subtokenElements.forEach(subtokenElement => tooltipTextSpan.appendChild(subtokenElement));\n  });\n\n  // Append the tooltip text span to the tooltip span\n  tooltipContainerSpan.appendChild(tooltipTextSpan);\n  return [tooltipContainerSpan];\n}\n\nexport default renderTokenElements;\n","import Paragraph from 'models/paragraph';\nimport Topic from '../../cli/shared/topic';\nimport renderTokenElements from 'render/render_token_element';\n\nfunction renderDomTree(topic, subtopic, renderContext) {\n  let { paragraphsBySubtopic } = renderContext;\n\n  let sectionElement = createSectionElement(topic, subtopic, renderContext);\n  let paragraph = new Paragraph(sectionElement);\n\n  renderContext.localLinkSubtreeCallback = localLinkSubtreeCallback(topic, sectionElement, renderContext);\n\n  let tokensOfParagraph = paragraphsBySubtopic[subtopic.mixedCase];\n  if (!tokensOfParagraph) throw new Error(`Paragraph with subtopic not found: ${subtopic.mixedCase}`);\n\n  renderContext.currentTopic = topic;\n  renderContext.currentSubtopic = subtopic;\n\n  tokensOfParagraph.forEach((token) => {\n    let elements = renderTokenElements(token, renderContext);\n    elements.forEach(element => paragraph.paragraphElement.appendChild(element));\n  });\n\n  return sectionElement;\n}\n\nfunction localLinkSubtreeCallback(topic, parentSectionElement, renderContext) {\n  return (token) => {\n    let { fullPath, remainingPath } = renderContext;\n    let newSubtopic = Topic.fromMixedCase(token.targetSubtopic);\n    let pathToEnclosingTopic = fullPath.slice(0, fullPath.length - remainingPath.length);\n    let pathToParagaph = pathToEnclosingTopic.addSegment(topic, newSubtopic);\n\n    let childSectionElement = renderDomTree(\n      topic,\n      Topic.fromMixedCase(token.targetSubtopic),\n      Object.assign({ pathToParagaph }, renderContext)\n    );\n\n    parentSectionElement.appendChild(childSectionElement);\n  }\n}\n\nfunction createSectionElement(topic, subtopic, renderContext) {\n  let {\n    displayTopicName, pathDepth, paragraphsBySubtopic, pathToParagraph\n  } = renderContext;\n\n  let sectionElement = document.createElement('section');\n  sectionElement.classList.add('canopy-section');\n  let paragraphElement = document.createElement('p');\n  paragraphElement.classList.add('canopy-paragraph');\n  sectionElement.appendChild(paragraphElement);\n  sectionElement.style.display = 'none';\n  sectionElement.style.opacity = '0';\n  sectionElement.dataset.displayTopicName = displayTopicName;\n  sectionElement.dataset.topicName = topic.mixedCase;\n  sectionElement.topicName = topic.mixedCase; // helpful to have in debugger\n  sectionElement.dataset.subtopicName = subtopic.mixedCase;\n  sectionElement.subtopicName = subtopic.mixedCase; // helpful to have in debugger\n  sectionElement.dataset.pathDepth = pathDepth;\n  sectionElement.dataset.pathString = pathToParagraph.replaceTerminalSubtopic(subtopic).string;\n\n  let tokens = paragraphsBySubtopic[topic.mixedCase];\n\n  if (topic.mixedCase === subtopic.mixedCase) {\n    let hr = document.createElement('hr')\n    hr.classList.add('canopy-hr');\n    if (pathDepth > 0 && tokens.length > 0) sectionElement.prepend(hr);\n    sectionElement.classList.add('canopy-topic-section');\n  }\n\n  return sectionElement;\n}\n\nexport default renderDomTree;\n","import renderDomTree from 'render/render_dom_tree';\nimport requestJson from 'requests/request_json';\nimport Path from 'models/path';\nimport Paragraph from 'models/paragraph';\nimport { canopyContainer } from 'helpers/getters';\nimport { generateHeader } from 'render/helpers';\nlet promiseCache = {};\nlet headerCache = {};\n\nfunction invalidateFetchAndRenderCache() {\n  promiseCache = {};\n  headerCache = {};\n}\n\nconst fetchAndRenderPath = (fullPath, remainingPath, parentElementPromise) => {\n  if (remainingPath.length === 0) return Promise.resolve();\n\n  let pathToParagraph = fullPath.slice(0, fullPath.length - remainingPath.length + 1);\n  let pathToParagraphTopic = pathToParagraph.removeTerminalSubtopic;\n  let preexistingSectionElement = Path.elementAtRelativePath(pathToParagraphTopic, canopyContainer);\n  let preexistingSectionElementPromise = preexistingSectionElement ? Promise.resolve(preexistingSectionElement) : null;\n\n  let sectionElementPromise = preexistingSectionElementPromise || promiseCache[pathToParagraphTopic.string] || requestJson(remainingPath.firstTopic)\n    .then(({ paragraphsBySubtopic, displayTopicName, topicTokens }) => {\n      headerCache[remainingPath.firstTopic.mixedCase] = [topicTokens, displayTopicName];\n\n      return renderDomTree(\n        remainingPath.firstTopic,\n        remainingPath.firstTopic,\n        {\n          remainingPath,\n          displayTopicName,\n          paragraphsBySubtopic,\n          fullPath,\n          pathToParagraph,\n          pathDepth: fullPath.length - remainingPath.length\n        },\n      );\n    }).catch(e => { console.error(e); return null; }); // 404\n\n  promiseCache[pathToParagraphTopic.string] = sectionElementPromise;\n\n  let appendingPromise = Promise.all([parentElementPromise, sectionElementPromise]).then(([parentElement, sectionElement]) => {\n    if (!parentElement || !sectionElement) return Promise.resolve(); // null parent eg if appending failed\n    if (fullPath.equals(remainingPath)) canopyContainer.prepend(generateHeader.apply(this, headerCache[sectionElement.dataset.topicName])); // regen if necessary\n    if (parentElement !== canopyContainer && !Path.connectingLinkValid(parentElement, remainingPath)) return Promise.resolve(false); // fail silently, error on tryPrefix\n    if (!Paragraph.byPath(pathToParagraphTopic)) {\n      Paragraph.registerChild(sectionElement, parentElement);\n      Paragraph.registerSubtopics(sectionElement); // only once we know the topic itself is connected, requires subtopics still be connected from render\n      Paragraph.detachSubtopics(sectionElement); // has to be done after registerSubtopics\n    }\n    return Promise.resolve(true);\n  });\n\n  let subtopicElementPromise = sectionElementPromise.then(sectionElement => { // the subtopic of current topic that is parent of next path segment\n    if (!sectionElement) return null;\n    if (remainingPath.firstSubtopic.mixedCase === sectionElement.dataset.topicName) {\n      return sectionElement;\n    } else {\n      return sectionElement.querySelector(`section[data-subtopic-name=\"${remainingPath.firstSubtopic.cssMixedCase}\"]`) || // on first render still attached\n        Paragraph.byPath(pathToParagraph)?.sectionElement; // subsequent renders detached and cached\n    }\n  });\n\n  let subtopicAfterSubsumptionPromise = Promise.all([appendingPromise, subtopicElementPromise, parentElementPromise]) // n+1's parent waits for path from root\n    .then(([appendingSuccess, subtopicElement]) => appendingSuccess && subtopicElement); //\n\n  let childSectionElementPromise = fetchAndRenderPath(fullPath, remainingPath.withoutFirstSegment, subtopicAfterSubsumptionPromise);\n\n  return Promise.all([sectionElementPromise, childSectionElementPromise, appendingPromise]) // work for this stackframe is finished\n    .then(([sectionElement]) => sectionElement);\n}\n\nexport { fetchAndRenderPath, invalidateFetchAndRenderCache };\n","import { defaultTopic, defaultTopicJson } from 'helpers/getters';\n\nlet REQUEST_CACHE = {};\n\nif (defaultTopicJson()) {\n  REQUEST_CACHE[defaultTopic()] = Promise.resolve(JSON.parse(defaultTopicJson()));\n}\n\nexport default REQUEST_CACHE;\n","let defaultText = `[Canopy/Playground]\n\n* Playground: This is a demo of Canopy.js, a library for creating interactive explanations. ([Github](https://github.com/canopy-js/canopy-js)\\\\)\n![Canopy.js Logo](./logo.png)\n===\n> [[Part 2|Okay]]\n===\n\nPart 2: Canopy generates interactive explanations from an easy-to-use text format.\n===\n> [[Part 2-1|Okay]]\n===\n\nPart 2-1: This content is being generated from the text on the left, which can be edited live.\n===\n> [[Part 2-2|Cool]]\n===\n\nPart 2-2: In Canopy, selecting links adds more paragraphs to the page.\n===\n> [[Part 3|I see]]\n===\n\nPart 3: Paths in Canopy can go in multiple directions.\n===\n> [[Part 4|Like this]]\n> [[Part 5|Or like this]]\n> [[Part 6|Continue]]\n===\n\nPart 4: This is one direction. [[Part 4-1|Go deeper]].\n\nPart 4-1: This is more info.\n\nPart 5: This is another direction. [[Part 5-1|Go deeper]].\n\nPart 5-1: This is even more info.\n\nPart 6: Links and buttons can redirect the user to a different part of the tree.\n===\n> [[Part 6-1|Go here first]]\n> [[Part 6-2|You'll be taken here]]\n===\n\nPart 6-1:\n===\n< [[Part 6-1-A|Go deeper]]\n===\n\nPart 6-1-A:\n===\n< [[Part 6-1-B|Go deeper]]\n===\n\nPart 6-1-B:\n===\n< [[Part 6-1-C|Go deeper]]\n===\n\nPart 6-1-C:\n===\n< [[#Part 6-2-C|Go somewhere else]]\n===\n\nPart 6-2:\n===\n> [[Part 6-2-A|Down]]\n===\n\nPart 6-2-A:\n===\n> [[Part 6-2-B|Down]]\n===\n\nPart 6-2-B:\n===\n> [[Part 6-2-C|Down]]\n===\n\nPart 6-2-C: Welcome to this other part!\n===\n> [[Part 7|Thanks]]\n===\n\nPart 7: Why might you use Canopy?\n===\n> [[Part 7-1|Tell me!]]\n===\n\nPart 7-1: Canopy allows you to create explanations that are customized to each reader, like this:\n===\n> [[Part 7-2|I love detail]]\n> [[Part 7-3|I hate detail!]]\n===\n\nPart 7-2: Here it is!\n\nPart 7-3: You won’t see any!\n===\n> [[Part 8|What else can it do?]]\n===\n\nPart 8: Let’s use Canopy to reuse content across different explanations.\n===\n> [[Part 8-1|Okay]]\n===\n\nPart 8-1: Try holding the *option or alt key* and clicking the link below.\n- Here is an explanation of the [[{Atlantic Ocean}#Part 1]]\n===\n> [[Part 9|I’m finished]]\n===\n\nPart 9: *Welcome back!* See, we’ve returned to where we started before all that Oceans business.\n===\n> [[Part 9-1|Great!]]\n===\n\nPart 9-1: So, now you’ve seen the main feature set of Canopy.\n===\n> [[Part 9-2|Correct]]\n===\n\nPart 9-2: So, you’re probably thinking, “Amazing! But, what would I actually use this for?”\n===\n> [[Part 9-3|True]]\n===\n\nPart 9-3: The answer is, Canopy is a good fit for any domain that is:\n1. Detailed\n2. Broad\n3. Highly-interconnected\n4. Where different parts are relevant to different users\n===\n> [[Part 10|Interesting]]\n===\n\nPart 10: Lets see some examples.\n===\n> [[Part 10 Cities|Okay]]\n===\n\nPart 10 Cities: *Example 1/6:* Canopy might be a good fit for interconnected geographic and historical information.\n===\n> [[Cities|Let’s see]]\n> [[Part 10 Software|Next]]\n===\n\nPart 10 Software: *Example 2/6:* Another application area is documenting large software projects.\n===\n> [[MailerApp|Let’s see]]\n> [[Part 10 Blogs|Next]]\n===\n\nPart 10 Blogs: *Example 3/6:* Canopy could also be useful for large personal writing projects.\n===\n> [[Blogs|Let’s see]]\n> [[Part 10 Mergers|Next]]\n===\n\nPart 10 Mergers: *Example 4/6:* Canopy could be useful for “merging” the points made in various primary sources.\n===\n> [[Noise pollution law|Let’s see]]\n> [[Part 10 Libraries|Next]]\n===\n\nPart 10 Libraries: *Example 5/6:* Canopy could be used as a tool in libraries.\n===\n> [[Libraries|Let’s see]]\n> [[Part 10 Memorization|Next]]\n===\n\nPart 10 Memorization: *Example 6/6:* Canopy could be used for memorization.\n===\n> [[Memorization|Let’s see]]\n> [[Part 11|Finish]]\n===\n\nPart 11: 👋 That’s all for now! Click here to [learn more about Canopy.js](https://github.com/canopy-js/canopy-js) or get in touch at \\`hello at canopyjs dot org\\`.\n\n[MailerApp]\n\n* MailerApp: “MailerApp” is a tool for managing email lists.\n===\n- [[History]]\n- [[Features]]\n- [[Patterns]]\n- [[Code]]\n===\n\nHistory: MailCorp’s history includes the [[1998 BigCorpCustomer Feature Request]].\n\n1998 BigCorpCustomer Feature Request:\nOn May 1st 1998 BigCorpCustomer asked to be able to send emails, and so we decided to implement the [[{#|}{{message scheduling}} feature]]\n===\n> [[Playground#Part 10 Blogs|Done]]\n===\n\nFeatures: A major feature of MailerApp is [[message scheduling]].\n\nMessage scheduling: Message scheduling is when a user logs in to the app, creates a message, and schedules it to be sent.\n- This functionality is implemented using a [[#sending queue]]\n- The message scheduling functionality was designed in response to the [[#1998 BigCorpCustomer Feature Request]]\n===\n> [[Playground#Part 10 Blogs|Done]]\n===\n\nPatterns: The app uses certain design patterns to produce the feature set.\n- One such pattern is the [[MailerApp {{sending queue}}]].\n\nSending queue: MailerApp uses a “sending queue” to allow a user to schedule emails to be sent.\n- The job of the queue is to keep track of a list of messages the user has scheduled, and whether they have been sent yet.\n- The queue must be checked periodically to see if there are unsent messages, and to send them.\n- These concepts are implemented in the using [[#SendWorker class]] and the [[#PendingMessages database table]]\n===\n> [[Playground#Part 10 Blogs|Done]]\n===\n\nCode: The code base has a [[\\`SendWorker\\` class]], and a [[\\`PendingMessages\\` database table]].\n\nSendWorker class: The \\`SendWorker\\` class periodically checks the \\`PendingMessages\\` table of the database and makes a SMPT request when it sees a record with \\`sent\\` set to false.\n- The \\`SendWorker\\` class relies on the [[#PendingMessages database table]].\n- The \\`SendWorker\\` class is part of the implementation of the app’s [[#sending queue]]\n===\n> [[Playground#Part 10 Blogs|Done]]\n===\n\nPendingMessages database table: There is a \\`PendingMessages\\` database table:\n- The \\`PendingMessages\\` table has a \\`text\\` field for the text of the email.\n- The \\`PendingMessages\\` table has a \\`sent\\` boolean field to indicate whether the message has been sent yet.\n- The PendingMessages table is used by the [[#SendWorker class]]\n- The SendWorker class is part of the implementation of the app’s [[#sending queue]]\n===\n> [[Playground#Part 10 Blogs|Done]]\n===\n\n\n[Oceans]\n\n* Atlantic Ocean: Now we have started a new explanation about the Atlantic Ocean!\n===\n- [[Part 1|More]]\n- [[Part 2|For later]]\n===\n\nPart 1:\n*Click the following link:*\n- The Atlantic ocean connects via the Panama Canal to the [[{Pacific Ocean}#Part 1]]\n![Atlantic Ocean](https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/1710_De_La_Feuille_Map_of_Africa_-_Geographicus_-_Africa-lafeuille-1710.jpg/1920px-1710_De_La_Feuille_Map_of_Africa_-_Geographicus_-_Africa-lafeuille-1710.jpg \"Atlantic Ocean\" \"Credit Wikipedia\")\n\nPart 2: Our explanation of the Pacific Ocean has extended to include an explanation of the Atlantic on the same page.\n===\n> [[Part 2-1|Wow!]]\n===\n![Atlantic Ocean](https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/1710_De_La_Feuille_Map_of_Africa_-_Geographicus_-_Africa-lafeuille-1710.jpg/1920px-1710_De_La_Feuille_Map_of_Africa_-_Geographicus_-_Africa-lafeuille-1710.jpg \"Atlantic Ocean\" \"Credit Wikipedia\")\n\nPart 2-1: So, we see that our explanation of the Atlantic Ocean can get included in an explanation of the Pacific Ocean, and vice versa.\n===\n> [[Part 2-2|Yes]]\n===\n\nPart 2-2: So, in Canopy, different explanations starting from different origins can encompass the same material.\n===\n> [[Part 2-3|I see]]\n===\n\nPart 2-3:\nGreat, now let’s go back to where we were before this tangent.\n===\n> [[Playground#Part 9|Take me back]]\n===\n\n\n* Pacific Ocean: This is an explanation of the Pacific Ocean:\n===\n- [[Part 1|More]]\n- [[Part 2|For later]]\n===\n\nPart 1: This is an explanation of the Pacific Ocean which is continuing from our explanation of the Atlantic Ocean that began earlier on the page.\n- Now, click the following link while holding the *option or alt* key:\n- We’re going to start a new explanation about [[{|the }{Pacific Ocean}#Part 2]]\n![Pacific Ocean](https://upload.wikimedia.org/wikipedia/commons/4/4e/Ortelius_-_Maris_Pacifici_1589.jpg \"Pacific Ocean\" \"Credit Wikipedia\")\n\nPart 2: Now we’re reading a new explanation, starting from the Pacific Ocean this time.\nClick the following link *normally*:\n- The Pacific Ocean connects via the Panama Canal to the [[{Atlantic Ocean}#Part 2]]\n![Pacific Ocean](https://upload.wikimedia.org/wikipedia/commons/4/4e/Ortelius_-_Maris_Pacifici_1589.jpg \"Pacific Ocean\" \"Credit Wikipedia\")\n\n[NYC]\n\n* Cities: Canopy can organize historical information geographically. Let’s see an example:\n===\n- [[New York City]]\n===\n\n* New York City: New York City has various neighborhoods.\n===\n- [[Greenwich Village]]\n- [[Midtown Manhattan]]\n===\n\n* Greenwich Village: Greenwich Village has various historic landmarks.\n===\n- [[Jefferson Market Library]]\n===\n\n* Jefferson Market Library: Jefferson Market library is a library in [[Greenwich village]]\n![Jefferson Market Courthouse](https://www.nypap.org/wp-content/uploads/2016/04/JeffersonMarketCourthouse.jpg \"Jefferson Market Courthouse\" \"1960, Cervin Robinson / Library of Congress, [Source](https://www.nypap.org/preservation-history/jefferson-market-courthouse/)\")\n- Jefferson Market Library is housed in the former Jefferson Market Courthouse, situated at 10th Street and 6th Avenue on the border of Greenwich Village, Manhattan.\n- Jefferson Market Courthouse was the location of \"the trial of the century\" judicating [[Stanford White’s death|the death of architect Stanford White]].\n===\n> [[Playground#Part 10 Software|Finish]]\n===\n\n* Midtown Manhattan: Midtown is a major neighborhood in Manhattan with various landmarks.\n===\n- [[Madison Square Garden]]\n===\n\n* Madison Square Garden: Madison Square Garden has been the name of three stadiums in [[midtown Manhattan]].\n===\n- [[“Second” Madison Square Garden]]\n===\n\n* “Second” Madison Square Garden: The second Madison Square garden was a Manhattan stadium operating 1890–1926.\n![Second Madison Square Garden](https://upload.wikimedia.org/wikipedia/commons/a/af/Interior_of_Madison_Square_Garden_at_night%2C_from_Robert_N._Dennis_collection_of_stereoscopic_views_crop.jpg \"Second Madison Square Garden\" \"1905, [Source](https://en.wikipedia.org/wiki/Madison_Square_Garden_(1890)#/media/File:Interior_of_Madison_Square_Garden_at_night,_from_Robert_N._Dennis_collection_of_stereoscopic_views_crop.jpg)\")\n- The second Madison Square Garden was built 26th Street and Madison Avenue of [[Midtown Manhattan]].\n- The stadium was built by architect Stanford White.\n- Madison Square Garden was also the site of [[Stanford White’s death]].\n===\n> [[Playground#Part 10 Software|Finish]]\n===\n\n* Stanford White’s death:\nIn 1906 Archetect Stanford White was shot by Harry Kendall Thaw.\n- This was due to White’s relationship with Shaw’s wife Evelyn Nesbit.\n- The attack occurred on the roof of the [[{{second Madison Square Garden}} building]].\n- The trial was held in [[Jefferson Market {Library|Courthouse}]].\n- The story was adapted to novel and stage as Ragtime.\n===\n> [[Playground#Part 10 Software|Finish]]\n===\n\n[Noise Pollution]\n\n* Noise pollution law: The Townsville Herald has publishd three op-eds on the subject of the noise pollution law.\n- [[Op-ed \\\\#1]]\n- [[Op-ed \\\\#2]]\n- [[Op-ed \\\\#3]]\nLet’s take all the points these articles make and merge them into one tree.\n===\n> [[Noise pollution tree|See merger]]\n> [[Playground#Part 10 Libraries|Finished]]\n===\n\nOp-ed #1: This is op-ed #1, written by Coolidge Cunningham.\n> To whom it may concern:\n> It was with my great pleasure that I heard news of the city council’s discussion of a noise pollution bill. As a long-time resident of Townsville, I have for many years been encumbered by the unpleasant musical selections of my neighbors.\n> The playing of loud music disrupts sleep which costs the town valuable economic productivity. Moreover, it disrupts family meals and communal gatherings.\n> It may be seen as an incursion on the freedoms of residents to ban loud music, however, it is mainly necessary during the town's busy holiday season, and residents can always use headphones.\n> In my opinion, even music as quiet as that of speaking voice, around 60 decibels, should be banned, and it should be active at all times of day, as some people work night shifts and are asleep during that time.\n>\n> All the best,\n> Mr\\\\. Coolidge Cunningham\n\nOp-ed #2: This is op-ed #2, written by Jill Jamaica.\n> Hello Townsville neighbors.\n> I was very surprised to hear discussion of a music ban in the paper. In my view, this is a total non-issue. People who don't like music can always wear earplugs. This policy erodes the freedoms of Townsville residents, and is a slippery slope to police regulation of all private activity.\n> Supports of the law are ignoring the importance of public music-playing in giving our town its distinctive cultural flavor.\n> I don't think the policy is necessary, but if it is passed, I feel strongly that it should only apply very late at night, for example between 11PM and 5AM when most people are sleeping.\n> Thanks, Jill\n\nOp-ed #3: This is op-ed #3, written by Amble Orangutan.\n> My thanks are due to the Townsville Herald for orchestrating such an interesting series of writings on the city noise bill!\n> My feelings are mixed. On the one hand, I see the benefit of such a bill as benefiting early sleepers of Townsville.\n> I second sentiments that the bill should focus on the summer tourist season, as during the spring harvest, it might hamper necessary agricultural activity that cannot be done in a quiet way. Additionally, I don't think we need private citizens to play music in order to produce a distinctive culture as we have many other distinctive features.\n> Given that the police of Townsville are trusted members of the community and that it is such a small town, I do not think the legislation would expand into greater restrictions.\n> Lastly, I think the bill should target only the loudest noises, such as in the 100 decibel range, as we do not have the police presence to regulate more than that.\n> Yours, Amble\n\nNoise pollution tree:\nTownsville is considering a law to ban noise pollution.\n===\n- [[Arguments for the law]]\n- [[Arguments against the law]]\n- [[Discussion of details]]\n===\n\nArguments for the law: Residents of Townsville have put forward various arguments for a noise pollution law.\n===\n- [[Economics]]\n- [[Assemblies]]\n===\n\nEconomics:\nOne benefit of the legislation mentioned involves economics:\n- [[Some discussed improved sleep as an economic boon]].\n- [[Some worried a noise ban would disrupt the harvest]].\n\nSome discussed improved sleep as an economic boon:\nSome commentators discussed how a noise ban might improve the economy through improved sleep:\n- Mr. Cunningham lists economic productivity resulting from greater sleep as an argument for the law.\n- On the other hand, Ms. Jamaica pointed out that affected persons can wear earplugs, protecting sleep without a ban.\n- Additionally, the 11PM-5AM compromise mentioned by Ms. Jamaica might be sufficient to handle sleep-related concerns.\n===\n> [[Playground#Part 10 Libraries|Finished]]\n===\n\nSome worried a noise ban would disrupt the harvest:\nSome commentators worried a noise ban would disrupt the harvest:\n- Mr. Orangutan points out that a broad noise ban might impede necessary agricultural work during the local harvest.\n===\n> [[Playground#Part 10 Libraries|Finished]]\n===\n\n\nAssemblies:\nOne benefit of a noise ban involves assemblies:\n- [[Mr. Cunningham argues a noise ban would reduce disruption of family meals and communal gatherings]].\n\nMr\\\\. Cunningham argues a noise ban would reduce disruption of family meals and communal gatherings:\nAccording to Mr. Cunningham, a noise ban would improve family meals and communal gatherings.\n- [[What about Ms. Jamaica's earplug suggestion?]]\n- [[What about Ms. Jamaica's late-night compromise ban?]]\n\nWhat about Ms\\\\. Jamaica's earplug suggestion?\nMs\\\\. Jamaica had suggested earplugs instead of a noise ban.\n- However, that wouldn't really work for family meals and communal gatherings.\n- So, Mr. Cunningham’s case is a unique reason for a noise ban that earplugs wouldn’t help with.\n\nWhat about Ms\\\\. Jamaica's late-night compromise ban?\nMs\\\\. Jamaica had suggested a ban of noise only from 11PM-5AM.\n- However, such a ban during the late night wouldn't help very much with the family meals and communal gatherings that Mr Cunningham is discussing.\n- So, Mr. Cunningham’s case is a unique reason for a general noise ban that a late-night ban wouldn’t help with.\n===\n> [[Playground#Part 10 Libraries|Finished]]\n===\n\nArguments against the law: Residents of Townsville have put forward various arguments against a noise pollution law.\nResidents of Townsville have put forward various arguments against a noise pollution law.\n===\n- [[Restriction of freedom]]\n- [[Town culture]]\n===\n\nRestriction of freedom:\nOne argument raised against the proposal is that it restricts the freedom of town residents:\n- Ms. Jamaica mentioned that the law might create a precedent for regulating the private lives of Townsville residents.\n- [[Others find this concern unlikely]].\n- [[Others dispute the degree of the imposition on freedoms]]\n\nOthers find this concern unlikely:\nVarious other commentators are unconcerned that a noise ban would spiral into greater regulation:\n- Mr. Orangutan opines that the small size of Townsville makes spiraling regulation less likely.\n- Mr. Orangutan mentions that close resident-police relationships also makes the concern less pressing.\n===\n> [[Playground#Part 10 Libraries|Finished]]\n===\n\nOthers dispute the degree of the imposition on freedoms:\nMr\\\\. Cunningham suggests that a narrow holiday-season ban would not be such a restriction on freedoms in the first place.\n===\n> [[Playground#Part 10 Libraries|Finished]]\n===\n\nTown culture:\nOne argument raised against the proposal is that public music playing produces a distinctive town culture:\n- [[Ms. Jamaica makes such an argument in her op-ed]].\n\nMs\\\\. Jamaica makes such an argument in her op-ed:\nMr\\\\. Orangutan however suggests that public music-playing is not necessary to have a distinctive town culture due to the town's many other qualities.\n\nDiscussion of details: The residents of Townsville have argued about the details of the noise pollution law.\n===\n- [[Volume]]\n- [[Time of day]]\n- [[Seasons]]\n===\n\nVolume: Residents of Townsville have debated the ideal maximum volume of a noise pollution law.\n- Mr. Cunningham wanted a wide-ranging ban of sounds louder than 60 decibels.\n- Mr. Orangutan wanted a more limited ban of only noises over 100 decibels.\n  - This was due to the suggestion that there aren't enough police to enforce a wider ban.\n- Ms. Jamaica opposed a ban of any volume.\n===\n> [[Playground#Part 10 Libraries|Finished]]\n===\n\nTime of day: Residents of Townsville have debated what time the noise pollution law should be active.\n- Some supported [[an {{all-day ban}}]].\n- Some suggested [[late-night-only ban]].\n\nAll-day ban:\nSome Townsville residents support an all-day noise ban:\n- Mr Cunningham suggested that the ban should cover all times of day.\n- This was because some people work night shifts and sleep during the day.\n- Additionally, Mr. Cunningham lists family meals and communal gatherings as a reason for the ban, and these occur at various times requiring a broad ban.\n\nLate-night-only ban:\nSome Townsville residents support only a late-night noise ban:\n- Ms. Jamaica opposed any ban, but suggested a compromise of a ban covering only 11PM-5AM.\n- This would satisfy some of Mr. Cunningham's concern for disrupted sleep.\n- However, this would not assuage his concerns about noise disrupting family meals and communal get-togethers.\n===\n> [[Playground#Part 10 Libraries|Finished]]\n===\n\nSeasons:\nResidents of Townsville have debated what seasons of the year the noise pollution law should apply.\n- Mr. Cunningham who supports a strong ban nevertheless only thinks one is necessary during the summer tourist season.\n- Mr. Orangutan adds a reason for a summer-specific ban, namely that a ban in springtime might impede the loud but necessary agricultural harvest.\n===\n> [[Playground#Part 10 Libraries|Finished]]\n===\n\n[Blogs]\n\nBlogs: Canopy would let an author organize all their views in one place.\n- Each reader would get a customized path through the content.\n- The author can include smaller and more tangential points than prose articles would allow.\n- The overall work could be much larger than an article or book.\n===\n> [[Blogs 3|Okay]]\n===\n\nBlogs 3: Let’s see an example. Blogger “Maynard” wants to explain daily news in light of economic theory.\n===\n> [[Maynard|Okay]]\n> [[Playground#Part 10 Mergers|I'm finished]]\n===\n\n* Maynard: Welcome to Maynard's Canopy blog, \"The Main Yard.\"\n===\n- [[Read about news]]\n- [[Read about concepts]]\n===\n\n* Read about news:\nHere are some recent news stories:\n===\n- [[7\\\\/12: Townsville unveils recycling incentive]]\n- [[7\\\\/5: Cat-themed toys selling at discount]]\n- [[7\\\\/22: Bread prices rise in summer]]\n===\n\n* 7/12\\\\: Townsville unveils recycling incentive:\nFrom the Townsville Herald (7/12):\n> The city of Townsville recently unveiled a new incentive for residents to recycle.\n> Starting Monday, residents who bring their used beer bottles to the department of public works will have the original cost of the beer fully covered.\n> This incentive is expected to increase participation in the town's existing recycling initiatives.\n===\n- [[Commentary]]\n===\n\nCommentary:\nMaynard: This would be a good time to learn about the concept of “incentives.”\n- Specifically perverse incentives, where a reward for a certain behavior can increase that behavior more than the regulator intended.\n- Here, Townsville thinks that they are incentivizing recycling, when in fact their incentive is so generous, they may increase the consumption of beer itself, causing a lot of unintended side-effects.\n===\n- [[Learn more about<br>{{incentives}}]]\n- [[Maynard|Back to top]]\n===\n\n* 7/5\\\\: Cat-themed toys selling at discount:\nFrom the Townsville Journal (7/5):\n> Who would have ever predicted it? Last year at this time, we reported a surge in prices for cat-themed childrens’ toys. Backpacks, socks, dolls, anywhere a parent could look, this trend was dominating the market.\n> This summer, however, these goods are being found for prices even less than unbranded merchandise.\n> One might claim that this is due to a change in fads, but our reporters have documented that Townsville schools are as full of cat-themed clothing as ever.\n> It would seem as though Townsville is experiencing a market-mystery.\n===\n- [[Commentary]]\n===\n\nCommentary:\nMaynard: This mystery might be easily solved.\n- Why might a good that is still popular go down in price? This might be a classic example of overproduction leading to oversupply.\n- Even if demand has increased for cat-themed goods, if too many producers got in on the trend, it could be that the supply increased more than demand.\n- This would cause prices to decrease despite the increase in demand.\n===\n- [[Learn more about<br>{{supply and demand}}]]\n- [[Maynard|Back to top]]\n===\n\n* 7/22\\\\: Bread prices rise in summer:\nFrom the Townsville Gazette (7/22):\n> Bread prices in Townsville have reached an all-time high this summer, with a loaf of sourdough reaching $11, up from $4.50 last year at this time.\n> Analysts have blamed the price increase of bread on underlying increases in the price of wheat, which is also rising to all-time highs this summer.\n===\n- [[Commentary]]\n===\n\nCommentary:\nMaynard: And why might the price of wheat be increasing?\n- Well, wheat can be used for bread or for beer. When Townsville recently increased its [[7\\\\/12\\\\: Townsville unveils recycling incentive|incentives for beer-bottle recycling]], it may have unwittingly increased demand for beer significantly.\n- When demand increases for a product that requires a resource like wheat, all other products that use that resource also go up in price.\n- So, this news story is a classic example of economic scarcity.\n===\n- [[Learn more about<br>economic {{scarcity}}]]\n- [[Maynard|Back to top]]\n===\n\n* Read about concepts:\nHere are some economic concepts and news stories that demonstrate them:\n===\n- [[Incentives]]\n- [[Scarcity]]\n- [[Supply and Demand]]\n===\n\n* Incentives: In economic theory, incentives are when a regulator or private actor offers a reward or punishment for another party to engage in a certain action.\n- Incentives are a way of encouraging or discouraging a given behavior.\n- Incentives can accidentally become [[perverse incentives]].\n\n* Perverse Incentives:\nPerverse incentives are a type of [[incentives|economic incentive]].\n- Perverse incentives occur when a regulator encourages a behavior accidentally, resulting in behavior that goes counter to the regulator's goal.\n- A classic example of a perverse incentive would be a town paying people to kill snakes, leading to the breeding of snakes to receive the incentive.\n===\n- [[{Examples in the news} of perverse incentives]]\n===\n\nExamples in the news of perverse incentives:\nHere are examples in the news of perverse incentives:\n- [[7\\\\/12: Townsville unveils recycling incentive]]\n\n* Scarcity: Scarcity is the concept that many economic resources are limited, and decisions must be made regarding how to allocate them.\n- A corollary of the concept of scarcity is that use of a resource for one application trades off with its use for other applications.\n- An example would be that water can be used for household showers, or for agriculture, and if water is limited one might trade off with the other.\n===\n- [[{Examples in the news} of scarcity]]\n===\n\nExamples in the news of scarcity:\nHere are examples in the news of scarcity:\n- [[7\\\\/22: Bread prices rise in summer]]\n\n\n* Supply and Demand: “Supply and demand” is a fundamental concept of economics.\n- The theory of supply and demand suggests that prices are dictated by the interplay between how many people want to purchase a good and how many people have it to sell.\n- Higher demand for a good allows producers to sell it for a higher price.\n- Higher supply of a good allows buyers to find it for less money.\n- Actual prices would be a result of these two market forces.\n===\n- [[{Examples in the news} of supply and demand]]\n===\n\nExamples in the news of supply and demand:\nHere are examples in the news of supply and demand:\n- [[7\\\\/5: Cat-themed toys selling at discount]]\n\n\n[Memorization]\n\n* Memorization: Canopy can help people memorize and retain information.\n===\n> [[Memorization 2|How so?]]\n===\n\nMemorization 2: Well, spatial memory is one of the strongest forms of memory.\n===\n> [[Memorization 3|Okay]]\n===\n\nMemorization 3: And, because Canopy organizes information in trees, many ideas can be visually presented in a single spatial display.\n===\n> [[Memorization 4|Let’s see an example]]\n===\n\nMemorization 4: Let's try to remember some information, first without Canopy, and then with it.\n===\n- [[Without Canopy]]\n- [[With Canopy]]\n===\n\nWithout Canopy:\nPlease try to remember the following emoji sequence:<br><br>\n<div style=\"font-size: 80px\">☃️🌹⭐️🐠💍☂️🕶🐶🦋🧢🧣🧤🧦🩴</div>\n===\n> [[Without Canopy 2|That’s hard]]\n===\n\nWithout Canopy 2: Okay, well try it with Canopy.\n===\n> [[#With Canopy]]\n===\n\nWith Canopy: Let’s divide the emojis into “spatial” subcategories.\n|[[A|<div style=\"font-size: 60px\">☃️</div>]]|[[B|<div style=\"font-size: 60px\">🐶</div>]]|\n\nA:\n|[[A1|<div style=\"font-size: 60px\">🌹</div>]]|[[A2|<div style=\"font-size: 60px\">⭐️</div>]]|\n\nA1:\n|<div style=\"font-size: 60px\">🐠</div>|<div style=\"font-size: 60px\">💍</div>|\nDoes that seem easier?\n===\n> [[Canopy Memorization|A bit]]\n===\n\nA2:\n|<div style=\"font-size: 60px\">☂️</div>|<div style=\"font-size: 60px\">🕶</div>|\nDoes that seem easier?\n===\n> [[Canopy Memorization|A bit]]\n===\n\nB:\n|[[B1|<div style=\"font-size: 60px\">🦋</div>]]|[[B2|<div style=\"font-size: 60px\">🧢</div>]]|\n\nB1:\n|<div style=\"font-size: 60px\">🧣</div>|<div style=\"font-size: 60px\">🧤</div>|\nDoes that seem easier?\n===\n> [[Canopy Memorization|A bit]]\n===\n\nB2:\n|<div style=\"font-size: 60px\">🧦</div>|<div style=\"font-size: 60px\">🩴</div>|\nDoes that seem easier?\n===\n> [[Canopy Memorization|A bit]]\n===\n\n\n* Canopy Memorization: Well it’s still going to be work, but memorizing spatially related information is definitely easier than memorizing a regular list.\n===\n> [[Part 2|Ok]]\n===\n\nPart 2: When reading information in Canopy, information is presented spatially as a network of small bite-sized ideas.\n===\n> [[Part 3|Ok]]\n===\n\nPart 3:\nThis makes it easier to internalize and recall, and to find something again later.\n===\n> [[Playground#Part 11|Got it]]\n===\n\n[Libraries]\n\n* Libraries: Let’s look at an example.\n===\n- [[Science]]\n- [[History]]\n- [[Lifestyle]]\n===\n\n* Science:\n===\n- [[Neuroscience]]\n===\n\nNeuroscience:\n===\n- [[Brain Regions]]\n===\n\nBrain Regions:\n===\n- [[Hypothalamus]]\n===\n\nHypothalamus:\n===\n- [[{Behaviors} of Hypothalamus]]\n===\n\nBehaviors of Hypothalamus:\n===\n- [[{Role }of Hypothalamus {in Sleep}]]\n===\n\nRole of Hypothalamus in Sleep:\nThe hypothalamus has a large role in sleep:\n- It receives light information from the retina.\n- When enough time has passed without seeing bright light, the hypothalamus causes the release of melatonin from the pineal gland.\n- This mechanism was documented in [[Moore{|,} 1974]].\n\n* History:\n===\n- [[History of Academia]]\n===\n\nHistory of Academia:\n===\n- [[Historical Publications]]\n===\n\nHistorical Publications:\n===\n- [[Psychology Publications]]\n===\n\nPsychology Publications:\n===\n- [[Brain Research journal]]\n===\n\nBrain Research journal:\n===\n- [[Brain Research {May 1974}]]\n===\n\nBrain Research May 1974:\nThe May 1974 issue of publisher Elsevier’s “Brain Research” journal included:\n- [[Moore 1974|Moore and Klein: Visual pathways and the central neural control of a circadian rhythm in pineal serotonin N-acetyltransferase activity]]\n\n\n* Lifestyle:\n===\n- [[Health]]\n===\n\nHealth:\n===\n- [[Sleep]]\n===\n\nSleep:\n===\n- [[Sleep Tips]]\n===\n\nSleep Tips:\n===\n- [[Reducing light]]\n===\n\nReducing light:\nOne of the most impactful things a person can do to improve sleep is to reduce exposure to light close to bedtime.\n- This is because bright light causes the hypothalamus to inhibit melatonin release.\n- This mechanism was first described in [[Moore 1974]].\n\n* Moore 1974: Appearing in _Elsevier’s_ May 1974 edition of the journal _Brain Research_, Robert Y. Moore and David C. Klein published “Visual pathways and the central neural control of a circadian rhythm in pineal serotonin N-acetyltransferase activity” [(Link)](https://www.sciencedirect.com/science/article/abs/pii/0006899374901887)\n<br><br>\nThe study documented how the hypothalamus detects darkness via the retina and causes the pineal gland to release precursors to melatonin.\n<br>Abstract:\n> The pineal enzyme, serotonin N-acetyltransferase, exhibits a circadian rhythm of activity with nocturnal levels 15–30 times greater than those observed during a light period in the rat. This rhythm has been shown to be under visual control mediated by the sympathetic innervation to the pineal. The present study examined the participation of visual pathways and other central mechanisms in the regulation of pineal serotonin N-acetyltransferase activity. Following destruction of all visual pathways by blinding, the rhythm in enzyme activity is no longer controlled by the pattern of diurnal lighting and becomes free-running. Destruction of the primary optic tracts, the accessory optic tracts, or both of these components of the central retinal projection together, does not alter visual entrainment of the enzyme rhythm. In the absence of these pathways the only central retinal projection known to exist is a retinohypothalamic pathway branching directly off the optic chiasm to terminate bilaterally in the suprachiasmatic hypothalamic nuclei.\n===\n> [[Libraries|Try again]]\n> [[Playground#Part 10 Memorization|Finish]]\n===\n\n[Chemistry]\n\n* Chemical Element: A chemical element is a substance that cannot be broken down further by chemical reactions.`;\n\nexport default defaultText;\n","'use strict';\n\nconst wrapAnsi16 = (fn, offset) => (...args) => {\n\tconst code = fn(...args);\n\treturn `\\u001B[${code + offset}m`;\n};\n\nconst wrapAnsi256 = (fn, offset) => (...args) => {\n\tconst code = fn(...args);\n\treturn `\\u001B[${38 + offset};5;${code}m`;\n};\n\nconst wrapAnsi16m = (fn, offset) => (...args) => {\n\tconst rgb = fn(...args);\n\treturn `\\u001B[${38 + offset};2;${rgb[0]};${rgb[1]};${rgb[2]}m`;\n};\n\nconst ansi2ansi = n => n;\nconst rgb2rgb = (r, g, b) => [r, g, b];\n\nconst setLazyProperty = (object, property, get) => {\n\tObject.defineProperty(object, property, {\n\t\tget: () => {\n\t\t\tconst value = get();\n\n\t\t\tObject.defineProperty(object, property, {\n\t\t\t\tvalue,\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true\n\t\t\t});\n\n\t\t\treturn value;\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t});\n};\n\n/** @type {typeof import('color-convert')} */\nlet colorConvert;\nconst makeDynamicStyles = (wrap, targetSpace, identity, isBackground) => {\n\tif (colorConvert === undefined) {\n\t\tcolorConvert = require('color-convert');\n\t}\n\n\tconst offset = isBackground ? 10 : 0;\n\tconst styles = {};\n\n\tfor (const [sourceSpace, suite] of Object.entries(colorConvert)) {\n\t\tconst name = sourceSpace === 'ansi16' ? 'ansi' : sourceSpace;\n\t\tif (sourceSpace === targetSpace) {\n\t\t\tstyles[name] = wrap(identity, offset);\n\t\t} else if (typeof suite === 'object') {\n\t\t\tstyles[name] = wrap(suite[targetSpace], offset);\n\t\t}\n\t}\n\n\treturn styles;\n};\n\nfunction assembleStyles() {\n\tconst codes = new Map();\n\tconst styles = {\n\t\tmodifier: {\n\t\t\treset: [0, 0],\n\t\t\t// 21 isn't widely supported and 22 does the same thing\n\t\t\tbold: [1, 22],\n\t\t\tdim: [2, 22],\n\t\t\titalic: [3, 23],\n\t\t\tunderline: [4, 24],\n\t\t\tinverse: [7, 27],\n\t\t\thidden: [8, 28],\n\t\t\tstrikethrough: [9, 29]\n\t\t},\n\t\tcolor: {\n\t\t\tblack: [30, 39],\n\t\t\tred: [31, 39],\n\t\t\tgreen: [32, 39],\n\t\t\tyellow: [33, 39],\n\t\t\tblue: [34, 39],\n\t\t\tmagenta: [35, 39],\n\t\t\tcyan: [36, 39],\n\t\t\twhite: [37, 39],\n\n\t\t\t// Bright color\n\t\t\tblackBright: [90, 39],\n\t\t\tredBright: [91, 39],\n\t\t\tgreenBright: [92, 39],\n\t\t\tyellowBright: [93, 39],\n\t\t\tblueBright: [94, 39],\n\t\t\tmagentaBright: [95, 39],\n\t\t\tcyanBright: [96, 39],\n\t\t\twhiteBright: [97, 39]\n\t\t},\n\t\tbgColor: {\n\t\t\tbgBlack: [40, 49],\n\t\t\tbgRed: [41, 49],\n\t\t\tbgGreen: [42, 49],\n\t\t\tbgYellow: [43, 49],\n\t\t\tbgBlue: [44, 49],\n\t\t\tbgMagenta: [45, 49],\n\t\t\tbgCyan: [46, 49],\n\t\t\tbgWhite: [47, 49],\n\n\t\t\t// Bright color\n\t\t\tbgBlackBright: [100, 49],\n\t\t\tbgRedBright: [101, 49],\n\t\t\tbgGreenBright: [102, 49],\n\t\t\tbgYellowBright: [103, 49],\n\t\t\tbgBlueBright: [104, 49],\n\t\t\tbgMagentaBright: [105, 49],\n\t\t\tbgCyanBright: [106, 49],\n\t\t\tbgWhiteBright: [107, 49]\n\t\t}\n\t};\n\n\t// Alias bright black as gray (and grey)\n\tstyles.color.gray = styles.color.blackBright;\n\tstyles.bgColor.bgGray = styles.bgColor.bgBlackBright;\n\tstyles.color.grey = styles.color.blackBright;\n\tstyles.bgColor.bgGrey = styles.bgColor.bgBlackBright;\n\n\tfor (const [groupName, group] of Object.entries(styles)) {\n\t\tfor (const [styleName, style] of Object.entries(group)) {\n\t\t\tstyles[styleName] = {\n\t\t\t\topen: `\\u001B[${style[0]}m`,\n\t\t\t\tclose: `\\u001B[${style[1]}m`\n\t\t\t};\n\n\t\t\tgroup[styleName] = styles[styleName];\n\n\t\t\tcodes.set(style[0], style[1]);\n\t\t}\n\n\t\tObject.defineProperty(styles, groupName, {\n\t\t\tvalue: group,\n\t\t\tenumerable: false\n\t\t});\n\t}\n\n\tObject.defineProperty(styles, 'codes', {\n\t\tvalue: codes,\n\t\tenumerable: false\n\t});\n\n\tstyles.color.close = '\\u001B[39m';\n\tstyles.bgColor.close = '\\u001B[49m';\n\n\tsetLazyProperty(styles.color, 'ansi', () => makeDynamicStyles(wrapAnsi16, 'ansi16', ansi2ansi, false));\n\tsetLazyProperty(styles.color, 'ansi256', () => makeDynamicStyles(wrapAnsi256, 'ansi256', ansi2ansi, false));\n\tsetLazyProperty(styles.color, 'ansi16m', () => makeDynamicStyles(wrapAnsi16m, 'rgb', rgb2rgb, false));\n\tsetLazyProperty(styles.bgColor, 'ansi', () => makeDynamicStyles(wrapAnsi16, 'ansi16', ansi2ansi, true));\n\tsetLazyProperty(styles.bgColor, 'ansi256', () => makeDynamicStyles(wrapAnsi256, 'ansi256', ansi2ansi, true));\n\tsetLazyProperty(styles.bgColor, 'ansi16m', () => makeDynamicStyles(wrapAnsi16m, 'rgb', rgb2rgb, true));\n\n\treturn styles;\n}\n\n// Make the export immutable\nObject.defineProperty(module, 'exports', {\n\tenumerable: true,\n\tget: assembleStyles\n});\n","/* MIT license */\n/* eslint-disable no-mixed-operators */\nconst cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nconst reverseKeywords = {};\nfor (const key of Object.keys(cssKeywords)) {\n\treverseKeywords[cssKeywords[key]] = key;\n}\n\nconst convert = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\nmodule.exports = convert;\n\n// Hide .channels and .labels properties\nfor (const model of Object.keys(convert)) {\n\tif (!('channels' in convert[model])) {\n\t\tthrow new Error('missing channels property: ' + model);\n\t}\n\n\tif (!('labels' in convert[model])) {\n\t\tthrow new Error('missing channel labels property: ' + model);\n\t}\n\n\tif (convert[model].labels.length !== convert[model].channels) {\n\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t}\n\n\tconst {channels, labels} = convert[model];\n\tdelete convert[model].channels;\n\tdelete convert[model].labels;\n\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\tObject.defineProperty(convert[model], 'labels', {value: labels});\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst min = Math.min(r, g, b);\n\tconst max = Math.max(r, g, b);\n\tconst delta = max - min;\n\tlet h;\n\tlet s;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst l = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tlet rdif;\n\tlet gdif;\n\tlet bdif;\n\tlet h;\n\tlet s;\n\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst v = Math.max(r, g, b);\n\tconst diff = v - Math.min(r, g, b);\n\tconst diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = 0;\n\t\ts = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tconst r = rgb[0];\n\tconst g = rgb[1];\n\tlet b = rgb[2];\n\tconst h = convert.rgb.hsl(rgb)[0];\n\tconst w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\n\tconst k = Math.min(1 - r, 1 - g, 1 - b);\n\tconst c = (1 - r - k) / (1 - k) || 0;\n\tconst m = (1 - g - k) / (1 - k) || 0;\n\tconst y = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\nfunction comparativeDistance(x, y) {\n\t/*\n\t\tSee https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n\t*/\n\treturn (\n\t\t((x[0] - y[0]) ** 2) +\n\t\t((x[1] - y[1]) ** 2) +\n\t\t((x[2] - y[2]) ** 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tconst reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tlet currentClosestDistance = Infinity;\n\tlet currentClosestKeyword;\n\n\tfor (const keyword of Object.keys(cssKeywords)) {\n\t\tconst value = cssKeywords[keyword];\n\n\t\t// Compute comparative distance\n\t\tconst distance = comparativeDistance(rgb, value);\n\n\t\t// Check if its less, if so set as closest\n\t\tif (distance < currentClosestDistance) {\n\t\t\tcurrentClosestDistance = distance;\n\t\t\tcurrentClosestKeyword = keyword;\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tlet r = rgb[0] / 255;\n\tlet g = rgb[1] / 255;\n\tlet b = rgb[2] / 255;\n\n\t// Assume sRGB\n\tr = r > 0.04045 ? (((r + 0.055) / 1.055) ** 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? (((g + 0.055) / 1.055) ** 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? (((b + 0.055) / 1.055) ** 2.4) : (b / 12.92);\n\n\tconst x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tconst y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tconst z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tconst xyz = convert.rgb.xyz(rgb);\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tconst h = hsl[0] / 360;\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\tlet t2;\n\tlet t3;\n\tlet val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tconst t1 = 2 * l - t2;\n\n\tconst rgb = [0, 0, 0];\n\tfor (let i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tconst h = hsl[0];\n\tlet s = hsl[1] / 100;\n\tlet l = hsl[2] / 100;\n\tlet smin = s;\n\tconst lmin = Math.max(l, 0.01);\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tconst v = (l + s) / 2;\n\tconst sv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tconst h = hsv[0] / 60;\n\tconst s = hsv[1] / 100;\n\tlet v = hsv[2] / 100;\n\tconst hi = Math.floor(h) % 6;\n\n\tconst f = h - Math.floor(h);\n\tconst p = 255 * v * (1 - s);\n\tconst q = 255 * v * (1 - (s * f));\n\tconst t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tconst h = hsv[0];\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\tconst vmin = Math.max(v, 0.01);\n\tlet sl;\n\tlet l;\n\n\tl = (2 - s) * v;\n\tconst lmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tconst h = hwb[0] / 360;\n\tlet wh = hwb[1] / 100;\n\tlet bl = hwb[2] / 100;\n\tconst ratio = wh + bl;\n\tlet f;\n\n\t// Wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\tconst i = Math.floor(6 * h);\n\tconst v = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tconst n = wh + f * (v - wh); // Linear interpolation\n\n\tlet r;\n\tlet g;\n\tlet b;\n\t/* eslint-disable max-statements-per-line,no-multi-spaces */\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v;  g = n;  b = wh; break;\n\t\tcase 1: r = n;  g = v;  b = wh; break;\n\t\tcase 2: r = wh; g = v;  b = n; break;\n\t\tcase 3: r = wh; g = n;  b = v; break;\n\t\tcase 4: r = n;  g = wh; b = v; break;\n\t\tcase 5: r = v;  g = wh; b = n; break;\n\t}\n\t/* eslint-enable max-statements-per-line,no-multi-spaces */\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tconst c = cmyk[0] / 100;\n\tconst m = cmyk[1] / 100;\n\tconst y = cmyk[2] / 100;\n\tconst k = cmyk[3] / 100;\n\n\tconst r = 1 - Math.min(1, c * (1 - k) + k);\n\tconst g = 1 - Math.min(1, m * (1 - k) + k);\n\tconst b = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tconst x = xyz[0] / 100;\n\tconst y = xyz[1] / 100;\n\tconst z = xyz[2] / 100;\n\tlet r;\n\tlet g;\n\tlet b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// Assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * (r ** (1.0 / 2.4))) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * (g ** (1.0 / 2.4))) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * (b ** (1.0 / 2.4))) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet x;\n\tlet y;\n\tlet z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tconst y2 = y ** 3;\n\tconst x2 = x ** 3;\n\tconst z2 = z ** 3;\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet h;\n\n\tconst hr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst c = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tconst l = lch[0];\n\tconst c = lch[1];\n\tconst h = lch[2];\n\n\tconst hr = h / 360 * 2 * Math.PI;\n\tconst a = c * Math.cos(hr);\n\tconst b = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args, saturation = null) {\n\tconst [r, g, b] = args;\n\tlet value = saturation === null ? convert.rgb.hsv(args)[2] : saturation; // Hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tlet ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// Optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tconst r = args[0];\n\tconst g = args[1];\n\tconst b = args[2];\n\n\t// We use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tconst ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tlet color = args % 10;\n\n\t// Handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tconst mult = (~~(args > 50) + 1) * 0.5;\n\tconst r = ((color & 1) * mult) * 255;\n\tconst g = (((color >> 1) & 1) * mult) * 255;\n\tconst b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// Handle greyscale\n\tif (args >= 232) {\n\t\tconst c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tlet rem;\n\tconst r = Math.floor(args / 36) / 5 * 255;\n\tconst g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tconst b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tconst integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tconst match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tlet colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(char => {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tconst integer = parseInt(colorString, 16);\n\tconst r = (integer >> 16) & 0xFF;\n\tconst g = (integer >> 8) & 0xFF;\n\tconst b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst max = Math.max(Math.max(r, g), b);\n\tconst min = Math.min(Math.min(r, g), b);\n\tconst chroma = (max - min);\n\tlet grayscale;\n\tlet hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\n\tconst c = l < 0.5 ? (2.0 * s * l) : (2.0 * s * (1.0 - l));\n\n\tlet f = 0;\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\n\tconst c = s * v;\n\tlet f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tconst h = hcg[0] / 360;\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tconst pure = [0, 0, 0];\n\tconst hi = (h % 1) * 6;\n\tconst v = hi % 1;\n\tconst w = 1 - v;\n\tlet mg = 0;\n\n\t/* eslint-disable max-statements-per-line */\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\t/* eslint-enable max-statements-per-line */\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst v = c + g * (1.0 - c);\n\tlet f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst l = g * (1.0 - c) + 0.5 * c;\n\tlet s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\tconst v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tconst w = hwb[1] / 100;\n\tconst b = hwb[2] / 100;\n\tconst v = 1 - b;\n\tconst c = v - w;\n\tlet g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hsv = convert.gray.hsl;\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tconst val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tconst integer = (val << 16) + (val << 8) + val;\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tconst val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n","const conversions = require('./conversions');\nconst route = require('./route');\n\nconst convert = {};\n\nconst models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\tconst result = fn(args);\n\n\t\t// We're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (let len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(fromModel => {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tconst routes = route(fromModel);\n\tconst routeModels = Object.keys(routes);\n\n\trouteModels.forEach(toModel => {\n\t\tconst fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n","const conversions = require('./conversions');\n\n/*\n\tThis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tconst graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tconst models = Object.keys(conversions);\n\n\tfor (let len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tconst graph = buildGraph();\n\tconst queue = [fromModel]; // Unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tconst current = queue.pop();\n\t\tconst adjacents = Object.keys(conversions[current]);\n\n\t\tfor (let len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tconst adjacent = adjacents[i];\n\t\t\tconst node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tconst path = [graph[toModel].parent, toModel];\n\tlet fn = conversions[graph[toModel].parent][toModel];\n\n\tlet cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tconst graph = deriveBFS(fromModel);\n\tconst conversion = {};\n\n\tconst models = Object.keys(graph);\n\tfor (let len = models.length, i = 0; i < len; i++) {\n\t\tconst toModel = models[i];\n\t\tconst node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// No possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","'use strict';\nmodule.exports = {\n\tstdout: false,\n\tstderr: false\n};\n","'use strict';\nconst ansiStyles = require('ansi-styles');\nconst {stdout: stdoutColor, stderr: stderrColor} = require('supports-color');\nconst {\n\tstringReplaceAll,\n\tstringEncaseCRLFWithFirstIndex\n} = require('./util');\n\nconst {isArray} = Array;\n\n// `supportsColor.level` → `ansiStyles.color[name]` mapping\nconst levelMapping = [\n\t'ansi',\n\t'ansi',\n\t'ansi256',\n\t'ansi16m'\n];\n\nconst styles = Object.create(null);\n\nconst applyOptions = (object, options = {}) => {\n\tif (options.level && !(Number.isInteger(options.level) && options.level >= 0 && options.level <= 3)) {\n\t\tthrow new Error('The `level` option should be an integer from 0 to 3');\n\t}\n\n\t// Detect level if not set manually\n\tconst colorLevel = stdoutColor ? stdoutColor.level : 0;\n\tobject.level = options.level === undefined ? colorLevel : options.level;\n};\n\nclass ChalkClass {\n\tconstructor(options) {\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn chalkFactory(options);\n\t}\n}\n\nconst chalkFactory = options => {\n\tconst chalk = {};\n\tapplyOptions(chalk, options);\n\n\tchalk.template = (...arguments_) => chalkTag(chalk.template, ...arguments_);\n\n\tObject.setPrototypeOf(chalk, Chalk.prototype);\n\tObject.setPrototypeOf(chalk.template, chalk);\n\n\tchalk.template.constructor = () => {\n\t\tthrow new Error('`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.');\n\t};\n\n\tchalk.template.Instance = ChalkClass;\n\n\treturn chalk.template;\n};\n\nfunction Chalk(options) {\n\treturn chalkFactory(options);\n}\n\nfor (const [styleName, style] of Object.entries(ansiStyles)) {\n\tstyles[styleName] = {\n\t\tget() {\n\t\t\tconst builder = createBuilder(this, createStyler(style.open, style.close, this._styler), this._isEmpty);\n\t\t\tObject.defineProperty(this, styleName, {value: builder});\n\t\t\treturn builder;\n\t\t}\n\t};\n}\n\nstyles.visible = {\n\tget() {\n\t\tconst builder = createBuilder(this, this._styler, true);\n\t\tObject.defineProperty(this, 'visible', {value: builder});\n\t\treturn builder;\n\t}\n};\n\nconst usedModels = ['rgb', 'hex', 'keyword', 'hsl', 'hsv', 'hwb', 'ansi', 'ansi256'];\n\nfor (const model of usedModels) {\n\tstyles[model] = {\n\t\tget() {\n\t\t\tconst {level} = this;\n\t\t\treturn function (...arguments_) {\n\t\t\t\tconst styler = createStyler(ansiStyles.color[levelMapping[level]][model](...arguments_), ansiStyles.color.close, this._styler);\n\t\t\t\treturn createBuilder(this, styler, this._isEmpty);\n\t\t\t};\n\t\t}\n\t};\n}\n\nfor (const model of usedModels) {\n\tconst bgModel = 'bg' + model[0].toUpperCase() + model.slice(1);\n\tstyles[bgModel] = {\n\t\tget() {\n\t\t\tconst {level} = this;\n\t\t\treturn function (...arguments_) {\n\t\t\t\tconst styler = createStyler(ansiStyles.bgColor[levelMapping[level]][model](...arguments_), ansiStyles.bgColor.close, this._styler);\n\t\t\t\treturn createBuilder(this, styler, this._isEmpty);\n\t\t\t};\n\t\t}\n\t};\n}\n\nconst proto = Object.defineProperties(() => {}, {\n\t...styles,\n\tlevel: {\n\t\tenumerable: true,\n\t\tget() {\n\t\t\treturn this._generator.level;\n\t\t},\n\t\tset(level) {\n\t\t\tthis._generator.level = level;\n\t\t}\n\t}\n});\n\nconst createStyler = (open, close, parent) => {\n\tlet openAll;\n\tlet closeAll;\n\tif (parent === undefined) {\n\t\topenAll = open;\n\t\tcloseAll = close;\n\t} else {\n\t\topenAll = parent.openAll + open;\n\t\tcloseAll = close + parent.closeAll;\n\t}\n\n\treturn {\n\t\topen,\n\t\tclose,\n\t\topenAll,\n\t\tcloseAll,\n\t\tparent\n\t};\n};\n\nconst createBuilder = (self, _styler, _isEmpty) => {\n\tconst builder = (...arguments_) => {\n\t\tif (isArray(arguments_[0]) && isArray(arguments_[0].raw)) {\n\t\t\t// Called as a template literal, for example: chalk.red`2 + 3 = {bold ${2+3}}`\n\t\t\treturn applyStyle(builder, chalkTag(builder, ...arguments_));\n\t\t}\n\n\t\t// Single argument is hot path, implicit coercion is faster than anything\n\t\t// eslint-disable-next-line no-implicit-coercion\n\t\treturn applyStyle(builder, (arguments_.length === 1) ? ('' + arguments_[0]) : arguments_.join(' '));\n\t};\n\n\t// We alter the prototype because we must return a function, but there is\n\t// no way to create a function with a different prototype\n\tObject.setPrototypeOf(builder, proto);\n\n\tbuilder._generator = self;\n\tbuilder._styler = _styler;\n\tbuilder._isEmpty = _isEmpty;\n\n\treturn builder;\n};\n\nconst applyStyle = (self, string) => {\n\tif (self.level <= 0 || !string) {\n\t\treturn self._isEmpty ? '' : string;\n\t}\n\n\tlet styler = self._styler;\n\n\tif (styler === undefined) {\n\t\treturn string;\n\t}\n\n\tconst {openAll, closeAll} = styler;\n\tif (string.indexOf('\\u001B') !== -1) {\n\t\twhile (styler !== undefined) {\n\t\t\t// Replace any instances already present with a re-opening code\n\t\t\t// otherwise only the part of the string until said closing code\n\t\t\t// will be colored, and the rest will simply be 'plain'.\n\t\t\tstring = stringReplaceAll(string, styler.close, styler.open);\n\n\t\t\tstyler = styler.parent;\n\t\t}\n\t}\n\n\t// We can move both next actions out of loop, because remaining actions in loop won't have\n\t// any/visible effect on parts we add here. Close the styling before a linebreak and reopen\n\t// after next line to fix a bleed issue on macOS: https://github.com/chalk/chalk/pull/92\n\tconst lfIndex = string.indexOf('\\n');\n\tif (lfIndex !== -1) {\n\t\tstring = stringEncaseCRLFWithFirstIndex(string, closeAll, openAll, lfIndex);\n\t}\n\n\treturn openAll + string + closeAll;\n};\n\nlet template;\nconst chalkTag = (chalk, ...strings) => {\n\tconst [firstString] = strings;\n\n\tif (!isArray(firstString) || !isArray(firstString.raw)) {\n\t\t// If chalk() was called by itself or with a string,\n\t\t// return the string itself as a string.\n\t\treturn strings.join(' ');\n\t}\n\n\tconst arguments_ = strings.slice(1);\n\tconst parts = [firstString.raw[0]];\n\n\tfor (let i = 1; i < firstString.length; i++) {\n\t\tparts.push(\n\t\t\tString(arguments_[i - 1]).replace(/[{}\\\\]/g, '\\\\$&'),\n\t\t\tString(firstString.raw[i])\n\t\t);\n\t}\n\n\tif (template === undefined) {\n\t\ttemplate = require('./templates');\n\t}\n\n\treturn template(chalk, parts.join(''));\n};\n\nObject.defineProperties(Chalk.prototype, styles);\n\nconst chalk = Chalk(); // eslint-disable-line new-cap\nchalk.supportsColor = stdoutColor;\nchalk.stderr = Chalk({level: stderrColor ? stderrColor.level : 0}); // eslint-disable-line new-cap\nchalk.stderr.supportsColor = stderrColor;\n\nmodule.exports = chalk;\n","'use strict';\nconst TEMPLATE_REGEX = /(?:\\\\(u(?:[a-f\\d]{4}|\\{[a-f\\d]{1,6}\\})|x[a-f\\d]{2}|.))|(?:\\{(~)?(\\w+(?:\\([^)]*\\))?(?:\\.\\w+(?:\\([^)]*\\))?)*)(?:[ \\t]|(?=\\r?\\n)))|(\\})|((?:.|[\\r\\n\\f])+?)/gi;\nconst STYLE_REGEX = /(?:^|\\.)(\\w+)(?:\\(([^)]*)\\))?/g;\nconst STRING_REGEX = /^(['\"])((?:\\\\.|(?!\\1)[^\\\\])*)\\1$/;\nconst ESCAPE_REGEX = /\\\\(u(?:[a-f\\d]{4}|{[a-f\\d]{1,6}})|x[a-f\\d]{2}|.)|([^\\\\])/gi;\n\nconst ESCAPES = new Map([\n\t['n', '\\n'],\n\t['r', '\\r'],\n\t['t', '\\t'],\n\t['b', '\\b'],\n\t['f', '\\f'],\n\t['v', '\\v'],\n\t['0', '\\0'],\n\t['\\\\', '\\\\'],\n\t['e', '\\u001B'],\n\t['a', '\\u0007']\n]);\n\nfunction unescape(c) {\n\tconst u = c[0] === 'u';\n\tconst bracket = c[1] === '{';\n\n\tif ((u && !bracket && c.length === 5) || (c[0] === 'x' && c.length === 3)) {\n\t\treturn String.fromCharCode(parseInt(c.slice(1), 16));\n\t}\n\n\tif (u && bracket) {\n\t\treturn String.fromCodePoint(parseInt(c.slice(2, -1), 16));\n\t}\n\n\treturn ESCAPES.get(c) || c;\n}\n\nfunction parseArguments(name, arguments_) {\n\tconst results = [];\n\tconst chunks = arguments_.trim().split(/\\s*,\\s*/g);\n\tlet matches;\n\n\tfor (const chunk of chunks) {\n\t\tconst number = Number(chunk);\n\t\tif (!Number.isNaN(number)) {\n\t\t\tresults.push(number);\n\t\t} else if ((matches = chunk.match(STRING_REGEX))) {\n\t\t\tresults.push(matches[2].replace(ESCAPE_REGEX, (m, escape, character) => escape ? unescape(escape) : character));\n\t\t} else {\n\t\t\tthrow new Error(`Invalid Chalk template style argument: ${chunk} (in style '${name}')`);\n\t\t}\n\t}\n\n\treturn results;\n}\n\nfunction parseStyle(style) {\n\tSTYLE_REGEX.lastIndex = 0;\n\n\tconst results = [];\n\tlet matches;\n\n\twhile ((matches = STYLE_REGEX.exec(style)) !== null) {\n\t\tconst name = matches[1];\n\n\t\tif (matches[2]) {\n\t\t\tconst args = parseArguments(name, matches[2]);\n\t\t\tresults.push([name].concat(args));\n\t\t} else {\n\t\t\tresults.push([name]);\n\t\t}\n\t}\n\n\treturn results;\n}\n\nfunction buildStyle(chalk, styles) {\n\tconst enabled = {};\n\n\tfor (const layer of styles) {\n\t\tfor (const style of layer.styles) {\n\t\t\tenabled[style[0]] = layer.inverse ? null : style.slice(1);\n\t\t}\n\t}\n\n\tlet current = chalk;\n\tfor (const [styleName, styles] of Object.entries(enabled)) {\n\t\tif (!Array.isArray(styles)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!(styleName in current)) {\n\t\t\tthrow new Error(`Unknown Chalk style: ${styleName}`);\n\t\t}\n\n\t\tcurrent = styles.length > 0 ? current[styleName](...styles) : current[styleName];\n\t}\n\n\treturn current;\n}\n\nmodule.exports = (chalk, temporary) => {\n\tconst styles = [];\n\tconst chunks = [];\n\tlet chunk = [];\n\n\t// eslint-disable-next-line max-params\n\ttemporary.replace(TEMPLATE_REGEX, (m, escapeCharacter, inverse, style, close, character) => {\n\t\tif (escapeCharacter) {\n\t\t\tchunk.push(unescape(escapeCharacter));\n\t\t} else if (style) {\n\t\t\tconst string = chunk.join('');\n\t\t\tchunk = [];\n\t\t\tchunks.push(styles.length === 0 ? string : buildStyle(chalk, styles)(string));\n\t\t\tstyles.push({inverse, styles: parseStyle(style)});\n\t\t} else if (close) {\n\t\t\tif (styles.length === 0) {\n\t\t\t\tthrow new Error('Found extraneous } in Chalk template literal');\n\t\t\t}\n\n\t\t\tchunks.push(buildStyle(chalk, styles)(chunk.join('')));\n\t\t\tchunk = [];\n\t\t\tstyles.pop();\n\t\t} else {\n\t\t\tchunk.push(character);\n\t\t}\n\t});\n\n\tchunks.push(chunk.join(''));\n\n\tif (styles.length > 0) {\n\t\tconst errMessage = `Chalk template literal is missing ${styles.length} closing bracket${styles.length === 1 ? '' : 's'} (\\`}\\`)`;\n\t\tthrow new Error(errMessage);\n\t}\n\n\treturn chunks.join('');\n};\n","'use strict';\n\nconst stringReplaceAll = (string, substring, replacer) => {\n\tlet index = string.indexOf(substring);\n\tif (index === -1) {\n\t\treturn string;\n\t}\n\n\tconst substringLength = substring.length;\n\tlet endIndex = 0;\n\tlet returnValue = '';\n\tdo {\n\t\treturnValue += string.substr(endIndex, index - endIndex) + substring + replacer;\n\t\tendIndex = index + substringLength;\n\t\tindex = string.indexOf(substring, endIndex);\n\t} while (index !== -1);\n\n\treturnValue += string.substr(endIndex);\n\treturn returnValue;\n};\n\nconst stringEncaseCRLFWithFirstIndex = (string, prefix, postfix, index) => {\n\tlet endIndex = 0;\n\tlet returnValue = '';\n\tdo {\n\t\tconst gotCR = string[index - 1] === '\\r';\n\t\treturnValue += string.substr(endIndex, (gotCR ? index - 1 : index) - endIndex) + prefix + (gotCR ? '\\r\\n' : '\\n') + postfix;\n\t\tendIndex = index + 1;\n\t\tindex = string.indexOf('\\n', endIndex);\n\t} while (index !== -1);\n\n\treturnValue += string.substr(endIndex);\n\treturn returnValue;\n};\n\nmodule.exports = {\n\tstringReplaceAll,\n\tstringEncaseCRLFWithFirstIndex\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCAxMCA4IiB3aWR0aD0iOSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMSAwdjhoOHYtMmgtMXYxaC02di02aDF2LTF6bTQgMCAxLjUgMS41LTIuNSAyLjUgMSAxIDIuNS0yLjUgMS41IDEuNXYtNHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEsIDApIiAvPgo8L3N2Zz4K\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#_canopy{margin-top:20px;overflow-anchor:none;padding-bottom:100vh;min-height:110vh;font-family:\\\"Times New Roman\\\",Times,serif}h1.canopy-header{text-align:center;margin:auto;margin-top:20px;max-width:750px;word-break:break-word;hyphens:auto}hr.canopy-hr{width:120px;display:block;height:1px;border:0;border-top:5px solid #ccc;margin:0px auto}h1+section.canopy-topic-section{margin-top:30px}section.canopy-topic-section{margin-top:32px}section.canopy-section{margin-top:32px;unicode-bidi:unset}.canopy-topic-section hr+p{margin-top:27px}p.canopy-paragraph{overflow:visible;font-size:21px;max-width:750px;overflow-wrap:break-word;hyphens:auto;margin:auto;line-height:1.3;letter-spacing:-0.003em;font-weight:400;position:relative;unicode-bidi:plaintext}.canopy-topic-section hr+p{margin-top:31px}code.canopy-code-block{font-family:\\\"Courier New\\\",Courier,monospace;background-color:#eee;padding:2px 4px;border-radius:3px;border:.5px solid #ddd;color:#5a5a5a}.canopy-tooltip{position:relative;display:inline-block;cursor:pointer}.canopy-tooltip .canopy-tooltip-icon{font-size:11px}.canopy-tooltip .canopy-tooltiptext{visibility:hidden;width:140px;background-color:#fff;color:#000;text-align:center;border-radius:6px;border:1px solid #000;padding:10px;position:absolute;z-index:1;top:50%;left:105%;margin-left:10px;transform:translateY(-50%);opacity:0;transition:opacity .3s;font-size:14px}.canopy-tooltip:hover .canopy-tooltiptext{visibility:visible;opacity:1}.canopy-text-span{display:inline}.canopy-linebreak-span{display:block;margin-bottom:12px}a.canopy-selectable-link{text-decoration:none;color:#000;cursor:pointer}a.canopy-selectable-link:focus{outline:0}a.canopy-selectable-link{padding-right:11px;margin-right:-11px;padding-left:11px;margin-left:-11px}a.canopy-selectable-link:first-child:has(+.canopy-linebreak-span).canopy-multiline-link .canopy-link-content-container,.canopy-linebreak-span+a.canopy-selectable-link:has(+.canopy-linebreak-span).canopy-multiline-link .canopy-link-content-container,.canopy-linebreak-span+a.canopy-selectable-link:last-child.canopy-multiline-link .canopy-link-content-container,a.canopy-selectable-link:only-child.canopy-multiline-link .canopy-link-content-container{display:inline-block}a.canopy-selectable-link .canopy-link-content-container{background-color:#fff;padding-left:2px;padding-right:2px;border-radius:3px;border:1px solid #ddd;unicode-bidi:inherit}a.canopy-selectable-link .canopy-link-content-container:hover{background-color:#f5f6fe}a.canopy-selectable-link.canopy-selected-link .canopy-link-content-container,a.canopy-selectable-link.canopy-selected-link code .canopy-link-content-container{background-color:#edeefc;text-decoration:none}a.canopy-selectable-link.canopy-open-link:not(.canopy-selected-link) .canopy-link-content-container{background-color:#dedede;position:relative;background-color:#f0f0f0;border:1px solid #ccc;border-radius:1px;unicode-bidi:inherit}a.canopy-selectable-link.canopy-external-link .canopy-link-content-container .canopy-external-link-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");background-size:contain;background-repeat:no-repeat;top:-3.5px;left:0px;position:relative;vertical-align:text-bottom;width:8px;height:8px;display:inline-block}a.canopy-selectable-link:not(.canopy-open-link) .canopy-back-cycle-icon,a.canopy-selectable-link:not(.canopy-open-link) .canopy-forward-cycle-icon,a.canopy-selectable-link:not(.canopy-open-link) .canopy-provisional-cycle-icon{top:2px;left:1px;text-decoration:none;font-size:9px;position:relative}a.canopy-disabled-link{color:#000;pointer-events:none;cursor:not-allowed;opacity:.5;text-decoration:none}a.canopy-disabled-link .canopy-link-content-container{border-radius:1px;border:1px solid #ddd}a.canopy-selectable-link.canopy-linked-image{text-decoration:none}a.canopy-selectable-link.canopy-linked-image .canopy-link-content-container{border:none;background-color:inherit}a.canopy-selectable-link.canopy-linked-image.canopy-external-link .canopy-external-link-icon{display:none}hr.canopy-footnote-rule{width:750px;display:block;height:1px;border:0;border-top:1px solid #ccc;margin:12px 0;padding:0}sup{font-size:60%;padding:2px}.canopy-footnote-span{font-size:80%;display:block}.canopy-footnote-span span{margin-left:2px}.canopy-footnote-span:not(:last-child){padding-bottom:7px}blockquote{padding:0 .7em;color:#565e67;white-space:pre-wrap;margin-left:0px;margin-right:0px;margin-top:12px;margin-bottom:12px}blockquote a,blockquote a.canopy-selectable-link{color:#565e67}blockquote[dir=rtl]{border-right:.25em solid #d3d3d3}blockquote[dir=ltr]{border-left:.25em solid #d3d3d3}blockquote a.canopy-selectable-link .canopy-link-content-container{background-color:rgba(255,255,255,0);padding-left:0px;padding-right:0px;border:none;text-decoration:underline #d3d3d3}blockquote a.canopy-selectable-link.canopy-open-link .canopy-link-content-container{background-color:#dedede;text-decoration:none}blockquote a.canopy-selectable-link:hover{text-decoration:underline #000}blockquote .canopy-linebreak-span{margin-bottom:0px}blockquote .canopy-blockquote-padded-linebreak{margin-bottom:8px;display:block}pre{margin:10px 10px;background-color:#eff0f1;padding:5px;font-size:85%}code{background-color:#eff0f1;font-size:90%}table{margin:21px auto auto auto;table-layout:auto;max-width:90%;border-collapse:collapse;border:none;font-size:18px;min-width:500px;table-layout:fixed}table:not(:last-child){margin-bottom:25px}table td,table th{border:1px solid #000;text-align:center;padding:10px}table td.hidden,table th.hidden{opacity:0;border:none}table td br,table th br{display:block;content:\\\"\\\";padding-bottom:2px}table td.canopy-table-link-cell{cursor:pointer;user-select:text;background-color:#fff}table td.canopy-table-link-cell a.canopy-selectable-link{text-decoration:none;text-shadow:none;background-color:rgba(255,255,255,0);border:none;padding:4px;display:block}table td.canopy-table-link-cell a.canopy-selectable-link .canopy-link-content-container,table td.canopy-table-link-cell a.canopy-selectable-link.canopy-open-link .canopy-link-content-container,table td.canopy-table-link-cell a.canopy-selectable-link.canopy-selected-link .canopy-link-content-container{border:none;background-color:inherit}table td.canopy-table-link-cell:has(.canopy-selected-link){background-color:#edeefc}table td.canopy-table-link-cell:has(.canopy-open-link):not(:has(.canopy-selected-link)){background-color:#eae8e8}table td.canopy-table-link-cell:hover:not(:has(.canopy-selected-link)),table td.canopy-table-link-cell:hover:has(.canopy-open-link):not(:has(.canopy-selected-link)){background-color:#f5f6fe}table td.canopy-table-link-cell:hover:not(:has(.canopy-selected-link)) .canopy-selected-link,table td.canopy-table-link-cell:hover:has(.canopy-open-link):not(:has(.canopy-selected-link)) .canopy-selected-link{background-color:#f5f6fe}table td.canopy-table-link-cell:has(a.canopy-disabled-link){background-color:#fff;color:#000;cursor:not-allowed;opacity:.7;pointer-events:none}table td.canopy-table-link-cell:has(a.canopy-disabled-link) a.canopy-disabled-link{background-color:rgba(255,255,255,0);text-decoration:none;text-shadow:none}table td.canopy-table-link-cell:has(a.canopy-disabled-link) a.canopy-disabled-link .canopy-link-content-container{border:none}.canopy-menu{display:flex;flex-direction:column;align-items:center;margin:0 auto;gap:10px}.canopy-menu .canopy-menu-row{display:flex;justify-content:center;box-sizing:border-box;gap:10px}.canopy-menu.canopy-align-right{align-items:flex-end}.canopy-menu.canopy-align-right .canopy-menu-row{justify-content:flex-end}.canopy-menu.canopy-align-left{align-items:flex-start}.canopy-menu.canopy-align-mixed{align-items:normal}.canopy-menu:not(:first-child){margin-top:25px}.canopy-menu:not(:last-child){margin-bottom:25px}.canopy-menu .canopy-menu-cell{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:center;border:1px solid #000;border-radius:0px;box-sizing:border-box;background-color:#fff;padding:10px;text-align:center;align-self:stretch;white-space:normal;overflow-wrap:normal;word-break:normal;hyphens:none}.canopy-menu .canopy-menu-cell.canopy-menu-cell-last-left{margin-right:auto}.canopy-menu .canopy-menu-cell.canopy-menu-cell-first-right{margin-left:auto}.canopy-menu .canopy-menu-cell .canopy-menu-content-container{display:inline;max-width:100%;max-height:100%}.canopy-menu .canopy-menu-cell br{display:block;content:\\\"\\\";padding-bottom:2px}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell{cursor:pointer;border:1.5px solid #000;border-radius:5px;display:flex;justify-content:center;align-items:center;user-select:none}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell a.canopy-selectable-link{text-decoration:none;text-shadow:none;user-select:none}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell a.canopy-selectable-link span.canopy-link-content-container{border:none;background-color:inherit}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell:has(.canopy-selected-link){background-color:#edeefc}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell:has(.canopy-open-link:not(.canopy-selected-link)){background-color:#eae8e8}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell:has(a.canopy-selectable-link:hover:not(.canopy-selected-link)),.canopy-menu .canopy-menu-cell.canopy-menu-link-cell:has(a.canopy-selectable-link:hover.canopy-open-link:not(.canopy-selected-link)){background-color:#f5f6fe}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell .canopy-link-content-container .canopy-external-link-icon,.canopy-menu .canopy-menu-cell.canopy-menu-link-cell .canopy-link-content-container .canopy-forward-cycle-icon,.canopy-menu .canopy-menu-cell.canopy-menu-link-cell .canopy-link-content-container .canopy-back-cycle-icon,.canopy-menu .canopy-menu-cell.canopy-menu-link-cell .canopy-link-content-container .canopy-provisional-cycle-icon{font-size:11px;margin-left:-5px;position:relative;top:5px;left:6px;white-space:nowrap}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell .canopy-link-content-container .canopy-external-link-icon[dir=rtl],.canopy-menu .canopy-menu-cell.canopy-menu-link-cell .canopy-link-content-container .canopy-forward-cycle-icon[dir=rtl],.canopy-menu .canopy-menu-cell.canopy-menu-link-cell .canopy-link-content-container .canopy-back-cycle-icon[dir=rtl],.canopy-menu .canopy-menu-cell.canopy-menu-link-cell .canopy-link-content-container .canopy-provisional-cycle-icon[dir=rtl]{top:0px;left:0px}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell:has(.canopy-external-link).canopy-selectable-link *{text-decoration:none}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell:has(.canopy-external-link) .canopy-menu-content-container .canopy-external-link-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");background-size:contain;background-repeat:no-repeat;top:-3px;left:5px;position:relative;vertical-align:text-bottom;width:8px;height:8px;display:inline-block}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell:has(.canopy-disabled-link){background-color:#fff;color:#000;cursor:not-allowed;opacity:.4;pointer-events:none}.canopy-menu .canopy-menu-cell.canopy-menu-link-cell:has(.canopy-disabled-link) .canopy-link-content-container{border:none}.canopy-menu.canopy-eigth-pill .canopy-menu-cell{width:85px;padding-left:12px;padding-right:12px;padding-top:2px;padding-bottom:2px;height:45px}.canopy-menu.canopy-quarter-pill .canopy-menu-cell{width:180px;padding:9px;height:50px}.canopy-menu.canopy-third-pill .canopy-menu-cell{width:243.3333333333px;padding:9px;height:50px}.canopy-menu.canopy-half-pill .canopy-menu-cell{width:370px;padding:9px;height:50px}.canopy-menu.canopy-quarter-card .canopy-menu-cell{width:180px;height:95px;padding:15px}.canopy-menu.canopy-third-card .canopy-menu-cell{width:243.3333333333px;height:120px;padding:15px}.canopy-menu.canopy-half-tube .canopy-menu-cell{width:370px;height:160px;padding:30px}.canopy-menu.canopy-half-card .canopy-menu-cell{width:370px;height:265px;min-height:160px;padding:30px}.canopy-image-container{display:flex;justify-content:center;object-fit:cover;margin-top:15px}.canopy-image-container:not(:last-child){margin-bottom:15px}.canopy-image-container .canopy-image img{display:block;max-width:100%;width:auto}.canopy-image-container .canopy-image span.canopy-image-caption{margin:0px auto;width:100%;padding:6px 0px;text-align:left;display:block;font-size:16px;line-height:18px;color:#595959;background-color:#fff}.canopy-image-container .canopy-image span.canopy-image-caption a{color:#595959}.canopy-image-container .canopy-image span.canopy-image-caption a.canopy-selectable-link{border:none;text-decoration:underline #d3d3d3}.canopy-image-container .canopy-image span.canopy-image-caption a.canopy-selectable-link:hover{text-decoration:underline #000}.canopy-image-container .canopy-image span.canopy-image-caption a.canopy-link-content-container{border:none;background-color:inherit}.canopy-image-container .canopy-image span.canopy-image-caption a.canopy-selected-link{background-color:#c9ccff}.canopy-image-container .canopy-image span.canopy-image-caption a.canopy-external-link .canopy-external-link-icon{display:none}.canopy-image-container .canopy-image span.canopy-image-caption span{display:inline}div.canopy-image-div{float:right;border:1px solid #c8ccd1;padding:3px;background-color:#f8f9fa;font-size:94%;text-align:center;overflow:hidden;margin:10px}.canopy-open-link .canopy-image,.canopy-selected-link .canopy-image{position:relative}.canopy-selected-link .canopy-image::after{content:\\\"\\\";position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(130,150,250,.3);pointer-events:none}.canopy-open-link:not(.canopy-selected-link) .canopy-image::after{content:\\\"\\\";position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(128,128,128,.2);pointer-events:none}div.canopy-image-div>sup{display:block}ol,ul{margin-top:15px;margin-left:10px;margin-right:10px;margin-bottom:0px}ol:not(:last-child),ul:not(:last-child){margin-bottom:15px}ol li:not(:last-child),ul li:not(:last-child){margin-bottom:10px}div.canopy-raw-html{display:inline}div.canopy-raw-html .canopy-html-insertion{display:inline}\", \"\",{\"version\":3,\"sources\":[\"webpack://./client/style/canopy.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"#_canopy {\\n  margin-top: 20px;\\n  overflow-anchor: none; // Prevent browser from trying to maintain position when page contents change, which might interfere with window.scrollTo\\n\\n  /* Removing DOM elements from the bottom of the screen can force the page to scroll upward to the existing elements\\n  which is not animated. If we keep a padding on the bottom of the last element just beyond the viewport, then\\n  removal of elements from the bottom of the visible stack never brings the real bottom of the page into view, and so\\n  the scroll upwards can be animated using the window.scrollTo method. */\\n\\n  padding-bottom: calc(100vh);\\n  min-height: calc(110vh); // to avoid scroll bar appearing when page length changes for small content that doesn't need scrolling\\n\\n  font-family: \\\"Times New Roman\\\", Times, serif; // good default and standardizes layout for browser tests\\n}\\n\\nh1.canopy-header {\\n  text-align: center;\\n  margin: auto;\\n  margin-top: 20px;\\n  max-width: 750px;\\n  word-break: break-word;\\n  hyphens: auto;\\n}\\n\\nhr.canopy-hr {\\n  width: 120px;\\n  display: block;\\n  height: 1px;\\n  border: 0;\\n  border-top: 5px solid #ccc;\\n  margin: 0px auto;\\n}\\n\\nh1 + section.canopy-topic-section {\\n  margin-top: 30px;\\n}\\n\\nsection.canopy-topic-section {\\n  margin-top: 32px; // has to match .canopy-topic-section hr + p\\n}\\n\\nsection.canopy-section {\\n  margin-top: 32px;\\n  unicode-bidi: unset;\\n}\\n\\n.canopy-topic-section hr + p {\\n  margin-top: 27px;\\n}//\\n\\np.canopy-paragraph {\\n  overflow: visible; // In case external link icon is at end of line\\n  font-size: 21px;\\n  max-width: 750px;\\n  overflow-wrap: break-word; // this causes eg table cells to break long lines into rows\\n  //word-break: break-word; // this separates words in table cells\\n  hyphens: auto; // not sure we want this, rather put whole word on next line?\\n  margin: auto;\\n\\n  line-height: 1.3;\\n  letter-spacing: -.003em;\\n  font-weight: 400;\\n\\n  position: relative; // to allow absolute children\\n  unicode-bidi: plaintext; // to allow lines in different directions\\n}//\\n\\n.canopy-topic-section hr + p {\\n  margin-top: 31px; // 35px minus 1px bar thickness\\n}\\n\\ncode.canopy-code-block {\\n  font-family: 'Courier New', Courier, monospace; /* Monospaced font for code */\\n  background-color: #eee; /* Light background to highlight code */\\n  padding: 2px 4px; /* Small padding around the code */\\n  border-radius: 3px; /* Optional: rounded corners */\\n  border: .5px solid #ddd; /* Optional: light border */\\n  color: #5a5a5a; /* Subtle dark gray color for the code text, less harsh than black */\\n}\\n\\n// Tool tip\\n\\n.canopy-tooltip {\\n  position: relative;\\n  display: inline-block;\\n  cursor: pointer;\\n\\n  .canopy-tooltip-icon {\\n    font-size: 11px;\\n  }\\n\\n  .canopy-tooltiptext {\\n    visibility: hidden;\\n    width: 140px;\\n    background-color: white;\\n    color: black;\\n    text-align: center;\\n    border-radius: 6px;\\n    border: 1px solid black;\\n    padding: 10px;\\n    position: absolute;\\n    z-index: 1;\\n    top: 50%;\\n    left: 105%;\\n    margin-left: 10px;\\n    transform: translateY(-50%);\\n    opacity: 0;\\n    transition: opacity 0.3s;\\n    font-size: 14px;\\n  }\\n\\n  &:hover .canopy-tooltiptext {\\n    visibility: visible;\\n    opacity: 1;\\n  }\\n}\\n\\n// Text\\n.canopy-text-span {\\n  display: inline;\\n}\\n\\n.canopy-linebreak-span {\\n  display: block;\\n  margin-bottom:12px;\\n}\\n\\n///////////// Link styles /////////////////\\n\\na.canopy-selectable-link { // even menu and table cells\\n  text-decoration: none;\\n  color: black;\\n  cursor: pointer;\\n\\n  &:focus {\\n    outline: 0;\\n  }\\n}\\n\\na.canopy-selectable-link {\\n  padding-right: 11px; // following punctuation shouldn't wrap without link\\n  margin-right: -11px;\\n  \\n  padding-left: 11px; // For RTL text\\n  margin-left: -11px;\\n\\n  &:first-child:has( + .canopy-linebreak-span), // for top-level text on its own line\\n    .canopy-linebreak-span + &:has( + .canopy-linebreak-span),\\n    .canopy-linebreak-span + &:last-child,\\n    &:only-child {\\n      &.canopy-multiline-link .canopy-link-content-container {\\n        display: inline-block; // put border around multi-line content as one unit\\n      }\\n    }\\n  \\n  .canopy-link-content-container { // putting bg on inner container lets outer wrapper have non-bg padding\\n    background-color: #FFFFFF;\\n    \\n    padding-left: 2px;\\n    padding-right: 2px;\\n\\n    border-radius: 3px;\\n    border: 1px solid #dddddd;\\n\\n    unicode-bidi: inherit; // prevents dir=auto from making RTL text align left\\n\\n    &:hover {\\n      background-color: #f5f6fe;\\n    }\\n  }\\n\\n  &.canopy-selected-link, &.canopy-selected-link code  {\\n    .canopy-link-content-container {\\n      background-color: #edeefc;\\n      text-decoration: none;\\n    }\\n  }\\n\\n  &.canopy-open-link:not(.canopy-selected-link) .canopy-link-content-container {\\n    background-color: #dedede;\\n    position: relative;\\n\\n    background-color: #f0f0f0; /* Slightly darker background to indicate pressing */\\n    border: 1px solid #cccccc;  /* Darker border to enhance the pressed effect */\\n    border-radius: 1px;         /* Same border-radius to maintain consistency */\\n    unicode-bidi: inherit;      /* Keep same text rendering */\\n  }\\n\\n  &.canopy-external-link .canopy-link-content-container .canopy-external-link-icon {\\n    /* Open Iconic Icon Set, MIT License, https://iconduck.com/icons/53818/external-link */\\n    background-image: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCAxMCA4IiB3aWR0aD0iOSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMSAwdjhoOHYtMmgtMXYxaC02di02aDF2LTF6bTQgMCAxLjUgMS41LTIuNSAyLjUgMSAxIDIuNS0yLjUgMS41IDEuNXYtNHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEsIDApIiAvPgo8L3N2Zz4K);\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n    top: -3.5px;\\n    left: 0px;\\n    position: relative;\\n    vertical-align: text-bottom;\\n    width: 8px;\\n    height: 8px;\\n    display: inline-block;\\n  }\\n\\n  &:not(.canopy-open-link) { // if it is open, it has been inlined and isn't a cycle\\n    .canopy-back-cycle-icon, .canopy-forward-cycle-icon, .canopy-provisional-cycle-icon {\\n      top: 2px;\\n      left: 1px;\\n      text-decoration: none;\\n      font-size: 9px;\\n      position: relative;\\n    }\\n  }\\n}\\n\\na.canopy-disabled-link {\\n  color: #000000;\\n  pointer-events: none;\\n  cursor: not-allowed;\\n  opacity: 0.5;\\n  text-decoration: none;\\n  .canopy-link-content-container {\\n    border-radius: 1px;\\n    border: 1px solid #dddddd;\\n  }\\n}\\n\\na.canopy-selectable-link.canopy-linked-image {\\n  text-decoration: none;\\n\\n  .canopy-link-content-container {\\n    border: none;\\n    background-color: inherit;\\n  }\\n\\n  &.canopy-external-link .canopy-external-link-icon {\\n    display: none;\\n  }\\n}\\n\\n/////////////////////////////////////////////\\n\\nhr.canopy-footnote-rule {\\n  width: 750px;\\n  display: block;\\n  height: 1px;\\n  border: 0;\\n  border-top: 1px solid #ccc;\\n  margin: 12px 0;\\n  padding: 0;\\n}\\n\\nsup {\\n  font-size: 60%;\\n  padding: 2px;\\n}\\n\\n.canopy-footnote-span {\\n  font-size: 80%;\\n  display: block;\\n  span { // text after number\\n    margin-left: 2px;\\n  }\\n  &:not(:last-child) {\\n    padding-bottom: 7px;\\n  }\\n}\\n\\nblockquote {\\n  padding: 0 .7em;\\n  color: #565e67;\\n  white-space: pre-wrap;\\n\\n  a, a.canopy-selectable-link {\\n    color: #565e67;\\n  }\\n\\n  &[dir=\\\"rtl\\\"] {\\n    border-right: 0.25em solid lightgray;\\n/*      margin-right: 10px;*/\\n  }\\n\\n  &[dir=\\\"ltr\\\"] {\\n    border-left: 0.25em solid lightgray;\\n/*      margin-left: 10px;*/\\n  }\\n\\n  margin-left: 0px;\\n  margin-right: 0px;\\n  margin-top: 12px;\\n  margin-bottom: 12px;\\n\\n  a.canopy-selectable-link {\\n    .canopy-link-content-container {\\n      //reset button styling\\n      background-color: #FFFFFF00;\\n      padding-left: 0px;\\n      padding-right: 0px;\\n      border: none;\\n      text-decoration: underline #D3D3D3;\\n    }\\n\\n    &.canopy-open-link .canopy-link-content-container {\\n      background-color: #dedede;\\n      text-decoration: none;\\n    }\\n\\n    &:hover {\\n      text-decoration: underline #000000;\\n    }\\n  }\\n\\n  .canopy-linebreak-span {\\n    margin-bottom: 0px; // unset default\\n  }\\n\\n  .canopy-blockquote-padded-linebreak { // we replace break tags to be able to give them padding\\n    margin-bottom: 8px;\\n    display: block;\\n  }\\n}\\n\\npre {\\n  margin: 10px 10px;\\n  background-color: #eff0f1;\\n  padding: 5px;\\n  font-size: 85%;\\n}\\n\\ncode {\\n  background-color: #eff0f1;\\n  font-size: 90%;\\n}\\n\\ntable {\\n  margin: 21px auto auto auto;\\n  table-layout: auto;\\n  max-width: 90%;\\n  border-collapse: collapse;\\n  border: none; // we put the border on the TDs to allow omitted table cells\\n  font-size: 18px;\\n  min-width: 500px;\\n  table-layout: fixed;\\n\\n  &:not(:last-child) {\\n    margin-bottom: 25px;\\n  }\\n\\n  td, th {\\n    border: 1px solid black;\\n    text-align: center;\\n    padding: 10px;\\n\\n    &.hidden {\\n      opacity: 0;\\n      border: none;\\n    }\\n\\n    br {\\n      display: block; // makes it have a width\\n      content: \\\"\\\"; // clears default height\\n      padding-bottom: 2px;\\n    }\\n  }\\n\\n  td.canopy-table-link-cell {\\n    cursor: pointer;\\n    user-select: text;\\n    background-color: #ffffff;\\n\\n    a.canopy-selectable-link {\\n      text-decoration: none;\\n      text-shadow: none;\\n      background-color: #FFFFFF00;\\n      border: none;\\n      padding: 4px; // to force breaking onto multiple lines\\n      display: block; // makes link text spacing more regular\\n    \\n      &, &.canopy-open-link, &.canopy-selected-link {\\n        .canopy-link-content-container {\\n          border: none;\\n          background-color: inherit;\\n        }\\n      }\\n    }\\n    \\n    &:has(.canopy-selected-link) {\\n      background-color: #edeefc;\\n    }\\n\\n    &:has(.canopy-open-link):not(:has(.canopy-selected-link)) {\\n      background-color: #eae8e8;\\n    }\\n\\n    &:hover:not(:has(.canopy-selected-link)), // selected link style overrides hover\\n    &:hover:has(.canopy-open-link):not(:has(.canopy-selected-link)) {\\n      background-color: #f5f6fe;\\n\\n      .canopy-selected-link {\\n          background-color: #f5f6fe;\\n      }\\n    }\\n\\n    &:has(a.canopy-disabled-link) {\\n      background-color: #ffffff;\\n      color: #000000;\\n      cursor: not-allowed;\\n      opacity: 0.7;\\n      pointer-events: none;\\n\\n      a.canopy-disabled-link {\\n        background-color: #FFFFFF00;\\n        text-decoration: none;\\n        text-shadow: none;\\n\\n        .canopy-link-content-container {\\n          border: none;\\n        }\\n      }\\n    }\\n  }\\n}\\n\\n.canopy-menu {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center; /* This centers the rows within the container */\\n  margin: 0 auto;\\n  gap: 10px;\\n\\n  .canopy-menu-row {\\n    display: flex;\\n    justify-content: center;\\n    box-sizing: border-box;\\n    gap: 10px;\\n  }\\n\\n  &.canopy-align-right {\\n    align-items: flex-end;\\n    .canopy-menu-row {\\n      justify-content: flex-end;\\n    }\\n  }\\n\\n  &.canopy-align-left {\\n    align-items: flex-start;\\n  }\\n\\n  &.canopy-align-mixed {\\n    align-items: normal;\\n  }\\n\\n  &:not(:first-child) {\\n    margin-top: 25px; // has to be in sync with size between section elements for button-paragraph sequences\\n  }\\n\\n  &:not(:last-child) {\\n    margin-bottom: 25px;\\n  }\\n\\n  .canopy-menu-cell {\\n    display: flex;\\n    flex-direction: row; /* Arrange items horizontally */\\n    flex-wrap: wrap; /* Allow items to wrap within the cell */\\n    justify-content: center; /* Center content horizontally */\\n    align-items: center; /* Center content vertically */\\n    border: 1px solid black;\\n    border-radius: 0px;\\n    box-sizing: border-box;\\n    background-color: white;\\n    padding: 10px; /* Add some padding inside cells */\\n    text-align: center; /* This will center the text inside the flex items */\\n    align-self: stretch; /* Stretch the child items to fill the cell's width */\\n    \\n    white-space: normal; /* Allow the text to wrap */\\n    overflow-wrap: normal; // we don't want breaking during size evaluation\\n    word-break: normal; \\n    hyphens: none;\\n\\n    &.canopy-menu-cell-last-left { // only the right-most left needs margin\\n      margin-right: auto;\\n    }\\n\\n    &.canopy-menu-cell-first-right { // only the left-most right needs margin\\n      margin-left: auto;\\n    }\\n\\n    .canopy-menu-content-container {\\n      display: inline;\\n      max-width: 100%;\\n      max-height: 100%;\\n    }\\n\\n    &.canopy-menu-ordinal-cell .canopy-menu-content-container {\\n      //width: 80%; // to keep the numbers in a similar location in each cell\\n    }\\n\\n    br {\\n      display: block; // makes it have a width\\n      content: \\\"\\\"; // clears default height\\n      padding-bottom: 2px;\\n    }\\n  }\\n\\n  .canopy-menu-cell.canopy-menu-link-cell {\\n    cursor: pointer;\\n    border: 1.5px solid black;\\n    border-radius: 5px;\\n    display: flex;\\n    justify-content: center; /* Center content horizontally */\\n    align-items: center; /* Center content vertically */\\n    user-select: none;\\n\\n    a.canopy-selectable-link {\\n      text-decoration: none;\\n      text-shadow: none;\\n      user-select: none;\\n\\n      span.canopy-link-content-container {\\n        border: none;\\n        background-color: inherit;\\n      }\\n    }\\n\\n    &:has(.canopy-selected-link) {\\n      background-color: #edeefc;\\n    }\\n\\n    &:has(.canopy-open-link:not(.canopy-selected-link)) {\\n      background-color: #eae8e8;\\n    }\\n\\n    &:has(a.canopy-selectable-link:hover:not(.canopy-selected-link)), // selected link style overrides hover\\n    &:has(a.canopy-selectable-link:hover.canopy-open-link:not(.canopy-selected-link)) {\\n      background-color: #f5f6fe;\\n    }\\n\\n    .canopy-link-content-container {\\n      .canopy-external-link-icon, .canopy-forward-cycle-icon, .canopy-back-cycle-icon, .canopy-provisional-cycle-icon {\\n        font-size: 11px;\\n        margin-left: -5px; // Negative margin to pull the icon closer to the last word\\n        position: relative; // Allows for position adjustment\\n        top: 5px;\\n        left: 6px;\\n        white-space: nowrap; // Prevents the icon from wrapping\\n      \\n        &[dir=\\\"rtl\\\"] {\\n          top: 0px; // find good values\\n          left: 0px; \\n        }\\n      }\\n    }\\n\\n    &:has(.canopy-external-link) {\\n      &.canopy-selectable-link * {\\n        text-decoration: none;\\n      }\\n\\n      .canopy-menu-content-container .canopy-external-link-icon {\\n        /* Open Iconic Icon Set, MIT License, https://iconduck.com/icons/53818/external-link */\\n        background-image: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCAxMCA4IiB3aWR0aD0iOSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMSAwdjhoOHYtMmgtMXYxaC02di02aDF2LTF6bTQgMCAxLjUgMS41LTIuNSAyLjUgMSAxIDIuNS0yLjUgMS41IDEuNXYtNHoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEsIDApIiAvPgo8L3N2Zz4K);\\n        background-size: contain;\\n        background-repeat: no-repeat;\\n        top: -3px;\\n        left: 5px;\\n        position: relative;\\n        vertical-align: text-bottom;\\n        width: 8px;\\n        height: 8px;\\n        display: inline-block;\\n      }\\n    }\\n\\n    &:has(.canopy-disabled-link) {\\n      background-color: #FFFFFF;\\n      color: #000000;\\n      cursor: not-allowed;\\n      opacity: 0.4; // more than tables because includes border\\n      pointer-events: none;\\n\\n      .canopy-link-content-container {\\n        border: none;\\n      }\\n    }\\n  }\\n\\n  &.canopy-eigth-pill .canopy-menu-cell {\\n    width: calc((750px - 70px)/8); // take total width, subtract gaps, and divide by total number\\n    padding-left: 12px; // make it a little harder to qualify\\n    padding-right: 12px; // make it a little harder to qualify\\n    padding-top: 2px;\\n    padding-bottom: 2px;\\n    height: 45px; // more button-esque\\n  }\\n\\n  &.canopy-quarter-pill .canopy-menu-cell {\\n    width: calc((750px - 30px)/4); // take total width, subtract gaps, and divide by total number\\n    padding: 9px;\\n    height: 50px;\\n  }\\n\\n  &.canopy-third-pill .canopy-menu-cell {\\n    width: calc((750px - 20px)/3); // take total width, subtract gaps, and divide by total number\\n    padding: 9px;\\n    height: 50px;\\n  }\\n\\n  &.canopy-half-pill .canopy-menu-cell {\\n    width: calc((750px - 10px)/2); // take total width, subtract gaps, and divide by total number\\n    padding: 9px;\\n    height: 50px;\\n  }\\n\\n  &.canopy-quarter-card .canopy-menu-cell {\\n    width: calc((750px - 30px)/4); // take total width, subtract gaps, and divide by total number\\n    height: 95px;\\n    padding: 15px;\\n  }\\n\\n  &.canopy-third-card .canopy-menu-cell {\\n    width: calc((750px - 20px)/3); // take total width, subtract gaps, and divide by total number\\n    height: 120px;\\n    padding: 15px;\\n  }\\n\\n  &.canopy-half-tube .canopy-menu-cell {\\n    width: calc((750px - 10px)/2); // take total width, subtract gaps, and divide by total number\\n    height: 160px;\\n    padding: 30px;\\n  }\\n\\n  &.canopy-half-card .canopy-menu-cell {\\n    width: calc((750px - 10px)/2); // take total width, subtract gaps, and divide by total number\\n    height: 265px;\\n    min-height: 160px;\\n    padding: 30px;\\n  }\\n}\\n\\n.canopy-image-container {\\n  display: flex;\\n  justify-content: center;\\n  object-fit: cover;\\n\\n  &:not(:last-child) {\\n    margin-bottom: 15px;\\n  }\\n\\n  margin-top: 15px;\\n\\n  .canopy-image {\\n    img {\\n      display: block;\\n      max-width: 100%;\\n      width: auto;\\n    }\\n\\n    span.canopy-image-caption {\\n      margin: 0px auto;\\n      width: 100%;\\n      padding: 6px 0px;\\n      text-align: left;\\n      display: block;\\n      font-size: 16px;\\n      line-height: 18px;\\n      color: #595959;\\n      background-color: white;\\n\\n      a {\\n        color: #595959;\\n      }\\n\\n      a.canopy-selectable-link {\\n        border: none;\\n        text-decoration: underline #D3D3D3;\\n\\n        &:hover {\\n          text-decoration: underline #000000;\\n        }\\n      }\\n\\n      a.canopy-link-content-container {\\n        border: none;\\n        background-color: inherit;\\n      }\\n\\n      a.canopy-selected-link {\\n        background-color: #c9ccff; // extra dark so it is noticible\\n      }\\n\\n      a.canopy-external-link .canopy-external-link-icon {\\n        display: none; // no icon for links in image captions because usually they'll be external\\n      }\\n\\n      span {\\n        display: inline;\\n      }\\n    }\\n  }\\n}\\n\\ndiv.canopy-image-div {\\n  float: right;\\n  border: 1px solid #c8ccd1;\\n  padding: 3px;\\n  background-color: #f8f9fa;\\n  font-size: 94%;\\n  text-align: center;\\n  overflow: hidden;\\n  margin: 10px;\\n}\\n\\n.canopy-open-link .canopy-image, .canopy-selected-link .canopy-image {\\n  position: relative;\\n}\\n\\n.canopy-selected-link .canopy-image::after {\\n  content: '';\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background-color: rgba(130, 150, 250, 0.3); /* Deeper blue with 50% opacity */\\n  pointer-events: none; /* Ensures the overlay doesn't interfere with clicks */\\n}\\n\\n.canopy-open-link:not(.canopy-selected-link) .canopy-image::after {\\n  content: '';\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background-color: rgba(128, 128, 128, 0.2); /* Gray color with 50% opacity */\\n  pointer-events: none; /* Ensures the overlay doesn't interfere with clicks */\\n}\\n\\ndiv.canopy-image-div > sup {\\n  display: block;\\n}\\n\\nol, ul {\\n  margin-top: 15px;\\n  margin-left: 10px;\\n  margin-right: 10px;\\n  margin-bottom: 0px;\\n\\n  &:not(:last-child) {\\n    margin-bottom: 15px;\\n  }\\n\\n  li:not(:last-child) {\\n    margin-bottom: 10px;\\n  }\\n}\\n\\ndiv.canopy-raw-html {\\n  display: inline;\\n\\n  .canopy-html-insertion {\\n    display: inline;\\n  }\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#playground-container{display:flex;height:95vh;box-sizing:border-box}#playground-container>div{flex:1;overflow:auto;box-sizing:border-box}#playground-container #editor-container{display:flex;flex-direction:column;margin:15px;flex-grow:2}#playground-container #editor-container #editor{flex-grow:1;flex-basis:calc(70% - 10px);background-color:#f2f9ff;font-size:18px;overflow:auto;resize:none;margin-bottom:25px;border:1px solid #bbb;padding:5px}#playground-container #editor-container #console{flex-grow:1;flex-basis:calc(30% - 10px);background-color:#f2f9ff;border:1px solid #bbb;color:#333;font-size:1.2em;font-family:\\\"Courier New\\\",Courier,monospace;padding:5px;overflow-y:auto;white-space:normal;word-wrap:break-word}#playground-container #editor-container #console.error{background-color:#fcc}#playground-container #scrollable-container{overflow-y:auto;border:1px solid #000;margin:15px;flex-grow:3;position:relative}#playground-container #_canopy{flex:1;margin:15px;box-sizing:border-box}#playground-container #_canopy h1{text-align:center}\", \"\",{\"version\":3,\"sources\":[\"webpack://./playground/playground.scss\"],\"names\":[],\"mappings\":\"AAAA,sBACE,YAAA,CACA,WAAA,CACA,qBAAA,CAEA,0BACE,MAAA,CACA,aAAA,CACA,qBAAA,CAGF,wCACE,YAAA,CACA,qBAAA,CACA,WAAA,CACA,WAAA,CAEA,gDACE,WAAA,CACA,2BAAA,CACA,wBAAA,CACA,cAAA,CACA,aAAA,CACA,WAAA,CACA,kBAAA,CACA,qBAAA,CACA,WAAA,CAGF,iDACE,WAAA,CACA,2BAAA,CACA,wBAAA,CACA,qBAAA,CACA,UAAA,CACA,eAAA,CACA,2CAAA,CACA,WAAA,CACA,eAAA,CACA,kBAAA,CACA,oBAAA,CAEA,uDACE,qBAAA,CAKN,4CACE,eAAA,CACA,qBAAA,CACA,WAAA,CACA,WAAA,CACA,iBAAA,CAGF,+BAKE,MAAA,CACA,WAAA,CACA,qBAAA,CANA,kCACE,iBAAA\",\"sourcesContent\":[\"#playground-container {\\n  display: flex;\\n  height: 95vh; // Sets the height relative to the viewport\\n  box-sizing: border-box;\\n\\n  > div {\\n    flex: 1; // Ensures equal width distribution for direct children\\n    overflow: auto;\\n    box-sizing: border-box;\\n  }\\n\\n  #editor-container {\\n    display: flex;\\n    flex-direction: column;\\n    margin: 15px;\\n    flex-grow: 2;\\n\\n    #editor {\\n      flex-grow: 1;\\n      flex-basis: calc(70% - 10px); // Subtract margin from flex-basis\\n      background-color: #f2f9ff;\\n      font-size: 18px;\\n      overflow: auto;\\n      resize: none;\\n      margin-bottom: 25px; // Restored margin between editor and console\\n      border: 1px solid #bbb;\\n      padding: 5px;\\n    }\\n\\n    #console {\\n      flex-grow: 1;\\n      flex-basis: calc(30% - 10px); // Subtract margin from flex-basis\\n      background-color: #f2f9ff;\\n      border: 1px solid #bbb;\\n      color: #333;\\n      font-size: 1.2em;\\n      font-family: \\\"Courier New\\\", Courier, monospace;\\n      padding: 5px;\\n      overflow-y: auto;    /* Allows vertical scrolling */\\n      white-space: normal; /* Ensures text wraps */\\n      word-wrap: break-word; /* Breaks long words to prevent horizontal overflow */\\n\\n      &.error {\\n        background-color: #ffcccc;\\n      }\\n    }\\n  }\\n\\n  #scrollable-container {\\n    overflow-y: auto; // Enable vertical scrolling\\n    border: 1px solid black;\\n    margin: 15px;\\n    flex-grow: 3;\\n    position: relative;\\n  }\\n\\n  #_canopy {\\n    h1 {\\n      text-align: center; // for error h1\\n    }\\n\\n    flex: 1;\\n    margin: 15px;\\n    box-sizing: border-box;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n\n  if (!url) {\n    return url;\n  }\n\n  url = String(url.__esModule ? url.default : url); // If url is already wrapped in quotes, remove them\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n;(function(root, factory) {\n\t// https://github.com/umdjs/umd/blob/master/returnExports.js\n\tif (typeof exports == 'object') {\n\t\t// For Node.js.\n\t\tmodule.exports = factory(root);\n\t} else if (typeof define == 'function' && define.amd) {\n\t\t// For AMD. Register as an anonymous module.\n\t\tdefine([], factory.bind(root, root));\n\t} else {\n\t\t// For browser globals (not exposing the function separately).\n\t\tfactory(root);\n\t}\n}(typeof global != 'undefined' ? global : this, function(root) {\n\n\tif (root.CSS && root.CSS.escape) {\n\t\treturn root.CSS.escape;\n\t}\n\n\t// https://drafts.csswg.org/cssom/#serialize-an-identifier\n\tvar cssEscape = function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index < length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: there’s no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, […]\n\t\t\t\t(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), […]\n\t\t\t\t(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), […]\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &&\n\t\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 &&\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, […]\n\t\t\t\tindex == 0 &&\n\t\t\t\tlength == 1 &&\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), […]\n\t\t\tif (\n\t\t\t\tcodeUnit >= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 ||\n\t\t\t\tcodeUnit >= 0x0041 && codeUnit <= 0x005A ||\n\t\t\t\tcodeUnit >= 0x0061 && codeUnit <= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n\n\tif (!root.CSS) {\n\t\troot.CSS = {};\n\t}\n\n\troot.CSS.escape = cssEscape;\n\treturn cssEscape;\n\n}));\n","module.exports = function dedent(templateStrings) {\r\n    var values = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        values[_i - 1] = arguments[_i];\r\n    }\r\n    var matches = [];\r\n    var strings = typeof templateStrings === 'string' ? [templateStrings] : templateStrings.slice();\r\n    // 1. Remove trailing whitespace.\r\n    strings[strings.length - 1] = strings[strings.length - 1].replace(/\\r?\\n([\\t ]*)$/, '');\r\n    // 2. Find all line breaks to determine the highest common indentation level.\r\n    for (var i = 0; i < strings.length; i++) {\r\n        var match = void 0;\r\n        if (match = strings[i].match(/\\n[\\t ]+/g)) {\r\n            matches.push.apply(matches, match);\r\n        }\r\n    }\r\n    // 3. Remove the common indentation from all strings.\r\n    if (matches.length) {\r\n        var size = Math.min.apply(Math, matches.map(function (value) { return value.length - 1; }));\r\n        var pattern = new RegExp(\"\\n[\\t ]{\" + size + \"}\", 'g');\r\n        for (var i = 0; i < strings.length; i++) {\r\n            strings[i] = strings[i].replace(pattern, '\\n');\r\n        }\r\n    }\r\n    // 4. Remove leading whitespace.\r\n    strings[0] = strings[0].replace(/^\\r?\\n/, '');\r\n    // 5. Perform interpolation.\r\n    var string = strings[0];\r\n    for (var i = 0; i < values.length; i++) {\r\n        string += values[i] + strings[i + 1];\r\n    }\r\n    return string;\r\n};\r\n//# sourceMappingURL=index.js.map","// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t188: 0,\n\t947: 0,\n\t627: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./playground.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./playground.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import './playground.scss';\nimport { rebuild as rebuildCanopy } from '../client/rebuild_canopy';\n\nlet playgroundContainer = document.createElement('DIV');\nplaygroundContainer.id = 'playground-container';\ndocument.body.appendChild(playgroundContainer);\n\nlet editorContainer = document.createElement('DIV');\neditorContainer.id = 'editor-container';\nplaygroundContainer.appendChild(editorContainer);\n\nlet editor = document.createElement('TEXTAREA');\neditor.id = 'editor';\neditorContainer.appendChild(editor);\n\nlet consoleElement = document.createElement('DIV');\nconsoleElement.id = 'console';\neditorContainer.appendChild(consoleElement);\nconsoleElement.innerText = defaultConsoleText();\nfunction defaultConsoleText() {\n  return 'Edit the text area and then deselect to rebuild project. Delete text to restore default.';\n}\n\nlet scrollableContainer = document.createElement('DIV');\nscrollableContainer.id = 'scrollable-container';\nplaygroundContainer.appendChild(scrollableContainer);\n\nlet canopyContainer = document.createElement('DIV');\ncanopyContainer.id = '_canopy';\nscrollableContainer.appendChild(canopyContainer);\n\nconst defaultText = require('./default_text').default;\nlet newBulkFileString = localStorage.getItem('data') || defaultText;\nif (['localhost', '127.0.0.1'].includes(window.location.hostname)) newBulkFileString = defaultText;\n\neditor.value = newBulkFileString;\neditor.addEventListener('blur', (e) => setTimeout(() => tryBuild()));\n\neditor.addEventListener('focus', () => {\n  if (consoleElement.classList.contains('error')) return;\n  consoleElement.innerText = defaultConsoleText();\n});\n\nfetch = (url) => console.log(`Fetch request for '${url}' canceled by plaground`) || Promise.reject();\n\ntryBuild();\n\nfunction tryBuild() {\n  editor.value = editor.value || defaultText;\n  localStorage.setItem('data', editor.value);\n\n  consoleElement.classList.remove('error');\n  consoleElement.innerText = defaultConsoleText();\n\n  try {\n    rebuildCanopy(editor.value);\n  } catch(e) {\n    consoleElement.innerText = e.message;\n    consoleElement.classList.add('error');\n    canopyContainer.innerHTML = '<h1> Error </h1>';\n    console.error(e);\n  }\n}\n"],"names":["root","factory","exports","module","define","amd","self","parseParagraph","require","Topic","Block","parseText","filePath","explFileData","parserContext","options","paragraphsWithKeys","trim","split","rootParagraph","paragraphsBySubtopic","forEach","paragraphWithKey","paragraph","key","setTopicAndSubtopic","setLineNumberToCurrentSubtopic","newlineAfterDelimiter","incrementCharacterNumber","length","charsAfterKey","incrementLineAndResetCharacterNumber","tokensOfParagraph","text","currentSubtopic","mixedCase","validateRedundantLocalReferences","throwSubsumptionConditionalErrors","addFragmentReferenceSubtopics","subtopic","jsonObject","displayTopicName","topicTokens","clone","insideToken","JSON","stringify","pretty","jsonForExplFile","topicKeyOfString","ParserContext","newStatusData","defaultTopicString","arguments","undefined","destinationBuildDirectory","destinationDataDirectory","directoriesToEnsure","filesToWrite","push","Object","keys","json","topic","destinationPath","concat","fileName","symlinks","folderTopic","validateSubtopicDefinitions","validateGlobalReferences","orphans","logGlobalOrphans","logLocalOrphans","_require","LocalReferenceToken","GlobalReferenceToken","DisabledReferenceToken","ExternalLinkToken","ImageToken","FootnoteMarkerToken","HtmlToken","CodeBlockToken","BlockQuoteToken","OutlineToken","TableToken","MenuToken","FootnoteLinesToken","ItalicsToken","BoldToken","InlineCodeSnippetToken","UnderlineToken","ToolTipToken","Matchers","_ref15","match","string","_ref14","buffer","_ref","startOfLine","slice","_ref2","matchAll","map","m","join","_ref3","Array","from","direction","_ref4","_ref5","tableMatch","endsWith","lines","l","splitOnPipes","every","_ref6","_ref7","fragments","result","_","index","segment","_match","_slicedToArray","openingTagName","singleTag","balancedFirstTag","reduce","count","_match2","forwardSlash","tagName","NaN","toLowerCase","terminalNewlineLength","_ref8","_ref9","_ref10","noLinks","Reference","candidateSubstring","currentTopic","reference","valid","simpleTarget","targetText","potentialSubtopic","caps","currentTopicHasSubtopic","subtopicReferenceIsRedundant","registerPotentialRedundantLocalReference","localReferenceToken","getOriginalSubtopic","displayText","registerLocalReference","contents","fullText","_ref11","pathString","registerGlobalReference","_ref12","_ref13","registerFragmentReference","targetAsTopic","_ref16","_ref20","previousCharacter","strictPreviousCharacter","strictNextCharacter","containsSpaces","_ref21","_ref22","validPreviousCharacter","_ref23","_ref19","alt","resourceUrl","title","caption","_ref17","_match3","url","_ref18","_ref24","paragraphText","paragraphReferences","recursive","TextToken","tokens","currentText","currentTokens","characters","i","j","startOfText","_result2","token","_tokenString$match","tokenString","dedent","displaySegment","chalk","priorParserContext","_classCallCheck","assign","this","subtopicLineNumbers","topicSubtopics","subtopicParents","redundantLocalReferences","ambiguousLocalReferences","provisionalLocalReferences","doubleDefinedSubtopics","subsumptionConditionalErrors","defaultTopic","topicConnections","topicFilePaths","pathsReferenced","globalReferencesBySubtopic","fragmentReferenceSubtopics","lineNumber","characterNumber","linePrefixSize","buildNamespaceObject","value","topicParargaph","hasOwnProperty","Error","red","_templateObject","_taggedTemplateLiteral","display","get","set","num","filePathString","givenTopic","_this$topicSubtopics$","givenSubtopic","_this$topicSubtopics$2","targetSubtopic","_this$topicSubtopics$3","path","_this","array","linkText","linkFullText","enclosingTopic","enclosingSubtopic","callback","fragmentReferenceTargetTopic","errorString","_this2","errorObject","hasConnection","_this3","_this3$subtopicParent","lineNumber1","lineNumber2","referenceString","firstTopic","currentFilePathAndLineNumber","_this4","connectedTopics","registerConnectedTopic","topicCapsString","console","log","magenta","givenTopicCapsString","_this5","targetTopicCapsString","_this6","subtopicCapsString","_this7","enclosingSubtopic1","enclosingSubtopic2","referencedSubtopic","_templateObject2","_this8","pathAndLineNumberString","segmentString","_Topic$parseUrlSegmen2","parseUrlSegment","topicExists","punctuationWarning","topicHasSubtopic","cache","firstSubtopic","currentSegmentString","nextSegmentString","_this8$globalReferenc","_this8$globalReferenc2","_currentSegmentString2","fromUrl","_nextSegmentString$ma2","nextTopic","visitedSubtopics","exclusiveDisplayText","exclusiveTargetText","parseDisplayAndTarget","_string$match","registerSubsumptionConditionalError","filePathAndLineNumber","hasCurlyBraces","parseCurlyBraceReference","hasPipe","parsePipeReference","parseSimple","removeNewlines","replace","openingBraces","braceContents","closingBraces","plainText","validateBraces","handleSingleBrace","handleDoubleBrace","exclusiveDisplaySyntax","exclusiveTargetSyntax","findLastPathComponent","opening","closing","_toConsumableArray","target","singleTopicWithEmptyFragment","textBeforeFragment","soloPoundSign","soloCaretSign","soloPeriod","lastPathComponent","isPath","firstSegmentComponent","_this$pathString$matc","subtopicString","displayPathString","_segmentString$match$2","fromReference","getOriginalTopic","enclosingTopicMixedCase","inTopicParagraph","parentSubtopic","parentTopicOf","localReference","simpleGlobalReference","orphanFragment","initialOrphanFragment","textAfterFragment","removeExtraKeys","node","parentNode","indentation","children","consolidateTextTokens","tokenArray","_tokenArray","type","splice","removeCircularListKeys","filter","lastNode","topLevelNodes","frontLoadImages","sort","a","b","isCategoryNotesFile","terminalCategoryofPath","items","detectTextDirection","convertSpacesToHtml","str","repeat","targetTopic","FragmentReferenceToken","anchorUrl","projectPathPrefix","startsWith","s","altText","superscript","html","tokenInsertions","precedingChar","content","offset","_html$slice$match","Boolean","line","lineIndex","initialWhitespace","orderedListMatch","unorderedListMatch","ordinal","postOrdinalCharacters","tokensOfLine","newNode","ordered","rows","MERGE_DIRECTION","x","y","cellObjectList","cellObjects","cellString","cellIndex","cellsOfRow","_cellString$match","merge","hidden","earlierCharactersOnLine","dir","cellObject","columns","collection","op","attribute","limit","Math","max","selection","Number","allRightAligned","item","allLeftAligned","mixedAlignment","some","alignment","list","rtl","includes","footnoteTokens","openingBrace","FileSet","BulkFileParser","bulkFileString","sectionString","_sectionString$match","displayCategoryPath","diskDirectoryPath","convertSpacesToUnderscores","terminalCategory","files","blockString","block","asterisk","doubleAsterisk","defaultTopicPath","defaultTopicKey","fileContentsByPath","parseSections","section","file","topicFilePath","bgRed","white","error","firstFourtyCharacters","idSuffix","orderedCategory","prefix","suffix","hash","String","padStart","generateIdSuffix","noteFileName","newFileSet","pathLibrary","filesObject","directoriesObject","directoryPath","dirname","fileNameWithoutExtension","terminalCategoryofFilePath","displayPath","generateDisplayPath","fromFileName","textWithKey","Cache","removeStyleCharacters","newString","processedString","oneOpenBracket","oneCloseBracket","openLink","escape","wrapText","width","words","RegExp","test","determineTopicAndSubtopic","linkTarget","linkFragment","cssMixedCase","CSS","urlConversionRules","fileNameConversionRules","toUpperCase","bs","requestFileName","encodeURIComponent","convertedString","underscoreToSpaceRules","escapedString","decodeURIComponent","fromMixedCase","spaceToUnderscoreRules","_defineProperty","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","topicParentLink","link","Link","newLink","lastSelectionOfParagraph","enclosingParagraph","topicParagraph","parentParagraph","parentLink","select","deselect","moveToParent","_link$parentLink","selectionInRootParagraph","isVisible","sectionElement","scrollElementToPosition","targetRatio","maxScrollRatio","minDiff","behavior","updateView","element","then","isFocused","noScroll","moveDownOrRedirect","newTab","altKey","shiftKey","firstChild","isClosedCycle","isBelowViewport","positionOnViewport","isPathReference","side","isAboveViewport","isParent","hasChildren","cycle","targetParagraph","isSelected","execute","redirect","inlineCycles","selectALink","inlineACycleLink","isCycle","moveInDirection","_Link$selection","currentLinkElement","candidateLinks","document","querySelectorAll","offsetParent","currentSelectionHigherRect","getBoundingRectInDirection","currentSelectionLowerRect","candidateRectContainers","getRectsOfElements","rect","isHigher","isVerticallyOverlapping","top","Path","scrollToWithPromise","scrollOrSelect","lowestHigherRect","newRect","_Link$selection2","bestLink","siblingOf","isParentLinkOf","isLower","isHorizontallyWithin","isHorizontallyOverlapping","closest","paragraphElement","greaterHorizontalOverlap","horizontallyCloserRect","rendered","style","window","getComputedStyle","visibility","opacity","rectObject","viewportHeight","ScrollableContainer","visibleHeight","bottom","Paragraph","current","highestLowerRect","_Link$selection3","_Link$selection3$targ","isLastSelection","links","currentSelectionRect","rectContainers","right","rightmostLeftRect","distanceComparingSide","verticalDirectionOfWrap","getTextDirectionOfRootAncestor","horizontalDirectionOfWrap","linkElement","getPreviousLinkOfParagraph","getNextLinkOfParagraph","horizontalDirectionToWrapAfterLink","isInCorrectVerticalDirection","isInBetterVerticalDirection","closerToCorrectHorizontalEdge","rightMostRect","leftMostRect","rightmostUpwardRect","verticalDirectionOfExtremeWrap","horizontalDirectionOfExtremeWrap","horizontalDirectionToWrapAfterExtremeLink","isVerticallyFarther","closerToCorrectExtremeHorizontalEdge","rightBottomMostRect","left","leftmostRightRect","rect2","rect1","verticalDirectionToWrapAfterRightmostLink","leftmostDownwardRect","verticalDirectionToWrapAfterFinalRightmostLink","verticalSideToCompareExtremeWrap","closerToCorrectHorizontalExtremeEdge","leftmostTopRect","targetRect","midpointRect1","midpointRect2","midpointTarget","abs","innerHeight","selectedRect","candidateRect1","candidateRect2","calculateHorizontalOverlap","min","elementArray","_step","_iterator","_createForOfIteratorHelper","n","done","elementForRect","subRects","getClientRects","singleRect","_objectSpread","innerText","parse","getBoundingClientRect","height","err","e","f","multipleRects","rectangles","mergedRectangles","currentRect","nextRect","mergeRectsWithSameTop","textNodesRects","traverse","nodeType","Node","TEXT_NODE","range","createRange","selectNodeContents","rects","ELEMENT_NODE","_step2","_iterator2","childNodes","getTextNodesRects","leftmostRect","rightmostRect","uppermostRect","lowestRect","allLinks","currentLinkIndex","indexOf","getHighestAncestor","shortcutRelationships","bind","firstTopicPath","scrollStyle","relativeLinkNumber","inlinePath","lastSegment","renderOnly","nthLink","open","location","href","navigator","clipboard","writeText","universalShortcutRelationships","keyNames","addEventListener","activeElement","modifiers","metaKey","ctrlKey","keyName","keyCode","shortcutName","preventDefault","history","scrollRestoration","replaceState","state","_e$state","_e$state2","linkSelection","equals","scrollDirect","popState","scrollToParagraph","initial","savedSelection","initialLoad","pathToDisplay","linkToSelect","byPath","tryPathPrefix","afterChangePause","noAfterChangePause","twoStepChange","beforeChangeScroll","addToDom","resetDom","eraseLinkData","setPath","urlPath","persistLinkSelection","updateSelectionClass","header","setHeader","pageTitle","visibleParagraphs","_paragraph$parentLink","allocateSpace","persistLinkSelectionInSession","displayPathTo","addSelectionClass","setTimeout","visible","isGlobal","afterChangeScroll","show","displayOptions","headerDomElement","querySelector","withoutLastSegment","replaceHistoryState","defaultRedirect","getElementsByTagName","classList","remove","removeUnusedChildSections","parentElement","currentParagraph","isIn","removeFromDom","canopyContainer","hideAllSectionElements","Element","containerPointToPutAtTarget","elementRect","idealTargetPositionOnVisibleContainer","currentScroll","idealScrollY","scrollHeight","actualScrollY","maxScrollDistance","Infinity","shouldScroll","diff","linkOffScreen","Promise","resolve","scrollInProgress","getScrollInProgress","currentScrollOptions","scrollTo","lastY","inactivityStart","checks","checkScroll","currentY","Date","now","LINK_TARGET_RATIO","PARAGRAPH_TARGET_RATIO","BIG_PARAGRAPH_TARGET_RATIO","BIG_LINK_TARGET_RATIO","newPath","initialOverlap","noBeforeChangeScroll","fulcrumLink","topThreshold","bottomThreshold","previousPath","isEffectivePathReference","enclosingPath","noMinDiff","targetElement","isFragment","isBig","preChangePause","scrolled","dataset","imageLoadScrollBehavior","postChangePause","fits","lastPath","_pathToDisplay","empty","renderComplete","fetchAndRenderPath","race","success","contentLoaded","tryElement","pending","getElementById","canopyVersion","defaultTopicJson","_document$getElementB","textContent","hashUrls","isOverflowScrollable","overflowY","contentOverflows","clientHeight","windowMode","body","documentElement","scrollY","scrollTop","handler","el","offsetWidth","offsetHeight","highest","contains","argument","_typeof","metadataObject","selectorCallback","otherLink","otherPath","targetPath","elementFromMetadata","metadata","HTMLAnchorElement","transferDataset","_unused","_this$element","elementTop","_literalPathString","literalPathString","_enclosingTopic","_enclosingSubtopic","_typeValue","_text","_this$linkElement","_this$linkElement$dat","_this$metadataObject","literalPath","lastTopic","isLocal","lastSubtopic","targetSubtopicString","_this$element2","_this$element3","enclosingSectionElement","enclosingPathString","childParagraph","append","matches","storedRelativeLinkNumber","collectMetadata","_this$element4","forSegment","linkElements","siblings","firstLink","lastLink","_this$enclosingParagr","_this$parentLink","_this$element5","_this$element6","add","_this$element7","isOpen","_this$element8","childTopic","childSubtopic","includesTopic","indexOfSelfReference","pathArray","lastIndexOf","indexOfCurrentSegment","sliceBeforeLastTopicInstance","forTopic","intermediaryPathsTo","isInlinedCycleReference","introducesNewCycle","_this$element9","subsetOf","isRehashReference","_this$childParagraph","hasLinks","_this$childParagraph2","_link$element","_otherLink$firstChild","_this$childParagraph3","_this$childParagraph4","_this$childParagraph5","topLimit","bottomLimit","overlapsTop","overlapsBottom","topicPath","replaceTerminalSubtopic","previewPathString","isExternal","externalLink","isSimpleGlobal","origin","productionPathString","previewPath","_options","_options2","isSelfReference","isTopic","parentLinkBeforeRehash","isCoterminalReference","selfReferencingOverlapStart","pushHistoryState","_history","_history$state","lastSelectionsOfParagraph","sessionStorage","getItem","setItem","_Link$lastSelectionOf","targetUrl","targetTopicString","object","perfectMatch","linkBySelector","_link$element2","_link$element2$datase","_linkToSelect$element","persistLinkSelectionInHistory","linkData","_history2","_history2$state","historySelection","selectedLink","pushState","onPage","arg","existingParagraph","paragraphs","parentPath","integerY","bestParagraph","paragraphsByPath","childElement","registerNode","registerChild","removeChild","atY","otherParagraph","unicodeBidi","requestAnimationFrame","_topicName","topicName","_subtopicName","subtopicName","_pathString","pathDepth","topInRange","bottomInRange","find","linkObjects","_Link$selection2$chil","lastSelectionOfParent","parentLinks","linksBySelector","_this$sectionElement","_this$sectionElement$","appendChild","isArray","validatePathArray","arrayToString","stringToArray","_otherPath$paragraph","visitsTopicNotIn","topicStringArray","_this$pathArray$slice","constructor","call","apply","prototype","findLastIndex","_this$lastSegment$arr","thisLength","otherLength","_this$pathArray","thisTopic","thisSubtopic","_otherPath$pathArray","otherTopic","otherSubtopic","_this$paragraph","_this$paragraph$paren","_this$paragraph2","_this$paragraph3","_this$paragraph4","selectedSegment","selectedIndex","currentSegment","currentIndex","start","end","containsBackCycle","candidatePath","topicArray","t1","t2","initialPartialOverlap","initialOverlapAndFirstChild","bufferPath","unshift","_this$parentPath","_otherPath$parentPath","newSubtopic","addSegment","elementAtRelativePath","stringToArrayCache","slashSeparatedUnits","fixOrphanSubtopics","pathSegmentString","parentPathTopicStrings","t","targetPathTopicStrings","enclosingTopicString","_Paragraph$selection","present","pathToAppend","linkByChild","rootElement","currentNode","subpath","currentPathDepth","withoutFirstSegment","oldPath","documentTitle","historyApiFunction","c","fullPathString","newItem","tuple","rebuild","child","_bulkFileParser$gener","generateFileSet","_jsonForProjectDirect","jsonForProjectDirectory","REQUEST_CACHE","pathname","search","onLinkClick","getSelection","rangeCount","isCollapsed","dataPath","promise","fetch","res","parsedJson","imagePreloadArray","image","Image","src","preloadImages","reject","generateHeader","previousHeader","headerElement","createElement","renderTokenElements","whenInDom","getCombinedBoundingRect","combinedRect","childRect","childCombinedRect","renderContext","spans","spanElement","textSegment","segments","lineBreakSpan","renderTextToken","localLinkSubtreeCallback","renderLinkBase","renderLocalLink","requestJson","pathToParagraph","overlaps","cycleIcon","isBackCycle","isLateralCycle","renderGlobalLink","removeAttribute","_CanopyClickHandler","removeEventListener","renderDisabledLink","subtoken","subtokenElement","renderFragmentReference","setAttribute","contentContainer","renderExternalLink","outerDivElement","innerDivElement","imageElement","handleDelayedImageLoad","renderImage","divElement","fragment","createContextualFragment","placeholderDiv","replacementIndex","replacementNumber","renderHtmlElement","superscriptElement","textNode","createTextNode","renderFootnoteSymbol","preElement","codeBlockElement","renderCodeBlock","blockQuoteElement","cloneNode","parent","createDocumentFragment","char","span","replaceChild","tempSectionElement","DOMParser","parseFromString","tempParagraphElement","wraps","elements","_elements","previousElement","previousRect","previousElementWasNewline","renderBlockQuote","renderList","tableElement","row","tableRowElement","tableCellElement","colspan","rowspan","tokenElement","isOrHasOnlyLink","sizes","widest","narrowest","tallest","shortest","clsp","getAttribute","rwsp","styles","paddingLeft","parseInt","paddingRight","paddingTop","paddingBottom","widthWithoutPadding","heightWithoutPadding","td","widthDiff","heightDiff","renderTable","_filter","_filter$","_filter$slice","_filter$slice$","menuElement","rowSize","SizesByArea","tableListSizeIndex","cellElements","menuCellElement","ordinalElement","innerHTML","prepend","tempRowElement","createNewRow","contentBoundingRect","container","containerStyles","containerRect","containerPaddingLeft","parseFloat","containerPaddingRight","containerPaddingTop","containerPaddingBottom","adjustedContainerRect","isOverflowingHorizontally","isOverflowingVertically","newRow","remainingCells","cellsToAdd","paddingElement","renderMenu","footnoteLinesToken","div","horizonalRule","footnoteSpan","renderFootnoteLines","renderBoldText","renderUnderlineText","renderItalicText","renderInlineCodeText","tooltipContainerSpan","className","tooltipIcon","tooltipTextSpan","renderToolTip","_measureVerticalOverf","computedStyle","fontSize","fontFamily","warn","textLines","canvas","context","getContext","willReadFrequently","measureTextBounds","clearRect","fillText","imageData","getImageData","data","font","textBaseline","referenceBounds","maxSpaceAbove","maxSpaceBelow","textBounds","spaceAbove","spaceBelow","measureVerticalOverflow","_measureVerticalOverf2","lineHeight","originalHeight","originalOpacity","originalWidth","originalContainerWidth","setProperty","complete","_imageElement$closest","focusedElement","oldBottomOfCurrentParagraph","newScroll","listNodeObjects","listElement","listNodeObject","listItemElement","childList","renderDomTree","hr","createSectionElement","parentSectionElement","fullPath","remainingPath","pathToParagaph","childSectionElement","promiseCache","headerCache","invalidateFetchAndRenderCache","parentElementPromise","pathToParagraphTopic","removeTerminalSubtopic","preexistingSectionElement","sectionElementPromise","appendingPromise","all","connectingLinkValid","registerSubtopics","detachSubtopics","subtopicElementPromise","_Paragraph$byPath","subtopicAfterSubsumptionPromise","appendingSuccess","subtopicElement","childSectionElementPromise","wrapAnsi16","fn","args","wrapAnsi256","code","wrapAnsi16m","rgb","ansi2ansi","rgb2rgb","r","g","setLazyProperty","property","defineProperty","enumerable","configurable","colorConvert","makeDynamicStyles","wrap","targetSpace","identity","isBackground","sourceSpace","suite","entries","name","codes","Map","modifier","reset","bold","dim","italic","underline","inverse","strikethrough","color","black","green","yellow","blue","cyan","blackBright","redBright","greenBright","yellowBright","blueBright","magentaBright","cyanBright","whiteBright","bgColor","bgBlack","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","bgBlackBright","bgRedBright","bgGreenBright","bgYellowBright","bgBlueBright","bgMagentaBright","bgCyanBright","bgWhiteBright","gray","bgGray","grey","bgGrey","groupName","group","styleName","close","cssKeywords","reverseKeywords","convert","channels","labels","hsl","hsv","hwb","cmyk","xyz","lab","lch","hex","keyword","ansi16","ansi256","hcg","apple","model","delta","h","rdif","gdif","bdif","v","diffc","w","k","reversed","currentClosestKeyword","currentClosestDistance","distance","z","t3","val","smin","lmin","hi","floor","p","q","vmin","sl","wh","bl","ratio","y2","x2","z2","atan2","PI","sqrt","cos","sin","saturation","round","ansi","mult","rem","toString","substring","colorString","integer","chroma","grayscale","hue","pure","mg","conversions","route","fromModel","routes","toModel","wrappedFn","arg0","len","conversion","wrapRounded","raw","wrapRaw","to","wrapConversion","graph","cur","models","buildGraph","queue","pop","adjacents","adjacent","deriveBFS","stdout","stderr","ansiStyles","stdoutColor","stderrColor","stringReplaceAll","stringEncaseCRLFWithFirstIndex","levelMapping","create","ChalkClass","chalkFactory","level","isInteger","colorLevel","applyOptions","template","arguments_","chalkTag","setPrototypeOf","Chalk","Instance","builder","createBuilder","createStyler","_styler","_isEmpty","usedModels","styler","proto","defineProperties","_generator","openAll","closeAll","applyStyle","lfIndex","strings","firstString","parts","supportsColor","TEMPLATE_REGEX","STYLE_REGEX","STRING_REGEX","ESCAPE_REGEX","ESCAPES","unescape","u","bracket","fromCharCode","fromCodePoint","parseArguments","results","chunks","chunk","number","isNaN","character","parseStyle","lastIndex","exec","buildStyle","enabled","layer","temporary","escapeCharacter","errMessage","replacer","substringLength","endIndex","returnValue","substr","postfix","gotCR","___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","id","cssWithMappingToString","needLayer","modules","media","dedupe","supports","alreadyImportedModules","_k","__esModule","default","needQuotes","cssMapping","btoa","base64","sourceMapping","sourceURLs","sources","source","sourceRoot","cssEscape","TypeError","codeUnit","firstCodeUnit","charCodeAt","charAt","templateStrings","values","_i","size","pattern","assertPath","normalizeStringPosix","allowAboveRoot","lastSegmentLength","lastSlash","dots","lastSlashIndex","posix","cwd","resolvedPath","resolvedAbsolute","process","normalize","isAbsolute","trailingSeparator","joined","relative","fromStart","fromEnd","fromLen","toStart","toLen","lastCommonSep","fromCode","out","_makeLong","hasRoot","matchedSlash","basename","ext","extIdx","firstNonSlashEnd","extname","startDot","startPart","preDotState","format","pathObject","sep","base","_format","ret","delimiter","win32","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","api","update","newObj","lastIdentifiers","newList","newLastIdentifiers","_index","memo","styleTarget","HTMLIFrameElement","contentDocument","head","getTarget","attributes","styleElement","nonce","removeStyleElement","styleSheet","cssText","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","getter","d","definition","o","globalThis","Function","prop","nmd","paths","baseURI","nc","playgroundContainer","editorContainer","editor","consoleElement","scrollableContainer","defaultText","newBulkFileString","localStorage","tryBuild","rebuildCanopy","message","hostname"],"sourceRoot":""}